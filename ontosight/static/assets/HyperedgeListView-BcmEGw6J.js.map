{"version":3,"file":"HyperedgeListView-BcmEGw6J.js","sources":["../../../frontend/src/components/views/HyperedgeListView.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { ItemCard } from \"@/components/ui\";\nimport { useVisualization } from \"@/hooks/useVisualization\";\nimport { Button } from \"@/components/ui/button\";\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\n\ninterface HyperedgeListViewProps {\n  data?: any;\n  meta?: any;\n}\n\nconst HyperedgeListView: React.FC<HyperedgeListViewProps> = ({ meta }) => {\n  const { fetchHyperedgesList, selectedItems, currentPage, setCurrentPage, selectItem, deselectItem } = useVisualization();\n  const [items, setItems] = useState<any[]>([]);\n  const [total, setTotal] = useState(0);\n  const [hasNext, setHasNext] = useState(false);\n  const [listLoading, setListLoading] = useState(true);\n\n  useEffect(() => {\n    const loadHyperedges = async () => {\n      setListLoading(true);\n      try {\n        const result = await fetchHyperedgesList(currentPage, 12);\n        console.log(\"HyperedgeListView.loadHyperedges\", { page: currentPage, result });\n        setItems(result.items || []);\n        setTotal(result.total || 0);\n        setHasNext(result.has_next || false);\n      } catch (error) {\n        console.error(\"Failed to load hyperedges:\", error);\n      } finally {\n        setListLoading(false);\n      }\n    };\n\n    loadHyperedges();\n  }, [currentPage, fetchHyperedgesList]);\n\n  return (\n    <div className=\"w-full h-full flex flex-col overflow-hidden\">\n      {/* Header */}\n      <div className=\"flex-shrink-0 border-b border-border bg-muted/30 px-4 py-3\">\n        <h2 className=\"text-lg font-semibold\">所有超边 ({total})</h2>\n      </div>\n\n      {/* Grid of cards */}\n      <div className=\"flex-1 overflow-auto\">\n        <div className=\"p-4 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 auto-rows-max\">\n          {listLoading ? (\n            <div className=\"col-span-full text-center text-muted-foreground py-8\">加载中...</div>\n          ) : items.length === 0 ? (\n            <div className=\"col-span-full text-center text-muted-foreground py-8\">没有超边</div>\n          ) : (\n            items.map((he) => {\n              // Use internal id for selection (not displayed to user)\n              const heId = he.id;\n              return (\n                <ItemCard\n                  key={heId}\n                  id={heId}\n                  label={he.label || \"Unknown Hyperedge\"}\n                  type=\"hyperedge\"\n                  metadata={Object.fromEntries(\n                    Object.entries(he).filter(\n                      ([key]) => ![\"id\", \"label\", \"type\"].includes(key)\n                    )\n                  )}\n                  isSelected={selectedItems.has(heId)}\n                  onClick={() => {\n                    selectItem(heId, \"hyperedge\");\n                  }}\n                />\n              );\n            })\n          )}\n        </div>\n      </div>\n\n      {/* Pagination */}\n      <div className=\"flex-shrink-0 border-t border-border bg-muted/30 px-4 py-3 flex items-center justify-between\">\n        <div className=\"text-sm text-muted-foreground\">\n          第 {currentPage + 1} 页 (共 {Math.ceil(total / 12)} 页)\n        </div>\n        <div className=\"flex gap-2\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => setCurrentPage(Math.max(0, currentPage - 1))}\n            disabled={currentPage === 0}\n          >\n            <ChevronLeft className=\"w-4 h-4\" />\n          </Button>\n          <Button variant=\"outline\" size=\"sm\" onClick={() => setCurrentPage(currentPage + 1)} disabled={!hasNext}>\n            <ChevronRight className=\"w-4 h-4\" />\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default HyperedgeListView;\n"],"names":["HyperedgeListView","meta","fetchHyperedgesList","selectedItems","currentPage","setCurrentPage","selectItem","deselectItem","useVisualization","items","setItems","useState","total","setTotal","hasNext","setHasNext","listLoading","setListLoading","useEffect","result","error","jsxs","jsx","he","heId","ItemCard","key","Button","ChevronLeft","ChevronRight"],"mappings":"gKAWA,MAAMA,EAAsD,CAAC,CAAE,KAAAC,KAAW,CACxE,KAAM,CAAE,oBAAAC,EAAqB,cAAAC,EAAe,YAAAC,EAAa,eAAAC,EAAgB,WAAAC,EAAY,aAAAC,CAAA,EAAiBC,EAAA,EAChG,CAACC,EAAOC,CAAQ,EAAIC,EAAAA,SAAgB,CAAA,CAAE,EACtC,CAACC,EAAOC,CAAQ,EAAIF,EAAAA,SAAS,CAAC,EAC9B,CAACG,EAASC,CAAU,EAAIJ,EAAAA,SAAS,EAAK,EACtC,CAACK,EAAaC,CAAc,EAAIN,EAAAA,SAAS,EAAI,EAEnDO,OAAAA,EAAAA,UAAU,IAAM,EACS,SAAY,CACjCD,EAAe,EAAI,EACnB,GAAI,CACF,MAAME,EAAS,MAAMjB,EAAoBE,EAAa,EAAE,EACxD,QAAQ,IAAI,mCAAoC,CAAE,KAAMA,EAAa,OAAAe,EAAQ,EAC7ET,EAASS,EAAO,OAAS,EAAE,EAC3BN,EAASM,EAAO,OAAS,CAAC,EAC1BJ,EAAWI,EAAO,UAAY,EAAK,CACrC,OAASC,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,CACnD,QAAA,CACEH,EAAe,EAAK,CACtB,CACF,GAEA,CACF,EAAG,CAACb,EAAaF,CAAmB,CAAC,EAGnCmB,EAAAA,KAAC,MAAA,CAAI,UAAU,8CAEb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,6DACb,SAAAD,EAAAA,KAAC,KAAA,CAAG,UAAU,wBAAwB,SAAA,CAAA,SAAOT,EAAM,GAAA,CAAA,CAAC,CAAA,CACtD,EAGAU,EAAAA,IAAC,MAAA,CAAI,UAAU,uBACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,yEACZ,SAAAN,EACCM,EAAAA,IAAC,MAAA,CAAI,UAAU,uDAAuD,SAAA,QAAA,CAAM,EAC1Eb,EAAM,SAAW,EACnBa,EAAAA,IAAC,MAAA,CAAI,UAAU,uDAAuD,SAAA,MAAA,CAAI,EAE1Eb,EAAM,IAAKc,GAAO,CAEhB,MAAMC,EAAOD,EAAG,GAChB,OACED,EAAAA,IAACG,EAAA,CAEC,GAAID,EACJ,MAAOD,EAAG,OAAS,oBACnB,KAAK,YACL,SAAU,OAAO,YACf,OAAO,QAAQA,CAAE,EAAE,OACjB,CAAC,CAACG,CAAG,IAAM,CAAC,CAAC,KAAM,QAAS,MAAM,EAAE,SAASA,CAAG,CAAA,CAClD,EAEF,WAAYvB,EAAc,IAAIqB,CAAI,EAClC,QAAS,IAAM,CACblB,EAAWkB,EAAM,WAAW,CAC9B,CAAA,EAZKA,CAAA,CAeX,CAAC,EAEL,EACF,EAGAH,EAAAA,KAAC,MAAA,CAAI,UAAU,+FACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,gCAAgC,SAAA,CAAA,KAC1CjB,EAAc,EAAE,SAAO,KAAK,KAAKQ,EAAQ,EAAE,EAAE,KAAA,EAClD,EACAS,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAACK,EAAA,CACC,QAAQ,UACR,KAAK,KACL,QAAS,IAAMtB,EAAe,KAAK,IAAI,EAAGD,EAAc,CAAC,CAAC,EAC1D,SAAUA,IAAgB,EAE1B,SAAAkB,EAAAA,IAACM,EAAA,CAAY,UAAU,SAAA,CAAU,CAAA,CAAA,QAElCD,EAAA,CAAO,QAAQ,UAAU,KAAK,KAAK,QAAS,IAAMtB,EAAeD,EAAc,CAAC,EAAG,SAAU,CAACU,EAC7F,eAACe,EAAA,CAAa,UAAU,UAAU,CAAA,CACpC,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,CAEJ"}