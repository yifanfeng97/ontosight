import{u as b,r as a,j as e,B as c}from"./index-Djf0YLQL.js";import{I as v}from"./item-card-DWd6jM3n.js";import{C as w,a as y}from"./chevron-right-DKkfwnER.js";const E=({meta:C})=>{const{fetchNodesList:o,selectedItems:m,currentPage:t,setCurrentPage:r,selectItem:x,deselectItem:I}=b(),[i,h]=a.useState([]),[d,u]=a.useState(0),[f,g]=a.useState(!1),[p,n]=a.useState(!0);return a.useEffect(()=>{(async()=>{n(!0);try{const s=await o(t,12);console.log("NodeListView.loadNodes",{page:t,result:s}),h(s.items||[]),u(s.total||0),g(s.has_next||!1)}catch(s){console.error("Failed to load nodes:",s)}finally{n(!1)}})()},[t,o]),e.jsxs("div",{className:"w-full h-full flex flex-col overflow-hidden",children:[e.jsx("div",{className:"flex-shrink-0 border-b border-border bg-muted/30 px-4 py-3",children:e.jsxs("h2",{className:"text-lg font-semibold",children:["所有节点 (",d,")"]})}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsx("div",{className:"p-4 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 auto-rows-max",children:p?e.jsx("div",{className:"col-span-full text-center text-muted-foreground py-8",children:"加载中..."}):i.length===0?e.jsx("div",{className:"col-span-full text-center text-muted-foreground py-8",children:"没有节点"}):i.map(l=>{const s=l.id,j=l.highlighted===!0;return e.jsx(v,{id:s,label:l.label||"Unknown",type:"node",metadata:Object.fromEntries(Object.entries(l).filter(([N])=>!["id","label","type","highlighted"].includes(N))),isSelected:m.has(s),isHighlighted:j,onClick:()=>{x(s,"node")}},s)})})}),e.jsxs("div",{className:"flex-shrink-0 border-t border-border bg-muted/30 px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["第 ",t+1," 页 (共 ",Math.ceil(d/12)," 页)"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{variant:"outline",size:"sm",onClick:()=>r(Math.max(0,t-1)),disabled:t===0,children:e.jsx(w,{className:"w-4 h-4"})}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>r(t+1),disabled:!f,children:e.jsx(y,{className:"w-4 h-4"})})]})]})]})};export{E as default};
//# sourceMappingURL=NodeListView-i61nYUBm.js.map
