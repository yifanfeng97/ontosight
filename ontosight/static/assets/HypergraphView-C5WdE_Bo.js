import{r as a,a as l,j as f}from"./index-CKdJ6Www.js";import{s as h,G as p}from"./preset-Bwd7EjoF.js";const H=a.memo(function({data:r,meta:s}){const n=a.useRef(null),e=a.useRef(null),{results:c}=l();return a.useEffect(()=>{if(n.current){try{if(!r||!r.nodes||!r.edges)return;const{hyperEdges:o,transformedData:i}=g(r);e.current?e.current.changeData(i):e.current=y(n.current,i),e.current&&m(e.current,o),c.length>0&&e.current&&E(e.current,c)}catch(o){console.error("Hypergraph render error:",o),h.error("Failed to render hypergraph")}return()=>{e.current&&(e.current.destroy(),e.current=null)}}},[r,c]),f.jsx("div",{ref:n,className:"hypergraph-view",style:{width:"100%",height:"100%"}})});function g(t){const r=[],s=t.nodes.map(e=>({...e,size:30,style:{fill:"#ECF5FF",stroke:"#409EFF"}})),n=[];return t.edges.forEach((e,c)=>{var d;const o=`__he_${c}`,i=e.nodes||[];s.push({id:o,label:((d=e.data)==null?void 0:d.label)||"",type:"hyper-edge-node",size:15,isHyperEdge:!0}),r.push({id:o,nodes:i}),i.forEach(u=>{n.push({source:o,target:u,type:"line",style:{stroke:"#B4E5FF"}})})}),{hyperEdges:r,transformedData:{nodes:s,edges:n}}}function y(t,r){const s=t.clientWidth||800,n=t.clientHeight||600,e=new p({container:t,width:s,height:n,behaviors:["drag-canvas","zoom-canvas","drag-node"],layout:{type:"force",preventOverlap:!0,linkDistance:100,nodeStrength:-30,edgeStrength:.1},node:{type:"circle"},edge:{type:"line"}});return e.setData(r),e.render(),e}function m(t,r){t.on("node:click",s=>{const e=s.item.getModel();if(e.isHyperEdge){const c=r.find(o=>o.id===e.id);c&&c.nodes.forEach(o=>{const i=t.findById(o);i&&t.setItemState(i,"active",!0)})}}),t.on("canvas:click",()=>{t.getNodes().forEach(s=>{t.clearItemStates(s,"active")})})}function E(t,r){r.forEach(s=>{const n=t.findById(s);n&&t.setItemState(n,"selected",!0)})}export{H as default};
//# sourceMappingURL=HypergraphView-C5WdE_Bo.js.map
