import{r as a,a as u,j as l}from"./index-BoSBHz_8.js";import{s as f,G as h}from"./preset-DZj1u2dW.js";const F=a.memo(function({data:r,meta:s}){const n=a.useRef(null),e=a.useRef(null),{results:c}=u();return a.useEffect(()=>{if(n.current){try{if(!r||!r.nodes||!r.edges)return;const{hyperEdges:o,transformedData:i}=p(r);e.current?e.current.changeData(i):e.current=g(n.current,i),e.current&&y(e.current,o),c.length>0&&e.current&&m(e.current,c)}catch(o){console.error("Hypergraph render error:",o),f.error("Failed to render hypergraph")}return()=>{e.current&&(e.current.destroy(),e.current=null)}}},[r,c]),l.jsx("div",{ref:n,className:"hypergraph-view",style:{width:"100%",height:"100%"}})});function p(t){const r=[],s=t.nodes.map(e=>({...e,size:30,style:{fill:"#ECF5FF",stroke:"#409EFF"}})),n=[];return t.edges.forEach((e,c)=>{const o=`__he_${c}`,i=e.nodes||[];s.push({id:o,label:e.label||"",type:"hyper-edge-node",size:15,isHyperEdge:!0}),r.push({id:o,nodes:i}),i.forEach(d=>{n.push({source:o,target:d,type:"line",style:{stroke:"#B4E5FF"}})})}),{hyperEdges:r,transformedData:{nodes:s,edges:n}}}function g(t,r){const s=t.clientWidth||800,n=t.clientHeight||600,e=new h({container:t,width:s,height:n,behaviors:["drag-canvas","zoom-canvas","drag-node"],layout:{type:"force",preventOverlap:!0,linkDistance:100,nodeStrength:-30,edgeStrength:.1},node:{type:"circle"},edge:{type:"line"}});return e.setData(r),e.render(),e}function y(t,r){t.on("node:click",s=>{const e=s.item.getModel();if(e.isHyperEdge){const c=r.find(o=>o.id===e.id);c&&c.nodes.forEach(o=>{const i=t.findById(o);i&&t.setItemState(i,"active",!0)})}}),t.on("canvas:click",()=>{t.getNodes().forEach(s=>{t.clearItemStates(s,"active")})})}function m(t,r){r.forEach(s=>{const n=t.findById(s);n&&t.setItemState(n,"selected",!0)})}export{F as default};
//# sourceMappingURL=HypergraphView-fipR7I8k.js.map
