var GU=Object.defineProperty;var db=r=>{throw TypeError(r)};var KU=(r,e,t)=>e in r?GU(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var it=(r,e,t)=>KU(r,typeof e!="symbol"?e+"":e,t),kf=(r,e,t)=>e.has(r)||db("Cannot "+t);var _r=(r,e,t)=>(kf(r,e,"read from private field"),t?t.call(r):e.get(r)),Lf=(r,e,t)=>e.has(r)?db("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),jl=(r,e,t,n)=>(kf(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),Qf=(r,e,t)=>(kf(r,e,"access private method"),t);import{g as Fw,a as VO,c as $l,r as Ln,u as zU,b as VU,d as jU,j as fb}from"./index-CzFOrGUA.js";function bs(r){"@babel/helpers - typeof";return bs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bs(r)}function $U(r,e){if(bs(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(bs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function jO(r){var e=$U(r,"string");return bs(e)=="symbol"?e:e+""}function ee(r,e,t){return(e=jO(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function gb(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function ue(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gb(Object(t),!0).forEach(function(n){ee(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):gb(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function G(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function vb(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,jO(n.key),n)}}function K(r,e,t){return e&&vb(r.prototype,e),t&&vb(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function Du(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function WU(r){if(Array.isArray(r))return Du(r)}function qU(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Tw(r,e){if(r){if(typeof r=="string")return Du(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Du(r,e):void 0}}function YU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fe(r){return WU(r)||qU(r)||Tw(r)||YU()}function Mo(r){return Mo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mo(r)}function $O(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($O=function(){return!!r})()}function XU(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function ZU(r,e){if(e&&(bs(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XU(r)}function ye(r,e,t){return e=Mo(e),ZU(r,$O()?Reflect.construct(e,t||[],Mo(r).constructor):e.apply(r,t))}function $m(r,e){return $m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},$m(r,e)}function me(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&$m(r,e)}function JU(r){if(Array.isArray(r))return r}function eP(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,a,s,o=[],A=!0,l=!1;try{if(a=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;A=!1}else for(;!(A=(n=a.call(t)).done)&&(o.push(n.value),o.length!==e);A=!0);}catch(c){l=!0,i=c}finally{try{if(!A&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}function tP(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pe(r,e){return JU(r)||eP(r,e)||Tw(r,e)||tP()}var WO={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(A,l,c){this.fn=A,this.context=l,this.once=c||!1}function a(A,l,c,u,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var d=new i(c,u||A,h),f=t?t+l:l;return A._events[f]?A._events[f].fn?A._events[f]=[A._events[f],d]:A._events[f].push(d):(A._events[f]=d,A._eventsCount++),A}function s(A,l){--A._eventsCount===0?A._events=new n:delete A._events[l]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var l=[],c,u;if(this._eventsCount===0)return l;for(u in c=this._events)e.call(c,u)&&l.push(t?u.slice(1):u);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},o.prototype.listeners=function(l){var c=t?t+l:l,u=this._events[c];if(!u)return[];if(u.fn)return[u.fn];for(var h=0,d=u.length,f=new Array(d);h<d;h++)f[h]=u[h].fn;return f},o.prototype.listenerCount=function(l){var c=t?t+l:l,u=this._events[c];return u?u.fn?1:u.length:0},o.prototype.emit=function(l,c,u,h,d,f){var g=t?t+l:l;if(!this._events[g])return!1;var v=this._events[g],p=arguments.length,y,m;if(v.fn){switch(v.once&&this.removeListener(l,v.fn,void 0,!0),p){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,c),!0;case 3:return v.fn.call(v.context,c,u),!0;case 4:return v.fn.call(v.context,c,u,h),!0;case 5:return v.fn.call(v.context,c,u,h,d),!0;case 6:return v.fn.call(v.context,c,u,h,d,f),!0}for(m=1,y=new Array(p-1);m<p;m++)y[m-1]=arguments[m];v.fn.apply(v.context,y)}else{var w=v.length,B;for(m=0;m<w;m++)switch(v[m].once&&this.removeListener(l,v[m].fn,void 0,!0),p){case 1:v[m].fn.call(v[m].context);break;case 2:v[m].fn.call(v[m].context,c);break;case 3:v[m].fn.call(v[m].context,c,u);break;case 4:v[m].fn.call(v[m].context,c,u,h);break;default:if(!y)for(B=1,y=new Array(p-1);B<p;B++)y[B-1]=arguments[B];v[m].fn.apply(v[m].context,y)}}return!0},o.prototype.on=function(l,c,u){return a(this,l,c,u,!1)},o.prototype.once=function(l,c,u){return a(this,l,c,u,!0)},o.prototype.removeListener=function(l,c,u,h){var d=t?t+l:l;if(!this._events[d])return this;if(!c)return s(this,d),this;var f=this._events[d];if(f.fn)f.fn===c&&(!h||f.once)&&(!u||f.context===u)&&s(this,d);else{for(var g=0,v=[],p=f.length;g<p;g++)(f[g].fn!==c||h&&!f[g].once||u&&f[g].context!==u)&&v.push(f[g]);v.length?this._events[d]=v.length===1?v[0]:v:s(this,d)}return this},o.prototype.removeAllListeners=function(l){var c;return l?(c=t?t+l:l,this._events[c]&&s(this,c)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,r.exports=o})(WO);var nP=WO.exports;const qO=Fw(nP);var ot=1e-6,Pt=typeof Float32Array<"u"?Float32Array:Array,rP="zyx";function YO(){var r=new Pt(9);return Pt!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function iP(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[4],r[4]=e[5],r[5]=e[6],r[6]=e[8],r[7]=e[9],r[8]=e[10],r}function aP(r,e,t,n,i,a,s,o,A){var l=new Pt(9);return l[0]=r,l[1]=e,l[2]=t,l[3]=n,l[4]=i,l[5]=a,l[6]=s,l[7]=o,l[8]=A,l}function Ye(){var r=new Pt(16);return Pt!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r}function XO(r){var e=new Pt(16);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}function Oo(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function ZO(r,e,t,n,i,a,s,o,A,l,c,u,h,d,f,g){var v=new Pt(16);return v[0]=r,v[1]=e,v[2]=t,v[3]=n,v[4]=i,v[5]=a,v[6]=s,v[7]=o,v[8]=A,v[9]=l,v[10]=c,v[11]=u,v[12]=h,v[13]=d,v[14]=f,v[15]=g,v}function Wm(r,e,t,n,i,a,s,o,A,l,c,u,h,d,f,g,v){return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r[4]=a,r[5]=s,r[6]=o,r[7]=A,r[8]=l,r[9]=c,r[10]=u,r[11]=h,r[12]=d,r[13]=f,r[14]=g,r[15]=v,r}function Ia(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function JO(r,e){if(r===e){var t=e[1],n=e[2],i=e[3],a=e[6],s=e[7],o=e[11];r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=t,r[6]=e[9],r[7]=e[13],r[8]=n,r[9]=a,r[11]=e[14],r[12]=i,r[13]=s,r[14]=o}else r[0]=e[0],r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=e[1],r[5]=e[5],r[6]=e[9],r[7]=e[13],r[8]=e[2],r[9]=e[6],r[10]=e[10],r[11]=e[14],r[12]=e[3],r[13]=e[7],r[14]=e[11],r[15]=e[15];return r}function li(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],s=e[4],o=e[5],A=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],f=e[12],g=e[13],v=e[14],p=e[15],y=t*o-n*s,m=t*A-i*s,w=t*l-a*s,B=n*A-i*o,b=n*l-a*o,E=i*l-a*A,x=c*g-u*f,S=c*v-h*f,C=c*p-d*f,F=u*v-h*g,M=u*p-d*g,T=h*p-d*v,O=y*T-m*M+w*F+B*C-b*S+E*x;return O?(O=1/O,r[0]=(o*T-A*M+l*F)*O,r[1]=(i*M-n*T-a*F)*O,r[2]=(g*E-v*b+p*B)*O,r[3]=(h*b-u*E-d*B)*O,r[4]=(A*C-s*T-l*S)*O,r[5]=(t*T-i*C+a*S)*O,r[6]=(v*w-f*E-p*m)*O,r[7]=(c*E-h*w+d*m)*O,r[8]=(s*M-o*C+l*x)*O,r[9]=(n*C-t*M-a*x)*O,r[10]=(f*b-g*w+p*y)*O,r[11]=(u*w-c*b-d*y)*O,r[12]=(o*S-s*F-A*x)*O,r[13]=(t*F-n*S+i*x)*O,r[14]=(g*m-f*B-v*y)*O,r[15]=(c*B-u*m+h*y)*O,r):null}function sP(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],s=e[4],o=e[5],A=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],f=e[12],g=e[13],v=e[14],p=e[15],y=t*o-n*s,m=t*A-i*s,w=t*l-a*s,B=n*A-i*o,b=n*l-a*o,E=i*l-a*A,x=c*g-u*f,S=c*v-h*f,C=c*p-d*f,F=u*v-h*g,M=u*p-d*g,T=h*p-d*v;return r[0]=o*T-A*M+l*F,r[1]=i*M-n*T-a*F,r[2]=g*E-v*b+p*B,r[3]=h*b-u*E-d*B,r[4]=A*C-s*T-l*S,r[5]=t*T-i*C+a*S,r[6]=v*w-f*E-p*m,r[7]=c*E-h*w+d*m,r[8]=s*M-o*C+l*x,r[9]=n*C-t*M-a*x,r[10]=f*b-g*w+p*y,r[11]=u*w-c*b-d*y,r[12]=o*S-s*F-A*x,r[13]=t*F-n*S+i*x,r[14]=g*m-f*B-v*y,r[15]=c*B-u*m+h*y,r}function eI(r){var e=r[0],t=r[1],n=r[2],i=r[3],a=r[4],s=r[5],o=r[6],A=r[7],l=r[8],c=r[9],u=r[10],h=r[11],d=r[12],f=r[13],g=r[14],v=r[15],p=e*s-t*a,y=e*o-n*a,m=t*o-n*s,w=l*f-c*d,B=l*g-u*d,b=c*g-u*f,E=e*b-t*B+n*w,x=a*b-s*B+o*w,S=l*m-c*y+u*p,C=d*m-f*y+g*p;return A*E-i*x+v*S-h*C}function yn(r,e,t){var n=e[0],i=e[1],a=e[2],s=e[3],o=e[4],A=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],g=e[12],v=e[13],p=e[14],y=e[15],m=t[0],w=t[1],B=t[2],b=t[3];return r[0]=m*n+w*o+B*u+b*g,r[1]=m*i+w*A+B*h+b*v,r[2]=m*a+w*l+B*d+b*p,r[3]=m*s+w*c+B*f+b*y,m=t[4],w=t[5],B=t[6],b=t[7],r[4]=m*n+w*o+B*u+b*g,r[5]=m*i+w*A+B*h+b*v,r[6]=m*a+w*l+B*d+b*p,r[7]=m*s+w*c+B*f+b*y,m=t[8],w=t[9],B=t[10],b=t[11],r[8]=m*n+w*o+B*u+b*g,r[9]=m*i+w*A+B*h+b*v,r[10]=m*a+w*l+B*d+b*p,r[11]=m*s+w*c+B*f+b*y,m=t[12],w=t[13],B=t[14],b=t[15],r[12]=m*n+w*o+B*u+b*g,r[13]=m*i+w*A+B*h+b*v,r[14]=m*a+w*l+B*d+b*p,r[15]=m*s+w*c+B*f+b*y,r}function wo(r,e,t){var n=t[0],i=t[1],a=t[2],s,o,A,l,c,u,h,d,f,g,v,p;return e===r?(r[12]=e[0]*n+e[4]*i+e[8]*a+e[12],r[13]=e[1]*n+e[5]*i+e[9]*a+e[13],r[14]=e[2]*n+e[6]*i+e[10]*a+e[14],r[15]=e[3]*n+e[7]*i+e[11]*a+e[15]):(s=e[0],o=e[1],A=e[2],l=e[3],c=e[4],u=e[5],h=e[6],d=e[7],f=e[8],g=e[9],v=e[10],p=e[11],r[0]=s,r[1]=o,r[2]=A,r[3]=l,r[4]=c,r[5]=u,r[6]=h,r[7]=d,r[8]=f,r[9]=g,r[10]=v,r[11]=p,r[12]=s*n+c*i+f*a+e[12],r[13]=o*n+u*i+g*a+e[13],r[14]=A*n+h*i+v*a+e[14],r[15]=l*n+d*i+p*a+e[15]),r}function tI(r,e,t){var n=t[0],i=t[1],a=t[2];return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r[4]=e[4]*i,r[5]=e[5]*i,r[6]=e[6]*i,r[7]=e[7]*i,r[8]=e[8]*a,r[9]=e[9]*a,r[10]=e[10]*a,r[11]=e[11]*a,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function oP(r,e,t,n){var i=n[0],a=n[1],s=n[2],o=Math.sqrt(i*i+a*a+s*s),A,l,c,u,h,d,f,g,v,p,y,m,w,B,b,E,x,S,C,F,M,T,O,_;return o<ot?null:(o=1/o,i*=o,a*=o,s*=o,A=Math.sin(t),l=Math.cos(t),c=1-l,u=e[0],h=e[1],d=e[2],f=e[3],g=e[4],v=e[5],p=e[6],y=e[7],m=e[8],w=e[9],B=e[10],b=e[11],E=i*i*c+l,x=a*i*c+s*A,S=s*i*c-a*A,C=i*a*c-s*A,F=a*a*c+l,M=s*a*c+i*A,T=i*s*c+a*A,O=a*s*c-i*A,_=s*s*c+l,r[0]=u*E+g*x+m*S,r[1]=h*E+v*x+w*S,r[2]=d*E+p*x+B*S,r[3]=f*E+y*x+b*S,r[4]=u*C+g*F+m*M,r[5]=h*C+v*F+w*M,r[6]=d*C+p*F+B*M,r[7]=f*C+y*F+b*M,r[8]=u*T+g*O+m*_,r[9]=h*T+v*O+w*_,r[10]=d*T+p*O+B*_,r[11]=f*T+y*O+b*_,e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r)}function nI(r,e,t){var n=Math.sin(t),i=Math.cos(t),a=e[4],s=e[5],o=e[6],A=e[7],l=e[8],c=e[9],u=e[10],h=e[11];return e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[4]=a*i+l*n,r[5]=s*i+c*n,r[6]=o*i+u*n,r[7]=A*i+h*n,r[8]=l*i-a*n,r[9]=c*i-s*n,r[10]=u*i-o*n,r[11]=h*i-A*n,r}function rI(r,e,t){var n=Math.sin(t),i=Math.cos(t),a=e[0],s=e[1],o=e[2],A=e[3],l=e[8],c=e[9],u=e[10],h=e[11];return e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=a*i-l*n,r[1]=s*i-c*n,r[2]=o*i-u*n,r[3]=A*i-h*n,r[8]=a*n+l*i,r[9]=s*n+c*i,r[10]=o*n+u*i,r[11]=A*n+h*i,r}function AP(r,e,t){var n=Math.sin(t),i=Math.cos(t),a=e[0],s=e[1],o=e[2],A=e[3],l=e[4],c=e[5],u=e[6],h=e[7];return e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=a*i+l*n,r[1]=s*i+c*n,r[2]=o*i+u*n,r[3]=A*i+h*n,r[4]=l*i-a*n,r[5]=c*i-s*n,r[6]=u*i-o*n,r[7]=h*i-A*n,r}function ca(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r}function rs(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=e[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function iI(r,e,t){var n=t[0],i=t[1],a=t[2],s=Math.sqrt(n*n+i*i+a*a),o,A,l;return s<ot?null:(s=1/s,n*=s,i*=s,a*=s,o=Math.sin(e),A=Math.cos(e),l=1-A,r[0]=n*n*l+A,r[1]=i*n*l+a*o,r[2]=a*n*l-i*o,r[3]=0,r[4]=n*i*l-a*o,r[5]=i*i*l+A,r[6]=a*i*l+n*o,r[7]=0,r[8]=n*a*l+i*o,r[9]=i*a*l-n*o,r[10]=a*a*l+A,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r)}function aI(r,e){var t=Math.sin(e),n=Math.cos(e);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=n,r[6]=t,r[7]=0,r[8]=0,r[9]=-t,r[10]=n,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function sI(r,e){var t=Math.sin(e),n=Math.cos(e);return r[0]=n,r[1]=0,r[2]=-t,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=t,r[9]=0,r[10]=n,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function qm(r,e){var t=Math.sin(e),n=Math.cos(e);return r[0]=n,r[1]=t,r[2]=0,r[3]=0,r[4]=-t,r[5]=n,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function oI(r,e,t){var n=e[0],i=e[1],a=e[2],s=e[3],o=n+n,A=i+i,l=a+a,c=n*o,u=n*A,h=n*l,d=i*A,f=i*l,g=a*l,v=s*o,p=s*A,y=s*l;return r[0]=1-(d+g),r[1]=u+y,r[2]=h-p,r[3]=0,r[4]=u-y,r[5]=1-(c+g),r[6]=f+v,r[7]=0,r[8]=h+p,r[9]=f-v,r[10]=1-(c+d),r[11]=0,r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r}function lP(r,e){var t=new Pt(3),n=-e[0],i=-e[1],a=-e[2],s=e[3],o=e[4],A=e[5],l=e[6],c=e[7],u=n*n+i*i+a*a+s*s;return u>0?(t[0]=(o*s+c*n+A*a-l*i)*2/u,t[1]=(A*s+c*i+l*n-o*a)*2/u,t[2]=(l*s+c*a+o*i-A*n)*2/u):(t[0]=(o*s+c*n+A*a-l*i)*2,t[1]=(A*s+c*i+l*n-o*a)*2,t[2]=(l*s+c*a+o*i-A*n)*2),oI(r,e,t),r}function Hu(r,e){return r[0]=e[12],r[1]=e[13],r[2]=e[14],r}function Io(r,e){var t=e[0],n=e[1],i=e[2],a=e[4],s=e[5],o=e[6],A=e[8],l=e[9],c=e[10];return r[0]=Math.sqrt(t*t+n*n+i*i),r[1]=Math.sqrt(a*a+s*s+o*o),r[2]=Math.sqrt(A*A+l*l+c*c),r}function Gu(r,e){var t=new Pt(3);Io(t,e);var n=1/t[0],i=1/t[1],a=1/t[2],s=e[0]*n,o=e[1]*i,A=e[2]*a,l=e[4]*n,c=e[5]*i,u=e[6]*a,h=e[8]*n,d=e[9]*i,f=e[10]*a,g=s+c+f,v=0;return g>0?(v=Math.sqrt(g+1)*2,r[3]=.25*v,r[0]=(u-d)/v,r[1]=(h-A)/v,r[2]=(o-l)/v):s>c&&s>f?(v=Math.sqrt(1+s-c-f)*2,r[3]=(u-d)/v,r[0]=.25*v,r[1]=(o+l)/v,r[2]=(h+A)/v):c>f?(v=Math.sqrt(1+c-s-f)*2,r[3]=(h-A)/v,r[0]=(o+l)/v,r[1]=.25*v,r[2]=(u+d)/v):(v=Math.sqrt(1+f-s-c)*2,r[3]=(o-l)/v,r[0]=(h+A)/v,r[1]=(u+d)/v,r[2]=.25*v),r}function cP(r,e,t,n){e[0]=n[12],e[1]=n[13],e[2]=n[14];var i=n[0],a=n[1],s=n[2],o=n[4],A=n[5],l=n[6],c=n[8],u=n[9],h=n[10];t[0]=Math.sqrt(i*i+a*a+s*s),t[1]=Math.sqrt(o*o+A*A+l*l),t[2]=Math.sqrt(c*c+u*u+h*h);var d=1/t[0],f=1/t[1],g=1/t[2],v=i*d,p=a*f,y=s*g,m=o*d,w=A*f,B=l*g,b=c*d,E=u*f,x=h*g,S=v+w+x,C=0;return S>0?(C=Math.sqrt(S+1)*2,r[3]=.25*C,r[0]=(B-E)/C,r[1]=(b-y)/C,r[2]=(p-m)/C):v>w&&v>x?(C=Math.sqrt(1+v-w-x)*2,r[3]=(B-E)/C,r[0]=.25*C,r[1]=(p+m)/C,r[2]=(b+y)/C):w>x?(C=Math.sqrt(1+w-v-x)*2,r[3]=(b-y)/C,r[0]=(p+m)/C,r[1]=.25*C,r[2]=(B+E)/C):(C=Math.sqrt(1+x-v-w)*2,r[3]=(p-m)/C,r[0]=(b+y)/C,r[1]=(B+E)/C,r[2]=.25*C),r}function uP(r,e,t,n){var i=e[0],a=e[1],s=e[2],o=e[3],A=i+i,l=a+a,c=s+s,u=i*A,h=i*l,d=i*c,f=a*l,g=a*c,v=s*c,p=o*A,y=o*l,m=o*c,w=n[0],B=n[1],b=n[2];return r[0]=(1-(f+v))*w,r[1]=(h+m)*w,r[2]=(d-y)*w,r[3]=0,r[4]=(h-m)*B,r[5]=(1-(u+v))*B,r[6]=(g+p)*B,r[7]=0,r[8]=(d+y)*b,r[9]=(g-p)*b,r[10]=(1-(u+f))*b,r[11]=0,r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r}function RA(r,e,t,n,i){var a=e[0],s=e[1],o=e[2],A=e[3],l=a+a,c=s+s,u=o+o,h=a*l,d=a*c,f=a*u,g=s*c,v=s*u,p=o*u,y=A*l,m=A*c,w=A*u,B=n[0],b=n[1],E=n[2],x=i[0],S=i[1],C=i[2],F=(1-(g+p))*B,M=(d+w)*B,T=(f-m)*B,O=(d-w)*b,_=(1-(h+p))*b,Q=(v+y)*b,L=(f+m)*E,k=(v-y)*E,U=(1-(h+g))*E;return r[0]=F,r[1]=M,r[2]=T,r[3]=0,r[4]=O,r[5]=_,r[6]=Q,r[7]=0,r[8]=L,r[9]=k,r[10]=U,r[11]=0,r[12]=t[0]+x-(F*x+O*S+L*C),r[13]=t[1]+S-(M*x+_*S+k*C),r[14]=t[2]+C-(T*x+Q*S+U*C),r[15]=1,r}function Mw(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],s=t+t,o=n+n,A=i+i,l=t*s,c=n*s,u=n*o,h=i*s,d=i*o,f=i*A,g=a*s,v=a*o,p=a*A;return r[0]=1-u-f,r[1]=c+p,r[2]=h-v,r[3]=0,r[4]=c-p,r[5]=1-l-f,r[6]=d+g,r[7]=0,r[8]=h+v,r[9]=d-g,r[10]=1-l-u,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function hP(r,e,t,n,i,a,s){var o=1/(t-e),A=1/(i-n),l=1/(a-s);return r[0]=a*2*o,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a*2*A,r[6]=0,r[7]=0,r[8]=(t+e)*o,r[9]=(i+n)*A,r[10]=(s+a)*l,r[11]=-1,r[12]=0,r[13]=0,r[14]=s*a*2*l,r[15]=0,r}function AI(r,e,t,n,i){var a=1/Math.tan(e/2);if(r[0]=a/t,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,i!=null&&i!==1/0){var s=1/(n-i);r[10]=(i+n)*s,r[14]=2*i*n*s}else r[10]=-1,r[14]=-2*n;return r}var dP=AI;function fP(r,e,t,n,i){var a=1/Math.tan(e/2);if(r[0]=a/t,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,i!=null&&i!==1/0){var s=1/(n-i);r[10]=i*s,r[14]=i*n*s}else r[10]=-1,r[14]=-n;return r}function gP(r,e,t,n){var i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),o=Math.tan(e.rightDegrees*Math.PI/180),A=2/(s+o),l=2/(i+a);return r[0]=A,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=l,r[6]=0,r[7]=0,r[8]=-((s-o)*A*.5),r[9]=(i-a)*l*.5,r[10]=n/(t-n),r[11]=-1,r[12]=0,r[13]=0,r[14]=n*t/(t-n),r[15]=0,r}function lI(r,e,t,n,i,a,s){var o=1/(e-t),A=1/(n-i),l=1/(a-s);return r[0]=-2*o,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*A,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*l,r[11]=0,r[12]=(e+t)*o,r[13]=(i+n)*A,r[14]=(s+a)*l,r[15]=1,r}var cI=lI;function uI(r,e,t,n,i,a,s){var o=1/(e-t),A=1/(n-i),l=1/(a-s);return r[0]=-2*o,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*A,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=l,r[11]=0,r[12]=(e+t)*o,r[13]=(i+n)*A,r[14]=a*l,r[15]=1,r}function hI(r,e,t,n){var i,a,s,o,A,l,c,u,h,d,f=e[0],g=e[1],v=e[2],p=n[0],y=n[1],m=n[2],w=t[0],B=t[1],b=t[2];return Math.abs(f-w)<ot&&Math.abs(g-B)<ot&&Math.abs(v-b)<ot?Ia(r):(c=f-w,u=g-B,h=v-b,d=1/Math.sqrt(c*c+u*u+h*h),c*=d,u*=d,h*=d,i=y*h-m*u,a=m*c-p*h,s=p*u-y*c,d=Math.sqrt(i*i+a*a+s*s),d?(d=1/d,i*=d,a*=d,s*=d):(i=0,a=0,s=0),o=u*s-h*a,A=h*i-c*s,l=c*a-u*i,d=Math.sqrt(o*o+A*A+l*l),d?(d=1/d,o*=d,A*=d,l*=d):(o=0,A=0,l=0),r[0]=i,r[1]=o,r[2]=c,r[3]=0,r[4]=a,r[5]=A,r[6]=u,r[7]=0,r[8]=s,r[9]=l,r[10]=h,r[11]=0,r[12]=-(i*f+a*g+s*v),r[13]=-(o*f+A*g+l*v),r[14]=-(c*f+u*g+h*v),r[15]=1,r)}function vP(r,e,t,n){var i=e[0],a=e[1],s=e[2],o=n[0],A=n[1],l=n[2],c=i-t[0],u=a-t[1],h=s-t[2],d=c*c+u*u+h*h;d>0&&(d=1/Math.sqrt(d),c*=d,u*=d,h*=d);var f=A*h-l*u,g=l*c-o*h,v=o*u-A*c;return d=f*f+g*g+v*v,d>0&&(d=1/Math.sqrt(d),f*=d,g*=d,v*=d),r[0]=f,r[1]=g,r[2]=v,r[3]=0,r[4]=u*v-h*g,r[5]=h*f-c*v,r[6]=c*g-u*f,r[7]=0,r[8]=c,r[9]=u,r[10]=h,r[11]=0,r[12]=i,r[13]=a,r[14]=s,r[15]=1,r}function pP(r){return"mat4("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+", "+r[9]+", "+r[10]+", "+r[11]+", "+r[12]+", "+r[13]+", "+r[14]+", "+r[15]+")"}function yP(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]+r[3]*r[3]+r[4]*r[4]+r[5]*r[5]+r[6]*r[6]+r[7]*r[7]+r[8]*r[8]+r[9]*r[9]+r[10]*r[10]+r[11]*r[11]+r[12]*r[12]+r[13]*r[13]+r[14]*r[14]+r[15]*r[15])}function mP(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r[9]=e[9]+t[9],r[10]=e[10]+t[10],r[11]=e[11]+t[11],r[12]=e[12]+t[12],r[13]=e[13]+t[13],r[14]=e[14]+t[14],r[15]=e[15]+t[15],r}function dI(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r[9]=e[9]-t[9],r[10]=e[10]-t[10],r[11]=e[11]-t[11],r[12]=e[12]-t[12],r[13]=e[13]-t[13],r[14]=e[14]-t[14],r[15]=e[15]-t[15],r}function wP(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r[9]=e[9]*t,r[10]=e[10]*t,r[11]=e[11]*t,r[12]=e[12]*t,r[13]=e[13]*t,r[14]=e[14]*t,r[15]=e[15]*t,r}function BP(r,e,t,n){return r[0]=e[0]+t[0]*n,r[1]=e[1]+t[1]*n,r[2]=e[2]+t[2]*n,r[3]=e[3]+t[3]*n,r[4]=e[4]+t[4]*n,r[5]=e[5]+t[5]*n,r[6]=e[6]+t[6]*n,r[7]=e[7]+t[7]*n,r[8]=e[8]+t[8]*n,r[9]=e[9]+t[9]*n,r[10]=e[10]+t[10]*n,r[11]=e[11]+t[11]*n,r[12]=e[12]+t[12]*n,r[13]=e[13]+t[13]*n,r[14]=e[14]+t[14]*n,r[15]=e[15]+t[15]*n,r}function Ym(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]&&r[9]===e[9]&&r[10]===e[10]&&r[11]===e[11]&&r[12]===e[12]&&r[13]===e[13]&&r[14]===e[14]&&r[15]===e[15]}function bP(r,e){var t=r[0],n=r[1],i=r[2],a=r[3],s=r[4],o=r[5],A=r[6],l=r[7],c=r[8],u=r[9],h=r[10],d=r[11],f=r[12],g=r[13],v=r[14],p=r[15],y=e[0],m=e[1],w=e[2],B=e[3],b=e[4],E=e[5],x=e[6],S=e[7],C=e[8],F=e[9],M=e[10],T=e[11],O=e[12],_=e[13],Q=e[14],L=e[15];return Math.abs(t-y)<=ot*Math.max(1,Math.abs(t),Math.abs(y))&&Math.abs(n-m)<=ot*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(i-w)<=ot*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(a-B)<=ot*Math.max(1,Math.abs(a),Math.abs(B))&&Math.abs(s-b)<=ot*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(o-E)<=ot*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(A-x)<=ot*Math.max(1,Math.abs(A),Math.abs(x))&&Math.abs(l-S)<=ot*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(c-C)<=ot*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(u-F)<=ot*Math.max(1,Math.abs(u),Math.abs(F))&&Math.abs(h-M)<=ot*Math.max(1,Math.abs(h),Math.abs(M))&&Math.abs(d-T)<=ot*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(f-O)<=ot*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(g-_)<=ot*Math.max(1,Math.abs(g),Math.abs(_))&&Math.abs(v-Q)<=ot*Math.max(1,Math.abs(v),Math.abs(Q))&&Math.abs(p-L)<=ot*Math.max(1,Math.abs(p),Math.abs(L))}var fI=yn,EP=dI;const xP=Object.freeze(Object.defineProperty({__proto__:null,add:mP,adjoint:sP,clone:XO,copy:Oo,create:Ye,decompose:cP,determinant:eI,equals:bP,exactEquals:Ym,frob:yP,fromQuat:Mw,fromQuat2:lP,fromRotation:iI,fromRotationTranslation:oI,fromRotationTranslationScale:uP,fromRotationTranslationScaleOrigin:RA,fromScaling:rs,fromTranslation:ca,fromValues:ZO,fromXRotation:aI,fromYRotation:sI,fromZRotation:qm,frustum:hP,getRotation:Gu,getScaling:Io,getTranslation:Hu,identity:Ia,invert:li,lookAt:hI,mul:fI,multiply:yn,multiplyScalar:wP,multiplyScalarAndAdd:BP,ortho:cI,orthoNO:lI,orthoZO:uI,perspective:dP,perspectiveFromFieldOfView:gP,perspectiveNO:AI,perspectiveZO:fP,rotate:oP,rotateX:nI,rotateY:rI,rotateZ:AP,scale:tI,set:Wm,str:pP,sub:EP,subtract:dI,targetTo:vP,translate:wo,transpose:JO},Symbol.toStringTag,{value:"Module"}));function xe(){var r=new Pt(3);return Pt!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function _i(r){var e=new Pt(3);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}function Qi(r){var e=r[0],t=r[1],n=r[2];return Math.sqrt(e*e+t*t+n*n)}function Xe(r,e,t){var n=new Pt(3);return n[0]=r,n[1]=e,n[2]=t,n}function ci(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r}function pn(r,e,t,n){return r[0]=e,r[1]=t,r[2]=n,r}function xa(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r}function Xm(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r}function CP(r,e,t){return r[0]=e[0]*t[0],r[1]=e[1]*t[1],r[2]=e[2]*t[2],r}function SP(r,e,t){return r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.min(e[2],t[2]),r}function FP(r,e,t){return r[0]=Math.max(e[0],t[0]),r[1]=Math.max(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r}function Ku(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r}function TP(r,e){var t=e[0]-r[0],n=e[1]-r[1],i=e[2]-r[2];return Math.sqrt(t*t+n*n+i*i)}function ds(r,e){var t=e[0],n=e[1],i=e[2],a=t*t+n*n+i*i;return a>0&&(a=1/Math.sqrt(a)),r[0]=e[0]*a,r[1]=e[1]*a,r[2]=e[2]*a,r}function ui(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}function bu(r,e,t){var n=e[0],i=e[1],a=e[2],s=t[0],o=t[1],A=t[2];return r[0]=i*A-a*o,r[1]=a*s-n*A,r[2]=n*o-i*s,r}function Zm(r,e,t,n){var i=e[0],a=e[1],s=e[2];return r[0]=i+n*(t[0]-i),r[1]=a+n*(t[1]-a),r[2]=s+n*(t[2]-s),r}function mn(r,e,t){var n=e[0],i=e[1],a=e[2],s=t[3]*n+t[7]*i+t[11]*a+t[15];return s=s||1,r[0]=(t[0]*n+t[4]*i+t[8]*a+t[12])/s,r[1]=(t[1]*n+t[5]*i+t[9]*a+t[13])/s,r[2]=(t[2]*n+t[6]*i+t[10]*a+t[14])/s,r}function MP(r,e,t){var n=e[0],i=e[1],a=e[2];return r[0]=n*t[0]+i*t[3]+a*t[6],r[1]=n*t[1]+i*t[4]+a*t[7],r[2]=n*t[2]+i*t[5]+a*t[8],r}function OP(r,e,t){var n=t[0],i=t[1],a=t[2],s=t[3],o=e[0],A=e[1],l=e[2],c=i*l-a*A,u=a*o-n*l,h=n*A-i*o;return c=c+c,u=u+u,h=h+h,r[0]=o+s*c+i*h-a*u,r[1]=A+s*u+a*c-n*h,r[2]=l+s*h+n*u-i*c,r}function eA(r,e){var t=r[0],n=r[1],i=r[2],a=e[0],s=e[1],o=e[2];return Math.abs(t-a)<=ot*Math.max(1,Math.abs(t),Math.abs(a))&&Math.abs(n-s)<=ot*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-o)<=ot*Math.max(1,Math.abs(i),Math.abs(o))}var gI=Xm,pb=TP,vI=Qi;(function(){var r=xe();return function(e,t,n,i,a,s){var o,A;for(t||(t=3),n||(n=0),i?A=Math.min(i*t+n,e.length):A=e.length,o=n;o<A;o+=t)r[0]=e[o],r[1]=e[o+1],r[2]=e[o+2],a(r,r,s),e[o]=r[0],e[o+1]=r[1],e[o+2]=r[2];return e}})();function hi(){var r=new Pt(4);return Pt!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function vA(r,e,t,n){var i=new Pt(4);return i[0]=r,i[1]=e,i[2]=t,i[3]=n,i}function IP(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r}function _P(r,e,t,n,i){return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r}function kP(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],s=t*t+n*n+i*i+a*a;return s>0&&(s=1/Math.sqrt(s)),r[0]=t*s,r[1]=n*s,r[2]=i*s,r[3]=a*s,r}function Ri(r,e,t){var n=e[0],i=e[1],a=e[2],s=e[3];return r[0]=t[0]*n+t[4]*i+t[8]*a+t[12]*s,r[1]=t[1]*n+t[5]*i+t[9]*a+t[13]*s,r[2]=t[2]*n+t[6]*i+t[10]*a+t[14]*s,r[3]=t[3]*n+t[7]*i+t[11]*a+t[15]*s,r}(function(){var r=hi();return function(e,t,n,i,a,s){var o,A;for(t||(t=4),n||(n=0),i?A=Math.min(i*t+n,e.length):A=e.length,o=n;o<A;o+=t)r[0]=e[o],r[1]=e[o+1],r[2]=e[o+2],r[3]=e[o+3],a(r,r,s),e[o]=r[0],e[o+1]=r[1],e[o+2]=r[2],e[o+3]=r[3];return e}})();function Lt(){var r=new Pt(4);return Pt!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function da(r,e,t){t=t*.5;var n=Math.sin(t);return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=Math.cos(t),r}function Ca(r,e,t){var n=e[0],i=e[1],a=e[2],s=e[3],o=t[0],A=t[1],l=t[2],c=t[3];return r[0]=n*c+s*o+i*l-a*A,r[1]=i*c+s*A+a*o-n*l,r[2]=a*c+s*l+n*A-i*o,r[3]=s*c-n*o-i*A-a*l,r}function Nf(r,e,t,n){var i=e[0],a=e[1],s=e[2],o=e[3],A=t[0],l=t[1],c=t[2],u=t[3],h,d,f,g,v;return d=i*A+a*l+s*c+o*u,d<0&&(d=-d,A=-A,l=-l,c=-c,u=-u),1-d>ot?(h=Math.acos(d),f=Math.sin(h),g=Math.sin((1-n)*h)/f,v=Math.sin(n*h)/f):(g=1-n,v=n),r[0]=g*i+v*A,r[1]=g*a+v*l,r[2]=g*s+v*c,r[3]=g*o+v*u,r}function Uf(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],s=t*t+n*n+i*i+a*a,o=s?1/s:0;return r[0]=-t*o,r[1]=-n*o,r[2]=-i*o,r[3]=a*o,r}function LP(r,e){var t=e[0]+e[4]+e[8],n;if(t>0)n=Math.sqrt(t+1),r[3]=.5*n,n=.5/n,r[0]=(e[5]-e[7])*n,r[1]=(e[6]-e[2])*n,r[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);var a=(i+1)%3,s=(i+2)%3;n=Math.sqrt(e[i*3+i]-e[a*3+a]-e[s*3+s]+1),r[i]=.5*n,n=.5/n,r[3]=(e[a*3+s]-e[s*3+a])*n,r[a]=(e[a*3+i]+e[i*3+a])*n,r[s]=(e[s*3+i]+e[i*3+s])*n}return r}function Wl(r,e,t,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:rP,a=Math.PI/360;e*=a,n*=a,t*=a;var s=Math.sin(e),o=Math.cos(e),A=Math.sin(t),l=Math.cos(t),c=Math.sin(n),u=Math.cos(n);switch(i){case"xyz":r[0]=s*l*u+o*A*c,r[1]=o*A*u-s*l*c,r[2]=o*l*c+s*A*u,r[3]=o*l*u-s*A*c;break;case"xzy":r[0]=s*l*u-o*A*c,r[1]=o*A*u-s*l*c,r[2]=o*l*c+s*A*u,r[3]=o*l*u+s*A*c;break;case"yxz":r[0]=s*l*u+o*A*c,r[1]=o*A*u-s*l*c,r[2]=o*l*c-s*A*u,r[3]=o*l*u+s*A*c;break;case"yzx":r[0]=s*l*u+o*A*c,r[1]=o*A*u+s*l*c,r[2]=o*l*c-s*A*u,r[3]=o*l*u-s*A*c;break;case"zxy":r[0]=s*l*u-o*A*c,r[1]=o*A*u+s*l*c,r[2]=o*l*c+s*A*u,r[3]=o*l*u-s*A*c;break;case"zyx":r[0]=s*l*u-o*A*c,r[1]=o*A*u+s*l*c,r[2]=o*l*c-s*A*u,r[3]=o*l*u+s*A*c;break;default:throw new Error("Unknown angle order "+i)}return r}var QP=vA,ql=IP,pI=_P,yb=Ca,zu=kP;(function(){var r=xe(),e=Xe(1,0,0),t=Xe(0,1,0);return function(n,i,a){var s=ui(i,a);return s<-.999999?(bu(r,e,i),vI(r)<1e-6&&bu(r,t,i),ds(r,r),da(n,r,Math.PI),n):s>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(bu(r,i,a),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=1+s,zu(n,n))}})();(function(){var r=Lt(),e=Lt();return function(t,n,i,a,s,o){return Nf(r,n,s,o),Nf(e,i,a,o),Nf(t,r,e,2*o*(1-o)),t}})();(function(){var r=YO();return function(e,t,n,i){return r[0]=n[0],r[3]=n[1],r[6]=n[2],r[1]=i[0],r[4]=i[1],r[7]=i[2],r[2]=-t[0],r[5]=-t[1],r[8]=-t[2],zu(e,LP(e,r))}})();function Ow(){var r=new Pt(2);return Pt!=Float32Array&&(r[0]=0,r[1]=0),r}function NP(r,e){return r[0]=e[0],r[1]=e[1],r}function UP(r,e,t){return r[0]=e,r[1]=t,r}function PP(r,e){var t=e[0],n=e[1],i=t*t+n*n;return i>0&&(i=1/Math.sqrt(i)),r[0]=e[0]*i,r[1]=e[1]*i,r}function RP(r,e){return r[0]*e[0]+r[1]*e[1]}function DP(r,e){return r[0]===e[0]&&r[1]===e[1]}(function(){var r=Ow();return function(e,t,n,i,a,s){var o,A;for(t||(t=2),n||(n=0),i?A=Math.min(i*t+n,e.length):A=e.length,o=n;o<A;o+=t)r[0]=e[o],r[1]=e[o+1],a(r,r,s),e[o]=r[0],e[o+1]=r[1];return e}})();var XA=function(r){return r!==null&&typeof r!="function"&&isFinite(r.length)},HP=function(r,e){return XA(r)?r.indexOf(e)>-1:!1},GP=function(r,e){if(!XA(r))return r;for(var t=[],n=0;n<r.length;n++){var i=r[n];e(i,n)&&t.push(i)}return t},KP=function(r,e){return e===void 0&&(e=[]),GP(r,function(t){return!HP(e,t)})};function ie(r){return typeof r=="function"}function le(r){return r==null}function Wn(r){return Array.isArray(r)}const Ot=function(r){var e=typeof r;return r!==null&&e==="object"||e==="function"};function yI(r,e){if(r){var t;if(Wn(r))for(var n=0,i=r.length;n<i&&(t=e(r[n],n),t!==!1);n++);else if(Ot(r)){for(var a in r)if(r.hasOwnProperty(a)&&(t=e(r[a],a),t===!1))break}}}var Jm=function(r){return typeof r=="object"&&r!==null},zP={}.toString,mI=function(r,e){return zP.call(r)==="[object "+e+"]"},_o=function(r){if(!Jm(r)||!mI(r,"Object"))return!1;if(Object.getPrototypeOf(r)===null)return!0;for(var e=r;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e},VP=function(r){if(!Wn(r))return[];for(var e=[],t=0;t<r.length;t++)e=e.concat(r[t]);return e};function Vu(r){if(!Array.isArray(r))return-1/0;var e=r.length;if(!e)return-1/0;for(var t=r[0],n=1;n<e;n++)t=Math.max(t,r[n]);return t}const ju=function(r){if(Wn(r))return r.reduce(function(e,t){return Math.min(e,t)},r[0])};var jP=function(r,e,t){if(!Wn(r)&&!_o(r))return r;var n=t;return yI(r,function(i,a){n=e(n,i,a)}),n};function _e(r){return typeof r=="string"}function $P(r,e){e===void 0&&(e=new Map);var t=[];if(Array.isArray(r))for(var n=0,i=r.length;n<i;n++){var a=r[n];e.has(a)||(t.push(a),e.set(a,!0))}return t}var WP=Object.prototype.hasOwnProperty;function Ph(r,e){if(!e||!Wn(r))return{};for(var t={},n=ie(e)?e:function(o){return o[e]},i,a=0;a<r.length;a++){var s=r[a];i=n(s),WP.call(t,i)?t[i].push(s):t[i]=[s]}return t}var vt=function(r,e,t){return r<e?e:r>t?t:r};function Z(r){return typeof r=="number"}var qP=1e-5;function Bo(r,e,t){return t===void 0&&(t=qP),r===e||Math.abs(r-e)<t}const YP=function(r,e){if(Wn(r)){for(var t,n=-1/0,i=0;i<r.length;i++){var a=r[i],s=ie(e)?e(a):a[e];s>n&&(t=a,n=s)}return t}},XP=function(r,e){if(Wn(r)){for(var t,n=1/0,i=0;i<r.length;i++){var a=r[i],s=ie(e)?e(a):a[e];s<n&&(t=a,n=s)}return t}};var wI=function(r,e){return(r%e+e)%e};const BI=function(r){return le(r)?"":r.toString()};var ZP=function(r){var e=BI(r);return e.charAt(0).toLowerCase()+e.substring(1)};function JP(r,e){return!r||!e?r:r.replace(/\\?\{([^{}]+)\}/g,function(t,n){return t.charAt(0)==="\\"?t.slice(1):e[n]===void 0?"":e[n]})}var $u=function(r){var e=BI(r);return e.charAt(0).toUpperCase()+e.substring(1)},eR={}.toString,tR=function(r){return eR.call(r).replace(/^\[object /,"").replace(/]$/,"")},ZA=function(r){return mI(r,"Boolean")};function nR(r){return r instanceof Date}function rR(r){return r===null}var iR=Object.prototype,aR=function(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||iR;return r===t},he=function(r){return r===void 0};function sR(r){return r instanceof Element||r instanceof Document}function mb(r,e){for(var t in e)e.hasOwnProperty(t)&&t!=="constructor"&&e[t]!==void 0&&(r[t]=e[t])}function oR(r,e,t,n){return e&&mb(r,e),t&&mb(r,t),r}var _a=function(r){if(typeof r!="object"||r===null)return r;var e;if(Wn(r)){e=[];for(var t=0,n=r.length;t<n;t++)typeof r[t]=="object"&&r[t]!=null?e[t]=_a(r[t]):e[t]=r[t]}else{e={};for(var i in r)typeof r[i]=="object"&&r[i]!=null?e[i]=_a(r[i]):e[i]=r[i]}return e};function wl(r,e,t){var n;return function(){var i=this,a=arguments,s=function(){n=null,r.apply(i,a)};clearTimeout(n),n=setTimeout(s,e)}}function AR(r){var e,t,n,i=r||1;function a(o,A){++e>i&&(n=t,s(1),++e),t[o]=A}function s(o){e=0,t=Object.create(null),o||(n=Object.create(null))}return s(),{clear:s,has:function(o){return t[o]!==void 0||n[o]!==void 0},get:function(o){var A=t[o];if(A!==void 0)return A;if((A=n[o])!==void 0)return a(o,A),A},set:function(o,A){t[o]!==void 0?t[o]=A:a(o,A)}}}var Pf=new Map;function e1(r,e,t){t===void 0&&(t=128);var n=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var s=e?e.apply(this,i):i[0];Pf.has(r)||Pf.set(r,AR(t));var o=Pf.get(r);if(o.has(s))return o.get(s);var A=r.apply(this,i);return o.set(s,A),A};return n}var lR=5;function cR(r,e){if(Object.hasOwn)return Object.hasOwn(r,e);if(r==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(r),e)}function bI(r,e,t,n){t=t||0,n=n||lR;for(var i in e)if(cR(e,i)){var a=e[i];a!==null&&_o(a)?(_o(r[i])||(r[i]={}),t<n?bI(r[i],a,t+1,n):r[i]=e[i]):Wn(a)?(r[i]=[],r[i]=r[i].concat(a)):a!==void 0&&(r[i]=a)}}var on=function(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var n=0;n<e.length;n+=1)bI(r,e[n]);return r},uR=Object.prototype.hasOwnProperty;function Ai(r){if(le(r))return!0;if(XA(r))return!r.length;var e=tR(r);if(e==="Map"||e==="Set")return!r.size;if(aR(r))return!Object.keys(r).length;for(var t in r)if(uR.call(r,t))return!1;return!0}var pt=function(r,e){if(r===e)return!0;if(!r||!e||_e(r)||_e(e))return!1;if(XA(r)||XA(e)){if(r.length!==e.length)return!1;for(var t=!0,n=0;n<r.length&&(t=pt(r[n],e[n]),!!t);n++);return t}if(Jm(r)||Jm(e)){var i=Object.keys(r),a=Object.keys(e);if(i.length!==a.length)return!1;for(var t=!0,n=0;n<i.length&&(t=pt(r[i[n]],e[i[n]]),!!t);n++);return t}return!1};const nn=function(r,e,t){for(var n=0,i=_e(e)?e.split("."):e;r&&n<i.length;)r=r[i[n++]];return r===void 0||n<i.length?t:r},JA=function(r,e,t){var n=r,i=_e(e)?e.split("."):e;return i.forEach(function(a,s){s<i.length-1?(Ot(n[a])||(n[a]=Z(i[s+1])?[]:{}),n=n[a]):n[a]=t}),r};var hR=Object.prototype.hasOwnProperty;const Es=function(r,e){if(r===null||!_o(r))return{};var t={};return yI(e,function(n){hR.call(r,n)&&(t[n]=r[n])}),t},Iw=function(r,e){return jP(r,function(t,n,i){return e.includes(i)||(t[i]=n),t},{})},EI=function(r,e,t){var n,i,a,s,o=0;t||(t={});var A=function(){o=t.leading===!1?0:Date.now(),n=null,s=r.apply(i,a),n||(i=a=null)},l=function(){var c=Date.now();!o&&t.leading===!1&&(o=c);var u=e-(c-o);return i=this,a=arguments,u<=0||u>e?(n&&(clearTimeout(n),n=null),o=c,s=r.apply(i,a),n||(i=a=null)):!n&&t.trailing!==!1&&(n=setTimeout(A,u)),s};return l.cancel=function(){clearTimeout(n),o=0,n=i=a=null},l};var Yl={};const dR=function(r){return r=r||"g",Yl[r]?Yl[r]+=1:Yl[r]=1,r+Yl[r]},Rf=function(){},t1=function(r){return r};var n1=function(r,e){return n1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},n1(r,e)};function be(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n1(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var H=function(){return H=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},H.apply(this,arguments)};function lt(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function Ce(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})}function Bl(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function I(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return a}function fR(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)n[i]=a[s];return n}function oe(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return r.concat(a||Array.prototype.slice.call(e))}function Df(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}var xI={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function gR(r,e,t){if(r[t].length>7){r[t].shift();for(var n=r[t],i=t;n.length;)e[t]="A",r.splice(i+=1,0,["C"].concat(n.splice(0,6)));r.splice(t,1)}}var DA={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function CI(r){return Array.isArray(r)&&r.every(function(e){var t=e[0].toLowerCase();return DA[t]===e.length-1&&"achlmqstvz".includes(t)})}function SI(r){return CI(r)&&r.every(function(e){var t=e[0];return t===t.toUpperCase()})}function FI(r){return SI(r)&&r.every(function(e){var t=e[0];return"ACLMQZ".includes(t)})}function wb(r){for(var e=r.pathValue[r.segmentStart],t=e.toLowerCase(),n=r.data;n.length>=DA[t]&&(t==="m"&&n.length>2?(r.segments.push([e].concat(n.splice(0,2))),t="l",e=e==="m"?"l":"L"):r.segments.push([e].concat(n.splice(0,DA[t]))),!!DA[t]););}function vR(r){var e=r.index,t=r.pathValue,n=t.charCodeAt(e);if(n===48){r.param=0,r.index+=1;return}if(n===49){r.param=1,r.index+=1;return}r.err='[path-util]: invalid Arc flag "'.concat(t[e],'", expecting 0 or 1 at index ').concat(e)}function pR(r){return r>=48&&r<=57||r===43||r===45||r===46}function zs(r){return r>=48&&r<=57}function yR(r){var e=r.max,t=r.pathValue,n=r.index,i=n,a=!1,s=!1,o=!1,A=!1,l;if(i>=e){r.err="[path-util]: Invalid path value at index ".concat(i,', "pathValue" is missing param');return}if(l=t.charCodeAt(i),(l===43||l===45)&&(i+=1,l=t.charCodeAt(i)),!zs(l)&&l!==46){r.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(t[i],'" is not a number');return}if(l!==46){if(a=l===48,i+=1,l=t.charCodeAt(i),a&&i<e&&l&&zs(l)){r.err="[path-util]: Invalid path value at index ".concat(n,', "').concat(t[n],'" illegal number');return}for(;i<e&&zs(t.charCodeAt(i));)i+=1,s=!0;l=t.charCodeAt(i)}if(l===46){for(A=!0,i+=1;zs(t.charCodeAt(i));)i+=1,o=!0;l=t.charCodeAt(i)}if(l===101||l===69){if(A&&!s&&!o){r.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(t[i],'" invalid float exponent');return}if(i+=1,l=t.charCodeAt(i),(l===43||l===45)&&(i+=1),i<e&&zs(t.charCodeAt(i)))for(;i<e&&zs(t.charCodeAt(i));)i+=1;else{r.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(t[i],'" invalid integer exponent');return}}r.index=i,r.param=+r.pathValue.slice(n,i)}function mR(r){var e=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return r===10||r===13||r===8232||r===8233||r===32||r===9||r===11||r===12||r===160||r>=5760&&e.includes(r)}function Eu(r){for(var e=r.pathValue,t=r.max;r.index<t&&mR(e.charCodeAt(r.index));)r.index+=1}function wR(r){switch(r|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function BR(r){return(r|32)===97}function bR(r){var e=r.max,t=r.pathValue,n=r.index,i=t.charCodeAt(n),a=DA[t[n].toLowerCase()];if(r.segmentStart=n,!wR(i)){r.err='[path-util]: Invalid path value "'.concat(t[n],'" is not a path command');return}if(r.index+=1,Eu(r),r.data=[],!a){wb(r);return}for(;;){for(var s=a;s>0;s-=1){if(BR(i)&&(s===3||s===4)?vR(r):yR(r),r.err.length)return;r.data.push(r.param),Eu(r),r.index<e&&t.charCodeAt(r.index)===44&&(r.index+=1,Eu(r))}if(r.index>=r.max||!pR(t.charCodeAt(r.index)))break}wb(r)}var ER=function(){function r(e){this.pathValue=e,this.segments=[],this.max=e.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return r}();function xR(r){if(CI(r))return[].concat(r);var e=new ER(r);for(Eu(e);e.index<e.max&&!e.err.length;)bR(e);return e.err?e.err:e.segments}function CR(r){if(SI(r))return[].concat(r);var e=xR(r),t=0,n=0,i=0,a=0;return e.map(function(s){var o=s.slice(1).map(Number),A=s[0],l=A.toUpperCase();if(A==="M")return t=o[0],n=o[1],i=t,a=n,["M",t,n];var c;if(A!==l)switch(l){case"A":c=[l,o[0],o[1],o[2],o[3],o[4],o[5]+t,o[6]+n];break;case"V":c=[l,o[0]+n];break;case"H":c=[l,o[0]+t];break;default:{var u=o.map(function(d,f){return d+(f%2?n:t)});c=[l].concat(u)}}else c=[l].concat(o);var h=c.length;switch(l){case"Z":t=i,n=a;break;case"H":t=c[1];break;case"V":n=c[1];break;default:t=c[h-2],n=c[h-1],l==="M"&&(i=t,a=n)}return c})}function SR(r,e){var t=r[0],n=e.x1,i=e.y1,a=e.x2,s=e.y2,o=r.slice(1).map(Number),A=r;if("TQ".includes(t)||(e.qx=null,e.qy=null),t==="H")A=["L",r[1],i];else if(t==="V")A=["L",n,r[1]];else if(t==="S"){var l=n*2-a,c=i*2-s;e.x1=l,e.y1=c,A=["C",l,c].concat(o)}else if(t==="T"){var u=n*2-e.qx,h=i*2-e.qy;e.qx=u,e.qy=h,A=["Q",u,h].concat(o)}else if(t==="Q"){var d=o[0],f=o[1];e.qx=d,e.qy=f}return A}function Wu(r){if(FI(r))return[].concat(r);for(var e=CR(r),t=H({},xI),n=0;n<e.length;n+=1){e[n]=SR(e[n],t);var i=e[n],a=i.length;t.x1=+i[a-2],t.y1=+i[a-1],t.x2=+i[a-4]||t.x1,t.y2=+i[a-3]||t.y1}return e}function FR(r){return FI(r)&&r.every(function(e){var t=e[0];return"MC".includes(t)})}function Xl(r,e,t){var n=r*Math.cos(t)-e*Math.sin(t),i=r*Math.sin(t)+e*Math.cos(t);return{x:n,y:i}}function _w(r,e,t,n,i,a,s,o,A,l){var c=r,u=e,h=t,d=n,f=o,g=A,v=Math.PI*120/180,p=Math.PI/180*(+i||0),y=[],m,w,B,b,E;if(l)w=l[0],B=l[1],b=l[2],E=l[3];else{m=Xl(c,u,-p),c=m.x,u=m.y,m=Xl(f,g,-p),f=m.x,g=m.y;var x=(c-f)/2,S=(u-g)/2,C=x*x/(h*h)+S*S/(d*d);C>1&&(C=Math.sqrt(C),h*=C,d*=C);var F=h*h,M=d*d,T=(a===s?-1:1)*Math.sqrt(Math.abs((F*M-F*S*S-M*x*x)/(F*S*S+M*x*x)));b=T*h*S/d+(c+f)/2,E=T*-d*x/h+(u+g)/2,w=Math.asin(((u-E)/d*Math.pow(10,9)>>0)/Math.pow(10,9)),B=Math.asin(((g-E)/d*Math.pow(10,9)>>0)/Math.pow(10,9)),w=c<b?Math.PI-w:w,B=f<b?Math.PI-B:B,w<0&&(w=Math.PI*2+w),B<0&&(B=Math.PI*2+B),s&&w>B&&(w-=Math.PI*2),!s&&B>w&&(B-=Math.PI*2)}var O=B-w;if(Math.abs(O)>v){var _=B,Q=f,L=g;B=w+v*(s&&B>w?1:-1),f=b+h*Math.cos(B),g=E+d*Math.sin(B),y=_w(f,g,h,d,i,0,s,Q,L,[B,_,b,E])}O=B-w;var k=Math.cos(w),U=Math.sin(w),D=Math.cos(B),j=Math.sin(B),X=Math.tan(O/4),W=4/3*h*X,Y=4/3*d*X,se=[c,u],te=[c+W*U,u-Y*k],ne=[f+W*j,g-Y*D],Le=[f,g];if(te[0]=2*se[0]-te[0],te[1]=2*se[1]-te[1],l)return te.concat(ne,Le,y);y=te.concat(ne,Le,y);for(var ke=[],Ue=0,ct=y.length;Ue<ct;Ue+=1)ke[Ue]=Ue%2?Xl(y[Ue-1],y[Ue],p).y:Xl(y[Ue],y[Ue+1],p).x;return ke}function TR(r,e,t,n,i,a){var s=.3333333333333333,o=2/3;return[s*r+o*t,s*e+o*n,s*i+o*t,s*a+o*n,i,a]}function oa(r,e,t){var n=r[0],i=r[1],a=e[0],s=e[1];return[n+(a-n)*t,i+(s-i)*t]}var Bb=function(r,e,t,n){var i=.5,a=oa([r,e],[t,n],i);return oe(oe([],a,!0),[t,n,t,n],!1)};function MR(r,e){var t=r[0],n=r.slice(1).map(Number),i=n[0],a=n[1],s,o=e.x1,A=e.y1,l=e.x,c=e.y;switch("TQ".includes(t)||(e.qx=null,e.qy=null),t){case"M":return e.x=i,e.y=a,r;case"A":return s=[o,A].concat(n),["C"].concat(_w(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8],s[9]));case"Q":return e.qx=i,e.qy=a,s=[o,A].concat(n),["C"].concat(TR(s[0],s[1],s[2],s[3],s[4],s[5]));case"L":return["C"].concat(Bb(o,A,i,a));case"Z":return o===l&&A===c?["C",o,A,l,c,l,c]:["C"].concat(Bb(o,A,l,c))}return r}function r1(r,e){if(e===void 0&&(e=!1),FR(r)){var t=[].concat(r);return e?[t,[]]:t}for(var n=Wu(r),i=H({},xI),a=[],s="",o=n.length,A,l,c=[],u=0;u<o;u+=1){n[u]&&(s=n[u][0]),a[u]=s;var h=MR(n[u],i);n[u]=h,gR(n,a,u),o=n.length,s==="Z"&&c.push(u),A=n[u],l=A.length,i.x1=+A[l-2],i.y1=+A[l-1],i.x2=+A[l-4]||i.x1,i.y2=+A[l-3]||i.y1}return e?[n,c]:n}function OR(r){return r.map(function(e){return Array.isArray(e)?[].concat(e):e})}function IR(r){var e=r.slice(1).map(function(t,n,i){return n?i[n-1].slice(-2).concat(t.slice(1)):r[0].slice(1).concat(t.slice(1))}).map(function(t){return t.map(function(n,i){return t[t.length-i-2*(1-i%2)]})}).reverse();return[["M"].concat(e[0].slice(0,2))].concat(e.map(function(t){return["C"].concat(t.slice(2))}))}function Pn(r,e){return Math.sqrt((r[0]-e[0])*(r[0]-e[0])+(r[1]-e[1])*(r[1]-e[1]))}function i1(r,e,t,n,i){var a=Pn([r,e],[t,n]),s={x:0,y:0};if(typeof i=="number")if(i<=0)s={x:r,y:e};else if(i>=a)s={x:t,y:n};else{var o=oa([r,e],[t,n],i/a),A=o[0],l=o[1];s={x:A,y:l}}return{length:a,point:s,min:{x:Math.min(r,t),y:Math.min(e,n)},max:{x:Math.max(r,t),y:Math.max(e,n)}}}function bb(r,e){var t=r.x,n=r.y,i=e.x,a=e.y,s=t*i+n*a,o=Math.sqrt((Math.pow(t,2)+Math.pow(n,2))*(Math.pow(i,2)+Math.pow(a,2))),A=t*a-n*i<0?-1:1,l=A*Math.acos(s/o);return l}function _R(r,e,t,n,i,a,s,o,A,l){var c=Math.abs,u=Math.sin,h=Math.cos,d=Math.sqrt,f=Math.PI,g=c(t),v=c(n),p=(i%360+360)%360,y=p*(f/180);if(r===o&&e===A)return{x:r,y:e};if(g===0||v===0)return i1(r,e,o,A,l).point;var m=(r-o)/2,w=(e-A)/2,B={x:h(y)*m+u(y)*w,y:-u(y)*m+h(y)*w},b=Math.pow(B.x,2)/Math.pow(g,2)+Math.pow(B.y,2)/Math.pow(v,2);b>1&&(g*=d(b),v*=d(b));var E=Math.pow(g,2)*Math.pow(v,2)-Math.pow(g,2)*Math.pow(B.y,2)-Math.pow(v,2)*Math.pow(B.x,2),x=Math.pow(g,2)*Math.pow(B.y,2)+Math.pow(v,2)*Math.pow(B.x,2),S=E/x;S=S<0?0:S;var C=(a!==s?1:-1)*d(S),F={x:C*(g*B.y/v),y:C*(-(v*B.x)/g)},M={x:h(y)*F.x-u(y)*F.y+(r+o)/2,y:u(y)*F.x+h(y)*F.y+(e+A)/2},T={x:(B.x-F.x)/g,y:(B.y-F.y)/v},O=bb({x:1,y:0},T),_={x:(-B.x-F.x)/g,y:(-B.y-F.y)/v},Q=bb(T,_);!s&&Q>0?Q-=2*f:s&&Q<0&&(Q+=2*f),Q%=2*f;var L=O+Q*l,k=g*h(L),U=v*u(L),D={x:h(y)*k-u(y)*U+M.x,y:u(y)*k+h(y)*U+M.y};return D}function kR(r,e,t,n,i,a,s,o,A,l,c){var u,h=c.bbox,d=h===void 0?!0:h,f=c.length,g=f===void 0?!0:f,v=c.sampleSize,p=v===void 0?30:v,y=typeof l=="number",m=r,w=e,B=0,b=[m,w,B],E=[m,w],x=0,S={x:0,y:0},C=[{x:m,y:w}];y&&l<=0&&(S={x:m,y:w});for(var F=0;F<=p;F+=1){if(x=F/p,u=_R(r,e,t,n,i,a,s,o,A,x),m=u.x,w=u.y,d&&C.push({x:m,y:w}),g&&(B+=Pn(E,[m,w])),E=[m,w],y&&B>=l&&l>b[2]){var M=(B-l)/(B-b[2]);S={x:E[0]*(1-M)+b[0]*M,y:E[1]*(1-M)+b[1]*M}}b=[m,w,B]}return y&&l>=B&&(S={x:o,y:A}),{length:B,point:S,min:{x:Math.min.apply(null,C.map(function(T){return T.x})),y:Math.min.apply(null,C.map(function(T){return T.y}))},max:{x:Math.max.apply(null,C.map(function(T){return T.x})),y:Math.max.apply(null,C.map(function(T){return T.y}))}}}function LR(r,e,t,n,i,a,s,o,A){var l=1-A;return{x:Math.pow(l,3)*r+3*Math.pow(l,2)*A*t+3*l*Math.pow(A,2)*i+Math.pow(A,3)*s,y:Math.pow(l,3)*e+3*Math.pow(l,2)*A*n+3*l*Math.pow(A,2)*a+Math.pow(A,3)*o}}function TI(r,e,t,n,i,a,s,o,A,l){var c,u=l.bbox,h=u===void 0?!0:u,d=l.length,f=d===void 0?!0:d,g=l.sampleSize,v=g===void 0?10:g,p=typeof A=="number",y=r,m=e,w=0,B=[y,m,w],b=[y,m],E=0,x={x:0,y:0},S=[{x:y,y:m}];p&&A<=0&&(x={x:y,y:m});for(var C=0;C<=v;C+=1){if(E=C/v,c=LR(r,e,t,n,i,a,s,o,E),y=c.x,m=c.y,h&&S.push({x:y,y:m}),f&&(w+=Pn(b,[y,m])),b=[y,m],p&&w>=A&&A>B[2]){var F=(w-A)/(w-B[2]);x={x:b[0]*(1-F)+B[0]*F,y:b[1]*(1-F)+B[1]*F}}B=[y,m,w]}return p&&A>=w&&(x={x:s,y:o}),{length:w,point:x,min:{x:Math.min.apply(null,S.map(function(M){return M.x})),y:Math.min.apply(null,S.map(function(M){return M.y}))},max:{x:Math.max.apply(null,S.map(function(M){return M.x})),y:Math.max.apply(null,S.map(function(M){return M.y}))}}}function QR(r,e,t,n,i,a,s){var o=1-s;return{x:Math.pow(o,2)*r+2*o*s*t+Math.pow(s,2)*i,y:Math.pow(o,2)*e+2*o*s*n+Math.pow(s,2)*a}}function NR(r,e,t,n,i,a,s,o){var A,l=o.bbox,c=l===void 0?!0:l,u=o.length,h=u===void 0?!0:u,d=o.sampleSize,f=d===void 0?10:d,g=typeof s=="number",v=r,p=e,y=0,m=[v,p,y],w=[v,p],B=0,b={x:0,y:0},E=[{x:v,y:p}];g&&s<=0&&(b={x:v,y:p});for(var x=0;x<=f;x+=1){if(B=x/f,A=QR(r,e,t,n,i,a,B),v=A.x,p=A.y,c&&E.push({x:v,y:p}),h&&(y+=Pn(w,[v,p])),w=[v,p],g&&y>=s&&s>m[2]){var S=(y-s)/(y-m[2]);b={x:w[0]*(1-S)+m[0]*S,y:w[1]*(1-S)+m[1]*S}}m=[v,p,y]}return g&&s>=y&&(b={x:i,y:a}),{length:y,point:b,min:{x:Math.min.apply(null,E.map(function(C){return C.x})),y:Math.min.apply(null,E.map(function(C){return C.y}))},max:{x:Math.max.apply(null,E.map(function(C){return C.x})),y:Math.max.apply(null,E.map(function(C){return C.y}))}}}function MI(r,e,t){for(var n,i,a,s,o,A,l=Wu(r),c=typeof e=="number",u,h=[],d,f=0,g=0,v=0,p=0,y,m=[],w=[],B=0,b={x:0,y:0},E=b,x=b,S=b,C=0,F=0,M=l.length;F<M;F+=1)y=l[F],d=y[0],u=d==="M",h=u?h:[f,g].concat(y.slice(1)),u?(v=y[1],p=y[2],b={x:v,y:p},E=b,B=0,c&&e<.001&&(S=b)):d==="L"?(n=i1(h[0],h[1],h[2],h[3],(e||0)-C),B=n.length,b=n.min,E=n.max,x=n.point):d==="A"?(i=kR(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],(e||0)-C,t||{}),B=i.length,b=i.min,E=i.max,x=i.point):d==="C"?(a=TI(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],(e||0)-C,t||{}),B=a.length,b=a.min,E=a.max,x=a.point):d==="Q"?(s=NR(h[0],h[1],h[2],h[3],h[4],h[5],(e||0)-C,t||{}),B=s.length,b=s.min,E=s.max,x=s.point):d==="Z"&&(h=[f,g,v,p],o=i1(h[0],h[1],h[2],h[3],(e||0)-C),B=o.length,b=o.min,E=o.max,x=o.point),c&&C<e&&C+B>=e&&(S=x),w.push(E),m.push(b),C+=B,A=d!=="Z"?y.slice(-2):[v,p],f=A[0],g=A[1];return c&&e>=C&&(S={x:f,y:g}),{length:C,point:S,min:{x:Math.min.apply(null,m.map(function(T){return T.x})),y:Math.min.apply(null,m.map(function(T){return T.y}))},max:{x:Math.max.apply(null,w.map(function(T){return T.x})),y:Math.max.apply(null,w.map(function(T){return T.y}))}}}function UR(r,e){return MI(r,void 0,H(H({},e),{bbox:!1,length:!0})).length}function PR(r){var e=r.length,t=e-1;return r.map(function(n,i){return r.map(function(a,s){var o=i+s,A;return s===0||r[o]&&r[o][0]==="M"?(A=r[o],["M"].concat(A.slice(-2))):(o>=e&&(o-=t),r[o])})})}function RR(r,e){var t=r.length-1,n=[],i=0,a=0,s=PR(r);return s.forEach(function(o,A){r.slice(1).forEach(function(l,c){a+=Pn(r[(A+c)%t].slice(-2),e[c%t].slice(-2))}),n[A]=a,a=0}),i=n.indexOf(Math.min.apply(null,n)),s[i]}function DR(r,e,t,n,i,a,s,o){return 3*((o-e)*(t+i)-(s-r)*(n+a)+n*(r-i)-t*(e-a)+o*(i+r/3)-s*(a+e/3))/20}function HR(r){var e=0,t=0,n=0;return r1(r).map(function(i){var a;switch(i[0]){case"M":return e=i[1],t=i[2],0;default:var s=i.slice(1),o=s[0],A=s[1],l=s[2],c=s[3],u=s[4],h=s[5];return n=DR(e,t,o,A,l,c,u,h),a=i.slice(-2),e=a[0],t=a[1],n}}).reduce(function(i,a){return i+a},0)}function Eb(r){return HR(r)>=0}function GR(r,e,t){return MI(r,e,H(H({},t),{bbox:!1,length:!0})).point}var KR=50;function zR(r,e){e===void 0&&(e=.5);var t=r.slice(0,2),n=r.slice(2,4),i=r.slice(4,6),a=r.slice(6,8),s=oa(t,n,e),o=oa(n,i,e),A=oa(i,a,e),l=oa(s,o,e),c=oa(o,A,e),u=oa(l,c,e);return[["C"].concat(s,l,u),["C"].concat(c,A,a)]}function xb(r){return r.map(function(e,t,n){var i=t&&n[t-1].slice(-2).concat(e.slice(1)),a=t?TI(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],{bbox:!1}).length:0,s;return t?s=a?zR(i):[e,e]:s=[e],{s:e,ss:s,l:a}})}function OI(r,e,t,n){if(n===void 0&&(n=0),n>KR)return console.warn("Maximum recursion depth reached in equalizeSegments"),[r,e];var i=xb(r),a=xb(e),s=i.length,o=a.length,A=i.filter(function(p){return p.l}).length,l=a.filter(function(p){return p.l}).length,c=i.filter(function(p){return p.l}).reduce(function(p,y){var m=y.l;return p+m},0)/A||0,u=a.filter(function(p){return p.l}).reduce(function(p,y){var m=y.l;return p+m},0)/l||0,h=t||Math.max(s,o),d=[c,u],f=[h-s,h-o],g=0,v=[i,a].map(function(p,y){return p.l===h?p.map(function(m){return m.s}):p.map(function(m,w){return g=w&&f[y]&&m.l>=d[y],f[y]-=g?1:0,g?m.ss:[m.s]}).flat()});return v[0].length===v[1].length?v:OI(v[0],v[1],h,n+1)}function a1(r){var e=document.createElement("div");e.innerHTML=r;var t=e.childNodes[0];return t&&e.contains(t)&&e.removeChild(t),t}function VR(r,e){for(;!{}.hasOwnProperty.call(r,e)&&(r=Mo(r))!==null;);return r}function s1(){return s1=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(r,e,t){var n=VR(r,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?r:t):i.value}},s1.apply(null,arguments)}function qu(r,e,t,n){var i=s1(Mo(r.prototype),e,t);return typeof i=="function"?function(a){return i.apply(t,a)}:i}/*!
 * @antv/g-math
 * @description Geometry util
 * @version 3.1.0
 * @date 12/22/2025, 3:02:36 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */function Ki(r,e,t,n){var i=r-t,a=e-n;return Math.sqrt(i*i+a*a)}function II(r,e){var t=Math.min.apply(Math,Fe(r)),n=Math.min.apply(Math,Fe(e)),i=Math.max.apply(Math,Fe(r)),a=Math.max.apply(Math,Fe(e));return{x:t,y:n,width:i-t,height:a-n}}function jR(r,e,t){return Math.atan(-e/r*Math.tan(t))}function $R(r,e,t){return Math.atan(e/(r*Math.tan(t)))}function WR(r,e,t,n,i,a){return t*Math.cos(i)*Math.cos(a)-n*Math.sin(i)*Math.sin(a)+r}function qR(r,e,t,n,i,a){return t*Math.sin(i)*Math.cos(a)+n*Math.cos(i)*Math.sin(a)+e}function YR(r,e,t,n,i,a,s){for(var o=jR(t,n,i),A=1/0,l=-1/0,c=[a,s],u=-Math.PI*2;u<=Math.PI*2;u+=Math.PI){var h=o+u;a<s?a<h&&h<s&&c.push(h):s<h&&h<a&&c.push(h)}for(var d=0;d<c.length;d++){var f=WR(r,e,t,n,i,c[d]);f<A&&(A=f),f>l&&(l=f)}for(var g=$R(t,n,i),v=1/0,p=-1/0,y=[a,s],m=-Math.PI*2;m<=Math.PI*2;m+=Math.PI){var w=g+m;a<s?a<w&&w<s&&y.push(w):s<w&&w<a&&y.push(w)}for(var B=0;B<y.length;B++){var b=qR(r,e,t,n,i,y[B]);b<v&&(v=b),b>p&&(p=b)}return{x:A,y:v,width:l-A,height:p-v}}var XR=1e-4;function _I(r,e,t,n,i,a){var s=-1,o=1/0,A=[t,n],l=20;a&&a>200&&(l=a/10);for(var c=1/l,u=c/10,h=0;h<=l;h++){var d=h*c,f=[i.apply(void 0,Fe(r.concat([d]))),i.apply(void 0,Fe(e.concat([d])))],g=Ki(A[0],A[1],f[0],f[1]);g<o&&(s=d,o=g)}if(s===0)return{x:r[0],y:e[0]};if(s===1){var v=r.length;return{x:r[v-1],y:e[v-1]}}o=1/0;for(var p=0;p<32&&!(u<XR);p++){var y=s-u,m=s+u,w=[i.apply(void 0,Fe(r.concat([y]))),i.apply(void 0,Fe(e.concat([y])))],B=Ki(A[0],A[1],w[0],w[1]);if(y>=0&&B<o)s=y,o=B;else{var b=[i.apply(void 0,Fe(r.concat([m]))),i.apply(void 0,Fe(e.concat([m])))],E=Ki(A[0],A[1],b[0],b[1]);m<=1&&E<o?(s=m,o=E):u*=.5}}return{x:i.apply(void 0,Fe(r.concat([s]))),y:i.apply(void 0,Fe(e.concat([s])))}}function kI(r,e,t,n){return Ki(r,e,t,n)}function LI(r,e,t,n,i){return{x:(1-i)*r+i*t,y:(1-i)*e+i*n}}function ZR(r,e,t,n,i,a){var s=[t-r,n-e];if(DP(s,[0,0]))return Math.sqrt((i-r)*(i-r)+(a-e)*(a-e));var o=[-s[1],s[0]];PP(o,o);var A=[i-r,a-e];return Math.abs(RP(A,o))}function o1(r,e,t,n,i){var a=1-i;return a*a*a*r+3*e*i*a*a+3*t*i*i*a+n*i*i*i}function Cb(r,e,t,n){var i=-3*r+9*e-9*t+3*n,a=6*r-12*e+6*t,s=3*e-3*r,o=[],A,l,c;if(Bo(i,0))Bo(a,0)||(A=-s/a,A>=0&&A<=1&&o.push(A));else{var u=a*a-4*i*s;Bo(u,0)?o.push(-a/(2*i)):u>0&&(c=Math.sqrt(u),A=(-a+c)/(2*i),l=(-a-c)/(2*i),A>=0&&A<=1&&o.push(A),l>=0&&l<=1&&o.push(l))}return o}function JR(r,e,t,n,i,a,s,o){for(var A=[r,s],l=[e,o],c=Cb(r,t,i,s),u=Cb(e,n,a,o),h=0;h<c.length;h++)A.push(o1(r,t,i,s,c[h]));for(var d=0;d<u.length;d++)l.push(o1(e,n,a,o,u[d]));return II(A,l)}function eD(r,e,t,n,i,a,s,o,A,l,c){return _I([r,t,i,s],[e,n,a,o],A,l,o1,c)}function Sb(r,e,t,n,i,a,s,o,A,l,c){var u=eD(r,e,t,n,i,a,s,o,A,l,c);return Ki(u.x,u.y,A,l)}function tD(r){if(r.length<2)return 0;for(var e=0,t=0;t<r.length-1;t++){var n=r[t],i=r[t+1];e+=Ki(n[0],n[1],i[0],i[1])}return e}function nD(r){return tD(r)}function A1(r,e,t,n){var i=1-n;return i*i*r+2*n*i*e+n*n*t}function Fb(r,e,t){var n=r+t-2*e;if(Bo(n,0))return[.5];var i=(r-e)/n;return i<=1&&i>=0?[i]:[]}function rD(r,e,t,n,i,a){var s=Fb(r,t,i)[0],o=Fb(e,n,a)[0],A=[r,i],l=[e,a];return s!==void 0&&A.push(A1(r,t,i,s)),o!==void 0&&l.push(A1(e,n,a,o)),II(A,l)}function iD(r,e,t,n,i,a,s,o){return _I([r,t,i],[e,n,a],s,o,A1)}function aD(r,e,t,n,i,a,s,o){var A=iD(r,e,t,n,i,a,s,o);return Ki(A.x,A.y,s,o)}function QI(r,e){this.v=r,this.k=e}function fn(r,e,t,n){var i=Object.defineProperty;try{i({},"",{})}catch{i=0}fn=function(s,o,A,l){function c(u,h){fn(s,u,function(d){return this._invoke(u,h,d)})}o?i?i(s,o,{value:A,enumerable:!l,configurable:!l,writable:!l}):s[o]=A:(c("next",0),c("throw",1),c("return",2))},fn(r,e,t,n)}function kw(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var r,e,t=typeof Symbol=="function"?Symbol:{},n=t.iterator||"@@iterator",i=t.toStringTag||"@@toStringTag";function a(d,f,g,v){var p=f&&f.prototype instanceof o?f:o,y=Object.create(p.prototype);return fn(y,"_invoke",function(m,w,B){var b,E,x,S=0,C=B||[],F=!1,M={p:0,n:0,v:r,a:T,f:T.bind(r,4),d:function(_,Q){return b=_,E=0,x=r,M.n=Q,s}};function T(O,_){for(E=O,x=_,e=0;!F&&S&&!Q&&e<C.length;e++){var Q,L=C[e],k=M.p,U=L[2];O>3?(Q=U===_)&&(x=L[(E=L[4])?5:(E=3,3)],L[4]=L[5]=r):L[0]<=k&&((Q=O<2&&k<L[1])?(E=0,M.v=_,M.n=L[1]):k<U&&(Q=O<3||L[0]>_||_>U)&&(L[4]=O,L[5]=_,M.n=U,E=0))}if(Q||O>1)return s;throw F=!0,_}return function(O,_,Q){if(S>1)throw TypeError("Generator is already running");for(F&&_===1&&T(_,Q),E=_,x=Q;(e=E<2?r:x)||!F;){b||(E?E<3?(E>1&&(M.n=-1),T(E,x)):M.n=x:M.v=x);try{if(S=2,b){if(E||(O="next"),e=b[O]){if(!(e=e.call(b,x)))throw TypeError("iterator result is not an object");if(!e.done)return e;x=e.value,E<2&&(E=0)}else E===1&&(e=b.return)&&e.call(b),E<2&&(x=TypeError("The iterator does not provide a '"+O+"' method"),E=1);b=r}else if((e=(F=M.n<0)?x:m.call(w,M))!==s)break}catch(L){b=r,E=1,x=L}finally{S=1}}return{value:e,done:F}}}(d,g,v),!0),y}var s={};function o(){}function A(){}function l(){}e=Object.getPrototypeOf;var c=[][n]?e(e([][n]())):(fn(e={},n,function(){return this}),e),u=l.prototype=o.prototype=Object.create(c);function h(d){return Object.setPrototypeOf?Object.setPrototypeOf(d,l):(d.__proto__=l,fn(d,i,"GeneratorFunction")),d.prototype=Object.create(u),d}return A.prototype=l,fn(u,"constructor",l),fn(l,"constructor",A),A.displayName="GeneratorFunction",fn(l,i,"GeneratorFunction"),fn(u),fn(u,i,"Generator"),fn(u,n,function(){return this}),fn(u,"toString",function(){return"[object Generator]"}),(kw=function(){return{w:a,m:h}})()}function Yu(r,e){function t(i,a,s,o){try{var A=r[i](a),l=A.value;return l instanceof QI?e.resolve(l.v).then(function(c){t("next",c,s,o)},function(c){t("throw",c,s,o)}):e.resolve(l).then(function(c){A.value=c,s(A)},function(c){return t("throw",c,s,o)})}catch(c){o(c)}}var n;this.next||(fn(Yu.prototype),fn(Yu.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),fn(this,"_invoke",function(i,a,s){function o(){return new e(function(A,l){t(i,s,A,l)})}return n=n?n.then(o,o):o()},!0)}function NI(r,e,t,n,i){return new Yu(kw().w(r,e,t,n),i||Promise)}function sD(r,e,t,n,i){var a=NI(r,e,t,n,i);return a.next().then(function(s){return s.done?s.value:a.next()})}function oD(r){var e=Object(r),t=[];for(var n in e)t.unshift(n);return function i(){for(;t.length;)if((n=t.pop())in e)return i.value=n,i.done=!1,i;return i.done=!0,i}}function Tb(r){if(r!=null){var e=r[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],t=0;if(e)return e.call(r);if(typeof r.next=="function")return r;if(!isNaN(r.length))return{next:function(){return r&&t>=r.length&&(r=void 0),{value:r&&r[t++],done:!r}}}}throw new TypeError(bs(r)+" is not iterable")}function Xt(){var r=kw(),e=r.m(Xt),t=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function n(s){var o=typeof s=="function"&&s.constructor;return!!o&&(o===t||(o.displayName||o.name)==="GeneratorFunction")}var i={throw:1,return:2,break:3,continue:3};function a(s){var o,A;return function(l){o||(o={stop:function(){return A(l.a,2)},catch:function(){return l.v},abrupt:function(u,h){return A(l.a,i[u],h)},delegateYield:function(u,h,d){return o.resultName=h,A(l.d,Tb(u),d)},finish:function(u){return A(l.f,u)}},A=function(u,h,d){l.p=o.prev,l.n=o.next;try{return u(h,d)}finally{o.next=l.n}}),o.resultName&&(o[o.resultName]=l.v,o.resultName=void 0),o.sent=l.v,o.next=l.n;try{return s.call(this,o)}finally{l.p=o.prev,l.n=o.next}}}return(Xt=function(){return{wrap:function(A,l,c,u){return r.w(a(A),l,c,u&&u.reverse())},isGeneratorFunction:n,mark:r.m,awrap:function(A,l){return new QI(A,l)},AsyncIterator:Yu,async:function(A,l,c,u,h){return(n(l)?NI:sD)(a(A),l,c,u,h)},keys:oD,values:Tb}})()}function Mb(r,e,t,n,i,a,s){try{var o=r[a](s),A=o.value}catch(l){return void t(l)}o.done?e(A):Promise.resolve(A).then(n,i)}function ka(r){return function(){var e=this,t=arguments;return new Promise(function(n,i){var a=r.apply(e,t);function s(A){Mb(a,n,i,s,o,"next",A)}function o(A){Mb(a,n,i,s,o,"throw",A)}s(void 0)})}}function ua(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=Tw(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,s=!0,o=!1;return{s:function(){t=t.call(r)},n:function(){var l=t.next();return s=l.done,l},e:function(l){o=!0,a=l},f:function(){try{s||t.return==null||t.return()}finally{if(o)throw a}}}}function AD(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function fi(r,e){if(r==null)return{};var t,n,i=AD(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}/*!
 * @antv/g-lite
 * @description A core module for rendering engine implements DOM API.
 * @version 2.7.0
 * @date 12/24/2025, 11:55:20 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var P=function(r){return r.GROUP="g",r.FRAGMENT="fragment",r.CIRCLE="circle",r.ELLIPSE="ellipse",r.IMAGE="image",r.RECT="rect",r.LINE="line",r.POLYLINE="polyline",r.POLYGON="polygon",r.TEXT="text",r.PATH="path",r.HTML="html",r.MESH="mesh",r}({}),xu=function(r){return r[r.ZERO=0]="ZERO",r[r.NEGATIVE_ONE=1]="NEGATIVE_ONE",r}({}),Pa=function(){function r(){G(this,r),this.plugins=[]}return K(r,[{key:"addRenderingPlugin",value:function(t){this.plugins.push(t),this.context.renderingPlugins.push(t)}},{key:"removeAllRenderingPlugins",value:function(){var t=this;this.plugins.forEach(function(n){var i=t.context.renderingPlugins.indexOf(n);i>=0&&t.context.renderingPlugins.splice(i,1)})}}])}(),lD=function(){function r(e){G(this,r),this.clipSpaceNearZ=xu.NEGATIVE_ONE,this.plugins=[],this.config=ue({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0,enableRenderingOptimization:!1},e)}return K(r,[{key:"registerPlugin",value:function(t){var n=this.plugins.findIndex(function(i){return i===t});n===-1&&this.plugins.push(t)}},{key:"unregisterPlugin",value:function(t){var n=this.plugins.findIndex(function(i){return i===t});n>-1&&this.plugins.splice(n,1)}},{key:"getPlugins",value:function(){return this.plugins}},{key:"getPlugin",value:function(t){return this.plugins.find(function(n){return n.name===t})}},{key:"getConfig",value:function(){return this.config}},{key:"setConfig",value:function(t){Object.assign(this.config,t)}}])}(),Hf=xa,Vs=ci,cD=FP,uD=SP,Ob=Ku,Gf=gI,tt=function(){function r(){G(this,r),this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return K(r,[{key:"update",value:function(t,n){Vs(this.center,t),Vs(this.halfExtents,n),Gf(this.min,this.center,this.halfExtents),Hf(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(t,n){Hf(this.center,n,t),Ob(this.center,this.center,.5),Gf(this.halfExtents,n,t),Ob(this.halfExtents,this.halfExtents,.5),Vs(this.min,t),Vs(this.max,n)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(t){if(!r.isEmpty(t)){if(r.isEmpty(this)){this.setMinMax(t.getMin(),t.getMax());return}var n=this.center,i=n[0],a=n[1],s=n[2],o=this.halfExtents,A=o[0],l=o[1],c=o[2],u=i-A,h=i+A,d=a-l,f=a+l,g=s-c,v=s+c,p=t.center,y=p[0],m=p[1],w=p[2],B=t.halfExtents,b=B[0],E=B[1],x=B[2],S=y-b,C=y+b,F=m-E,M=m+E,T=w-x,O=w+x;S<u&&(u=S),C>h&&(h=C),F<d&&(d=F),M>f&&(f=M),T<g&&(g=T),O>v&&(v=O),n[0]=(u+h)*.5,n[1]=(d+f)*.5,n[2]=(g+v)*.5,o[0]=(h-u)*.5,o[1]=(f-d)*.5,o[2]=(v-g)*.5,this.min[0]=u,this.min[1]=d,this.min[2]=g,this.max[0]=h,this.max[1]=f,this.max[2]=v}}},{key:"setFromTransformedAABB",value:function(t,n){var i=this.center,a=this.halfExtents,s=t.center,o=t.halfExtents,A=n[0],l=n[4],c=n[8],u=n[1],h=n[5],d=n[9],f=n[2],g=n[6],v=n[10],p=Math.abs(A),y=Math.abs(l),m=Math.abs(c),w=Math.abs(u),B=Math.abs(h),b=Math.abs(d),E=Math.abs(f),x=Math.abs(g),S=Math.abs(v);i[0]=n[12]+A*s[0]+l*s[1]+c*s[2],i[1]=n[13]+u*s[0]+h*s[1]+d*s[2],i[2]=n[14]+f*s[0]+g*s[1]+v*s[2],a[0]=p*o[0]+y*o[1]+m*o[2],a[1]=w*o[0]+B*o[1]+b*o[2],a[2]=E*o[0]+x*o[1]+S*o[2],Gf(this.min,i,a),Hf(this.max,i,a)}},{key:"intersects",value:function(t){var n=this.getMax(),i=this.getMin(),a=t.getMax(),s=t.getMin();return i[0]<=a[0]&&n[0]>=s[0]&&i[1]<=a[1]&&n[1]>=s[1]&&i[2]<=a[2]&&n[2]>=s[2]}},{key:"intersection",value:function(t){if(!this.intersects(t))return null;var n=new r,i=cD([0,0,0],this.getMin(),t.getMin()),a=uD([0,0,0],this.getMax(),t.getMax());return n.setMinMax(i,a),n}},{key:"getNegativeFarPoint",value:function(t){return t.pnVertexFlag===273?Vs([0,0,0],this.min):t.pnVertexFlag===272?[this.min[0],this.min[1],this.max[2]]:t.pnVertexFlag===257?[this.min[0],this.max[1],this.min[2]]:t.pnVertexFlag===256?[this.min[0],this.max[1],this.max[2]]:t.pnVertexFlag===17?[this.max[0],this.min[1],this.min[2]]:t.pnVertexFlag===16?[this.max[0],this.min[1],this.max[2]]:t.pnVertexFlag===1?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]}},{key:"getPositiveFarPoint",value:function(t){return t.pnVertexFlag===273?Vs([0,0,0],this.max):t.pnVertexFlag===272?[this.max[0],this.max[1],this.min[2]]:t.pnVertexFlag===257?[this.max[0],this.min[1],this.max[2]]:t.pnVertexFlag===256?[this.max[0],this.min[1],this.min[2]]:t.pnVertexFlag===17?[this.min[0],this.max[1],this.max[2]]:t.pnVertexFlag===16?[this.min[0],this.max[1],this.min[2]]:t.pnVertexFlag===1?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]}}],[{key:"isEmpty",value:function(t){return!t||t.halfExtents[0]===0&&t.halfExtents[1]===0&&t.halfExtents[2]===0}}])}(),hD=function(){function r(e,t){G(this,r),this.distance=e||0,this.normal=t||Xe(0,1,0),this.updatePNVertexFlag()}return K(r,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(+(this.normal[0]>=0)<<8)+(+(this.normal[1]>=0)<<4)+ +(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(t){return ui(t,this.normal)-this.distance}},{key:"normalize",value:function(){var t=1/vI(this.normal);Ku(this.normal,this.normal,t),this.distance*=t}},{key:"intersectsLine",value:function(t,n,i){var a=this.distanceToPoint(t),s=this.distanceToPoint(n),o=a/(a-s),A=o>=0&&o<=1;return A&&i&&Zm(i,t,n,o),A}}])}(),js=function(r){return r[r.OUTSIDE=4294967295]="OUTSIDE",r[r.INSIDE=0]="INSIDE",r[r.INDETERMINATE=2147483647]="INDETERMINATE",r}({}),dD=function(){function r(e){if(G(this,r),this.planes=[],e)this.planes=e;else for(var t=0;t<6;t++)this.planes.push(new hD)}return K(r,[{key:"extractFromVPMatrix",value:function(t){var n=pe(t,16),i=n[0],a=n[1],s=n[2],o=n[3],A=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],f=n[10],g=n[11],v=n[12],p=n[13],y=n[14],m=n[15];pn(this.planes[0].normal,o-i,u-A,g-h),this.planes[0].distance=m-v,pn(this.planes[1].normal,o+i,u+A,g+h),this.planes[1].distance=m+v,pn(this.planes[2].normal,o+a,u+l,g+d),this.planes[2].distance=m+p,pn(this.planes[3].normal,o-a,u-l,g-d),this.planes[3].distance=m-p,pn(this.planes[4].normal,o-s,u-c,g-f),this.planes[4].distance=m-y,pn(this.planes[5].normal,o+s,u+c,g+f),this.planes[5].distance=m+y,this.planes.forEach(function(w){w.normalize(),w.updatePNVertexFlag()})}}])}(),rn=function(){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;G(this,r),this.x=0,this.y=0,this.x=e,this.y=t}return K(r,[{key:"clone",value:function(){return new r(this.x,this.y)}},{key:"copyFrom",value:function(t){this.x=t.x,this.y=t.y}}])}(),ko=function(){function r(e,t,n,i){G(this,r),this.x=e,this.y=t,this.width=n,this.height=i,this.left=e,this.right=e+n,this.top=t,this.bottom=t+i}return K(r,[{key:"toJSON",value:function(){}}],[{key:"fromRect",value:function(t){return new r(t.x,t.y,t.width,t.height)}},{key:"applyTransform",value:function(t,n){var i=vA(t.x,t.y,0,1),a=vA(t.x+t.width,t.y,0,1),s=vA(t.x,t.y+t.height,0,1),o=vA(t.x+t.width,t.y+t.height,0,1),A=hi(),l=hi(),c=hi(),u=hi();Ri(A,i,n),Ri(l,a,n),Ri(c,s,n),Ri(u,o,n);var h=Math.min(A[0],l[0],c[0],u[0]),d=Math.min(A[1],l[1],c[1],u[1]),f=Math.max(A[0],l[0],c[0],u[0]),g=Math.max(A[1],l[1],c[1],u[1]);return r.fromRect({x:h,y:d,width:f-h,height:g-d})}}])}(),Ve="Method not implemented.",$s="Use document.documentElement instead.",fD="Cannot append a destroyed element.";function bo(r){return r===void 0?0:r>360||r<-360?r%360:r}var Kf=xe();function En(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;return Array.isArray(r)&&r.length===3?n?_i(r):ci(Kf,r):Z(r)?n?Xe(r,e,t):pn(Kf,r,e,t):n?Xe(r[0],r[1]||e,r[2]||t):pn(Kf,r[0],r[1]||e,r[2]||t)}var gD=Math.PI/180;function De(r){return r*gD}var vD=180/Math.PI;function Rn(r){return r*vD}function pD(r){return 360*r}var Xu=Math.PI/2;function yD(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],s=t*t,o=n*n,A=i*i,l=a*a,c=s+o+A+l,u=t*a-n*i;return u>.499995*c?(r[0]=Xu,r[1]=2*Math.atan2(n,t),r[2]=0):u<-.499995*c?(r[0]=-Xu,r[1]=2*Math.atan2(n,t),r[2]=0):(r[0]=Math.asin(2*(t*i-a*n)),r[1]=Math.atan2(2*(t*a+n*i),1-2*(A+l)),r[2]=Math.atan2(2*(t*n+i*a),1-2*(o+A))),r}function mD(r,e){var t,n,i=Io(xe(),e),a=pe(i,3),s=a[0],o=a[1],A=a[2],l=Math.asin(-e[2]/s);return l<Xu?l>-Xu?(t=Math.atan2(e[6]/o,e[10]/A),n=Math.atan2(e[1]/s,e[0]/s)):(n=0,t=-Math.atan2(e[4]/o,e[5]/o)):(n=0,t=Math.atan2(e[4]/o,e[5]/o)),r[0]=t,r[1]=l,r[2]=n,r}function zf(r,e){return e.length===16?mD(r,e):yD(r,e)}function wD(r,e,t,n,i){var a=Math.cos(r),s=Math.sin(r);return aP(n*a,i*s,0,-n*s,i*a,0,e,t,1)}function BD(r,e,t,n,i,a,s){var o=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,A=2*a,l=t-e,c=n-i,u=A/l,h=A/c,d=(t+e)/l,f=(n+i)/c,g,v,p=s-a,y=s*a;return o?(g=-s/p,v=-y/p):(g=-(s+a)/p,v=-2*y/p),r[0]=u,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=h,r[6]=0,r[7]=0,r[8]=d,r[9]=f,r[10]=g,r[11]=-1,r[12]=0,r[13]=0,r[14]=v,r[15]=0,r}function Ib(r){var e=r[0],t=r[1],n=r[3],i=r[4],a=Math.sqrt(e*e+t*t),s=Math.sqrt(n*n+i*i),o=e*i-t*n;if(o<0&&(e<i?a=-a:s=-s),a){var A=1/a;e*=A,t*=A}if(s){var l=1/s;n*=l,i*=l}var c=Math.atan2(t,e),u=Rn(c);return[r[6],r[7],a,s,u]}var ni=Ye(),kr=Ye(),tA=hi(),ce=[xe(),xe(),xe()],_b=xe();function bD(r,e,t,n,i,a){if(!ED(ni,r)||(Oo(kr,ni),kr[3]=0,kr[7]=0,kr[11]=0,kr[15]=1,Math.abs(eI(kr))<1e-8))return!1;var s=ni[3],o=ni[7],A=ni[11],l=ni[12],c=ni[13],u=ni[14],h=ni[15];if(s!==0||o!==0||A!==0){tA[0]=s,tA[1]=o,tA[2]=A,tA[3]=h;var d=li(kr,kr);if(!d)return!1;JO(kr,kr),Ri(i,tA,kr)}else i[0]=i[1]=i[2]=0,i[3]=1;if(e[0]=l,e[1]=c,e[2]=u,xD(ce,ni),t[0]=Qi(ce[0]),ds(ce[0],ce[0]),n[0]=ui(ce[0],ce[1]),Vf(ce[1],ce[1],ce[0],1,-n[0]),t[1]=Qi(ce[1]),ds(ce[1],ce[1]),n[0]/=t[1],n[1]=ui(ce[0],ce[2]),Vf(ce[2],ce[2],ce[0],1,-n[1]),n[2]=ui(ce[1],ce[2]),Vf(ce[2],ce[2],ce[1],1,-n[2]),t[2]=Qi(ce[2]),ds(ce[2],ce[2]),n[1]/=t[2],n[2]/=t[2],bu(_b,ce[1],ce[2]),ui(ce[0],_b)<0)for(var f=0;f<3;f++)t[f]*=-1,ce[f][0]*=-1,ce[f][1]*=-1,ce[f][2]*=-1;return a[0]=.5*Math.sqrt(Math.max(1+ce[0][0]-ce[1][1]-ce[2][2],0)),a[1]=.5*Math.sqrt(Math.max(1-ce[0][0]+ce[1][1]-ce[2][2],0)),a[2]=.5*Math.sqrt(Math.max(1-ce[0][0]-ce[1][1]+ce[2][2],0)),a[3]=.5*Math.sqrt(Math.max(1+ce[0][0]+ce[1][1]+ce[2][2],0)),ce[2][1]>ce[1][2]&&(a[0]=-a[0]),ce[0][2]>ce[2][0]&&(a[1]=-a[1]),ce[1][0]>ce[0][1]&&(a[2]=-a[2]),!0}function ED(r,e){var t=e[15];if(t===0)return!1;for(var n=1/t,i=0;i<16;i++)r[i]=e[i]*n;return!0}function xD(r,e){r[0][0]=e[0],r[0][1]=e[1],r[0][2]=e[2],r[1][0]=e[4],r[1][1]=e[5],r[1][2]=e[6],r[2][0]=e[8],r[2][1]=e[9],r[2][2]=e[10]}function Vf(r,e,t,n,i){r[0]=e[0]*n+t[0]*i,r[1]=e[1]*n+t[1]*i,r[2]=e[2]*n+t[2]*i}var ze=function(r){return r[r.ORBITING=0]="ORBITING",r[r.EXPLORING=1]="EXPLORING",r[r.TRACKING=2]="TRACKING",r}({}),l1=function(r){return r[r.DEFAULT=0]="DEFAULT",r[r.ROTATIONAL=1]="ROTATIONAL",r[r.TRANSLATIONAL=2]="TRANSLATIONAL",r[r.CINEMATIC=3]="CINEMATIC",r}({}),gr=function(r){return r[r.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",r[r.PERSPECTIVE=1]="PERSPECTIVE",r}({}),UI={UPDATED:"updated"},kb=2e-4,PI=function(){function r(){G(this,r),this.clipSpaceNearZ=xu.NEGATIVE_ONE,this.eventEmitter=new qO,this.matrix=Ye(),this.right=Xe(1,0,0),this.up=Xe(0,1,0),this.forward=Xe(0,0,1),this.position=Xe(0,0,1),this.focalPoint=Xe(0,0,0),this.distanceVector=Xe(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=Ye(),this.projectionMatrixInverse=Ye(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=ze.EXPLORING,this.trackingMode=l1.DEFAULT,this.projectionMode=gr.PERSPECTIVE,this.frustum=new dD,this.orthoMatrix=Ye()}return K(r,[{key:"isOrtho",value:function(){return this.projectionMode===gr.ORTHOGRAPHIC}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.jitteredProjectionMatrix||this.projectionMatrix}},{key:"getPerspectiveInverse",value:function(){return this.projectionMatrixInverse}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getDollyingStep",value:function(){return this.dollyingStep}},{key:"getNear",value:function(){return this.near}},{key:"getFar",value:function(){return this.far}},{key:"getZoom",value:function(){return this.zoom}},{key:"getOrthoMatrix",value:function(){return this.orthoMatrix}},{key:"getView",value:function(){return this.view}},{key:"setEnableUpdate",value:function(t){this.enableUpdate=t}},{key:"setType",value:function(t,n){return this.type=t,this.type===ze.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===ze.TRACKING&&n!==void 0&&this.setTrackingMode(n),this}},{key:"setProjectionMode",value:function(t){return this.projectionMode=t,this}},{key:"setTrackingMode",value:function(t){if(this.type!==ze.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this}},{key:"setWorldRotation",value:function(t){return this.rotateWorld=t,this._getAngles(),this}},{key:"getViewTransform",value:function(){return li(Ye(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"jitterProjectionMatrix",value:function(t,n){var i=ca(Ye(),[t,n,0]);this.jitteredProjectionMatrix=yn(Ye(),i,this.projectionMatrix)}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0}},{key:"setMatrix",value:function(t){return this.matrix=t,this._update(),this}},{key:"setProjectionMatrix",value:function(t){this.projectionMatrix=t}},{key:"setFov",value:function(t){return this.setPerspective(this.near,this.far,t,this.aspect),this}},{key:"setAspect",value:function(t){return this.setPerspective(this.near,this.far,this.fov,t),this}},{key:"setNear",value:function(t){return this.projectionMode===gr.PERSPECTIVE?this.setPerspective(t,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,t,this.far),this}},{key:"setFar",value:function(t){return this.projectionMode===gr.PERSPECTIVE?this.setPerspective(this.near,t,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,t),this}},{key:"setViewOffset",value:function(t,n,i,a,s,o){return this.aspect=t/n,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=a,this.view.width=s,this.view.height=o,this.projectionMode===gr.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===gr.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setZoom",value:function(t){return this.zoom=t,this.projectionMode===gr.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===gr.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this}},{key:"setZoomByViewportPoint",value:function(t,n){var i=this.canvas.viewport2Canvas({x:n[0],y:n[1]}),a=i.x,s=i.y,o=this.roll;this.rotate(0,0,-o),this.setPosition(a,s),this.setFocalPoint(a,s),this.setZoom(t),this.rotate(0,0,o);var A=this.canvas.viewport2Canvas({x:n[0],y:n[1]}),l=A.x,c=A.y,u=Xe(l-a,c-s,0),h=ui(u,this.right)/Qi(this.right),d=ui(u,this.up)/Qi(this.up),f=this.getPosition(),g=pe(f,2),v=g[0],p=g[1],y=this.getFocalPoint(),m=pe(y,2),w=m[0],B=m[1];return this.setPosition(v-h,p-d),this.setFocalPoint(w-h,B-d),this}},{key:"setPerspective",value:function(t,n,i,a){var s;this.projectionMode=gr.PERSPECTIVE,this.fov=i,this.near=t,this.far=n,this.aspect=a;var o=this.near*Math.tan(De(.5*this.fov))/this.zoom,A=2*o,l=this.aspect*A,c=-.5*l;if((s=this.view)!==null&&s!==void 0&&s.enabled){var u=this.view.fullWidth,h=this.view.fullHeight;c+=this.view.offsetX*l/u,o-=this.view.offsetY*A/h,l*=this.view.width/u,A*=this.view.height/h}return BD(this.projectionMatrix,c,c+l,o-A,o,t,this.far,this.clipSpaceNearZ===xu.ZERO),li(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this}},{key:"setOrthographic",value:function(t,n,i,a,s,o){var A;this.projectionMode=gr.ORTHOGRAPHIC,this.rright=n,this.left=t,this.top=i,this.bottom=a,this.near=s,this.far=o;var l=(this.rright-this.left)/(2*this.zoom),c=(this.top-this.bottom)/(2*this.zoom),u=(this.rright+this.left)/2,h=(this.top+this.bottom)/2,d=u-l,f=u+l,g=h+c,v=h-c;if((A=this.view)!==null&&A!==void 0&&A.enabled){var p=(this.rright-this.left)/this.view.fullWidth/this.zoom,y=(this.top-this.bottom)/this.view.fullHeight/this.zoom;d+=p*this.view.offsetX,f=d+p*this.view.width,g-=y*this.view.offsetY,v=g-y*this.view.height}return this.clipSpaceNearZ===xu.NEGATIVE_ONE?cI(this.projectionMatrix,d,f,g,v,s,o):uI(this.projectionMatrix,d,f,g,v,s,o),li(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this}},{key:"setPosition",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.position[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.position[2],a=En(t,n,i);return this._setPosition(a),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this}},{key:"setFocalPoint",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.focalPoint[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.focalPoint[2],a=Xe(0,1,0);if(this.focalPoint=En(t,n,i),this.trackingMode===l1.CINEMATIC){var s=Xm(xe(),this.focalPoint,this.position);t=s[0],n=s[1],i=s[2];var o=Qi(s),A=Rn(Math.asin(n/o)),l=90+Rn(Math.atan2(i,t)),c=Ye();rI(c,c,De(l)),nI(c,c,De(A)),a=mn(xe(),[0,1,0],c)}return li(this.matrix,hI(Ye(),this.position,this.focalPoint,a)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this}},{key:"getDistance",value:function(){return this.distance}},{key:"getDistanceVector",value:function(){return this.distanceVector}},{key:"setDistance",value:function(t){if(this.distance===t||t<0)return this;this.distance=t,this.distance<kb&&(this.distance=kb),this.dollyingStep=this.distance/100;var n=xe();t=this.distance;var i=this.forward,a=this.focalPoint;return n[0]=t*i[0]+a[0],n[1]=t*i[1]+a[1],n[2]=t*i[2]+a[2],this._setPosition(n),this.triggerUpdate(),this}},{key:"setMaxDistance",value:function(t){return this.maxDistance=t,this}},{key:"setMinDistance",value:function(t){return this.minDistance=t,this}},{key:"setAzimuth",value:function(t){return this.azimuth=bo(t),this.computeMatrix(),this._getAxes(),this.type===ze.ORBITING||this.type===ze.EXPLORING?this._getPosition():this.type===ze.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(t){return this.elevation=bo(t),this.computeMatrix(),this._getAxes(),this.type===ze.ORBITING||this.type===ze.EXPLORING?this._getPosition():this.type===ze.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getElevation",value:function(){return this.elevation}},{key:"setRoll",value:function(t){return this.roll=bo(t),this.computeMatrix(),this._getAxes(),this.type===ze.ORBITING||this.type===ze.EXPLORING?this._getPosition():this.type===ze.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getRoll",value:function(){return this.roll}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()}},{key:"computeMatrix",value:function(){var t=da(Lt(),[0,0,1],De(this.roll));Ia(this.matrix);var n=da(Lt(),[1,0,0],De((this.rotateWorld&&this.type!==ze.TRACKING||this.type===ze.TRACKING?1:-1)*this.elevation)),i=da(Lt(),[0,1,0],De((this.rotateWorld&&this.type!==ze.TRACKING||this.type===ze.TRACKING?1:-1)*this.azimuth)),a=Ca(Lt(),i,n);a=Ca(Lt(),a,t);var s=Mw(Ye(),a);this.type===ze.ORBITING||this.type===ze.EXPLORING?(wo(this.matrix,this.matrix,this.focalPoint),yn(this.matrix,this.matrix,s),wo(this.matrix,this.matrix,[0,0,this.distance])):this.type===ze.TRACKING&&(wo(this.matrix,this.matrix,this.position),yn(this.matrix,this.matrix,s))}},{key:"_setPosition",value:function(t,n,i){this.position=En(t,n,i);var a=this.matrix;a[12]=this.position[0],a[13]=this.position[1],a[14]=this.position[2],a[15]=1,this._getOrthoMatrix()}},{key:"_getAxes",value:function(){ci(this.right,En(Ri(hi(),[1,0,0,0],this.matrix))),ci(this.up,En(Ri(hi(),[0,1,0,0],this.matrix))),ci(this.forward,En(Ri(hi(),[0,0,1,0],this.matrix))),ds(this.right,this.right),ds(this.up,this.up),ds(this.forward,this.forward)}},{key:"_getAngles",value:function(){var t=this.distanceVector[0],n=this.distanceVector[1],i=this.distanceVector[2],a=Qi(this.distanceVector);if(a===0){this.elevation=0,this.azimuth=0;return}this.type===ze.TRACKING?(this.elevation=Rn(Math.asin(n/a)),this.azimuth=Rn(Math.atan2(-t,-i))):this.rotateWorld?(this.elevation=Rn(Math.asin(n/a)),this.azimuth=Rn(Math.atan2(-t,-i))):(this.elevation=-Rn(Math.asin(n/a)),this.azimuth=-Rn(Math.atan2(-t,-i)))}},{key:"_getPosition",value:function(){ci(this.position,En(Ri(hi(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){MP(this.distanceVector,[0,0,-this.distance],iP(YO(),this.matrix)),xa(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=Xm(xe(),this.focalPoint,this.position),this.distance=Qi(this.distanceVector),this.dollyingStep=this.distance/100}},{key:"_getOrthoMatrix",value:function(){if(this.projectionMode===gr.ORTHOGRAPHIC){var t=this.position,n=da(Lt(),[0,0,1],-this.roll*Math.PI/180);RA(this.orthoMatrix,n,Xe((this.rright-this.left)/2-t[0],(this.top-this.bottom)/2-t[1],0),Xe(this.zoom,this.zoom,1),t)}}},{key:"triggerUpdate",value:function(){if(this.enableUpdate){var t=this.getViewTransform(),n=yn(Ye(),this.getPerspective(),t);this.getFrustum().extractFromVPMatrix(n),this.eventEmitter.emit(UI.UPDATED)}}},{key:"rotate",value:function(t,n,i){throw new Error(Ve)}},{key:"pan",value:function(t,n){throw new Error(Ve)}},{key:"dolly",value:function(t){throw new Error(Ve)}},{key:"createLandmark",value:function(t,n){throw new Error(Ve)}},{key:"gotoLandmark",value:function(t,n){throw new Error(Ve)}},{key:"cancelLandmarkAnimation",value:function(){throw new Error(Ve)}}])}(),CD=function(r){return r[r.Standard=0]="Standard",r}({}),Zu=function(r){return r[r.ADDED=0]="ADDED",r[r.REMOVED=1]="REMOVED",r[r.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED",r}({}),SD=xe(),nA=Ye(),FD=Lt();function Lb(r){if(r.localDirtyFlag){var e=r.localSkew[0]!==0||r.localSkew[1]!==0;if(e){RA(r.localTransform,r.localRotation,r.localPosition,Xe(1,1,1),r.origin),(r.localSkew[0]!==0||r.localSkew[1]!==0)&&(Ia(nA),nA[4]=Math.tan(r.localSkew[0]),nA[1]=Math.tan(r.localSkew[1]),yn(r.localTransform,r.localTransform,nA));var t=RA(nA,pI(FD,0,0,0,1),pn(SD,1,1,1),r.localScale,r.origin);yn(r.localTransform,r.localTransform,t)}else{var n=r.localTransform,i=r.localPosition,a=r.localRotation,s=r.localScale,o=r.origin,A=i[0]!==0||i[1]!==0||i[2]!==0,l=a[3]!==1||a[0]!==0||a[1]!==0||a[2]!==0,c=s[0]!==1||s[1]!==1||s[2]!==1,u=o[0]!==0||o[1]!==0||o[2]!==0;!l&&!c&&!u?A?ca(n,i):Ia(n):RA(n,a,i,s,o)}r.localDirtyFlag=!1}}function TD(r,e){r.dirtyFlag&&(e?yn(r.worldTransform,e.worldTransform,r.localTransform):Oo(r.worldTransform,r.localTransform),r.dirtyFlag=!1)}var RI={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new ko(0,0,0,0)},$=function(r){return r.COORDINATE="<coordinate>",r.COLOR="<color>",r.PAINT="<paint>",r.NUMBER="<number>",r.ANGLE="<angle>",r.OPACITY_VALUE="<opacity-value>",r.SHADOW_BLUR="<shadow-blur>",r.LENGTH="<length>",r.PERCENTAGE="<percentage>",r.LENGTH_PERCENTAGE="<length> | <percentage>",r.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",r.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",r.LIST_OF_POINTS="<list-of-points>",r.PATH="<path>",r.FILTER="<filter>",r.Z_INDEX="<z-index>",r.OFFSET_DISTANCE="<offset-distance>",r.DEFINED_PATH="<defined-path>",r.MARKER="<marker>",r.TRANSFORM="<transform>",r.TRANSFORM_ORIGIN="<transform-origin>",r.TEXT="<text>",r.TEXT_TRANSFORM="<text-transform>",r}({});function Lw(r,e,t){r.prototype=e.prototype=t,t.constructor=r}function DI(r,e){var t=Object.create(r.prototype);for(var n in e)t[n]=e[n];return t}function bl(){}var el=.7,Ju=1/el,Eo="\\s*([+-]?\\d+)\\s*",tl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",gi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",MD=/^#([0-9a-f]{3,8})$/,OD=new RegExp(`^rgb\\(${Eo},${Eo},${Eo}\\)$`),ID=new RegExp(`^rgb\\(${gi},${gi},${gi}\\)$`),_D=new RegExp(`^rgba\\(${Eo},${Eo},${Eo},${tl}\\)$`),kD=new RegExp(`^rgba\\(${gi},${gi},${gi},${tl}\\)$`),LD=new RegExp(`^hsl\\(${tl},${gi},${gi}\\)$`),QD=new RegExp(`^hsla\\(${tl},${gi},${gi},${tl}\\)$`),Qb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Lw(bl,Rh,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:Nb,formatHex:Nb,formatHex8:ND,formatHsl:UD,formatRgb:Ub,toString:Ub});function Nb(){return this.rgb().formatHex()}function ND(){return this.rgb().formatHex8()}function UD(){return HI(this).formatHsl()}function Ub(){return this.rgb().formatRgb()}function Rh(r){var e,t;return r=(r+"").trim().toLowerCase(),(e=MD.exec(r))?(t=e[1].length,e=parseInt(e[1],16),t===6?Pb(e):t===3?new zn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Zl(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Zl(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=OD.exec(r))?new zn(e[1],e[2],e[3],1):(e=ID.exec(r))?new zn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=_D.exec(r))?Zl(e[1],e[2],e[3],e[4]):(e=kD.exec(r))?Zl(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=LD.exec(r))?Hb(e[1],e[2]/100,e[3]/100,1):(e=QD.exec(r))?Hb(e[1],e[2]/100,e[3]/100,e[4]):Qb.hasOwnProperty(r)?Pb(Qb[r]):r==="transparent"?new zn(NaN,NaN,NaN,0):null}function Pb(r){return new zn(r>>16&255,r>>8&255,r&255,1)}function Zl(r,e,t,n){return n<=0&&(r=e=t=NaN),new zn(r,e,t,n)}function PD(r){return r instanceof bl||(r=Rh(r)),r?(r=r.rgb(),new zn(r.r,r.g,r.b,r.opacity)):new zn}function RD(r,e,t,n){return arguments.length===1?PD(r):new zn(r,e,t,n??1)}function zn(r,e,t,n){this.r=+r,this.g=+e,this.b=+t,this.opacity=+n}Lw(zn,RD,DI(bl,{brighter(r){return r=r==null?Ju:Math.pow(Ju,r),new zn(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=r==null?el:Math.pow(el,r),new zn(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new zn(fs(this.r),fs(this.g),fs(this.b),eh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Rb,formatHex:Rb,formatHex8:DD,formatRgb:Db,toString:Db}));function Rb(){return`#${os(this.r)}${os(this.g)}${os(this.b)}`}function DD(){return`#${os(this.r)}${os(this.g)}${os(this.b)}${os((isNaN(this.opacity)?1:this.opacity)*255)}`}function Db(){const r=eh(this.opacity);return`${r===1?"rgb(":"rgba("}${fs(this.r)}, ${fs(this.g)}, ${fs(this.b)}${r===1?")":`, ${r})`}`}function eh(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function fs(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function os(r){return r=fs(r),(r<16?"0":"")+r.toString(16)}function Hb(r,e,t,n){return n<=0?r=e=t=NaN:t<=0||t>=1?r=e=NaN:e<=0&&(r=NaN),new Rr(r,e,t,n)}function HI(r){if(r instanceof Rr)return new Rr(r.h,r.s,r.l,r.opacity);if(r instanceof bl||(r=Rh(r)),!r)return new Rr;if(r instanceof Rr)return r;r=r.rgb();var e=r.r/255,t=r.g/255,n=r.b/255,i=Math.min(e,t,n),a=Math.max(e,t,n),s=NaN,o=a-i,A=(a+i)/2;return o?(e===a?s=(t-n)/o+(t<n)*6:t===a?s=(n-e)/o+2:s=(e-t)/o+4,o/=A<.5?a+i:2-a-i,s*=60):o=A>0&&A<1?0:s,new Rr(s,o,A,r.opacity)}function HD(r,e,t,n){return arguments.length===1?HI(r):new Rr(r,e,t,n??1)}function Rr(r,e,t,n){this.h=+r,this.s=+e,this.l=+t,this.opacity=+n}Lw(Rr,HD,DI(bl,{brighter(r){return r=r==null?Ju:Math.pow(Ju,r),new Rr(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?el:Math.pow(el,r),new Rr(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+(this.h<0)*360,e=isNaN(r)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*e,i=2*t-n;return new zn(jf(r>=240?r-240:r+120,i,n),jf(r,i,n),jf(r<120?r+240:r-120,i,n),this.opacity)},clamp(){return new Rr(Gb(this.h),Jl(this.s),Jl(this.l),eh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=eh(this.opacity);return`${r===1?"hsl(":"hsla("}${Gb(this.h)}, ${Jl(this.s)*100}%, ${Jl(this.l)*100}%${r===1?")":`, ${r})`}`}}));function Gb(r){return r=(r||0)%360,r<0?r+360:r}function Jl(r){return Math.max(0,Math.min(1,r||0))}function jf(r,e,t){return(r<60?e+(t-e)*r/60:r<180?t:r<240?e+(t-e)*(240-r)/60:e)*255}function It(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError("Expected a function");var t=function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];var o=e?e.apply(this,a):a[0],A=t.cache;if(A.has(o))return A.get(o);var l=r.apply(this,a);return t.cache=A.set(o,l)||A,l};return t.cache=new(It.Cache||Map),It.cacheList.push(t.cache),t}It.Cache=Map;It.cacheList=[];It.clearCache=function(){It.cacheList.forEach(function(r){return r.clear()})};var q=function(r){return r[r.kUnknown=0]="kUnknown",r[r.kNumber=1]="kNumber",r[r.kPercentage=2]="kPercentage",r[r.kEms=3]="kEms",r[r.kPixels=4]="kPixels",r[r.kRems=5]="kRems",r[r.kDegrees=6]="kDegrees",r[r.kRadians=7]="kRadians",r[r.kGradians=8]="kGradians",r[r.kTurns=9]="kTurns",r[r.kMilliseconds=10]="kMilliseconds",r[r.kSeconds=11]="kSeconds",r[r.kInteger=12]="kInteger",r}({}),Pr=function(r){return r[r.kUNumber=0]="kUNumber",r[r.kUPercent=1]="kUPercent",r[r.kULength=2]="kULength",r[r.kUAngle=3]="kUAngle",r[r.kUTime=4]="kUTime",r[r.kUOther=5]="kUOther",r}({}),GD=function(r){return r[r.kYes=0]="kYes",r[r.kNo=1]="kNo",r}({}),KD=function(r){return r[r.kYes=0]="kYes",r[r.kNo=1]="kNo",r}({}),zD=[{name:"em",unit_type:q.kEms},{name:"px",unit_type:q.kPixels},{name:"deg",unit_type:q.kDegrees},{name:"rad",unit_type:q.kRadians},{name:"grad",unit_type:q.kGradians},{name:"ms",unit_type:q.kMilliseconds},{name:"s",unit_type:q.kSeconds},{name:"rem",unit_type:q.kRems},{name:"turn",unit_type:q.kTurns}],Lo=function(r){return r[r.kUnknownType=0]="kUnknownType",r[r.kUnparsedType=1]="kUnparsedType",r[r.kKeywordType=2]="kKeywordType",r[r.kUnitType=3]="kUnitType",r[r.kSumType=4]="kSumType",r[r.kProductType=5]="kProductType",r[r.kNegateType=6]="kNegateType",r[r.kInvertType=7]="kInvertType",r[r.kMinType=8]="kMinType",r[r.kMaxType=9]="kMaxType",r[r.kClampType=10]="kClampType",r[r.kTransformType=11]="kTransformType",r[r.kPositionType=12]="kPositionType",r[r.kURLImageType=13]="kURLImageType",r[r.kColorType=14]="kColorType",r[r.kUnsupportedColorType=15]="kUnsupportedColorType",r}({}),VD=function(e){return zD.find(function(t){return t.name===e}).unit_type},jD=function(e){return e?e==="number"?q.kNumber:e==="percent"||e==="%"?q.kPercentage:VD(e):q.kUnknown},$D=function(e){switch(e){case q.kNumber:case q.kInteger:return Pr.kUNumber;case q.kPercentage:return Pr.kUPercent;case q.kPixels:return Pr.kULength;case q.kMilliseconds:case q.kSeconds:return Pr.kUTime;case q.kDegrees:case q.kRadians:case q.kGradians:case q.kTurns:return Pr.kUAngle;default:return Pr.kUOther}},WD=function(e){switch(e){case Pr.kUNumber:return q.kNumber;case Pr.kULength:return q.kPixels;case Pr.kUPercent:return q.kPercentage;case Pr.kUTime:return q.kSeconds;case Pr.kUAngle:return q.kDegrees;default:return q.kUnknown}},Kb=function(e){var t=1;switch(e){case q.kPixels:case q.kDegrees:case q.kSeconds:break;case q.kMilliseconds:t=.001;break;case q.kRadians:t=180/Math.PI;break;case q.kGradians:t=.9;break;case q.kTurns:t=360;break}return t},c1=function(e){switch(e){case q.kNumber:case q.kInteger:return"";case q.kPercentage:return"%";case q.kEms:return"em";case q.kRems:return"rem";case q.kPixels:return"px";case q.kDegrees:return"deg";case q.kRadians:return"rad";case q.kGradians:return"grad";case q.kMilliseconds:return"ms";case q.kSeconds:return"s";case q.kTurns:return"turn"}return""},Dh=function(){function r(){G(this,r)}return K(r,[{key:"toString",value:function(){return this.buildCSSText(GD.kNo,KD.kNo,"")}},{key:"isNumericValue",value:function(){return this.getType()>=Lo.kUnitType&&this.getType()<=Lo.kClampType}}],[{key:"isAngle",value:function(t){return t===q.kDegrees||t===q.kRadians||t===q.kGradians||t===q.kTurns}},{key:"isLength",value:function(t){return t>=q.kEms&&t<q.kDegrees}},{key:"isRelativeUnit",value:function(t){return t===q.kPercentage||t===q.kEms||t===q.kRems}},{key:"isTime",value:function(t){return t===q.kSeconds||t===q.kMilliseconds}}])}(),qD=function(r){function e(t){var n;return G(this,e),n=ye(this,e),n.colorSpace=t,n}return me(e,r),K(e,[{key:"getType",value:function(){return Lo.kColorType}},{key:"to",value:function(n){return this}}])}(Dh),fa=function(r){return r[r.Constant=0]="Constant",r[r.LinearGradient=1]="LinearGradient",r[r.RadialGradient=2]="RadialGradient",r}({}),ec=function(r){function e(t,n){var i;return G(this,e),i=ye(this,e),i.type=t,i.value=n,i}return me(e,r),K(e,[{key:"clone",value:function(){return new e(this.type,this.value)}},{key:"buildCSSText",value:function(n,i,a){return a}},{key:"getType",value:function(){return Lo.kColorType}}])}(Dh),Cr=function(r){function e(t){var n;return G(this,e),n=ye(this,e),n.value=t,n}return me(e,r),K(e,[{key:"clone",value:function(){return new e(this.value)}},{key:"getType",value:function(){return Lo.kKeywordType}},{key:"buildCSSText",value:function(n,i,a){return a+this.value}}])}(Dh),YD=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n="";return Number.isFinite(e)?n="NaN":e>0?n="infinity":n="-infinity",n+=t},u1=function(e){return WD($D(e))},je=function(r){function e(t){var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:q.kNumber;G(this,e),n=ye(this,e);var a;return typeof i=="string"?a=jD(i):a=i,n.unit=a,n.value=t,n}return me(e,r),K(e,[{key:"clone",value:function(){return new e(this.value,this.unit)}},{key:"equals",value:function(n){var i=n;return this.value===i.value&&this.unit===i.unit}},{key:"getType",value:function(){return Lo.kUnitType}},{key:"convertTo",value:function(n){if(this.unit===n)return new e(this.value,this.unit);var i=u1(this.unit);if(i!==u1(n)||i===q.kUnknown)return null;var a=Kb(this.unit)/Kb(n);return new e(this.value*a,n)}},{key:"buildCSSText",value:function(n,i,a){var s;switch(this.unit){case q.kUnknown:break;case q.kInteger:s=Number(this.value).toFixed(0);break;case q.kNumber:case q.kPercentage:case q.kEms:case q.kRems:case q.kPixels:case q.kDegrees:case q.kRadians:case q.kGradians:case q.kMilliseconds:case q.kSeconds:case q.kTurns:{var o=-999999,A=999999,l=this.value,c=c1(this.unit);if(l<o||l>A){var u=c1(this.unit);!Number.isFinite(l)||Number.isNaN(l)?s=YD(l,u):s=l+(u||"")}else s="".concat(l).concat(c)}}return a+=s,a}}])}(Dh),Nr=new je(0,"px");new je(1,"px");var xs=new je(0,"deg"),Qw=function(r){function e(t,n,i){var a,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;return G(this,e),a=ye(this,e,["rgb"]),a.r=t,a.g=n,a.b=i,a.alpha=s,a.isNone=o,a}return me(e,r),K(e,[{key:"clone",value:function(){return new e(this.r,this.g,this.b,this.alpha)}},{key:"buildCSSText",value:function(n,i,a){return"".concat(a,"rgba(").concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")}}])}(qD),zb=new Cr("unset"),XD=new Cr("initial"),ZD=new Cr("inherit"),$f={"":zb,unset:zb,initial:XD,inherit:ZD},JD=function(e){return $f[e]||($f[e]=new Cr(e)),$f[e]},GI=new Qw(0,0,0,0,!0),KI=new Qw(0,0,0,0),e3=It(function(r,e,t,n){return new Qw(r,e,t,n)},function(r,e,t,n){return"rgba(".concat(r,",").concat(e,",").concat(t,",").concat(n,")")}),At=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:q.kNumber;return new je(e,t)};new je(50,"%");function t3(r){var e=r.type,t=r.value;return e==="hex"?"#".concat(t):e==="literal"?t:e==="rgb"?"rgb(".concat(t.join(","),")"):"rgba(".concat(t.join(","),")")}var n3=function(){var r={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},e="";function t(L){throw new Error("".concat(e,": ").concat(L))}function n(){var L=i();return e.length>0&&t("Invalid input not EOF"),L}function i(){return m(a)}function a(){return s("linear-gradient",r.linearGradient,A)||s("repeating-linear-gradient",r.repeatingLinearGradient,A)||s("radial-gradient",r.radialGradient,u)||s("repeating-radial-gradient",r.repeatingRadialGradient,u)||s("conic-gradient",r.conicGradient,u)}function s(L,k,U){return o(k,function(D){var j=U();return j&&(_(r.comma)||t("Missing comma before color stops")),{type:L,orientation:j,colorStops:m(w)}})}function o(L,k){var U=_(L);if(U){_(r.startCall)||t("Missing (");var D=k(U);return _(r.endCall)||t("Missing )"),D}}function A(){return l()||c()}function l(){return O("directional",r.sideOrCorner,1)}function c(){return O("angular",r.angleValue,1)}function u(){var L,k=h(),U;return k&&(L=[],L.push(k),U=e,_(r.comma)&&(k=h(),k?L.push(k):e=U)),L}function h(){var L=d()||f();if(L)L.at=v();else{var k=g();if(k){L=k;var U=v();U&&(L.at=U)}else{var D=p();D&&(L={type:"default-radial",at:D})}}return L}function d(){var L=O("shape",/^(circle)/i,0);return L&&(L.style=T()||g()),L}function f(){var L=O("shape",/^(ellipse)/i,0);return L&&(L.style=F()||g()),L}function g(){return O("extent-keyword",r.extentKeywords,1)}function v(){if(O("position",/^at/,0)){var L=p();return L||t("Missing positioning value"),L}}function p(){var L=y();if(L.x||L.y)return{type:"position",value:L}}function y(){return{x:F(),y:F()}}function m(L){var k=L(),U=[];if(k)for(U.push(k);_(r.comma);)k=L(),k?U.push(k):t("One extra comma");return U}function w(){var L=B();return L||t("Expected color definition"),L.length=F(),L}function B(){return E()||S()||x()||b()}function b(){return O("literal",r.literalColor,0)}function E(){return O("hex",r.hexColor,1)}function x(){return o(r.rgbColor,function(){return{type:"rgb",value:m(C)}})}function S(){return o(r.rgbaColor,function(){return{type:"rgba",value:m(C)}})}function C(){return _(r.number)[1]}function F(){return O("%",r.percentageValue,1)||M()||T()}function M(){return O("position-keyword",r.positionKeywords,1)}function T(){return O("px",r.pixelValue,1)||O("em",r.emValue,1)}function O(L,k,U){var D=_(k);if(D)return{type:L,value:D[U]}}function _(L){var k=/^[\n\r\t\s]+/.exec(e);k&&Q(k[0].length);var U=L.exec(e);return U&&Q(U[0].length),U}function Q(L){e=e.substring(L)}return function(L){return e=L,n()}}();function r3(r,e,t,n){var i=De(n.value),a=0,s=0,o=a+e/2,A=s+t/2,l=Math.abs(e*Math.cos(i))+Math.abs(t*Math.sin(i)),c=r[0]+o-Math.cos(i)*l/2,u=r[1]+A-Math.sin(i)*l/2,h=r[0]+o+Math.cos(i)*l/2,d=r[1]+A+Math.sin(i)*l/2;return{x1:c,y1:u,x2:h,y2:d}}function i3(r,e,t,n,i,a){var s=n.value,o=i.value;n.unit===q.kPercentage&&(s=n.value/100*e),i.unit===q.kPercentage&&(o=i.value/100*t);var A=Math.max(Pn([0,0],[s,o]),Pn([0,t],[s,o]),Pn([e,t],[s,o]),Pn([e,0],[s,o]));return a&&(a instanceof je?A=a.value:a instanceof Cr&&(a.value==="closest-side"?A=Math.min(s,e-s,o,t-o):a.value==="farthest-side"?A=Math.max(s,e-s,o,t-o):a.value==="closest-corner"&&(A=Math.min(Pn([0,0],[s,o]),Pn([0,t],[s,o]),Pn([e,t],[s,o]),Pn([e,0],[s,o]))))),{x:s+r[0],y:o+r[1],r:A}}var a3=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,s3=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,o3=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,zI=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function A3(r){var e,t=r.length;if(r[t-1].length=(e=r[t-1].length)!==null&&e!==void 0?e:{type:"%",value:"100"},t>1){var n;r[0].length=(n=r[0].length)!==null&&n!==void 0?n:{type:"%",value:"0"}}for(var i=0,a=Number(r[0].length.value),s=1;s<t;s++){var o,A=(o=r[s].length)===null||o===void 0?void 0:o.value;if(!le(A)&&!le(a)){for(var l=1;l<s-i;l++)r[i+l].length={type:"%",value:"".concat(a+(Number(A)-a)*l/(s-i))};i=s,a=Number(A)}}}var l3={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},c3=It(function(r){var e;return r.type==="angular"?e=Number(r.value):e=l3[r.value]||0,At(e,"deg")}),u3=It(function(r){var e=50,t=50,n="%",i="%";if((r==null?void 0:r.type)==="position"){var a=r.value,s=a.x,o=a.y;(s==null?void 0:s.type)==="position-keyword"&&(s.value==="left"?e=0:s.value==="center"?e=50:s.value==="right"?e=100:s.value==="top"?t=0:s.value==="bottom"&&(t=100)),(o==null?void 0:o.type)==="position-keyword"&&(o.value==="left"?e=0:o.value==="center"?t=50:o.value==="right"?e=100:o.value==="top"?t=0:o.value==="bottom"&&(t=100)),((s==null?void 0:s.type)==="px"||(s==null?void 0:s.type)==="%"||(s==null?void 0:s.type)==="em")&&(n=s==null?void 0:s.type,e=Number(s.value)),((o==null?void 0:o.type)==="px"||(o==null?void 0:o.type)==="%"||(o==null?void 0:o.type)==="em")&&(i=o==null?void 0:o.type,t=Number(o.value))}return{cx:At(e,n),cy:At(t,i)}}),h3=It(function(r){if(r.indexOf("linear")>-1||r.indexOf("radial")>-1){var e=n3(r);return e.map(function(o){var A=o.type,l=o.orientation,c=o.colorStops;A3(c);var u=c.map(function(m){return{offset:At(Number(m.length.value),"%"),color:t3(m)}});if(A==="linear-gradient")return new ec(fa.LinearGradient,{angle:l?c3(l):xs,steps:u});if(A==="radial-gradient"&&(l||(l=[{type:"shape",value:"circle"}]),l[0].type==="shape"&&l[0].value==="circle")){var h=u3(l[0].at),d=h.cx,f=h.cy,g;if(l[0].style){var v=l[0].style,p=v.type,y=v.value;p==="extent-keyword"?g=JD(y):g=At(y,p)}return new ec(fa.RadialGradient,{cx:d,cy:f,size:g,steps:u})}})}var t=r[0];if(r[1]==="("||r[2]==="("){if(t==="l"){var n=a3.exec(r);if(n){var i,a=((i=n[2].match(zI))===null||i===void 0?void 0:i.map(function(o){return o.split(":")}))||[];return[new ec(fa.LinearGradient,{angle:At(parseFloat(n[1]),"deg"),steps:a.map(function(o){var A=pe(o,2),l=A[0],c=A[1];return{offset:At(Number(l)*100,"%"),color:c}})})]}}else if(t==="r"){var s=d3(r);if(s)if(_e(s))r=s;else return[new ec(fa.RadialGradient,s)]}else if(t==="p")return f3(r)}});function d3(r){var e=s3.exec(r);if(e){var t,n=((t=e[4].match(zI))===null||t===void 0?void 0:t.map(function(i){return i.split(":")}))||[];return{cx:At(50,"%"),cy:At(50,"%"),steps:n.map(function(i){var a=pe(i,2),s=a[0],o=a[1];return{offset:At(Number(s)*100,"%"),color:o}})}}return null}function f3(r){var e=o3.exec(r);if(e){var t=e[1],n=e[2];switch(t){case"a":t="repeat";break;case"x":t="repeat-x";break;case"y":t="repeat-y";break;case"n":t="no-repeat";break;default:t="no-repeat"}return{image:n,repetition:t}}return null}function Cs(r){return r&&!!r.image}function th(r){return r&&!le(r.r)&&!le(r.g)&&!le(r.b)}var HA=It(function(r){if(Cs(r))return ue({repetition:"repeat"},r);if(le(r)&&(r=""),r==="transparent")return KI;if(r==="currentColor")r="black";else if(r==="none")return GI;var e=h3(r);if(e)return e;var t=Rh(r),n=[0,0,0,0];return t!==null&&(n[0]=t.r||0,n[1]=t.g||0,n[2]=t.b||0,n[3]=t.opacity),e3.apply(void 0,n)});function g3(r,e){if(!(!th(r)||!th(e)))return[[Number(r.r),Number(r.g),Number(r.b),Number(r.alpha)],[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],function(t){var n=t.slice();if(n[3])for(var i=0;i<3;i++)n[i]=Math.round(vt(n[i],0,255));return n[3]=vt(n[3],0,1),"rgba(".concat(n.join(","),")")}]}function El(r,e){if(le(e))return At(0,"px");if(e="".concat(e).trim().toLowerCase(),isFinite(Number(e))){if("px".search(r)>=0)return At(Number(e),"px");if("deg".search(r)>=0)return At(Number(e),"deg")}var t=[];e=e.replace(r,function(i){return t.push(i),"U".concat(i)});var n="U(".concat(r.source,")");return t.map(function(i){return At(Number(e.replace(new RegExp("U".concat(i),"g"),"").replace(new RegExp(n,"g"),"*0")),i)})[0]}var VI=function(e){return El(new RegExp("px","g"),e)},v3=It(VI),p3=function(e){return El(new RegExp("%","g"),e)};It(p3);var jI=function(e){return Z(e)||isFinite(Number(e))?At(Number(e)||0,"px"):El(new RegExp("px|%|em|rem","g"),e)},h1=It(jI),$I=function(e){return El(new RegExp("deg|rad|grad|turn","g"),e)},y3=It($I);function m3(r,e,t,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,a="",s=r.value||0,o=e.value||0,A=u1(r.unit),l=r.convertTo(A),c=e.convertTo(A);return l&&c?(s=l.value,o=c.value,a=c1(r.unit)):(je.isLength(r.unit)||je.isLength(e.unit))&&(s=er(r,i,t),o=er(e,i,t),a="px"),[s,o,function(u){return u+a}]}function Dn(r){var e=0;return r.unit===q.kDegrees?e=r.value:r.unit===q.kRadians?e=Rn(Number(r.value)):r.unit===q.kTurns?e=pD(Number(r.value)):r.value&&(e=r.value),e}function Vb(r,e){var t;return Array.isArray(r)?t=r.map(function(n){return Number(n)}):_e(r)?t=r.split(" ").map(function(n){return Number(n)}):Z(r)&&(t=[r]),e===2?t.length===1?[t[0],t[0]]:[t[0],t[1]]:e===4?t.length===1?[t[0],t[0],t[0],t[0]]:t.length===2?[t[0],t[1],t[0],t[1]]:t.length===3?[t[0],t[1],t[2],t[1]]:[t[0],t[1],t[2],t[3]]:e==="even"&&t.length%2===1?[].concat(Fe(t),Fe(t)):t}function er(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(r.unit===q.kPixels)return Number(r.value);if(r.unit===q.kPercentage&&t){var i=t.nodeName===P.GROUP?t.getLocalBounds():t.getGeometryBounds();return(n?i.min[e]:0)+r.value/100*i.halfExtents[e]*2}return 0}var w3=function(e){return El(/deg|rad|grad|turn|px|%/g,e)},B3=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function b3(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(r=r.toLowerCase().trim(),r==="none")return[];for(var e=/\s*([\w-]+)\(([^)]*)\)/g,t=[],n,i=0;n=e.exec(r);){if(n.index!==i)return[];if(i=n.index+n[0].length,B3.indexOf(n[1])>-1&&t.push({name:n[1],params:n[2].split(" ").map(function(a){return w3(a)||HA(a)})}),e.lastIndex===r.length)return t}return[]}function WI(r){return r.toString()}var qI=function(e){return typeof e=="number"?At(e):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(e)?At(Number(e)):At(0)},d1=It(qI);It(function(r){return _e(r)?r.split(" ").map(d1):r.map(d1)});function Nw(r,e){return[r,e,WI]}function Uw(r,e){return function(t,n){return[t,n,function(i){return WI(vt(i,r,e))}]}}function YI(r,e){if(r.length===e.length)return[r,e,function(t){return t}]}function f1(r){return r.parsedStyle.d.totalLength===0&&(r.parsedStyle.d.totalLength=UR(r.parsedStyle.d.absolutePath)),r.parsedStyle.d.totalLength}function E3(r){return r.parsedStyle.points.totalLength===0&&(r.parsedStyle.points.totalLength=nD(r.parsedStyle.points.points)),r.parsedStyle.points.totalLength}function x3(r){for(var e=0;e<r.length;e++){var t=r[e-1],n=r[e],i=n[0];if(i==="M"&&t){var a=t[0],s=[n[1],n[2]],o=void 0;a==="L"||a==="M"?o=[t[1],t[2]]:(a==="C"||a==="A"||a==="Q")&&(o=[t[t.length-2],t[t.length-1]]),o&&nh(s,o)&&(r.splice(e,1),e--)}}}function C3(r){for(var e=!1,t=r.length,n=0;n<t;n++){var i=r[n],a=i[0];if(a==="C"||a==="A"||a==="Q"){e=!0;break}}return e}function S3(r){for(var e=[],t=[],n=[],i=0;i<r.length;i++){var a=r[i],s=a[0];s==="M"?(n.length&&(t.push(n),n=[]),n.push([a[1],a[2]])):s==="Z"?n.length&&(e.push(n),n=[]):n.push([a[1],a[2]])}return n.length>0&&t.push(n),{polygons:e,polylines:t}}function nh(r,e){return r[0]===e[0]&&r[1]===e[1]}function F3(r,e){for(var t=[],n=[],i=[],a=0;a<r.length;a++){var s=r[a],o=s.currentPoint,A=s.params,l=s.prePoint,c=void 0;switch(s.command){case"Q":c=rD(l[0],l[1],A[1],A[2],A[3],A[4]);break;case"C":c=JR(l[0],l[1],A[1],A[2],A[3],A[4],A[5],A[6]);break;case"A":var u=s.arcParams;c=YR(u.cx,u.cy,u.rx,u.ry,u.xRotation,u.startAngle,u.endAngle);break;default:t.push(o[0]),n.push(o[1]);break}c&&(s.box=c,t.push(c.x,c.x+c.width),n.push(c.y,c.y+c.height))}t=t.filter(function(w){return!Number.isNaN(w)&&w!==1/0&&w!==-1/0}),n=n.filter(function(w){return!Number.isNaN(w)&&w!==1/0&&w!==-1/0});var h=ju(t),d=ju(n),f=Vu(t),g=Vu(n);if(i.length===0)return{x:h,y:d,width:f-h,height:g-d};for(var v=0;v<i.length;v++){var p=i[v],y=p.currentPoint,m=void 0;y[0]===h?(m=tc(p,e),h-=m.xExtra):y[0]===f&&(m=tc(p,e),f+=m.xExtra),y[1]===d?(m=tc(p,e),d-=m.yExtra):y[1]===g&&(m=tc(p,e),g+=m.yExtra)}return{x:h,y:d,width:f-h,height:g-d}}function tc(r,e){var t=r.prePoint,n=r.currentPoint,i=r.nextPoint,a=Math.pow(n[0]-t[0],2)+Math.pow(n[1]-t[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),o=Math.pow(t[0]-i[0],2)+Math.pow(t[1]-i[1],2),A=Math.acos((a+s-o)/(2*Math.sqrt(a)*Math.sqrt(s)));if(!A||Math.sin(A)===0||Bo(A,0))return{xExtra:0,yExtra:0};var l=Math.abs(Math.atan2(i[1]-n[1],i[0]-n[0])),c=Math.abs(Math.atan2(i[0]-n[0],i[1]-n[1]));l=l>Math.PI/2?Math.PI-l:l,c=c>Math.PI/2?Math.PI-c:c;var u={xExtra:Math.cos(A/2-l)*(e/2*(1/Math.sin(A/2)))-e/2||0,yExtra:Math.cos(c-A/2)*(e/2*(1/Math.sin(A/2)))-e/2||0};return u}function jb(r,e){return[e[0]+(e[0]-r[0]),e[1]+(e[1]-r[1])]}var $b=function(e,t){var n=e.x*t.x+e.y*t.y,i=Math.sqrt((Math.pow(e.x,2)+Math.pow(e.y,2))*(Math.pow(t.x,2)+Math.pow(t.y,2))),a=e.x*t.y-e.y*t.x<0?-1:1,s=a*Math.acos(n/i);return s},Wb=function(e,t,n,i,a,s,o,A){t=Math.abs(t),n=Math.abs(n),i=wI(i,360);var l=De(i);if(e.x===o.x&&e.y===o.y)return{x:e.x,y:e.y,ellipticalArcAngle:0};if(t===0||n===0)return{x:0,y:0,ellipticalArcAngle:0};var c=(e.x-o.x)/2,u=(e.y-o.y)/2,h={x:Math.cos(l)*c+Math.sin(l)*u,y:-Math.sin(l)*c+Math.cos(l)*u},d=Math.pow(h.x,2)/Math.pow(t,2)+Math.pow(h.y,2)/Math.pow(n,2);d>1&&(t*=Math.sqrt(d),n*=Math.sqrt(d));var f=Math.pow(t,2)*Math.pow(n,2)-Math.pow(t,2)*Math.pow(h.y,2)-Math.pow(n,2)*Math.pow(h.x,2),g=Math.pow(t,2)*Math.pow(h.y,2)+Math.pow(n,2)*Math.pow(h.x,2),v=f/g;v=v<0?0:v;var p=(a!==s?1:-1)*Math.sqrt(v),y={x:p*(t*h.y/n),y:p*(-(n*h.x)/t)},m={x:Math.cos(l)*y.x-Math.sin(l)*y.y+(e.x+o.x)/2,y:Math.sin(l)*y.x+Math.cos(l)*y.y+(e.y+o.y)/2},w={x:(h.x-y.x)/t,y:(h.y-y.y)/n},B=$b({x:1,y:0},w),b={x:(-h.x-y.x)/t,y:(-h.y-y.y)/n},E=$b(w,b);!s&&E>0?E-=2*Math.PI:s&&E<0&&(E+=2*Math.PI),E%=2*Math.PI;var x=B+E*A,S=t*Math.cos(x),C=n*Math.sin(x),F={x:Math.cos(l)*S-Math.sin(l)*C+m.x,y:Math.sin(l)*S+Math.cos(l)*C+m.y,ellipticalArcStartAngle:B,ellipticalArcEndAngle:B+E,ellipticalArcAngle:x,ellipticalArcCenter:m,resultantRx:t,resultantRy:n};return F};function T3(r){for(var e=[],t=null,n=null,i=null,a=0,s=r.length,o=0;o<s;o++){var A=r[o];n=r[o+1];var l=A[0],c={command:l,prePoint:t,params:A,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(l){case"M":i=[A[1],A[2]],a=o;break;case"A":var u=M3(t,A);c.arcParams=u;break}if(l==="Z")t=i,n=r[a+1];else{var h=A.length;t=[A[h-2],A[h-1]]}n&&n[0]==="Z"&&(n=r[a],e[a]&&(e[a].prePoint=t)),c.currentPoint=t,e[a]&&nh(t,e[a].currentPoint)&&(e[a].prePoint=c.prePoint);var d=n?[n[n.length-2],n[n.length-1]]:null;c.nextPoint=d;var f=c.prePoint;if(["L","H","V"].includes(l))c.startTangent=[f[0]-t[0],f[1]-t[1]],c.endTangent=[t[0]-f[0],t[1]-f[1]];else if(l==="Q"){var g=[A[1],A[2]];c.startTangent=[f[0]-g[0],f[1]-g[1]],c.endTangent=[t[0]-g[0],t[1]-g[1]]}else if(l==="T"){var v=e[o-1],p=jb(v.currentPoint,f);v.command==="Q"?(c.command="Q",c.startTangent=[f[0]-p[0],f[1]-p[1]],c.endTangent=[t[0]-p[0],t[1]-p[1]]):(c.command="TL",c.startTangent=[f[0]-t[0],f[1]-t[1]],c.endTangent=[t[0]-f[0],t[1]-f[1]])}else if(l==="C"){var y=[A[1],A[2]],m=[A[3],A[4]];c.startTangent=[f[0]-y[0],f[1]-y[1]],c.endTangent=[t[0]-m[0],t[1]-m[1]],c.startTangent[0]===0&&c.startTangent[1]===0&&(c.startTangent=[y[0]-m[0],y[1]-m[1]]),c.endTangent[0]===0&&c.endTangent[1]===0&&(c.endTangent=[m[0]-y[0],m[1]-y[1]])}else if(l==="S"){var w=e[o-1],B=jb(w.currentPoint,f),b=[A[1],A[2]];w.command==="C"?(c.command="C",c.startTangent=[f[0]-B[0],f[1]-B[1]],c.endTangent=[t[0]-b[0],t[1]-b[1]]):(c.command="SQ",c.startTangent=[f[0]-b[0],f[1]-b[1]],c.endTangent=[t[0]-b[0],t[1]-b[1]])}else if(l==="A"){var E=qb(c,0),x=E.x,S=E.y,C=qb(c,1,!1),F=C.x,M=C.y;c.startTangent=[x,S],c.endTangent=[F,M]}e.push(c)}return e}function qb(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=r.arcParams,i=n.rx,a=i===void 0?0:i,s=n.ry,o=s===void 0?0:s,A=n.xRotation,l=n.arcFlag,c=n.sweepFlag,u=Wb({x:r.prePoint[0],y:r.prePoint[1]},a,o,A,!!l,!!c,{x:r.currentPoint[0],y:r.currentPoint[1]},e),h=Wb({x:r.prePoint[0],y:r.prePoint[1]},a,o,A,!!l,!!c,{x:r.currentPoint[0],y:r.currentPoint[1]},t?e+.005:e-.005),d=h.x-u.x,f=h.y-u.y,g=Math.sqrt(d*d+f*f);return{x:-d/g,y:-f/g}}function nc(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function g1(r,e){return nc(r)*nc(e)?(r[0]*e[0]+r[1]*e[1])/(nc(r)*nc(e)):1}function Yb(r,e){return(r[0]*e[1]<r[1]*e[0]?-1:1)*Math.acos(g1(r,e))}function M3(r,e){var t=e[1],n=e[2],i=wI(De(e[3]),Math.PI*2),a=e[4],s=e[5],o=r[0],A=r[1],l=e[6],c=e[7],u=Math.cos(i)*(o-l)/2+Math.sin(i)*(A-c)/2,h=-1*Math.sin(i)*(o-l)/2+Math.cos(i)*(A-c)/2,d=u*u/(t*t)+h*h/(n*n);d>1&&(t*=Math.sqrt(d),n*=Math.sqrt(d));var f=t*t*(h*h)+n*n*(u*u),g=f?Math.sqrt((t*t*(n*n)-f)/f):1;a===s&&(g*=-1),isNaN(g)&&(g=0);var v=n?g*t*h/n:0,p=t?g*-n*u/t:0,y=(o+l)/2+Math.cos(i)*v-Math.sin(i)*p,m=(A+c)/2+Math.sin(i)*v+Math.cos(i)*p,w=[(u-v)/t,(h-p)/n],B=[(-1*u-v)/t,(-1*h-p)/n],b=Yb([1,0],w),E=Yb(w,B);return g1(w,B)<=-1&&(E=Math.PI),g1(w,B)>=1&&(E=0),s===0&&E>0&&(E-=2*Math.PI),s===1&&E<0&&(E+=2*Math.PI),{cx:y,cy:m,rx:nh(r,[l,c])?0:t,ry:nh(r,[l,c])?0:n,startAngle:b,endAngle:b+E,xRotation:i,arcFlag:a,sweepFlag:s}}var XI=function(e){if(e===""||Array.isArray(e)&&e.length===0)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var t;try{t=Wu(e)}catch{t=Wu(""),console.error("[g]: Invalid SVG Path definition: ".concat(e))}x3(t);var n=C3(t),i=S3(t),a=i.polygons,s=i.polylines,o=T3(t),A=F3(o,0),l=A.x,c=A.y,u=A.width,h=A.height;return{absolutePath:t,hasArc:n,segments:o,polygons:a,polylines:s,totalLength:0,rect:{x:Number.isFinite(l)?l:0,y:Number.isFinite(c)?c:0,width:Number.isFinite(u)?u:0,height:Number.isFinite(h)?h:0}}},O3=It(XI);function ZI(r){return _e(r)?O3(r):XI(r)}function I3(r,e,t){var n=r.curve,i=e.curve;(!n||n.length===0)&&(n=r1(r.absolutePath,!1),r.curve=n),(!i||i.length===0)&&(i=r1(e.absolutePath,!1),e.curve=i);var a=[n,i];n.length!==i.length&&(a=OI(n,i));var s=Eb(a[0])!==Eb(a[1])?IR(a[0]):OR(a[0]);return[s,RR(a[1],s),function(o){return o}]}function _3(r,e){var t;return _e(r)?t=r.split(" ").map(function(n){var i=n.split(","),a=pe(i,2),s=a[0],o=a[1];return[Number(s),Number(o)]}):t=r,{points:t,totalLength:0,segments:[]}}function k3(r,e){return[r.points,e.points,function(t){return t}]}var gt=null,xo=/\s*(\w+)\(([^)]*)\)/g;function Qn(r){return function(e){var t=0;return r.map(function(n){return n===gt?e[t++]:n})}}function ja(r){return r}var nl={matrix:["NNNNNN",[gt,gt,0,0,gt,gt,0,0,0,0,1,0,gt,gt,0,1],ja],matrix3d:["NNNNNNNNNNNNNNNN",ja],rotate:["A"],rotateX:["A"],rotateY:["A"],rotateZ:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",Qn([gt,gt,new je(1)]),ja],scaleX:["N",Qn([gt,new je(1),new je(1)]),Qn([gt,new je(1)])],scaleY:["N",Qn([new je(1),gt,new je(1)]),Qn([new je(1),gt])],scaleZ:["N",Qn([new je(1),new je(1),gt])],scale3d:["NNN",ja],skew:["Aa",null,ja],skewX:["A",null,Qn([gt,xs])],skewY:["A",null,Qn([xs,gt])],translate:["Tt",Qn([gt,gt,Nr]),ja],translateX:["T",Qn([gt,Nr,Nr]),Qn([gt,Nr])],translateY:["T",Qn([Nr,gt,Nr]),Qn([Nr,gt])],translateZ:["L",Qn([Nr,Nr,gt])],translate3d:["TTL",ja]};function JI(r){for(var e=[],t=r.length,n=0;n<t;n++){var i=r[n],a=i[0],s=i.slice(1);a==="translate"||a==="skew"?s.length===1&&s.push(0):a==="scale"&&s.length===1&&s.push(s[0]);var o=nl[a];if(!o)return[];var A=s.map(function(l){return At(l)});e.push({t:a,d:A})}return e}function e_(r){if(Array.isArray(r))return JI(r);if(r=(r||"none").trim(),r==="none")return[];var e=[],t,n=0;for(xo.lastIndex=0;t=xo.exec(r);){if(t.index!==n)return[];n=t.index+t[0].length;var i=t[1],a=nl[i];if(!a)return[];var s=t[2].split(","),o=a[0];if(o.length<s.length)return[];for(var A=[],l=0;l<o.length;l++){var c=s[l],u=o[l],h=void 0;if(c?h={A:function(f){return f.trim()==="0"?xs:y3(f)},N:d1,T:h1,L:v3}[u.toUpperCase()](c):h={a:xs,n:A[0],t:Nr}[u],h===void 0)return[];A.push(h)}if(e.push({t:i,d:A}),xo.lastIndex===r.length)return e}return[]}function L3(r){if(Array.isArray(r))return JI(r);if(r=(r||"none").trim(),r==="none")return[];var e=[],t,n=0;for(xo.lastIndex=0;t=xo.exec(r);){if(t.index!==n)return[];n=t.index+t[0].length;var i=t[1],a=nl[i];if(!a)return[];var s=t[2].split(","),o=a[0];if(o.length<s.length)return[];for(var A=[],l=0;l<o.length;l++){var c=s[l],u=o[l],h=void 0;if(c?h={A:function(f){return f.trim()==="0"?xs:$I(f)},N:qI,T:jI,L:VI}[u.toUpperCase()](c):h={a:xs,n:A[0],t:Nr}[u],h===void 0)return[];A.push(h)}if(e.push({t:i,d:A}),xo.lastIndex===r.length)return e}return[]}function Q3(r){var e,t,n,i;switch(r.t){case"rotateX":return i=De(Dn(r.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotateY":return i=De(Dn(r.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotateZ":return i=De(Dn(r.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":e=r.d[0].value,t=r.d[1].value,n=r.d[2].value,i=De(Dn(r.d[3]));var a=e*e+t*t+n*n;if(a===0)e=1,t=0,n=0;else if(a!==1){var s=Math.sqrt(a);e/=s,t/=s,n/=s}var o=Math.sin(i/2),A=o*Math.cos(i/2),l=o*o;return[1-2*(t*t+n*n)*l,2*(e*t*l+n*A),2*(e*n*l-t*A),0,2*(e*t*l-n*A),1-2*(e*e+n*n)*l,2*(t*n*l+e*A),0,2*(e*n*l+t*A),2*(t*n*l-e*A),1-2*(e*e+t*t)*l,0,0,0,0,1];case"scale":return[r.d[0].value,0,0,0,0,r.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scaleX":return[r.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaleY":return[1,0,0,0,0,r.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scaleZ":return[1,0,0,0,0,1,0,0,0,0,r.d[0].value,0,0,0,0,1];case"scale3d":return[r.d[0].value,0,0,0,0,r.d[1].value,0,0,0,0,r.d[2].value,0,0,0,0,1];case"skew":var c=De(Dn(r.d[0])),u=De(Dn(r.d[1]));return[1,Math.tan(u),0,0,Math.tan(c),1,0,0,0,0,1,0,0,0,0,1];case"skewX":return i=De(Dn(r.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewY":return i=De(Dn(r.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return e=er(r.d[0],0,null)||0,t=er(r.d[1],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,t,0,1];case"translateX":return e=er(r.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,0,0,1];case"translateY":return t=er(r.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,t,0,1];case"translateZ":return n=er(r.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,n,1];case"translate3d":return e=er(r.d[0],0,null)||0,t=er(r.d[1],0,null)||0,n=er(r.d[2],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,t,n,1];case"perspective":var h=er(r.d[0],0,null)||0,d=h?-1/h:0;return[1,0,0,0,0,1,0,0,0,0,1,d,0,0,0,1];case"matrix":return[r.d[0].value,r.d[1].value,0,0,r.d[2].value,r.d[3].value,0,0,0,0,1,0,r.d[4].value,r.d[5].value,0,1];case"matrix3d":return r.d.map(function(f){return f.value})}}function N3(r,e){return[r[0]*e[0]+r[4]*e[1]+r[8]*e[2]+r[12]*e[3],r[1]*e[0]+r[5]*e[1]+r[9]*e[2]+r[13]*e[3],r[2]*e[0]+r[6]*e[1]+r[10]*e[2]+r[14]*e[3],r[3]*e[0]+r[7]*e[1]+r[11]*e[2]+r[15]*e[3],r[0]*e[4]+r[4]*e[5]+r[8]*e[6]+r[12]*e[7],r[1]*e[4]+r[5]*e[5]+r[9]*e[6]+r[13]*e[7],r[2]*e[4]+r[6]*e[5]+r[10]*e[6]+r[14]*e[7],r[3]*e[4]+r[7]*e[5]+r[11]*e[6]+r[15]*e[7],r[0]*e[8]+r[4]*e[9]+r[8]*e[10]+r[12]*e[11],r[1]*e[8]+r[5]*e[9]+r[9]*e[10]+r[13]*e[11],r[2]*e[8]+r[6]*e[9]+r[10]*e[10]+r[14]*e[11],r[3]*e[8]+r[7]*e[9]+r[11]*e[10]+r[15]*e[11],r[0]*e[12]+r[4]*e[13]+r[8]*e[14]+r[12]*e[15],r[1]*e[12]+r[5]*e[13]+r[9]*e[14]+r[13]*e[15],r[2]*e[12]+r[6]*e[13]+r[10]*e[14]+r[14]*e[15],r[3]*e[12]+r[7]*e[13]+r[11]*e[14]+r[15]*e[15]]}function U3(r){return r.length===0?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:r.map(Q3).reduce(N3)}function Xb(r){var e=[0,0,0],t=[1,1,1],n=[0,0,0],i=[0,0,0,1],a=[0,0,0,1];return bD(U3(r),e,t,n,i,a),[[e,t,n,a,i]]}var P3=function(){function r(n,i){for(var a=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],s=0;s<4;s++)for(var o=0;o<4;o++)for(var A=0;A<4;A++)a[s][o]+=i[s][A]*n[A][o];return a}function e(n){return n[0][2]===0&&n[0][3]===0&&n[1][2]===0&&n[1][3]===0&&n[2][0]===0&&n[2][1]===0&&n[2][2]===1&&n[2][3]===0&&n[3][2]===0&&n[3][3]===1}function t(n,i,a,s,o){for(var A=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],l=0;l<4;l++)A[l][3]=o[l];for(var c=0;c<3;c++)for(var u=0;u<3;u++)A[3][c]+=n[u]*A[u][c];var h=s[0],d=s[1],f=s[2],g=s[3],v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];v[0][0]=1-2*(d*d+f*f),v[0][1]=2*(h*d-f*g),v[0][2]=2*(h*f+d*g),v[1][0]=2*(h*d+f*g),v[1][1]=1-2*(h*h+f*f),v[1][2]=2*(d*f-h*g),v[2][0]=2*(h*f-d*g),v[2][1]=2*(d*f+h*g),v[2][2]=1-2*(h*h+d*d),A=r(A,v);var p=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];a[2]&&(p[2][1]=a[2],A=r(A,p)),a[1]&&(p[2][1]=0,p[2][0]=a[0],A=r(A,p)),a[0]&&(p[2][0]=0,p[1][0]=a[0],A=r(A,p));for(var y=0;y<3;y++)for(var m=0;m<3;m++)A[y][m]*=i[y];return e(A)?[A[0][0],A[0][1],A[1][0],A[1][1],A[3][0],A[3][1]]:A[0].concat(A[1],A[2],A[3])}return t}();function R3(r){return r.toFixed(6).replace(".000000","")}function Wf(r,e){var t,n;return r.decompositionPair!==e&&(r.decompositionPair=e,t=Xb(r)),e.decompositionPair!==r&&(e.decompositionPair=r,n=Xb(e)),t[0]===null||n[0]===null?[[!1],[!0],function(i){return i?e[0].d:r[0].d}]:(t[0].push(0),n[0].push(1),[t,n,function(i){var a=H3(t[0][3],n[0][3],i[5]),s=P3(i[0],i[1],i[2],a,i[4]),o=s.map(R3).join(",");return o}])}function D3(r,e){for(var t=0,n=0;n<r.length;n++)t+=r[n]*e[n];return t}function H3(r,e,t){var n=D3(r,e);n=vt(n,-1,1);var i=[];if(n===1)i=r;else for(var a=Math.acos(n),s=Math.sin(t*a)*1/Math.sqrt(1-n*n),o=0;o<4;o++)i.push(r[o]*(Math.cos(t*a)-n*s)+e[o]*s);return i}function qf(r){return r.replace(/[XY]/,"")}function Yf(r){return r.replace(/(X|Y|Z|3d)?$/,"3d")}var G3=function(e,t){return e==="perspective"&&t==="perspective"||(e==="matrix"||e==="matrix3d")&&(t==="matrix"||t==="matrix3d")};function K3(r,e,t){var n=!1;if(!r.length||!e.length){r.length||(n=!0,r=e,e=[]);for(var i=function(){var F=r[a],M=F.t,T=F.d,O=M.substring(0,5)==="scale"?1:0;e.push({t:M,d:T.map(function(_){return typeof _=="number"?At(O):At(O,_.unit)})})},a=0;a<r.length;a++)i()}var s=[],o=[],A=[];if(r.length!==e.length){var l=Wf(r,e);s=[l[0]],o=[l[1]],A=[["matrix",[l[2]]]]}else for(var c=0;c<r.length;c++){var u=r[c].t,h=e[c].t,d=r[c].d,f=e[c].d,g=nl[u],v=nl[h],p=void 0;if(G3(u,h)){var y=Wf([r[c]],[e[c]]);s.push(y[0]),o.push(y[1]),A.push(["matrix",[y[2]]]);continue}else if(u===h)p=u;else if(g[2]&&v[2]&&qf(u)===qf(h))p=qf(u),d=g[2](d),f=v[2](f);else if(g[1]&&v[1]&&Yf(u)===Yf(h))p=Yf(u),d=g[1](d),f=v[1](f);else{var m=Wf(r,e);s=[m[0]],o=[m[1]],A=[["matrix",[m[2]]]];break}for(var w=[],B=[],b=[],E=0;E<d.length;E++){var x=m3(d[E],f[E],t,!1,E);w[E]=x[0],B[E]=x[1],b.push(x[2])}s.push(w),o.push(B),A.push([p,b])}if(n){var S=s;s=o,o=S}return[s,o,function(C){return C.map(function(F,M){var T=F.map(function(O,_){return A[M][1][_](O)}).join(",");return A[M][0]==="matrix"&&T.split(",").length===16&&(A[M][0]="matrix3d"),A[M][0]==="matrix3d"&&T.split(",").length===6&&(A[M][0]="matrix"),"".concat(A[M][0],"(").concat(T,")")}).join(" ")}]}var z3=It(function(r){if(_e(r)){if(r==="text-anchor")return[At(0,"px"),At(0,"px")];var e=r.split(" ");return e.length===1&&(e[0]==="top"||e[0]==="bottom"?(e[1]=e[0],e[0]="center"):e[1]="center"),e.length!==2?null:[h1(Zb(e[0])),h1(Zb(e[1]))]}return[At(r[0]||0,"px"),At(r[1]||0,"px")]});function Zb(r){return r==="center"?"50%":r==="left"||r==="top"?"0%":r==="right"||r==="bottom"?"100%":r}var Pw=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:$.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:$.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:$.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:$.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:$.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:$.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:$.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:$.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:$.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:$.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:$.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:$.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:$.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:$.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:$.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:$.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:$.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:$.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:$.FILTER},{n:"clipPath",syntax:$.DEFINED_PATH},{n:"textPath",syntax:$.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:$.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:$.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:$.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:$.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:$.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:$.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:$.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:$.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:$.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:$.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:$.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:$.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:$.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:$.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:$.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:$.COORDINATE},{n:"y1",int:!0,l:!0,syntax:$.COORDINATE},{n:"z1",int:!0,l:!0,syntax:$.COORDINATE},{n:"x2",int:!0,l:!0,syntax:$.COORDINATE},{n:"y2",int:!0,l:!0,syntax:$.COORDINATE},{n:"z2",int:!0,l:!0,syntax:$.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:$.PATH,p:50},{n:"points",int:!0,l:!0,syntax:$.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:$.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:$.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:$.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:$.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:$.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:$.NUMBER,d:function(e){return e===P.PATH||e===P.POLYGON||e===P.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:$.MARKER},{n:"markerEnd",syntax:$.MARKER},{n:"markerMid",syntax:$.MARKER},{n:"markerStartOffset",syntax:$.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:$.LENGTH,l:!0,int:!0,d:"0"}],V3=new Set(Pw.filter(function(r){return!!r.l}).map(function(r){return r.n})),t_={},j3=function(){function r(e){var t=this;G(this,r),this.runtime=e,Pw.forEach(function(n){t.registerMetadata(n)})}return K(r,[{key:"registerMetadata",value:function(t){[t.n].concat(Fe(t.a||[])).forEach(function(n){t_[n]=t})}},{key:"getPropertySyntax",value:function(t){return this.runtime.CSSPropertySyntaxFactory[t]}},{key:"processProperties",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{forceUpdateGeometry:!1};Object.assign(t.attributes,n);var a=t.parsedStyle.clipPath,s=t.parsedStyle.offsetPath;$3(t,n);var o=!!i.forceUpdateGeometry;if(!o){for(var A in n)if(V3.has(A)){o=!0;break}}var l=n_(t);l.has("fill")&&n.fill&&(t.parsedStyle.fill=HA(n.fill)),l.has("stroke")&&n.stroke&&(t.parsedStyle.stroke=HA(n.stroke)),l.has("shadowColor")&&n.shadowColor&&(t.parsedStyle.shadowColor=HA(n.shadowColor)),l.has("filter")&&n.filter&&(t.parsedStyle.filter=b3(n.filter)),l.has("radius")&&!le(n.radius)&&(t.parsedStyle.radius=Vb(n.radius,4)),l.has("lineDash")&&!le(n.lineDash)&&(t.parsedStyle.lineDash=Vb(n.lineDash,"even")),l.has("points")&&n.points&&(t.parsedStyle.points=_3(n.points)),l.has("d")&&n.d===""&&(t.parsedStyle.d=ue({},RI)),l.has("d")&&n.d&&(t.parsedStyle.d=ZI(n.d)),l.has("textTransform")&&n.textTransform&&this.runtime.CSSPropertySyntaxFactory[$.TEXT_TRANSFORM].calculator(null,null,{value:n.textTransform},t,null),l.has("clipPath")&&!he(n.clipPath)&&this.runtime.CSSPropertySyntaxFactory[$.DEFINED_PATH].calculator("clipPath",a,n.clipPath,t,this.runtime),l.has("offsetPath")&&n.offsetPath&&this.runtime.CSSPropertySyntaxFactory[$.DEFINED_PATH].calculator("offsetPath",s,n.offsetPath,t,this.runtime),l.has("transform")&&n.transform&&(t.parsedStyle.transform=e_(n.transform)),l.has("transformOrigin")&&n.transformOrigin&&(t.parsedStyle.transformOrigin=z3(n.transformOrigin)),l.has("markerStart")&&n.markerStart&&(t.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory[$.MARKER].calculator(null,n.markerStart,n.markerStart,null,null)),l.has("markerEnd")&&n.markerEnd&&(t.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory[$.MARKER].calculator(null,n.markerEnd,n.markerEnd,null,null)),l.has("markerMid")&&n.markerMid&&(t.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory[$.MARKER].calculator("",n.markerMid,n.markerMid,null,null)),l.has("zIndex")&&!le(n.zIndex)&&this.runtime.CSSPropertySyntaxFactory[$.Z_INDEX].postProcessor(t),l.has("offsetDistance")&&!le(n.offsetDistance)&&this.runtime.CSSPropertySyntaxFactory[$.OFFSET_DISTANCE].postProcessor(t),l.has("transform")&&n.transform&&this.runtime.CSSPropertySyntaxFactory[$.TRANSFORM].postProcessor(t),l.has("transformOrigin")&&n.transformOrigin&&this.runtime.CSSPropertySyntaxFactory[$.TRANSFORM_ORIGIN].postProcessor(t),o&&(t.dirty(!0,!0),i.forceUpdateGeometry||this.runtime.sceneGraphService.dirtyToRoot(t))}},{key:"updateGeometry",value:function(t){var n=t.nodeName,i=this.runtime.geometryUpdaterFactory[n];if(i){var a=t.geometry;a.contentBounds||(a.contentBounds=new tt),a.renderBounds||(a.renderBounds=new tt);var s=t.parsedStyle,o=i.update(s,t),A=o.cx,l=A===void 0?0:A,c=o.cy,u=c===void 0?0:c,h=o.cz,d=h===void 0?0:h,f=o.hwidth,g=f===void 0?0:f,v=o.hheight,p=v===void 0?0:v,y=o.hdepth,m=y===void 0?0:y,w=[Math.abs(g),Math.abs(p),m],B=s.stroke,b=s.lineWidth,E=b===void 0?1:b,x=s.increasedLineWidthForHitTesting,S=x===void 0?0:x,C=s.shadowType,F=C===void 0?"outer":C,M=s.shadowColor,T=s.filter,O=T===void 0?[]:T,_=s.transformOrigin,Q=[l,u,d];a.contentBounds.update(Q,w);var L=n===P.POLYLINE||n===P.POLYGON||n===P.PATH?Math.SQRT2:.5,k=B&&!B.isNone;if(k){var U=((E||0)+(S||0))*L;w[0]+=U,w[1]+=U}if(a.renderBounds.update(Q,w),M&&F&&F!=="inner"){var D=a.renderBounds,j=D.min,X=D.max,W=s.shadowBlur,Y=s.shadowOffsetX,se=s.shadowOffsetY,te=W||0,ne=Y||0,Le=se||0,ke=j[0]-te+ne,Ue=X[0]+te+ne,ct=j[1]-te+Le,Pe=X[1]+te+Le;j[0]=Math.min(j[0],ke),X[0]=Math.max(X[0],Ue),j[1]=Math.min(j[1],ct),X[1]=Math.max(X[1],Pe),a.renderBounds.setMinMax(j,X)}O.forEach(function(Qe){var Mr=Qe.name,qn=Qe.params;if(Mr==="blur"){var Va=qn[0].value;a.renderBounds.update(a.renderBounds.center,xa(a.renderBounds.halfExtents,a.renderBounds.halfExtents,[Va,Va,0]))}else if(Mr==="drop-shadow"){var Jr=qn[0].value,Yn=qn[1].value,mt=qn[2].value,ei=a.renderBounds,_n=ei.min,Or=ei.max,ti=_n[0]-mt+Jr,kn=Or[0]+mt+Jr,Ht=_n[1]-mt+Yn,Gt=Or[1]+mt+Yn;_n[0]=Math.min(_n[0],ti),Or[0]=Math.max(Or[0],kn),_n[1]=Math.min(_n[1],Ht),Or[1]=Math.max(Or[1],Gt),a.renderBounds.setMinMax(_n,Or)}}),t.geometry.dirty=!1;var xt=g<0,In=p<0,fe=(xt?-1:1)*(_?er(_[0],0,t,!0):0),We=(In?-1:1)*(_?er(_[1],1,t,!0):0);(fe||We)&&t.setOrigin(fe,We)}}},{key:"updateSizeAttenuation",value:function(t,n){t.style.isSizeAttenuation?(t.style.rawLineWidth||(t.style.rawLineWidth=t.style.lineWidth),t.style.lineWidth=(t.style.rawLineWidth||1)/n,t.nodeName===P.CIRCLE&&(t.style.rawR||(t.style.rawR=t.style.r),t.style.r=(t.style.rawR||1)/n)):(t.style.rawLineWidth&&(t.style.lineWidth=t.style.rawLineWidth,delete t.style.rawLineWidth),t.nodeName===P.CIRCLE&&t.style.rawR&&(t.style.r=t.style.rawR,delete t.style.rawR))}}])}();function $3(r,e){var t=n_(r);for(var n in e)t.has(n)&&(r.parsedStyle[n]=e[n])}function n_(r){return r.constructor.PARSED_STYLE_LIST}var W3=function(){function r(){G(this,r),this.mixer=Nw}return K(r,[{key:"calculator",value:function(t,n,i,a){return Dn(i)}}])}(),q3=function(){function r(){G(this,r)}return K(r,[{key:"calculator",value:function(t,n,i,a,s){return i instanceof Cr&&(i=null),s.sceneGraphService.updateDisplayObjectDependency(t,n,i,a),t==="clipPath"&&a.forEach(function(o){o.childNodes.length===0&&s.sceneGraphService.dirtyToRoot(o)}),i}}])}(),Y3=function(){function r(){G(this,r),this.parser=HA,this.mixer=g3}return K(r,[{key:"calculator",value:function(t,n,i,a){return i instanceof Cr?i.value==="none"?GI:KI:i}}])}(),X3=function(){function r(){G(this,r)}return K(r,[{key:"calculator",value:function(t,n,i){return i instanceof Cr?[]:i}}])}();function Jb(r){var e=r.parsedStyle,t=e.fontSize;return le(t)?null:t}var v1=function(){function r(){G(this,r),this.mixer=Nw}return K(r,[{key:"calculator",value:function(t,n,i,a,s){if(Z(i))return i;if(je.isRelativeUnit(i.unit)){if(i.unit===q.kPercentage)return 0;if(i.unit===q.kEms){if(a.parentNode){var o=Jb(a.parentNode);if(o)return o*=i.value,o}return 0}if(i.unit===q.kRems){var A;if(a!=null&&(A=a.ownerDocument)!==null&&A!==void 0&&A.documentElement){var l=Jb(a.ownerDocument.documentElement);if(l)return l*=i.value,l}return 0}}else return i.value}}])}(),Z3=function(){function r(){G(this,r),this.mixer=YI}return K(r,[{key:"calculator",value:function(t,n,i){return i.map(function(a){return a.value})}}])}(),J3=function(){function r(){G(this,r),this.mixer=YI}return K(r,[{key:"calculator",value:function(t,n,i){return i.map(function(a){return a.value})}}])}(),e4=function(){function r(){G(this,r)}return K(r,[{key:"calculator",value:function(t,n,i,a){var s;i instanceof Cr&&(i=null);var o=(s=i)===null||s===void 0?void 0:s.cloneNode(!0);return o&&(o.style.isMarker=!0),o}}])}(),t4=function(){function r(){G(this,r),this.mixer=Nw}return K(r,[{key:"calculator",value:function(t,n,i){return i.value}}])}(),n4=function(){function r(){G(this,r),this.mixer=Uw(0,1)}return K(r,[{key:"calculator",value:function(t,n,i){return i.value}},{key:"postProcessor",value:function(t){var n=t.parsedStyle,i=n.offsetPath,a=n.offsetDistance;if(i){var s=i.nodeName;if(s===P.LINE||s===P.PATH||s===P.POLYLINE){var o=i.getPoint(a);o&&t.setLocalPosition(o.x,o.y)}}}}])}(),r4=function(){function r(){G(this,r),this.mixer=Uw(0,1)}return K(r,[{key:"calculator",value:function(t,n,i){return i.value}}])}(),i4=function(){function r(){G(this,r),this.parser=ZI,this.mixer=I3}return K(r,[{key:"calculator",value:function(t,n,i){return i instanceof Cr&&i.value==="unset"?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new ko(0,0,0,0)}:i}}])}(),a4=K(function r(){G(this,r),this.mixer=k3}),s4=function(r){function e(){var t;G(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=ye(this,e,[].concat(i)),t.mixer=Uw(0,1/0),t}return me(e,r),K(e)}(v1),o4=function(){function r(){G(this,r)}return K(r,[{key:"calculator",value:function(t,n,i,a){return i instanceof Cr?i.value==="unset"?"":i.value:"".concat(i)}},{key:"postProcessor",value:function(t){t.nodeValue="".concat(t.parsedStyle.text)||""}}])}(),A4=function(){function r(){G(this,r)}return K(r,[{key:"calculator",value:function(t,n,i,a){var s=a.getAttribute("text");if(s){var o=s;i.value==="capitalize"?o=s.charAt(0).toUpperCase()+s.slice(1):i.value==="lowercase"?o=s.toLowerCase():i.value==="uppercase"&&(o=s.toUpperCase()),a.parsedStyle.text=o}return i.value}}])}(),Xf=new WeakMap;function l4(r,e,t){if(r){var n=typeof r=="string"?document.getElementById(r):r;Xf.has(n)&&Xf.get(n).destroy(t),Xf.set(n,e)}}var Rw=typeof window<"u"&&typeof window.document<"u";function c4(r){return!!r.getAttribute}function u4(r,e){for(var t=0,n=r.length;t<n;){var i=t+n>>>1;r_(r[i],e)<0?t=i+1:n=i}return t}function r_(r,e){var t=Number(r.parsedStyle.zIndex||0),n=Number(e.parsedStyle.zIndex||0);if(t===n){var i=r.parentNode;if(i){var a=i.childNodes||[];return a.indexOf(r)-a.indexOf(e)}}return t-n}function i_(r){var e=r;do{var t,n=(t=e.parsedStyle)===null||t===void 0?void 0:t.clipPath;if(n)return e;e=e.parentElement}while(e!==null);return null}var eE="px";function h4(r,e,t){Rw&&r.style&&(r.style.width=e+eE,r.style.height=t+eE)}function a_(r,e){if(Rw)return document.defaultView.getComputedStyle(r,null).getPropertyValue(e)}function d4(r){var e=a_(r,"width");return e==="auto"?r.offsetWidth:parseFloat(e)}function f4(r){var e=a_(r,"height");return e==="auto"?r.offsetHeight:parseFloat(e)}var g4=1,v4={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},p1=typeof performance=="object"&&performance.now?performance:Date;function rh(r){return r.nodeName===P.FRAGMENT?!0:r.getRootNode().nodeName===P.FRAGMENT}function _s(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"auto",e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,n=!1,i=!1,a=!!e&&!e.isNone,s=!!t&&!t.isNone;return r==="visiblepainted"||r==="painted"||r==="auto"?(n=a,i=s):r==="visiblefill"||r==="fill"?n=!0:r==="visiblestroke"||r==="stroke"?i=!0:(r==="visible"||r==="all")&&(n=!0,i=!0),[n,i]}var p4=1,y4=function(){return p4++},vi=typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:{},m4=Date.now(),w4=function(){return vi.performance&&typeof vi.performance.now=="function"?vi.performance.now():Date.now()-m4},pA={},tE=Date.now(),B4=function(e){if(typeof e!="function")throw new TypeError("".concat(e," is not a function"));var t=Date.now(),n=t-tE,i=n>16?0:16-n,a=y4();return pA[a]=e,Object.keys(pA).length>1||setTimeout(function(){tE=t;var s=pA;pA={},Object.keys(s).forEach(function(o){return s[o](w4())})},i),a},b4=function(e){delete pA[e]},E4=["","webkit","moz","ms","o"],s_=function(e){return typeof e!="string"?B4:e===""?vi.requestAnimationFrame:vi["".concat(e,"RequestAnimationFrame")]},x4=function(e){return typeof e!="string"?b4:e===""?vi.cancelAnimationFrame:vi["".concat(e,"CancelAnimationFrame")]||vi["".concat(e,"CancelRequestAnimationFrame")]},C4=function(e,t){for(var n=0;e[n]!==void 0;){if(t(e[n]))return e[n];n+=1}},o_=C4(E4,function(r){return!!s_(r)}),Dw=s_(o_),A_=x4(o_);vi.requestAnimationFrame=Dw;vi.cancelAnimationFrame=A_;var S4=function(){function r(){G(this,r),this.callbacks=[]}return K(r,[{key:"getCallbacksNum",value:function(){return this.callbacks.length}},{key:"tapPromise",value:function(t,n){this.callbacks.push(n)}},{key:"promise",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Promise.all(this.callbacks.map(function(a){return a.apply(void 0,n)}))}}])}(),F4=function(){function r(){G(this,r),this.callbacks=[]}return K(r,[{key:"tapPromise",value:function(t,n){this.callbacks.push(n)}},{key:"promise",value:function(){var e=ka(Xt().mark(function n(){var i,a,s,o,A=arguments;return Xt().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!this.callbacks.length){l.next=6;break}return l.next=1,(i=this.callbacks)[0].apply(i,A);case 1:a=l.sent,s=1;case 2:if(!(s<this.callbacks.length)){l.next=5;break}return o=this.callbacks[s],l.next=3,o(a);case 3:a=l.sent;case 4:s++,l.next=2;break;case 5:return l.abrupt("return",a);case 6:return l.abrupt("return",null);case 7:case"end":return l.stop()}},n,this)}));function t(){return e.apply(this,arguments)}return t}()}])}(),Bn=function(){function r(){G(this,r),this.callbacks=[]}return K(r,[{key:"tap",value:function(t,n){this.callbacks.push(n)}},{key:"call",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var a=arguments;this.callbacks.forEach(function(s){s.apply(void 0,a)})}}])}(),Zf=function(){function r(){G(this,r),this.callbacks=[]}return K(r,[{key:"tap",value:function(t,n){this.callbacks.push(n)}},{key:"call",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(this.callbacks.length){for(var a=arguments,s=this.callbacks[0].apply(void 0,a),o=1;o<this.callbacks.length;o++){var A=this.callbacks[o];s=A(s)}return s}return null}}])}(),T4=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],M4=/([\"\'])[^\'\"]+\1/;function nE(r){var e=r.fontSize,t=e===void 0?16:e,n=r.fontFamily,i=n===void 0?"sans-serif":n,a=r.fontStyle,s=a===void 0?"normal":a,o=r.fontVariant,A=o===void 0?"normal":o,l=r.fontWeight,c=l===void 0?"normal":l;return{fontSize:t,fontFamily:i,fontStyle:s,fontVariant:A,fontWeight:c}}var rE=It(function(e){for(var t=nE(e),n=t.fontSize,i=t.fontFamily,a=t.fontStyle,s=t.fontVariant,o=t.fontWeight,A=Z(n)&&"".concat(n,"px")||"16px",l=i.split(","),c=l.length-1;c>=0;c--){var u=l[c].trim();!M4.test(u)&&T4.indexOf(u)<0&&(u='"'.concat(u,'"')),l[c]=u}return"".concat(a," ").concat(s," ").concat(o," ").concat(A," ").concat(l.join(","))},function(r){var e=nE(r),t=e.fontSize,n=e.fontFamily,i=e.fontStyle,a=e.fontVariant,s=e.fontWeight;return"".concat(i,"_").concat(a,"_").concat(s,"_").concat(t,"_").concat(n)}),O4=1e-6,rA=function(e){return Math.max(e,O4)};function Jf(r,e,t){return Ia(r),r[4]=Math.tan(e),r[1]=Math.tan(t),r}var Ft=Ye(),I4=Ye(),_4={scale:function(e){rs(Ft,[e[0].value,e[1].value,1].map(function(t){return rA(t)}))},scaleX:function(e){rs(Ft,[e[0].value,1,1].map(function(t){return rA(t)}))},scaleY:function(e){rs(Ft,[1,e[0].value,1].map(function(t){return rA(t)}))},scaleZ:function(e){rs(Ft,[1,1,e[0].value].map(function(t){return rA(t)}))},scale3d:function(e){rs(Ft,[e[0].value,e[1].value,e[2].value].map(function(t){return rA(t)}))},translate:function(e){ca(Ft,[e[0].value,e[1].value,0])},translateX:function(e){ca(Ft,[e[0].value,0,0])},translateY:function(e){ca(Ft,[0,e[0].value,0])},translateZ:function(e){ca(Ft,[0,0,e[0].value])},translate3d:function(e){ca(Ft,[e[0].value,e[1].value,e[2].value])},rotate:function(e){qm(Ft,De(Dn(e[0])))},rotateX:function(e){aI(Ft,De(Dn(e[0])))},rotateY:function(e){sI(Ft,De(Dn(e[0])))},rotateZ:function(e){qm(Ft,De(Dn(e[0])))},rotate3d:function(e){iI(Ft,De(Dn(e[3])),[e[0].value,e[1].value,e[2].value])},skew:function(e){Jf(Ft,De(e[0].value),De(e[1].value))},skewX:function(e){Jf(Ft,De(e[0].value),0)},skewY:function(e){Jf(Ft,0,De(e[0].value))},matrix:function(e){Wm(Ft,e[0].value,e[1].value,0,0,e[2].value,e[3].value,0,0,0,0,1,0,e[4].value,e[5].value,0,1)},matrix3d:function(e){Wm.apply(xP,[Ft].concat(Fe(e.map(function(t){return t.value}))))}},k4=Xe(1,1,1),L4=xe(),iE={translate:function(e,t){z.sceneGraphService.setLocalScale(e,k4,!1),z.sceneGraphService.setLocalEulerAngles(e,L4,void 0,void 0,!1),z.sceneGraphService.setLocalPosition(e,[t[0].value,t[1].value,0],!1),z.sceneGraphService.dirtyLocalTransform(e,e.transformable)}};function l_(r,e){if(r.length){if(r.length===1&&iE[r[0].t]){iE[r[0].t](e,r[0].d);return}for(var t=Ia(I4),n=0;n<r.length;n++){var i=r[n],a=i.t,s=i.d,o=_4[a];o&&(o(s),fI(t,t,Ft))}e.setLocalTransform(t)}else e.resetLocalTransform();return e.getLocalTransform()}var Q4=function(){function r(){G(this,r),this.parser=L3,this.mixer=K3}return K(r,[{key:"calculator",value:function(t,n,i,a){return i instanceof Cr?[]:i}},{key:"postProcessor",value:function(t){l_(t.parsedStyle.transform,t)}}])}(),N4=function(){function r(){G(this,r)}return K(r,[{key:"postProcessor",value:function(t){var n=t.parsedStyle.transformOrigin;n[0].unit===q.kPixels&&n[1].unit===q.kPixels?t.setOrigin(n[0].value,n[1].value):t.getGeometryBounds()}}])}(),U4=function(){function r(){G(this,r)}return K(r,[{key:"calculator",value:function(t,n,i,a){return i.value}},{key:"postProcessor",value:function(t){if(t.parentNode){var n=t.parentNode,i=n.renderable,a=n.sortable;i&&n.dirty(),a&&(a.dirty=!0,a.dirtyReason=Zu.Z_INDEX_CHANGED)}}}])}(),P4=function(){function r(){G(this,r)}return K(r,[{key:"update",value:function(t,n){var i=t.cx,a=i===void 0?0:i,s=t.cy,o=s===void 0?0:s,A=t.r,l=A===void 0?0:A;return{cx:a,cy:o,hwidth:l,hheight:l}}}])}(),R4=function(){function r(){G(this,r)}return K(r,[{key:"update",value:function(t,n){var i=t.cx,a=i===void 0?0:i,s=t.cy,o=s===void 0?0:s,A=t.rx,l=A===void 0?0:A,c=t.ry,u=c===void 0?0:c;return{cx:a,cy:o,hwidth:l,hheight:u}}}])}(),D4=function(){function r(){G(this,r)}return K(r,[{key:"update",value:function(t){var n=t.x1,i=t.y1,a=t.x2,s=t.y2,o=Math.min(n,a),A=Math.max(n,a),l=Math.min(i,s),c=Math.max(i,s),u=A-o,h=c-l,d=u/2,f=h/2;return{cx:o+d,cy:l+f,hwidth:d,hheight:f}}}])}(),H4=function(){function r(){G(this,r)}return K(r,[{key:"update",value:function(t){var n=t.d,i=n.rect,a=i.x,s=i.y,o=i.width,A=i.height,l=o/2,c=A/2;return{cx:a+l,cy:s+c,hwidth:l,hheight:c}}}])}(),G4=function(){function r(){G(this,r)}return K(r,[{key:"update",value:function(t){if(t.points&&Wn(t.points.points)){var n=t.points.points,i=Math.min.apply(Math,Fe(n.map(function(h){return h[0]}))),a=Math.max.apply(Math,Fe(n.map(function(h){return h[0]}))),s=Math.min.apply(Math,Fe(n.map(function(h){return h[1]}))),o=Math.max.apply(Math,Fe(n.map(function(h){return h[1]}))),A=a-i,l=o-s,c=A/2,u=l/2;return{cx:i+c,cy:s+u,hwidth:c,hheight:u}}return{cx:0,cy:0,hwidth:0,hheight:0}}}])}(),K4=function(){function r(){G(this,r)}return K(r,[{key:"update",value:function(t,n){var i=t.x,a=i===void 0?0:i,s=t.y,o=s===void 0?0:s,A=t.src,l=t.width,c=l===void 0?0:l,u=t.height,h=u===void 0?0:u,d=c,f=h;return A&&!_e(A)&&(d||(d=A.width,t.width=d),f||(f=A.height,t.height=f)),{cx:a+d/2,cy:o+f/2,hwidth:d/2,hheight:f/2}}}])}(),z4=function(){function r(e){G(this,r),this.globalRuntime=e}return K(r,[{key:"isReadyToMeasure",value:function(t,n){var i=t.text;return i}},{key:"update",value:function(t,n){var i,a=t.text,s=t.textAlign,o=s===void 0?"start":s,A=t.lineWidth,l=A===void 0?1:A,c=t.textBaseline,u=c===void 0?"alphabetic":c,h=t.dx,d=h===void 0?0:h,f=t.dy,g=f===void 0?0:f,v=t.x,p=v===void 0?0:v,y=t.y,m=y===void 0?0:y;if(!this.isReadyToMeasure(t,n))return t.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var w=(n==null||(i=n.ownerDocument)===null||i===void 0||(i=i.defaultView)===null||i===void 0?void 0:i.getConfig())||{},B=w.offscreenCanvas,b=this.globalRuntime.textService.measureText(a,t,B);t.metrics=b;var E=b.width,x=b.height,S=E/2,C=x/2,F=p+S;o==="center"||o==="middle"?F+=l/2-S:(o==="right"||o==="end")&&(F+=l-S*2);var M=m-C;return u==="middle"?M+=C:u==="top"||u==="hanging"?M+=C*2:u==="alphabetic"||(u==="bottom"||u==="ideographic")&&(M+=0),d&&(F+=d),g&&(M+=g),{cx:F,cy:M,hwidth:S,hheight:C}}}])}(),V4=function(){function r(){G(this,r)}return K(r,[{key:"update",value:function(t,n){return{cx:0,cy:0,hwidth:0,hheight:0}}}])}(),j4=function(){function r(){G(this,r)}return K(r,[{key:"update",value:function(t,n){var i=t.x,a=i===void 0?0:i,s=t.y,o=s===void 0?0:s,A=t.width,l=A===void 0?0:A,c=t.height,u=c===void 0?0:c;return{cx:a+l/2,cy:o+u/2,hwidth:l/2,hheight:u/2}}}])}(),Hh=function(){function r(e){G(this,r),this.eventPhase=r.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new rn,this.page=new rn,this.canvas=new rn,this.viewport=new rn,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}return K(r,[{key:"name",get:function(){return this.type}},{key:"layerX",get:function(){return this.layer.x}},{key:"layerY",get:function(){return this.layer.y}},{key:"pageX",get:function(){return this.page.x}},{key:"pageY",get:function(){return this.page.y}},{key:"x",get:function(){return this.canvas.x}},{key:"y",get:function(){return this.canvas.y}},{key:"canvasX",get:function(){return this.canvas.x}},{key:"canvasY",get:function(){return this.canvas.y}},{key:"viewportX",get:function(){return this.viewport.x}},{key:"viewportY",get:function(){return this.viewport.y}},{key:"composedPath",value:function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}},{key:"propagationPath",get:function(){return this.composedPath()}},{key:"preventDefault",value:function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}},{key:"stopImmediatePropagation",value:function(){this.propagationImmediatelyStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"initEvent",value:function(){}},{key:"initUIEvent",value:function(){}},{key:"clone",value:function(){throw new Error(Ve)}}])}(),c_=function(r){function e(){var t;G(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=ye(this,e,[].concat(i)),t.client=new rn,t.movement=new rn,t.offset=new rn,t.global=new rn,t.screen=new rn,t}return me(e,r),K(e,[{key:"clientX",get:function(){return this.client.x}},{key:"clientY",get:function(){return this.client.y}},{key:"movementX",get:function(){return this.movement.x}},{key:"movementY",get:function(){return this.movement.y}},{key:"offsetX",get:function(){return this.offset.x}},{key:"offsetY",get:function(){return this.offset.y}},{key:"globalX",get:function(){return this.global.x}},{key:"globalY",get:function(){return this.global.y}},{key:"screenX",get:function(){return this.screen.x}},{key:"screenY",get:function(){return this.screen.y}},{key:"getModifierState",value:function(n){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(n)}},{key:"initMouseEvent",value:function(){throw new Error(Ve)}}])}(Hh),ih=function(r){function e(){var t;G(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=ye(this,e,[].concat(i)),t.width=0,t.height=0,t.isPrimary=!1,t}return me(e,r),K(e,[{key:"getCoalescedEvents",value:function(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}},{key:"getPredictedEvents",value:function(){throw new Error("getPredictedEvents is not supported!")}},{key:"clone",value:function(){return this.manager.clonePointerEvent(this)}}])}(c_),y1=function(r){function e(){return G(this,e),ye(this,e,arguments)}return me(e,r),K(e,[{key:"clone",value:function(){return this.manager.cloneWheelEvent(this)}}])}(c_),Qt=function(r){function e(t,n){var i;return G(this,e),i=ye(this,e,[null]),i.type=t,i.detail=n==null?void 0:n.detail,n&&!("detail"in n)&&(i.detail=n),Object.assign(i,n),i}return me(e,r),K(e)}(Hh),u_=function(){function r(){G(this,r),this.emitter=new qO}return K(r,[{key:"on",value:function(t,n,i){return this.addEventListener(t,n,i),this}},{key:"addEventListener",value:function(t,n,i){var a=!1,s=!1;if(ZA(i))a=i;else if(i){var o=i.capture;a=o===void 0?!1:o;var A=i.once;s=A===void 0?!1:A}a&&(t+="capture"),n=ie(n)?n:n.handleEvent;var l=ie(n)?void 0:n;return s?this.emitter.once(t,n,l):this.emitter.on(t,n,l),this}},{key:"off",value:function(t,n,i){return t?this.removeEventListener(t,n,i):this.removeAllEventListeners(),this}},{key:"removeAllEventListeners",value:function(){var t;(t=this.emitter)===null||t===void 0||t.removeAllListeners()}},{key:"removeEventListener",value:function(t,n,i){var a;if(!this.emitter)return this;var s=ZA(i)?i:i==null?void 0:i.capture;s&&(t+="capture"),n=ie(n)?n:(a=n)===null||a===void 0?void 0:a.handleEvent;var o=ie(n)?void 0:n;return this.emitter.off(t,n,o),this}},{key:"emit",value:function(t,n){this.dispatchEvent(new Qt(t,n))}},{key:"dispatchEventToSelf",value:function(t){t.target||(t.target=this),t.currentTarget=this,this.emitter.emit(t.type,t)}},{key:"dispatchEvent",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2?arguments[2]:void 0;if(i)return this.dispatchEventToSelf(t),!0;var a;if(this.document)a=this;else if(this.defaultView)a=this.defaultView;else{var s;a=(s=this.ownerDocument)===null||s===void 0?void 0:s.defaultView}if(a){if(t.manager=a.getEventService(),!t.manager)return!1;t.defaultPrevented=!1,t.path?t.path.length=0:t.page=[],n||(t.target=this),t.manager.dispatchEvent(t,t.type,n)}else this.dispatchEventToSelf(t);return!t.defaultPrevented}}])}(),ht=function(r){function e(){var t;G(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=ye(this,e,[].concat(i)),t.shadow=!1,t.ownerDocument=null,t.isConnected=!1,t.baseURI="",t.childNodes=[],t.nodeType=0,t.nodeName="",t.nodeValue=null,t.mutations=void 0,t.parentNode=null,t.destroyed=!1,t}return me(e,r),K(e,[{key:"textContent",get:function(){var n="";this.nodeName===P.TEXT&&(n+=this.style.text);var i=ua(this.childNodes),a;try{for(i.s();!(a=i.n()).done;){var s=a.value;s.nodeName===P.TEXT?n+=s.nodeValue:n+=s.textContent}}catch(o){i.e(o)}finally{i.f()}return n},set:function(n){var i=this;this.childNodes.slice().forEach(function(a){i.removeChild(a)}),this.nodeName===P.TEXT&&(this.style.text="".concat(n))}},{key:"getRootNode",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.parentNode?this.parentNode.getRootNode(n):n.composed&&this.host?this.host.getRootNode(n):this}},{key:"hasChildNodes",value:function(){return this.childNodes.length>0}},{key:"isDefaultNamespace",value:function(n){throw new Error(Ve)}},{key:"lookupNamespaceURI",value:function(n){throw new Error(Ve)}},{key:"lookupPrefix",value:function(n){throw new Error(Ve)}},{key:"normalize",value:function(){throw new Error(Ve)}},{key:"isEqualNode",value:function(n){return this===n}},{key:"isSameNode",value:function(n){return this.isEqualNode(n)}},{key:"parent",get:function(){return this.parentNode}},{key:"parentElement",get:function(){return null}},{key:"nextSibling",get:function(){return null}},{key:"previousSibling",get:function(){return null}},{key:"firstChild",get:function(){return this.childNodes.length>0?this.childNodes[0]:null}},{key:"lastChild",get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null}},{key:"compareDocumentPosition",value:function(n){if(n===this)return 0;for(var i=n,a=this,s=[i],o=[a];(A=i.parentNode)!==null&&A!==void 0?A:a.parentNode;){var A;i=i.parentNode?(s.push(i.parentNode),i.parentNode):i,a=a.parentNode?(o.push(a.parentNode),a.parentNode):a}if(i!==a)return e.DOCUMENT_POSITION_DISCONNECTED|e.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|e.DOCUMENT_POSITION_PRECEDING;var l=s.length>o.length?s:o,c=l===s?o:s;if(l[l.length-c.length]===c[0])return l===s?e.DOCUMENT_POSITION_CONTAINED_BY|e.DOCUMENT_POSITION_FOLLOWING:e.DOCUMENT_POSITION_CONTAINS|e.DOCUMENT_POSITION_PRECEDING;for(var u=l.length-c.length,h=c.length-1;h>=0;h--){var d=c[h],f=l[u+h];if(f!==d){var g=d.parentNode.childNodes;return g.indexOf(d)<g.indexOf(f)?c===s?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING:l===s?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING}}return e.DOCUMENT_POSITION_FOLLOWING}},{key:"contain",value:function(n){return this.contains(n)}},{key:"contains",value:function(n){for(var i=n;i&&this!==i;)i=i.parentNode;return!!i}},{key:"getAncestor",value:function(n){for(var i=this;n>0&&i;)i=i.parentNode,n--;return i}},{key:"forEach",value:function(n){for(var i=[this];i.length>0;){var a=i.pop(),s=n(a);if(s===!1)break;for(var o=a.childNodes.length-1;o>=0;o--)i.push(a.childNodes[o])}}}],[{key:"isNode",value:function(n){return!!n.childNodes}}])}(u_);ht.DOCUMENT_POSITION_DISCONNECTED=1;ht.DOCUMENT_POSITION_PRECEDING=2;ht.DOCUMENT_POSITION_FOLLOWING=4;ht.DOCUMENT_POSITION_CONTAINS=8;ht.DOCUMENT_POSITION_CONTAINED_BY=16;ht.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32;var $4=2048,W4=function(){function r(e,t){var n=this;G(this,r),this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=Ye(),this.tmpVec3=xe(),this.onPointerDown=function(i){var a=n.createPointerEvent(i);if(n.dispatchEvent(a,"pointerdown"),a.pointerType==="touch")n.dispatchEvent(a,"touchstart");else if(a.pointerType==="mouse"||a.pointerType==="pen"){var s=a.button===2;n.dispatchEvent(a,s?"rightdown":"mousedown")}var o=n.trackingData(i.pointerId);o.pressTargetsByButton[i.button]=a.composedPath(),n.freeEvent(a)},this.onPointerUp=function(i){var a=p1.now(),s=n.createPointerEvent(i,void 0,void 0,n.context.config.alwaysTriggerPointerEventOnCanvas?n.rootTarget:void 0);if(n.dispatchEvent(s,"pointerup"),s.pointerType==="touch")n.dispatchEvent(s,"touchend");else if(s.pointerType==="mouse"||s.pointerType==="pen"){var o=s.button===2;n.dispatchEvent(s,o?"rightup":"mouseup")}var A=n.trackingData(i.pointerId),l=n.findMountedTarget(A.pressTargetsByButton[i.button]),c=l;if(l&&!s.composedPath().includes(l)){for(var u=l;u&&!s.composedPath().includes(u);){if(s.currentTarget=u,n.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch")n.notifyTarget(s,"touchendoutside");else if(s.pointerType==="mouse"||s.pointerType==="pen"){var h=s.button===2;n.notifyTarget(s,h?"rightupoutside":"mouseupoutside")}ht.isNode(u)&&(u=u.parentNode)}delete A.pressTargetsByButton[i.button],c=u}if(c){var d,f=n.clonePointerEvent(s,"click");f.target=c,f.path=[],A.clicksByButton[i.button]||(A.clicksByButton[i.button]={clickCount:0,target:f.target,timeStamp:a});var g=n.context.renderingContext.root.ownerDocument.defaultView,v=A.clicksByButton[i.button];v.target===f.target&&a-v.timeStamp<g.getConfig().dblClickSpeed?++v.clickCount:v.clickCount=1,v.target=f.target,v.timeStamp=a,f.detail=v.clickCount,(d=s.detail)!==null&&d!==void 0&&d.preventClick||(!n.context.config.useNativeClickEvent&&(f.pointerType==="mouse"||f.pointerType==="touch")&&n.dispatchEvent(f,"click"),n.dispatchEvent(f,"pointertap")),n.freeEvent(f)}n.freeEvent(s)},this.onPointerMove=function(i){var a=n.createPointerEvent(i,void 0,void 0,n.context.config.alwaysTriggerPointerEventOnCanvas?n.rootTarget:void 0),s=a.pointerType==="mouse"||a.pointerType==="pen",o=n.trackingData(i.pointerId),A=n.findMountedTarget(o.overTargets);if(o.overTargets&&A!==a.target){var l=i.type==="mousemove"?"mouseout":"pointerout",c=n.createPointerEvent(i,l,A||void 0);if(n.dispatchEvent(c,"pointerout"),s&&n.dispatchEvent(c,"mouseout"),!a.composedPath().includes(A)){var u=n.createPointerEvent(i,"pointerleave",A||void 0);for(u.eventPhase=u.AT_TARGET;u.target&&!a.composedPath().includes(u.target);)u.currentTarget=u.target,n.notifyTarget(u),s&&n.notifyTarget(u,"mouseleave"),ht.isNode(u.target)&&(u.target=u.target.parentNode);n.freeEvent(u)}n.freeEvent(c)}if(A!==a.target){var h=i.type==="mousemove"?"mouseover":"pointerover",d=n.clonePointerEvent(a,h);n.dispatchEvent(d,"pointerover"),s&&n.dispatchEvent(d,"mouseover");for(var f=A&&ht.isNode(A)&&A.parentNode;f&&f!==(ht.isNode(n.rootTarget)&&n.rootTarget.parentNode)&&f!==a.target;)f=f.parentNode;var g=!f||f===(ht.isNode(n.rootTarget)&&n.rootTarget.parentNode);if(g){var v=n.clonePointerEvent(a,"pointerenter");for(v.eventPhase=v.AT_TARGET;v.target&&v.target!==A&&v.target!==(ht.isNode(n.rootTarget)&&n.rootTarget.parentNode);)v.currentTarget=v.target,n.notifyTarget(v),s&&n.notifyTarget(v,"mouseenter"),ht.isNode(v.target)&&(v.target=v.target.parentNode);n.freeEvent(v)}n.freeEvent(d)}n.dispatchEvent(a,"pointermove"),a.pointerType==="touch"&&n.dispatchEvent(a,"touchmove"),s&&(n.dispatchEvent(a,"mousemove"),n.cursor=n.getCursor(a.target)),o.overTargets=a.composedPath(),n.freeEvent(a)},this.onPointerOut=function(i){var a=n.trackingData(i.pointerId);if(a.overTargets){var s=i.pointerType==="mouse"||i.pointerType==="pen",o=n.findMountedTarget(a.overTargets),A=n.createPointerEvent(i,"pointerout",o||void 0);n.dispatchEvent(A),s&&n.dispatchEvent(A,"mouseout");var l=n.createPointerEvent(i,"pointerleave",o||void 0);for(l.eventPhase=l.AT_TARGET;l.target&&l.target!==(ht.isNode(n.rootTarget)&&n.rootTarget.parentNode);)l.currentTarget=l.target,n.notifyTarget(l),s&&n.notifyTarget(l,"mouseleave"),ht.isNode(l.target)&&(l.target=l.target.parentNode);a.overTargets=null,n.freeEvent(A),n.freeEvent(l)}n.cursor=null},this.onPointerOver=function(i){var a=n.trackingData(i.pointerId),s=n.createPointerEvent(i),o=s.pointerType==="mouse"||s.pointerType==="pen";n.dispatchEvent(s,"pointerover"),o&&n.dispatchEvent(s,"mouseover"),s.pointerType==="mouse"&&(n.cursor=n.getCursor(s.target));var A=n.clonePointerEvent(s,"pointerenter");for(A.eventPhase=A.AT_TARGET;A.target&&A.target!==(ht.isNode(n.rootTarget)&&n.rootTarget.parentNode);)A.currentTarget=A.target,n.notifyTarget(A),o&&n.notifyTarget(A,"mouseenter"),ht.isNode(A.target)&&(A.target=A.target.parentNode);a.overTargets=s.composedPath(),n.freeEvent(s),n.freeEvent(A)},this.onPointerUpOutside=function(i){var a=n.trackingData(i.pointerId),s=n.findMountedTarget(a.pressTargetsByButton[i.button]),o=n.createPointerEvent(i);if(s){for(var A=s;A;)o.currentTarget=A,n.notifyTarget(o,"pointerupoutside"),o.pointerType==="touch"||(o.pointerType==="mouse"||o.pointerType==="pen")&&n.notifyTarget(o,o.button===2?"rightupoutside":"mouseupoutside"),ht.isNode(A)&&(A=A.parentNode);delete a.pressTargetsByButton[i.button]}n.freeEvent(o)},this.onWheel=function(i){var a=n.createWheelEvent(i);n.dispatchEvent(a),n.freeEvent(a)},this.onClick=function(i){if(n.context.config.useNativeClickEvent){var a=n.createPointerEvent(i);n.dispatchEvent(a),n.freeEvent(a)}},this.onPointerCancel=function(i){var a=n.createPointerEvent(i,void 0,void 0,n.context.config.alwaysTriggerPointerEventOnCanvas?n.rootTarget:void 0);n.dispatchEvent(a),n.freeEvent(a)},this.globalRuntime=e,this.context=t}return K(r,[{key:"init",value:function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)}},{key:"destroy",value:function(){this.mappingTable={},this.mappingState={},this.eventPool.clear()}},{key:"getScale",value:function(){var t=this.context.contextService.getBoundingClientRect(),n=1,i=1,a=this.context.contextService.getDomElement();if(a&&t){var s=a.offsetWidth,o=a.offsetHeight;s&&o&&(n=t.width/s,i=t.height/o)}return{scaleX:n,scaleY:i,bbox:t}}},{key:"client2Viewport",value:function(t){var n=this.getScale(),i=n.scaleX,a=n.scaleY,s=n.bbox;return new rn((t.x-((s==null?void 0:s.left)||0))/i,(t.y-((s==null?void 0:s.top)||0))/a)}},{key:"viewport2Client",value:function(t){var n=this.getScale(),i=n.scaleX,a=n.scaleY,s=n.bbox;return new rn((t.x+((s==null?void 0:s.left)||0))*i,(t.y+((s==null?void 0:s.top)||0))*a)}},{key:"viewport2Canvas",value:function(t){var n=t.x,i=t.y,a=this.rootTarget.defaultView,s=a.getCamera(),o=this.context.config,A=o.width,l=o.height,c=s.getPerspectiveInverse(),u=s.getWorldTransform(),h=yn(this.tmpMatrix,u,c),d=pn(this.tmpVec3,n/A*2-1,(1-i/l)*2-1,0);return mn(d,d,h),new rn(d[0],d[1])}},{key:"canvas2Viewport",value:function(t){var n=this.rootTarget.defaultView,i=n.getCamera(),a=i.getPerspective(),s=i.getViewTransform(),o=yn(this.tmpMatrix,a,s),A=pn(this.tmpVec3,t.x,t.y,0);mn(this.tmpVec3,this.tmpVec3,o);var l=this.context.config,c=l.width,u=l.height;return new rn((A[0]+1)/2*c,(1-(A[1]+1)/2)*u)}},{key:"setPickHandler",value:function(t){this.pickHandler=t}},{key:"addEventMapping",value:function(t,n){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:n,priority:0}),this.mappingTable[t].sort(function(i,a){return i.priority-a.priority})}},{key:"mapEvent",value:function(t){if(this.rootTarget){var n=this.mappingTable[t.type];if(n)for(var i=0,a=n.length;i<a;i++)n[i].fn(t);else console.warn("[EventService]: Event mapping not defined for ".concat(t.type))}}},{key:"dispatchEvent",value:function(t,n,i){if(!i)t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,n);else{t.eventPhase=t.AT_TARGET;var a=this.rootTarget.defaultView||null;t.currentTarget=a,this.notifyListeners(t,n)}}},{key:"propagate",value:function(t,n){if(t.target){var i=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(var a=i.length-1;a>=1;a--)if(t.currentTarget=i[a],this.notifyTarget(t,n),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,n),!(t.propagationStopped||t.propagationImmediatelyStopped)){var s=i.indexOf(t.currentTarget);t.eventPhase=t.BUBBLING_PHASE;for(var o=s+1;o<i.length;o++)if(t.currentTarget=i[o],this.notifyTarget(t,n),t.propagationStopped||t.propagationImmediatelyStopped)return}}}},{key:"propagationPath",value:function(t){var n=[t],i=this.rootTarget.defaultView||null;if(i&&i===t)return n.unshift(i.document),n;for(var a=0;a<$4&&t!==this.rootTarget;a++)ht.isNode(t)&&t.parentNode&&(n.push(t.parentNode),t=t.parentNode);return i&&n.push(i),n}},{key:"hitTest",value:function(t){var n=t.viewportX,i=t.viewportY,a=this.context.config,s=a.width,o=a.height,A=a.disableHitTesting;return n<0||i<0||n>s||i>o?null:!A&&this.pickHandler(t)||this.rootTarget||null}},{key:"isNativeEventFromCanvas",value:function(t,n){var i,a=n==null?void 0:n.target;if((i=a)!==null&&i!==void 0&&i.shadowRoot&&(a=n.composedPath()[0]),a){if(a===t)return!0;if(t&&t.contains)return t.contains(a)}return n!=null&&n.composedPath?n.composedPath().indexOf(t)>-1:!1}},{key:"getExistedHTML",value:function(t){if(t.nativeEvent.composedPath)for(var n=0,i=t.nativeEvent.composedPath();n<i.length;n++){var a=i[n],s=this.nativeHTMLMap.get(a);if(s)return s}return null}},{key:"pickTarget",value:function(t){return this.hitTest({clientX:t.clientX,clientY:t.clientY,viewportX:t.viewportX,viewportY:t.viewportY,x:t.canvasX,y:t.canvasY})}},{key:"createPointerEvent",value:function(t,n,i,a){var s=this.allocateEvent(ih);this.copyPointerData(t,s),this.copyMouseData(t,s),this.copyData(t,s),s.nativeEvent=t.nativeEvent,s.originalEvent=t;var o=this.getExistedHTML(s),A=this.context.contextService.getDomElement();return s.target=i??(o||this.isNativeEventFromCanvas(A,s.nativeEvent)&&this.pickTarget(s)||a),typeof n=="string"&&(s.type=n),s}},{key:"createWheelEvent",value:function(t){var n=this.allocateEvent(y1);this.copyWheelData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.nativeEvent=t.nativeEvent,n.originalEvent=t;var i=this.getExistedHTML(n),a=this.context.contextService.getDomElement();return n.target=i||this.isNativeEventFromCanvas(a,n.nativeEvent)&&this.pickTarget(n),n}},{key:"trackingData",value:function(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}},{key:"cloneWheelEvent",value:function(t){var n=this.allocateEvent(y1);return n.nativeEvent=t.nativeEvent,n.originalEvent=t.originalEvent,this.copyWheelData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.target=t.target,n.path=t.composedPath().slice(),n.type=t.type,n}},{key:"clonePointerEvent",value:function(t,n){var i=this.allocateEvent(ih);return i.nativeEvent=t.nativeEvent,i.originalEvent=t.originalEvent,this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.target=t.target,i.path=t.composedPath().slice(),i.type=n??i.type,i}},{key:"copyPointerData",value:function(t,n){n.pointerId=t.pointerId,n.width=t.width,n.height=t.height,n.isPrimary=t.isPrimary,n.pointerType=t.pointerType,n.pressure=t.pressure,n.tangentialPressure=t.tangentialPressure,n.tiltX=t.tiltX,n.tiltY=t.tiltY,n.twist=t.twist}},{key:"copyMouseData",value:function(t,n){n.altKey=t.altKey,n.button=t.button,n.buttons=t.buttons,n.ctrlKey=t.ctrlKey,n.metaKey=t.metaKey,n.shiftKey=t.shiftKey,n.client.copyFrom(t.client),n.movement.copyFrom(t.movement),n.canvas.copyFrom(t.canvas),n.screen.copyFrom(t.screen),n.global.copyFrom(t.global),n.offset.copyFrom(t.offset)}},{key:"copyWheelData",value:function(t,n){n.deltaMode=t.deltaMode,n.deltaX=t.deltaX,n.deltaY=t.deltaY,n.deltaZ=t.deltaZ}},{key:"copyData",value:function(t,n){n.isTrusted=t.isTrusted,n.timeStamp=p1.now(),n.type=t.type,n.detail=t.detail,n.view=t.view,n.page.copyFrom(t.page),n.viewport.copyFrom(t.viewport)}},{key:"allocateEvent",value:function(t){this.eventPool.has(t)||this.eventPool.set(t,[]);var n=this.eventPool.get(t).pop()||new t(this);return n.eventPhase=n.NONE,n.currentTarget=null,n.path=[],n.target=null,n}},{key:"freeEvent",value:function(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var n=t.constructor;this.eventPool.has(n)||this.eventPool.set(n,[]),this.eventPool.get(n).push(t)}},{key:"notifyTarget",value:function(t,n){n=n??t.type;var i=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?"".concat(n,"capture"):n;this.notifyListeners(t,i),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,n)}},{key:"notifyListeners",value:function(t,n){var i=t.currentTarget.emitter,a=i._events[n];if(a)if("fn"in a)a.once&&i.removeListener(n,a.fn,void 0,!0),a.fn.call(t.currentTarget||a.context,t);else for(var s=0;s<a.length&&!t.propagationImmediatelyStopped;s++)a[s].once&&i.removeListener(n,a[s].fn,void 0,!0),a[s].fn.call(t.currentTarget||a[s].context,t)}},{key:"findMountedTarget",value:function(t){if(!t)return null;for(var n=t[t.length-1],i=t.length-2;i>=0;i--){var a=t[i];if(a===this.rootTarget||ht.isNode(a)&&a.parentNode===n)n=t[i];else break}return n}},{key:"getCursor",value:function(t){for(var n=t;n;){var i=c4(n)&&n.getAttribute("cursor");if(i)return i;n=ht.isNode(n)&&n.parentNode}}}])}(),Hw=function(){function r(){G(this,r)}return K(r,[{key:"getOrCreateCanvas",value:function(t,n){if(this.canvas)return this.canvas;if(t||z.offscreenCanvas)this.canvas=t||z.offscreenCanvas,this.context=this.canvas.getContext("2d",ue({willReadFrequently:!0},n));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",ue({willReadFrequently:!0},n)),(!this.context||!this.context.measureText)&&(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch{this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",ue({willReadFrequently:!0},n))}return this.canvas.width=10,this.canvas.height=10,this.canvas}},{key:"getOrCreateContext",value:function(t,n){return this.context?this.context:(this.getOrCreateCanvas(t,n),this.context)}}],[{key:"createCanvas",value:function(){try{return new window.OffscreenCanvas(0,0)}catch{}try{return document.createElement("canvas")}catch{}return null}}])}(),Co=function(r){return r[r.CAMERA_CHANGED=0]="CAMERA_CHANGED",r[r.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",r[r.NONE=2]="NONE",r}({}),q4=function(){function r(e,t){G(this,r),this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new Bn,initAsync:new S4,dirtycheck:new Zf,cull:new Zf,beginFrame:new Bn,beforeRender:new Bn,render:new Bn,afterRender:new Bn,endFrame:new Bn,destroy:new Bn,pick:new F4,pickSync:new Zf,pointerDown:new Bn,pointerUp:new Bn,pointerMove:new Bn,pointerOut:new Bn,pointerOver:new Bn,pointerWheel:new Bn,pointerCancel:new Bn,click:new Bn},this.globalRuntime=e,this.context=t}return K(r,[{key:"init",value:function(t){var n=this,i=ue(ue({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(a){a.apply(i,n.globalRuntime)}),this.hooks.init.call(),this.hooks.initAsync.getCallbacksNum()===0?(this.inited=!0,t()):this.hooks.initAsync.promise().then(function(){n.inited=!0,t()}).catch(function(a){})}},{key:"getStats",value:function(){return this.stats}},{key:"disableDirtyRectangleRendering",value:function(){var t=this.context.config.renderer,n=t.getConfig(),i=n.enableDirtyRectangleRendering;return!i||this.context.renderingContext.renderReasons.has(Co.CAMERA_CHANGED)}},{key:"render",value:function(t,n,i){var a=this,s=t.getConfig(),o=this.context.renderingContext;if(this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0,this.globalRuntime.sceneGraphService.syncHierarchy(o.root),this.globalRuntime.sceneGraphService.notifyMutationObservers(t),o.renderReasons.size&&this.inited){o.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var A=o.renderReasons.size===1&&o.renderReasons.has(Co.CAMERA_CHANGED),l=!s.disableRenderHooks||!A;l&&this.renderDisplayObject(o.root,s,o),this.hooks.beginFrame.call(n),l&&o.renderListCurrentFrame.forEach(function(c){a.hooks.beforeRender.call(c),a.hooks.render.call(c),a.hooks.afterRender.call(c)}),this.hooks.endFrame.call(n),o.renderListCurrentFrame=[],o.renderReasons.clear(),i()}}},{key:"renderDisplayObject",value:function(t,n,i){var a=this,s=n.renderer.getConfig(),o=s.enableDirtyCheck,A=s.enableCulling;function l(g){var v=g.renderable,p=g.sortable,y=o?v.dirty||i.dirtyRectangleRenderingDisabled?g:null:g,m=null;y&&(m=A?a.hooks.cull.call(y,a.context.camera):y,m&&(a.stats.rendered+=1,i.renderListCurrentFrame.push(m))),g.dirty(!1),p.renderOrder=a.zIndexCounter,a.zIndexCounter+=1,a.stats.total+=1,p.dirty&&(a.sort(g,p),p.dirty=!1,p.dirtyChildren=[],p.dirtyReason=void 0)}for(var c=[t];c.length>0;){var u,h=c.pop();l(h);for(var d=((u=h.sortable)===null||u===void 0||(u=u.sorted)===null||u===void 0?void 0:u.length)>0?h.sortable.sorted:h.childNodes,f=d.length-1;f>=0;f--)c.push(d[f])}}},{key:"sort",value:function(t,n){var i,a;(n==null||(i=n.sorted)===null||i===void 0?void 0:i.length)>0&&n.dirtyReason!==Zu.Z_INDEX_CHANGED?n.dirtyChildren.forEach(function(s){var o=n.sorted.indexOf(s);o>-1&&n.sorted.splice(o,1);var A=t.childNodes.indexOf(s);if(A>-1)if(n.sorted.length===0)n.sorted.push(s);else{var l=u4(n.sorted,s);n.sorted.splice(l,0,s)}}):n.sorted=t.childNodes.slice().sort(r_),((a=n.sorted)===null||a===void 0?void 0:a.length)>0&&t.childNodes.filter(function(s){return s.parsedStyle.zIndex}).length===0&&(n.sorted=[])}},{key:"destroy",value:function(){this.inited=!1,this.hooks.destroy.call()}},{key:"dirty",value:function(){this.context.renderingContext.renderReasons.add(Co.DISPLAY_OBJECT_CHANGED)}}])}(),Y4=/\[\s*(.*)=(.*)\s*\]/,X4=function(){function r(){G(this,r)}return K(r,[{key:"selectOne",value:function(t,n){var i=this;if(t.startsWith("."))return n.find(function(A){return((A==null?void 0:A.classList)||[]).indexOf(i.getIdOrClassname(t))>-1});if(t.startsWith("#"))return n.find(function(A){return A.id===i.getIdOrClassname(t)});if(t.startsWith("[")){var a=this.getAttribute(t),s=a.name,o=a.value;return s?n.find(function(A){return n!==A&&(s==="name"?A.name===o:i.attributeToString(A,s)===o)}):null}return n.find(function(A){return n!==A&&A.nodeName===t})}},{key:"selectAll",value:function(t,n){var i=this;if(t.startsWith("."))return n.findAll(function(A){return n!==A&&((A==null?void 0:A.classList)||[]).indexOf(i.getIdOrClassname(t))>-1});if(t.startsWith("#"))return n.findAll(function(A){return n!==A&&A.id===i.getIdOrClassname(t)});if(t.startsWith("[")){var a=this.getAttribute(t),s=a.name,o=a.value;return s?n.findAll(function(A){return n!==A&&(s==="name"?A.name===o:i.attributeToString(A,s)===o)}):[]}return n.findAll(function(A){return n!==A&&A.nodeName===t})}},{key:"is",value:function(t,n){if(t.startsWith("."))return n.className===this.getIdOrClassname(t);if(t.startsWith("#"))return n.id===this.getIdOrClassname(t);if(t.startsWith("[")){var i=this.getAttribute(t),a=i.name,s=i.value;return a==="name"?n.name===s:this.attributeToString(n,a)===s}return n.nodeName===t}},{key:"getIdOrClassname",value:function(t){return t.substring(1)}},{key:"getAttribute",value:function(t){var n=t.match(Y4),i="",a="";return n&&n.length>2&&(i=n[1].replace(/"/g,""),a=n[2].replace(/"/g,"")),{name:i,value:a}}},{key:"attributeToString",value:function(t,n){if(!t.getAttribute)return"";var i=t.getAttribute(n);return le(i)?"":i.toString?i.toString():""}}])}(),Me=function(r){return r.ATTR_MODIFIED="DOMAttrModified",r.INSERTED="DOMNodeInserted",r.MOUNTED="DOMNodeInsertedIntoDocument",r.REMOVED="removed",r.UNMOUNTED="DOMNodeRemovedFromDocument",r.REPARENT="reparent",r.DESTROY="destroy",r.BOUNDS_CHANGED="bounds-changed",r.CULLED="culled",r}({}),pi=function(r){function e(t,n,i,a,s,o,A,l){var c;return G(this,e),c=ye(this,e,[null]),c.relatedNode=n,c.prevValue=i,c.newValue=a,c.attrName=s,c.attrChange=o,c.prevParsedValue=A,c.newParsedValue=l,c.type=t,c}return me(e,r),K(e)}(Hh);pi.ADDITION=2;pi.MODIFICATION=1;pi.REMOVAL=3;var Z4=new pi(Me.REPARENT,null,"","","",0,"",""),J4=Ow(),rc=xe(),eH=Xe(1,1,1),tH=Ye(),nH=Ow(),$a=xe(),rH=Ye(),Wa=Lt(),iH=xe(),aH=Lt(),sH=xe(),iA=xe(),qa=xe(),ic=Ye(),aE=Lt(),sE=Lt(),ac=Lt(),oH=function(){function r(e){G(this,r),this.displayObjectDependencyMap=new WeakMap,this.runtime=e}return K(r,[{key:"matches",value:function(t,n){return this.runtime.sceneGraphSelector.is(t,n)}},{key:"querySelector",value:function(t,n){return this.runtime.sceneGraphSelector.selectOne(t,n)}},{key:"querySelectorAll",value:function(t,n){return this.runtime.sceneGraphSelector.selectAll(t,n)}},{key:"attach",value:function(t,n,i){var a,s=!1;t.parentNode&&(s=t.parentNode!==n,this.detach(t));var o=t.nodeName===P.FRAGMENT,A=rh(n);t.parentNode=n;var l=o?t.childNodes:[t];Z(i)?l.forEach(function(g){n.childNodes.splice(i,0,g),g.parentNode=n}):l.forEach(function(g){n.childNodes.push(g),g.parentNode=n});var c=n,u=c.sortable;if((u!=null&&(a=u.sorted)!==null&&a!==void 0&&a.length||u.dirty||t.parsedStyle.zIndex)&&(u.dirtyChildren.indexOf(t)===-1&&u.dirtyChildren.push(t),u.dirty=!0,u.dirtyReason=Zu.ADDED),!A){if(o)this.dirtyFragment(t);else{var h=t.transformable;h&&this.dirtyWorldTransform(t,h)}if(s){var d,f=((d=n.ownerDocument)===null||d===void 0||(d=d.defaultView)===null||d===void 0||(d=d.getConfig())===null||d===void 0||(d=d.future)===null||d===void 0?void 0:d.experimentalCancelEventPropagation)===!0;t.dispatchEvent(Z4,f,f)}}}},{key:"detach",value:function(t){var n,i;if(t.parentNode){var a=t.transformable,s=t.parentNode,o=s.sortable;(o!=null&&(n=o.sorted)!==null&&n!==void 0&&n.length||(i=t.style)!==null&&i!==void 0&&i.zIndex)&&(o.dirtyChildren.indexOf(t)===-1&&o.dirtyChildren.push(t),o.dirty=!0,o.dirtyReason=Zu.REMOVED);var A=t.parentNode.childNodes.indexOf(t);A>-1&&t.parentNode.childNodes.splice(A,1),a&&this.dirtyWorldTransform(t,a),t.parentNode=null}}},{key:"getLocalPosition",value:function(t){return t.transformable.localPosition}},{key:"getLocalRotation",value:function(t){return t.transformable.localRotation}},{key:"getLocalScale",value:function(t){return t.transformable.localScale}},{key:"getLocalSkew",value:function(t){return t.transformable.localSkew}},{key:"getLocalTransform",value:function(t){var n=t.transformable;return Lb(n),n.localTransform}},{key:"setLocalPosition",value:function(t,n){var i,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=t.transformable;iA[0]=n[0],iA[1]=n[1],iA[2]=(i=n[2])!==null&&i!==void 0?i:0,!eA(s.localPosition,iA)&&(ci(s.localPosition,iA),a&&this.dirtyLocalTransform(t,s))}},{key:"translateLocal",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof n=="number"&&(n=Xe(n,i,a));var s=t.transformable;eA(n,rc)||(OP(n,n,s.localRotation),xa(s.localPosition,s.localPosition,n),this.dirtyLocalTransform(t,s))}},{key:"setLocalRotation",value:function(t,n,i,a,s){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;typeof n=="number"&&(n=pI(Wa,n,i,a,s));var A=t.transformable;ql(A.localRotation,n),o&&this.dirtyLocalTransform(t,A)}},{key:"rotateLocal",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof n=="number"&&(n=Xe(n,i,a));var s=t.transformable;Wl(sE,n[0],n[1],n[2]),yb(s.localRotation,s.localRotation,sE),this.dirtyLocalTransform(t,s)}},{key:"setLocalScale",value:function(t,n){var i,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=t.transformable;pn($a,n[0],n[1],(i=n[2])!==null&&i!==void 0?i:s.localScale[2]),!eA($a,s.localScale)&&(ci(s.localScale,$a),a&&this.dirtyLocalTransform(t,s))}},{key:"scaleLocal",value:function(t,n){var i,a=t.transformable;CP(a.localScale,a.localScale,pn($a,n[0],n[1],(i=n[2])!==null&&i!==void 0?i:1)),this.dirtyLocalTransform(t,a)}},{key:"setLocalSkew",value:function(t,n,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;typeof n=="number"&&(n=UP(nH,n,i));var s=t.transformable;NP(s.localSkew,n),a&&this.dirtyLocalTransform(t,s)}},{key:"setLocalEulerAngles",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;typeof n=="number"&&(n=Xe(n,i,a));var o=t.transformable;Wl(o.localRotation,n[0],n[1],n[2]),s&&this.dirtyLocalTransform(t,o)}},{key:"setLocalTransform",value:function(t,n){var i=Hu(iH,n),a=Gu(aH,n),s=Io(sH,n);this.setLocalScale(t,s,!1),this.setLocalPosition(t,i,!1),this.setLocalRotation(t,a,void 0,void 0,void 0,!1),this.dirtyLocalTransform(t,t.transformable)}},{key:"resetLocalTransform",value:function(t){this.setLocalScale(t,eH,!1),this.setLocalPosition(t,rc,!1),this.setLocalEulerAngles(t,rc,void 0,void 0,!1),this.setLocalSkew(t,J4,void 0,!1),this.dirtyLocalTransform(t,t.transformable)}},{key:"getPosition",value:function(t){var n=t.transformable;return Hu(n.position,this.getWorldTransform(t,n))}},{key:"getRotation",value:function(t){var n=t.transformable;return Gu(n.rotation,this.getWorldTransform(t,n))}},{key:"getScale",value:function(t){var n=t.transformable;return Io(n.scaling,this.getWorldTransform(t,n))}},{key:"getOrigin",value:function(t){return t.getGeometryBounds(),t.transformable.origin}},{key:"getWorldTransform",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.transformable;return!n.localDirtyFlag&&!n.dirtyFlag||(t.parentNode&&t.parentNode.transformable&&this.getWorldTransform(t.parentNode),this.internalUpdateTransform(t)),n.worldTransform}},{key:"setPosition",value:function(t,n){var i,a=t.transformable;if(qa[0]=n[0],qa[1]=n[1],qa[2]=(i=n[2])!==null&&i!==void 0?i:0,!eA(this.getPosition(t),qa)){if(ci(a.position,qa),t.parentNode===null||!t.parentNode.transformable)ci(a.localPosition,qa);else{var s=t.parentNode.transformable;Oo(ic,s.worldTransform),li(ic,ic),mn(a.localPosition,qa,ic)}this.dirtyLocalTransform(t,a)}}},{key:"translate",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof n=="number"&&(n=pn($a,n,i,a)),!eA(n,rc)&&(xa($a,this.getPosition(t),n),this.setPosition(t,$a))}},{key:"setRotation",value:function(t,n,i,a,s){var o=t.transformable;if(typeof n=="number"&&(n=QP(n,i,a,s)),t.parentNode===null||!t.parentNode.transformable)this.setLocalRotation(t,n);else{var A=this.getRotation(t.parentNode);ql(Wa,A),Uf(Wa,Wa),Ca(o.localRotation,Wa,n),zu(o.localRotation,o.localRotation),this.dirtyLocalTransform(t,o)}}},{key:"rotate",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof n=="number"&&(n=Xe(n,i,a));var s=t.transformable;if(t.parentNode===null||!t.parentNode.transformable)this.rotateLocal(t,n);else{var o=Wa;Wl(o,n[0],n[1],n[2]);var A=this.getRotation(t),l=this.getRotation(t.parentNode);ql(ac,l),Uf(ac,ac),Ca(o,ac,o),Ca(s.localRotation,o,A),zu(s.localRotation,s.localRotation),this.dirtyLocalTransform(t,s)}}},{key:"setOrigin",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof n=="number"&&(n=[n,i,a]);var s=t.transformable;if(!(n[0]===s.origin[0]&&n[1]===s.origin[1]&&n[2]===s.origin[2])){var o=s.origin;o[0]=n[0],o[1]=n[1],o[2]=n[2]||0,this.dirtyLocalTransform(t,s)}}},{key:"setEulerAngles",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof n=="number"&&(n=Xe(n,i,a));var s=t.transformable;if(t.parentNode===null||!t.parentNode.transformable)this.setLocalEulerAngles(t,n);else{Wl(s.localRotation,n[0],n[1],n[2]);var o=this.getRotation(t.parentNode);ql(aE,Uf(Wa,o)),yb(s.localRotation,s.localRotation,aE),this.dirtyLocalTransform(t,s)}}},{key:"getGeometryBounds",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=t,a=i.geometry;a.dirty&&z.styleValueRegistry.updateGeometry(t);var s=n?a.renderBounds:a.contentBounds||null;return s||new tt}},{key:"getTransformedGeometryBounds",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2?arguments[2]:void 0,a=this.getGeometryBounds(t,n);if(!tt.isEmpty(a)){var s=i||new tt;return s.setFromTransformedAABB(a,this.getWorldTransform(t)),s}return null}},{key:"getBounds",value:function(t){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=t,s=a.renderable;if(!s.boundsDirty&&!i&&s.bounds)return s.bounds;if(!s.renderBoundsDirty&&i&&s.renderBounds)return s.renderBounds;var o=i?s.renderBounds:s.bounds,A=this.getTransformedGeometryBounds(t,i,o),l=t.childNodes;if(l.forEach(function(h){var d=n.getBounds(h,i);d&&(A?A.add(d):(A=o||new tt,A.update(d.center,d.halfExtents)))}),A||(A=new tt),i){var c=i_(t);if(c){var u=c.parsedStyle.clipPath.getBounds(i);A?u&&(A=u.intersection(A)):A.update(u.center,u.halfExtents)}}return i?(s.renderBounds=A,s.renderBoundsDirty=!1):(s.bounds=A,s.boundsDirty=!1),A}},{key:"getLocalBounds",value:function(t){if(t.parentNode){var n=tH;t.parentNode.transformable&&(n=li(rH,this.getWorldTransform(t.parentNode)));var i=this.getBounds(t);if(!tt.isEmpty(i)){var a=new tt;return a.setFromTransformedAABB(i,n),a}}return this.getBounds(t)}},{key:"getBoundingClientRect",value:function(t){var n,i,a=this.getGeometryBounds(t);tt.isEmpty(a)||(i=new tt,i.setFromTransformedAABB(a,this.getWorldTransform(t)));var s=(n=t.ownerDocument)===null||n===void 0||(n=n.defaultView)===null||n===void 0?void 0:n.getContextService().getBoundingClientRect();if(i){var o=i.getMin(),A=pe(o,2),l=A[0],c=A[1],u=i.getMax(),h=pe(u,2),d=h[0],f=h[1];return new ko(l+((s==null?void 0:s.left)||0),c+((s==null?void 0:s.top)||0),d-l,f-c)}return new ko((s==null?void 0:s.left)||0,(s==null?void 0:s.top)||0,0,0)}},{key:"internalUpdateTransform",value:function(t){var n,i=(n=t.parentNode)===null||n===void 0?void 0:n.transformable;Lb(t.transformable),TD(t.transformable,i)}},{key:"internalUpdateElement",value:function(t,n){var i,a,s,o,A=((i=t.ownerDocument)===null||i===void 0||(i=i.defaultView)===null||i===void 0||(i=i.getConfig())===null||i===void 0||(i=i.future)===null||i===void 0?void 0:i.experimentalAttributeUpdateOptimization)===!0,l=n[n.length-1],c=(l==null?void 0:l.transformDirty)||((a=t.transformable)===null||a===void 0?void 0:a.localDirtyFlag);if(t.transformable){var u;(u=t.transformable).dirtyFlag||(u.dirtyFlag=c)}if(this.internalUpdateTransform(t),c){var h;(h=t.dirty)===null||h===void 0||h.call(t,!0,!0)}var d=((s=t.renderable)===null||s===void 0?void 0:s.boundsDirty)||((o=t.renderable)===null||o===void 0?void 0:o.renderBoundsDirty);if((c||d)&&(l==null?void 0:l.shapeUpdated)===!1&&A)for(var f=n.length-1;f>=0;){var g,v,p=n[f];if(p.shapeUpdated)break;(g=(v=p.node).dirty)===null||g===void 0||g.call(v,!0,!0),p.shapeUpdated=!0,f-=1}return c}},{key:"syncHierarchy",value:function(t){for(var n,i,a=[t],s=t.parentNode?[{node:t.parentNode,transformDirty:((n=t.parentNode.transformable)===null||n===void 0?void 0:n.localDirtyFlag)||((i=t.parentNode.transformable)===null||i===void 0?void 0:i.dirtyFlag),shapeUpdated:!1}]:[];a.length>0;){for(var o=a.pop(),A=s[s.length-1];s.length>0&&o.parentNode!==A.node;)A=s.pop();var l=this.internalUpdateElement(o,s);if(o.childNodes.length>0){for(var c=o.childNodes.length-1;c>=0;c--)a.push(o.childNodes[c]);s.push({node:o,transformDirty:l,shapeUpdated:!1})}}}},{key:"dirtyLocalTransform",value:function(t,n){rh(t)||n.localDirtyFlag||(n.localDirtyFlag=!0,n.dirtyFlag||this.dirtyWorldTransform(t,n))}},{key:"dirtyWorldTransform",value:function(t,n){this.dirtyWorldInternal(t,n),this.dirtyToRoot(t,!0)}},{key:"dirtyWorldInternal",value:function(t,n){var i,a=this,s=((i=t.ownerDocument)===null||i===void 0||(i=i.defaultView)===null||i===void 0||(i=i.getConfig())===null||i===void 0||(i=i.future)===null||i===void 0?void 0:i.experimentalAttributeUpdateOptimization)===!0;n.dirtyFlag||(n.dirtyFlag=!0,t.dirty(!0,!0),s||t.childNodes.forEach(function(o){var A=o.transformable;a.dirtyWorldInternal(o,A)}))}},{key:"dirtyToRoot",value:function(t){for(var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=t,s=((n=t.ownerDocument)===null||n===void 0||(n=n.defaultView)===null||n===void 0||(n=n.getConfig())===null||n===void 0||(n=n.future)===null||n===void 0?void 0:n.experimentalAttributeUpdateOptimization)===!0;a;){var o,A;if((o=(A=a).dirty)===null||o===void 0||o.call(A,!0,!0),s)break;a=a.parentNode}i&&t.forEach(function(u){var h;(h=u.dirty)===null||h===void 0||h.call(u,!0,!0)}),this.informDependentDisplayObjects(t);var l=t.mutations||[],c=l.find(function(u){return u.type==="attributes"&&u._boundsChangeData});c?c._boundsChangeData={affectChildren:c._boundsChangeData.affectChildren||i}:(c={type:"attributes",target:t,_boundsChangeData:{affectChildren:i}},l.push(c)),t.mutations=l}},{key:"dirtyFragment",value:function(t){var n,i,a=t.transformable;a&&(a.dirtyFlag=!0,a.localDirtyFlag=!0),(n=(i=t).dirty)===null||n===void 0||n.call(i,!0,!0);for(var s=t.childNodes.length,o=0;o<s;o++)this.dirtyFragment(t.childNodes[o])}},{key:"notifyMutationObservers",value:function(t){var n=new Set;if(t.getRoot().forEach(function(a){(a.mutations||[]).forEach(function(s){s.type==="attributes"&&s._boundsChangeData&&(s._boundsChangeData.affectChildren?a.forEach(function(o){var A=ue({},s);A.target=o,n.add(A)}):n.add(s))}),a.mutations=void 0}),n.size>0){var i=new Qt(Me.BOUNDS_CHANGED,{detail:Array.from(n)});t.dispatchEvent(i,!0,!0)}}},{key:"updateDisplayObjectDependency",value:function(t,n,i,a){if(n&&n!==i){var s=this.displayObjectDependencyMap.get(n);if(s&&s[t]){var o=s[t].indexOf(a);s[t].splice(o,1)}}if(i){var A=this.displayObjectDependencyMap.get(i);A||(this.displayObjectDependencyMap.set(i,{}),A=this.displayObjectDependencyMap.get(i)),A[t]||(A[t]=[]),A[t].push(a)}}},{key:"informDependentDisplayObjects",value:function(t){var n,i=this,a=this.displayObjectDependencyMap.get(t);if(a){var s=(n=t.ownerDocument)===null||n===void 0||(n=n.defaultView)===null||n===void 0||(n=n.getConfig())===null||n===void 0||(n=n.future)===null||n===void 0?void 0:n.experimentalCancelEventPropagation;Object.keys(a).forEach(function(o){a[o].forEach(function(A){i.dirtyToRoot(A,!0),A.dispatchEvent(new pi(Me.ATTR_MODIFIED,A,i,i,o,pi.MODIFICATION,i,i),s,s),A.isCustomElement&&A.isConnected&&A.attributeChangedCallback&&A.attributeChangedCallback(o,i,i)})})}}}])}(),oE=function(){function r(e){if(G(this,r),e<=0)throw new Error("LRU capacity must be a positive number.");this.capacity=e,this.cache=new Map}return K(r,[{key:"get",value:function(t){if(this.cache.has(t)){var n=this.cache.get(t);return this.cache.delete(t),this.cache.set(t,n),n}}},{key:"put",value:function(t,n){if(this.cache.has(t)&&this.cache.delete(t),this.cache.set(t,n),this.cache.size>this.capacity){var i=this.cache.keys().next().value;this.cache.delete(i)}}},{key:"len",value:function(){return this.cache.size}},{key:"clear",value:function(){this.cache.clear()}}])}(),Ya={MetricsString:"|q",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},AE=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,AH=/[!%),.:;?\]}'""]/,lH=/[$('"]/,cH=/[!),.:;?\]}'""]/,uH=/[([{'"]/,hH=/[)\]'"?!:;,.]/,dH=/[(['"...]/,fH=/[!%),.:;?\]}'"]/,gH=/[$([{'"#]/,vH=new RegExp("".concat(AH.source,"|").concat(cH.source,"|").concat(hH.source,"|").concat(fH.source)),pH=new RegExp("".concat(lH.source,"|").concat(uH.source,"|").concat(dH.source,"|").concat(gH.source)),yH=function(){function r(e){var t=this;G(this,r),this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(n,i){return t.isBreakingSpace(i)?!1:!!(n&&(pH.exec(i)||vH.exec(n)))},this.trimByKinsokuShorui=function(n){var i=Fe(n),a=i[i.length-2];if(!a)return n;var s=a[a.length-1];return i[i.length-2]=a.slice(0,-1),i[i.length-1]=s+i[i.length-1],i},this.runtime=e,this.charWidthCache=new oE(100)}return K(r,[{key:"measureFont",value:function(t,n){if(this.fontMetricsCache[t])return this.fontMetricsCache[t];var i={ascent:0,descent:0,fontSize:0},a=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(n),s=this.runtime.offscreenCanvasCreator.getOrCreateContext(n,{willReadFrequently:!0});s.font=t;var o=Ya.MetricsString+Ya.BaselineSymbol,A=Math.ceil(s.measureText(o).width),l=Math.ceil(s.measureText(Ya.BaselineSymbol).width),c=Ya.HeightMultiplier*l;l=l*Ya.BaselineMultiplier|0,a.width=A,a.height=c,s.fillStyle="#f00",s.fillRect(0,0,A,c),s.font=t,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(o,0,l);var u=s.getImageData(0,0,A||1,c||1).data,h=u.length,d=A*4,f=0,g=0,v=!1;for(f=0;f<l;++f){for(var p=0;p<d;p+=4)if(u[g+p]!==255){v=!0;break}if(!v)g+=d;else break}for(i.ascent=l-f,g=h-d,v=!1,f=c;f>l;--f){for(var y=0;y<d;y+=4)if(u[g+y]!==255){v=!0;break}if(!v)g-=d;else break}return i.descent=f-l,i.fontSize=i.ascent+i.descent,this.fontMetricsCache[t]=i,i}},{key:"measureText",value:function(t,n,i){var a=n.fontSize,s=a===void 0?16:a,o=n.wordWrap,A=o===void 0?!1:o,l=n.lineHeight,c=n.lineWidth,u=c===void 0?1:c,h=n.textBaseline,d=h===void 0?"alphabetic":h,f=n.textAlign,g=f===void 0?"start":f,v=n.letterSpacing,p=v===void 0?0:v,y=n.textPath;n.textPathSide,n.textPathStartOffset;var m=n.leading,w=m===void 0?0:m,B=rE(n),b=this.measureFont(B,i);b.fontSize===0&&(b.fontSize=s,b.ascent=s);var E=this.runtime.offscreenCanvasCreator.getOrCreateContext(i);E.font=B,n.isOverflowing=!1;var x=A?this.wordWrap(t,n,i):t,S=x.split(/(?:\r\n|\r|\n)/),C=new Array(S.length),F=0;if(y){y.getTotalLength();for(var M=0;M<S.length;M++)E.measureText(S[M]).width+(S[M].length-1)*p}else{for(var T=0;T<S.length;T++){var O=E.measureText(S[T]).width+(S[T].length-1)*p;C[T]=O,F=Math.max(F,O)}var _=F+u,Q=l||b.fontSize+u,L=Math.max(Q,b.fontSize+u)+(S.length-1)*(Q+w);Q+=w;var k=0;return d==="middle"?k=-L/2:d==="bottom"||d==="alphabetic"||d==="ideographic"?k=-L:(d==="top"||d==="hanging")&&(k=0),{font:B,width:_,height:L,lines:S,lineWidths:C,lineHeight:Q,maxLineWidth:F,fontProperties:b,lineMetrics:C.map(function(U,D){var j=0;return g==="center"||g==="middle"?j-=U/2:(g==="right"||g==="end")&&(j-=U),new ko(j-u/2,k+D*Q,U+u,Q)})}}}},{key:"wordWrap",value:function(t,n,i){var a=this,s=Array.from(t);if(s.length===0)return"";var o=this,A=n.wordWrapWidth,l=A===void 0?0:A,c=n.letterSpacing,u=c===void 0?0:c,h=n.maxLines,d=h===void 0?1/0:h,f=n.textOverflow,g=this.runtime.offscreenCanvasCreator.getOrCreateContext(i),v=l+u,p="";f==="ellipsis"?p="...":f&&f!=="clip"&&(p=f);var y=[""],m=0,w=0,B=-1,b=rE(n),E=this.charWidthCache.get(b);E||(E=new oE(500),this.charWidthCache.put(b,E));var x=function(U){return a.getFromCache(U,u,E,g)},S=x(p);function C(k,U,D,j){for(;x(k)<j&&U<s.length-1&&!o.isNewline(s[U+1]);)U+=1,k+=s[U];for(;x(k)>j&&U>=D;)U-=1,k=k.slice(0,-1);return{lineTxt:k,txtLastCharIndex:U}}function F(k,U){if(!(S<=0||S>v)){if(!y[k]){y[k]=p;return}var D=C(y[k],U,B+1,v-S);y[k]=D.lineTxt+p}}for(var M=0;M<s.length;M++){var T=s[M],O=s[M-1],_=s[M+1],Q=x(T);if(this.isNewline(T)){if(m+1>=d){M<s.length-1&&F(m,M-1),n.isOverflowing=!0;break}B=M-1,m+=1,w=0,y[m]="";continue}if(Q>v){F(m,M-1),n.isOverflowing=!0;break}if(w>0&&w+Q>v){var L=C(y[m],M-1,B+1,v);if(L.txtLastCharIndex!==M-1){if(y[m]=L.lineTxt,L.txtLastCharIndex===s.length-1)break;M=L.txtLastCharIndex+1,T=s[M],O=s[M-1],_=s[M+1],Q=x(T)}if(m+1>=d){F(m,M-1),n.isOverflowing=!0;break}if(B=M-1,m+=1,w=0,y[m]="",this.isBreakingSpace(T))continue;this.canBreakInLastChar(T)||(y=this.trimToBreakable(y),w=this.sumTextWidthByCache(y[m]||"",x)),this.shouldBreakByKinsokuShorui(T,_)&&(y=this.trimByKinsokuShorui(y),w+=x(O||""))}w+=Q,y[m]+=T}return y.join(`
`)}},{key:"isBreakingSpace",value:function(t){return typeof t!="string"?!1:Ya.BreakingSpaces.indexOf(t.charCodeAt(0))>=0}},{key:"isNewline",value:function(t){return typeof t!="string"?!1:Ya.Newlines.indexOf(t.charCodeAt(0))>=0}},{key:"trimToBreakable",value:function(t){var n=Fe(t),i=n[n.length-2],a=this.findBreakableIndex(i);if(a===-1||!i)return n;var s=i.slice(a,a+1),o=this.isBreakingSpace(s),A=a+1,l=a+(o?0:1);return n[n.length-1]+=i.slice(A,i.length),n[n.length-2]=i.slice(0,l),n}},{key:"canBreakInLastChar",value:function(t){return!(t&&AE.test(t))}},{key:"sumTextWidthByCache",value:function(t,n){return t.split("").reduce(function(i,a){return i+n(a)},0)}},{key:"findBreakableIndex",value:function(t){for(var n=t.length-1;n>=0;n--)if(!AE.test(t[n]))return n;return-1}},{key:"getFromCache",value:function(t,n,i,a){var s=i.get(t);if(typeof s!="number"){var o=t.length*n,A=a.measureText(t);s=A.width+o,i.put(t,s)}return s}},{key:"clearCache",value:function(){this.fontMetricsCache={},this.charWidthCache.clear()}}])}(),z={},mH=function(r){var e=new K4,t=new G4;return r={},ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(r,P.FRAGMENT,null),P.CIRCLE,new P4),P.ELLIPSE,new R4),P.RECT,e),P.IMAGE,e),P.GROUP,new V4),P.LINE,new D4),P.TEXT,new z4(z)),P.POLYLINE,t),P.POLYGON,t),ee(ee(ee(r,P.PATH,new H4),P.HTML,new j4),P.MESH,null)}(),wH=function(r){var e=new Y3,t=new v1;return r={},ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(r,$.PERCENTAGE,null),$.NUMBER,new t4),$.ANGLE,new W3),$.DEFINED_PATH,new q3),$.PAINT,e),$.COLOR,e),$.FILTER,new X3),$.LENGTH,t),$.LENGTH_PERCENTAGE,t),$.LENGTH_PERCENTAGE_12,new Z3),ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(r,$.LENGTH_PERCENTAGE_14,new J3),$.COORDINATE,new v1),$.OFFSET_DISTANCE,new n4),$.OPACITY_VALUE,new r4),$.PATH,new i4),$.LIST_OF_POINTS,new a4),$.SHADOW_BLUR,new s4),$.TEXT,new o4),$.TEXT_TRANSFORM,new A4),$.TRANSFORM,new Q4),ee(ee(ee(r,$.TRANSFORM_ORIGIN,new N4),$.Z_INDEX,new U4),$.MARKER,new e4)}(),BH=function(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}};z.CameraContribution=PI;z.AnimationTimeline=null;z.EasingFunction=null;z.offscreenCanvasCreator=new Hw;z.sceneGraphSelector=new X4;z.sceneGraphService=new oH(z);z.textService=new yH(z);z.geometryUpdaterFactory=mH;z.CSSPropertySyntaxFactory=wH;z.styleValueRegistry=new j3(z);z.layoutRegistry=null;z.globalThis=BH();z.enableStyleSyntax=!0;z.enableSizeAttenuation=!1;var bH=0,m1=new pi(Me.INSERTED,null,"","","",0,"",""),w1=new pi(Me.REMOVED,null,"","","",0,"",""),h_=new Qt(Me.DESTROY),EH=function(r){function e(){var t;G(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=ye(this,e,[].concat(i)),t.entity=bH++,t.transformable={dirtyFlag:!1,localDirtyFlag:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},t.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},t.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},t.cullable={strategy:CD.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},t.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},t.namespaceURI="g",t.scrollLeft=0,t.scrollTop=0,t.clientTop=0,t.clientLeft=0,t.style={},t.computedStyle={},t.parsedStyle={},t.attributes={},t}return me(e,r),K(e,[{key:"dirty",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i=arguments.length>1?arguments[1]:void 0;this.renderable.dirty=n,i!==void 0&&(this.renderable.boundsDirty=i,this.renderable.renderBoundsDirty=i,this.geometry.dirty=i)}},{key:"className",get:function(){return this.getAttribute("class")||""},set:function(n){this.setAttribute("class",n)}},{key:"classList",get:function(){return this.className.split(" ").filter(function(n){return n!==""})}},{key:"tagName",get:function(){return this.nodeName}},{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"parentElement",get:function(){return this.parentNode}},{key:"nextSibling",get:function(){if(this.parentNode){var n=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[n+1]||null}return null}},{key:"previousSibling",get:function(){if(this.parentNode){var n=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[n-1]||null}return null}},{key:"cloneNode",value:function(n){throw new Error(Ve)}},{key:"appendChild",value:function(n,i){var a;if(n.destroyed)throw new Error(fD);return z.sceneGraphService.attach(n,this,i),(a=this.ownerDocument)!==null&&a!==void 0&&a.defaultView&&(!rh(this)&&n.nodeName===P.FRAGMENT?this.ownerDocument.defaultView.mountFragment(n):this.ownerDocument.defaultView.mountChildren(n)),this.isMutationObserved&&(m1.relatedNode=this,n.dispatchEvent(m1)),n}},{key:"insertBefore",value:function(n,i){if(!i)this.appendChild(n);else{n.parentElement&&n.parentElement.removeChild(n);var a=this.childNodes.indexOf(i);a===-1?this.appendChild(n):this.appendChild(n,a)}return n}},{key:"replaceChild",value:function(n,i){var a=this.childNodes.indexOf(i);return this.removeChild(i),this.appendChild(n,a),i}},{key:"removeChild",value:function(n){var i,a,s=((i=this.ownerDocument)===null||i===void 0||(i=i.defaultView)===null||i===void 0||(i=i.getConfig().future)===null||i===void 0?void 0:i.experimentalCancelEventPropagation)===!0;return w1.relatedNode=this,n.dispatchEvent(w1,s,s),(a=n.ownerDocument)!==null&&a!==void 0&&a.defaultView&&n.ownerDocument.defaultView.unmountChildren(n),z.sceneGraphService.detach(n),n}},{key:"removeChildren",value:function(){for(var n=this.childNodes.length-1;n>=0;n--){var i=this.childNodes[n];this.removeChild(i)}}},{key:"destroyChildren",value:function(){for(var n=this.childNodes.length-1;n>=0;n--){var i=this.childNodes[n];i.childNodes.length>0&&i.destroyChildren(),i.destroy()}}},{key:"matches",value:function(n){return z.sceneGraphService.matches(n,this)}},{key:"getElementById",value:function(n){return z.sceneGraphService.querySelector("#".concat(n),this)}},{key:"getElementsByName",value:function(n){return z.sceneGraphService.querySelectorAll('[name="'.concat(n,'"]'),this)}},{key:"getElementsByClassName",value:function(n){return z.sceneGraphService.querySelectorAll(".".concat(n),this)}},{key:"getElementsByTagName",value:function(n){return z.sceneGraphService.querySelectorAll(n,this)}},{key:"querySelector",value:function(n){return z.sceneGraphService.querySelector(n,this)}},{key:"querySelectorAll",value:function(n){return z.sceneGraphService.querySelectorAll(n,this)}},{key:"closest",value:function(n){var i=this;do{if(z.sceneGraphService.matches(n,i))return i;i=i.parentElement}while(i!==null);return null}},{key:"find",value:function(n){var i=this,a=null;return this.forEach(function(s){return s!==i&&n(s)?(a=s,!1):!0}),a}},{key:"findAll",value:function(n){var i=this,a=[];return this.forEach(function(s){s!==i&&n(s)&&a.push(s)}),a}},{key:"after",value:function(){var n=this;if(this.parentNode){for(var i=this.parentNode.childNodes.indexOf(this),a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];s.forEach(function(A,l){var c;return(c=n.parentNode)===null||c===void 0?void 0:c.appendChild(A,i+l+1)})}}},{key:"before",value:function(){if(this.parentNode){for(var n,i=this.parentNode.childNodes.indexOf(this),a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];var A=s[0],l=Du(s).slice(1);this.parentNode.appendChild(A,i),(n=A).after.apply(n,Fe(l))}}},{key:"replaceWith",value:function(){this.after.apply(this,arguments),this.remove()}},{key:"append",value:function(){for(var n=this,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];a.forEach(function(o){return n.appendChild(o)})}},{key:"prepend",value:function(){for(var n=this,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];a.forEach(function(o,A){return n.appendChild(o,A)})}},{key:"replaceChildren",value:function(){for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,arguments)}},{key:"remove",value:function(){return this.parentNode?this.parentNode.removeChild(this):this}},{key:"destroy",value:function(){var n,i=((n=this.ownerDocument)===null||n===void 0||(n=n.defaultView)===null||n===void 0||(n=n.getConfig().future)===null||n===void 0?void 0:n.experimentalCancelEventPropagation)===!0;this.destroyChildren(),this.dispatchEvent(h_,i,i),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0}},{key:"getGeometryBounds",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return z.sceneGraphService.getGeometryBounds(this,n)}},{key:"getTransformedGeometryBounds",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return z.sceneGraphService.getTransformedGeometryBounds(this,n)}},{key:"getBounds",value:function(){return z.sceneGraphService.getBounds(this)}},{key:"getRenderBounds",value:function(){return z.sceneGraphService.getBounds(this,!0)}},{key:"getLocalBounds",value:function(){return z.sceneGraphService.getLocalBounds(this)}},{key:"getBoundingClientRect",value:function(){return z.sceneGraphService.getBoundingClientRect(this)}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"computedStyleMap",value:function(){return new Map(Object.entries(this.computedStyle))}},{key:"getAttributeNames",value:function(){return Object.keys(this.attributes)}},{key:"getAttribute",value:function(n){if(typeof n!="symbol"){var i=this.attributes[n];return i}}},{key:"hasAttribute",value:function(n){return this.getAttributeNames().includes(n)}},{key:"hasAttributes",value:function(){return!!this.getAttributeNames().length}},{key:"removeAttribute",value:function(n){this.setAttribute(n,null),delete this.attributes[n]}},{key:"setAttribute",value:function(n,i){this.attributes[n]=i}},{key:"getAttributeNS",value:function(n,i){throw new Error(Ve)}},{key:"getAttributeNode",value:function(n){throw new Error(Ve)}},{key:"getAttributeNodeNS",value:function(n,i){throw new Error(Ve)}},{key:"hasAttributeNS",value:function(n,i){throw new Error(Ve)}},{key:"removeAttributeNS",value:function(n,i){throw new Error(Ve)}},{key:"removeAttributeNode",value:function(n){throw new Error(Ve)}},{key:"setAttributeNS",value:function(n,i,a){throw new Error(Ve)}},{key:"setAttributeNode",value:function(n){throw new Error(Ve)}},{key:"setAttributeNodeNS",value:function(n){throw new Error(Ve)}},{key:"toggleAttribute",value:function(n,i){throw new Error(Ve)}}])}(ht);function Ne(r){return!!(r!=null&&r.nodeName)}var xH=z.globalThis.Proxy?z.globalThis.Proxy:function(){},oi=new pi(Me.ATTR_MODIFIED,null,null,null,null,pi.MODIFICATION,null,null),aA=xe(),CH=Lt(),et=function(r){function e(t){var n;return G(this,e),n=ye(this,e),n.isCustomElement=!1,n.isMutationObserved=!1,n.activeAnimations=[],n.config=t,n.id=t.id||"",n.name=t.name||"",(t.className||t.class)&&(n.className=t.className||t.class),n.nodeName=t.type||P.GROUP,t.initialParsedStyle&&Object.assign(n.parsedStyle,t.initialParsedStyle),n.initAttributes(t.style),z.enableStyleSyntax&&(n.style=new xH({setProperty:function(a,s){n.setAttribute(a,s)},getPropertyValue:function(a){return n.getAttribute(a)},removeProperty:function(a){n.removeAttribute(a)},item:function(){return""}},{get:function(a,s){return a[s]!==void 0?a[s]:n.getAttribute(s)},set:function(a,s,o){return n.setAttribute(s,o),!0}})),n}return me(e,r),K(e,[{key:"destroy",value:function(){qu(e,"destroy",this)([]),this.getAnimations().forEach(function(n){n.cancel()})}},{key:"cloneNode",value:function(n,i){var a=ue({},this.attributes);for(var s in a){var o=a[s];Ne(o)&&s!=="clipPath"&&s!=="offsetPath"&&s!=="textPath"&&(a[s]=o.cloneNode(n)),i&&(a[s]=i(s,o))}var A=new this.constructor(ue(ue({},this.config),{},{style:a}));return A.setLocalTransform(this.getLocalTransform()),n&&this.children.forEach(function(l){if(!l.style.isMarker){var c=l.cloneNode(n);A.appendChild(c)}}),A}},{key:"initAttributes",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i={forceUpdateGeometry:!0};z.styleValueRegistry.processProperties(this,n,i),this.dirty()}},{key:"setAttribute",value:function(n,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;he(i)||(a||i!==this.attributes[n])&&(this.internalSetAttribute(n,i,{memoize:s}),qu(e,"setAttribute",this)([n,i]))}},{key:"setAttributes",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.skipDispatchAttrModifiedEvent,s=a===void 0?!1:a,o,A;if(s||(o=ue({},this.attributes),A=ue({},this.parsedStyle)),z.styleValueRegistry.processProperties(this,n,i),this.dirty(),!s)for(var l in n)this.dispatchAttrModifiedEvent(l,o[l],n[l],A[l])}},{key:"internalSetAttribute",value:function(n,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=this.attributes[n],o=this.parsedStyle[n];z.styleValueRegistry.processProperties(this,ee({},n,i),a),this.dirty(),this.dispatchAttrModifiedEvent(n,s,i,o)}},{key:"dispatchAttrModifiedEvent",value:function(n,i,a,s){var o=this.parsedStyle[n];if(this.isConnected)if(oi.relatedNode=this,oi.prevValue=i,oi.newValue=a,oi.attrName=n,oi.prevParsedValue=s,oi.newParsedValue=o,this.isMutationObserved)this.dispatchEvent(oi);else{var A,l=((A=this.ownerDocument.defaultView.getConfig().future)===null||A===void 0?void 0:A.experimentalCancelEventPropagation)===!0;oi.target=this,this.ownerDocument.defaultView.dispatchEvent(oi,!0,l)}if(this.isCustomElement&&this.isConnected||!this.isCustomElement){var c,u;(c=(u=this).attributeChangedCallback)===null||c===void 0||c.call(u,n,i,a,s,o)}}},{key:"getBBox",value:function(){var n=this.getBounds(),i=n.getMin(),a=pe(i,2),s=a[0],o=a[1],A=n.getMax(),l=pe(A,2),c=l[0],u=l[1];return new ko(s,o,c-s,u-o)}},{key:"setOrigin",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return z.sceneGraphService.setOrigin(this,En(n,i,a,!1)),this}},{key:"getOrigin",value:function(){return z.sceneGraphService.getOrigin(this)}},{key:"setPosition",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return z.sceneGraphService.setPosition(this,En(n,i,a,!1)),this}},{key:"setLocalPosition",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return z.sceneGraphService.setLocalPosition(this,En(n,i,a,!1)),this}},{key:"translate",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return z.sceneGraphService.translate(this,En(n,i,a,!1)),this}},{key:"translateLocal",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return z.sceneGraphService.translateLocal(this,En(n,i,a,!1)),this}},{key:"getPosition",value:function(){return z.sceneGraphService.getPosition(this)}},{key:"getLocalPosition",value:function(){return z.sceneGraphService.getLocalPosition(this)}},{key:"scale",value:function(n,i,a){return this.scaleLocal(n,i,a)}},{key:"scaleLocal",value:function(n,i,a){return typeof n=="number"&&(i=i||n,a=a||n,n=En(n,i,a,!1)),z.sceneGraphService.scaleLocal(this,n),this}},{key:"setLocalScale",value:function(n,i,a){return typeof n=="number"&&(i=i||n,a=a||n,n=En(n,i,a,!1)),z.sceneGraphService.setLocalScale(this,n),this}},{key:"getLocalScale",value:function(){return z.sceneGraphService.getLocalScale(this)}},{key:"getScale",value:function(){return z.sceneGraphService.getScale(this)}},{key:"getEulerAngles",value:function(){var n=zf(aA,z.sceneGraphService.getWorldTransform(this)),i=pe(n,3),a=i[2];return Rn(a)}},{key:"getLocalEulerAngles",value:function(){var n=zf(aA,z.sceneGraphService.getLocalRotation(this)),i=pe(n,3),a=i[2];return Rn(a)}},{key:"setEulerAngles",value:function(n){return z.sceneGraphService.setEulerAngles(this,0,0,n),this}},{key:"setLocalEulerAngles",value:function(n){return z.sceneGraphService.setLocalEulerAngles(this,0,0,n),this}},{key:"rotateLocal",value:function(n,i,a){return le(i)&&le(a)?z.sceneGraphService.rotateLocal(this,0,0,n):z.sceneGraphService.rotateLocal(this,n,i,a),this}},{key:"rotate",value:function(n,i,a){return le(i)&&le(a)?z.sceneGraphService.rotate(this,0,0,n):z.sceneGraphService.rotate(this,n,i,a),this}},{key:"setRotation",value:function(n,i,a,s){return z.sceneGraphService.setRotation(this,n,i,a,s),this}},{key:"setLocalRotation",value:function(n,i,a,s){return z.sceneGraphService.setLocalRotation(this,n,i,a,s),this}},{key:"setLocalSkew",value:function(n,i){return z.sceneGraphService.setLocalSkew(this,n,i),this}},{key:"getRotation",value:function(){return z.sceneGraphService.getRotation(this)}},{key:"getLocalRotation",value:function(){return z.sceneGraphService.getLocalRotation(this)}},{key:"getLocalSkew",value:function(){return z.sceneGraphService.getLocalSkew(this)}},{key:"getLocalTransform",value:function(){return z.sceneGraphService.getLocalTransform(this)}},{key:"getWorldTransform",value:function(){return z.sceneGraphService.getWorldTransform(this)}},{key:"setLocalTransform",value:function(n){return z.sceneGraphService.setLocalTransform(this,n),this}},{key:"resetLocalTransform",value:function(){z.sceneGraphService.resetLocalTransform(this)}},{key:"getAnimations",value:function(){return this.activeAnimations}},{key:"animate",value:function(n,i){var a,s=(a=this.ownerDocument)===null||a===void 0?void 0:a.timeline;return s?s.play(this,n,i):null}},{key:"isVisible",value:function(){var n;return((n=this.parsedStyle)===null||n===void 0?void 0:n.visibility)!=="hidden"}},{key:"interactive",get:function(){return this.isInteractive()},set:function(n){this.style.pointerEvents=n?"auto":"none"}},{key:"isInteractive",value:function(){var n;return((n=this.parsedStyle)===null||n===void 0?void 0:n.pointerEvents)!=="none"}},{key:"isCulled",value:function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible)}},{key:"toFront",value:function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,Fe(this.parentNode.children.map(function(n){return Number(n.style.zIndex)})))+1),this}},{key:"toBack",value:function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,Fe(this.parentNode.children.map(function(n){return Number(n.style.zIndex)})))-1),this}},{key:"getConfig",value:function(){return this.config}},{key:"attr",value:function(){for(var n=this,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];var o=a[0],A=a[1];return o?Ot(o)?(Object.keys(o).forEach(function(l){n.setAttribute(l,o[l])}),this):a.length===2?(this.setAttribute(o,A),this):this.attributes[o]:this.attributes}},{key:"getMatrix",value:function(n){var i=n||this.getWorldTransform(),a=Hu(aA,i),s=pe(a,2),o=s[0],A=s[1],l=Io(aA,i),c=pe(l,2),u=c[0],h=c[1],d=Gu(CH,i),f=zf(aA,d),g=pe(f,3),v=g[0],p=g[2];return wD(v||p,o,A,u,h)}},{key:"getLocalMatrix",value:function(){return this.getMatrix(this.getLocalTransform())}},{key:"setMatrix",value:function(n){var i=Ib(n),a=pe(i,5),s=a[0],o=a[1],A=a[2],l=a[3],c=a[4];this.setEulerAngles(c).setPosition(s,o).setLocalScale(A,l)}},{key:"setLocalMatrix",value:function(n){var i=Ib(n),a=pe(i,5),s=a[0],o=a[1],A=a[2],l=a[3],c=a[4];this.setLocalEulerAngles(c).setLocalPosition(s,o).setLocalScale(A,l)}},{key:"show",value:function(){this.forEach(function(n){n.style.visibility="visible"})}},{key:"hide",value:function(){this.forEach(function(n){n.style.visibility="hidden"})}},{key:"getCount",value:function(){return this.childElementCount}},{key:"getParent",value:function(){return this.parentElement}},{key:"getChildren",value:function(){return this.children}},{key:"getFirst",value:function(){return this.firstElementChild}},{key:"getLast",value:function(){return this.lastElementChild}},{key:"getChildByIndex",value:function(n){return this.children[n]||null}},{key:"add",value:function(n,i){return this.appendChild(n,i)}},{key:"set",value:function(n,i){this.config[n]=i}},{key:"get",value:function(n){return this.config[n]}},{key:"moveTo",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.setPosition(n,i,a),this}},{key:"move",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.setPosition(n,i,a),this}},{key:"setZIndex",value:function(n){return this.style.zIndex=n,this}}])}(EH);et.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","display","draggable","droppable","fill","fillOpacity","fillRule","filter","increasedLineWidthForHitTesting","lineCap","lineDash","lineDashOffset","lineJoin","lineWidth","miterLimit","hitArea","offsetDistance","offsetPath","offsetX","offsetY","opacity","pointerEvents","shadowColor","shadowType","shadowBlur","shadowOffsetX","shadowOffsetY","stroke","strokeOpacity","strokeWidth","strokeLinecap","strokeLineJoin","strokeDasharray","strokeDashoffset","transform","transformOrigin","textTransform","visibility","zIndex"]);var yi=function(r){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return G(this,e),ye(this,e,[ue({type:P.CIRCLE},t)])}return me(e,r),K(e)}(et);yi.PARSED_STYLE_LIST=new Set([].concat(Fe(et.PARSED_STYLE_LIST),["cx","cy","cz","r","isBillboard","isSizeAttenuation"]));var SH=["style"],xl=function(r){function e(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.style,a=fi(n,SH);return G(this,e),t=ye(this,e,[ue({style:i},a)]),t.isCustomElement=!0,t}return me(e,r),K(e)}(et);xl.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var Cl=function(r){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return G(this,e),ye(this,e,[ue({type:P.ELLIPSE},t)])}return me(e,r),K(e)}(et);Cl.PARSED_STYLE_LIST=new Set([].concat(Fe(et.PARSED_STYLE_LIST),["cx","cy","cz","rx","ry","isBillboard","isSizeAttenuation"]));var FH=function(r){function e(){return G(this,e),ye(this,e,[{type:P.FRAGMENT}])}return me(e,r),K(e)}(et);FH.PARSED_STYLE_LIST=new Set(["class","className"]);var $t=function(r){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return G(this,e),ye(this,e,[ue({type:P.GROUP},t)])}return me(e,r),K(e)}(et);$t.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var TH=["style"],ks=function(r){function e(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.style,a=fi(n,TH);return G(this,e),t=ye(this,e,[ue({type:P.HTML,style:i},a)]),t.cullable.enable=!1,t}return me(e,r),K(e,[{key:"getDomElement",value:function(){return this.parsedStyle.$el}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"getLocalBounds",value:function(){if(this.parentNode){var n=li(Ye(),this.parentNode.getWorldTransform()),i=this.getBounds();if(!tt.isEmpty(i)){var a=new tt;return a.setFromTransformedAABB(i,n),a}}return this.getBounds()}}])}(et);ks.PARSED_STYLE_LIST=new Set([].concat(Fe(et.PARSED_STYLE_LIST),["x","y","$el","innerHTML","width","height"]));var Sl=function(r){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return G(this,e),ye(this,e,[ue({type:P.IMAGE},t)])}return me(e,r),K(e)}(et);Sl.PARSED_STYLE_LIST=new Set([].concat(Fe(et.PARSED_STYLE_LIST),["x","y","z","src","width","height","isBillboard","billboardRotation","isSizeAttenuation","keepAspectRatio"]));var MH=["style"],Ss=function(r){function e(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.style,a=fi(n,MH);G(this,e),t=ye(this,e,[ue({type:P.LINE,style:ue({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},i)},a)]),t.markerStartAngle=0,t.markerEndAngle=0;var s=t.parsedStyle,o=s.markerStart,A=s.markerEnd;return o&&Ne(o)&&(t.markerStartAngle=o.getLocalEulerAngles(),t.appendChild(o)),A&&Ne(A)&&(t.markerEndAngle=A.getLocalEulerAngles(),t.appendChild(A)),t.transformMarker(!0),t.transformMarker(!1),t}return me(e,r),K(e,[{key:"attributeChangedCallback",value:function(n,i,a,s,o){n==="x1"||n==="y1"||n==="x2"||n==="y2"||n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(s&&Ne(s)&&(this.markerStartAngle=0,s.remove()),o&&Ne(o)&&(this.markerStartAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!0))):n==="markerEnd"&&(s&&Ne(s)&&(this.markerEndAngle=0,s.remove()),o&&Ne(o)&&(this.markerEndAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!1)))}},{key:"transformMarker",value:function(n){var i=this.parsedStyle,a=i.markerStart,s=i.markerEnd,o=i.markerStartOffset,A=i.markerEndOffset,l=i.x1,c=i.x2,u=i.y1,h=i.y2,d=n?a:s;if(!(!d||!Ne(d))){var f=0,g,v,p,y,m,w;n?(p=l,y=u,g=c-l,v=h-u,m=o||0,w=this.markerStartAngle):(p=c,y=h,g=l-c,v=u-h,m=A||0,w=this.markerEndAngle),f=Math.atan2(v,g),d.setLocalEulerAngles(f*180/Math.PI+w),d.setLocalPosition(p+Math.cos(f)*m,y+Math.sin(f)*m)}}},{key:"getPoint",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=this.parsedStyle,s=a.x1,o=a.y1,A=a.x2,l=a.y2,c=LI(s,o,A,l,n),u=c.x,h=c.y,d=mn(xe(),Xe(u,h,0),i?this.getWorldTransform():this.getLocalTransform());return new rn(d[0],d[1])}},{key:"getPointAtLength",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPoint(n/this.getTotalLength(),i)}},{key:"getTotalLength",value:function(){var n=this.parsedStyle,i=n.x1,a=n.y1,s=n.x2,o=n.y2;return kI(i,a,s,o)}}])}(et);Ss.PARSED_STYLE_LIST=new Set([].concat(Fe(et.PARSED_STYLE_LIST),["x1","y1","x2","y2","z1","z2","isBillboard","isSizeAttenuation","markerStart","markerEnd","markerStartOffset","markerEndOffset"]));var OH=["style"],wn=function(r){function e(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.style,a=fi(n,OH);G(this,e),t=ye(this,e,[ue({type:P.PATH,style:i,initialParsedStyle:{miterLimit:4,d:ue({},RI)}},a)]),t.markerStartAngle=0,t.markerEndAngle=0,t.markerMidList=[];var s=t.parsedStyle,o=s.markerStart,A=s.markerEnd,l=s.markerMid;return o&&Ne(o)&&(t.markerStartAngle=o.getLocalEulerAngles(),t.appendChild(o)),l&&Ne(l)&&t.placeMarkerMid(l),A&&Ne(A)&&(t.markerEndAngle=A.getLocalEulerAngles(),t.appendChild(A)),t.transformMarker(!0),t.transformMarker(!1),t}return me(e,r),K(e,[{key:"attributeChangedCallback",value:function(n,i,a,s,o){n==="d"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(s&&Ne(s)&&(this.markerStartAngle=0,s.remove()),o&&Ne(o)&&(this.markerStartAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!0))):n==="markerEnd"?(s&&Ne(s)&&(this.markerEndAngle=0,s.remove()),o&&Ne(o)&&(this.markerEndAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!1))):n==="markerMid"&&this.placeMarkerMid(o)}},{key:"transformMarker",value:function(n){var i=this.parsedStyle,a=i.markerStart,s=i.markerEnd,o=i.markerStartOffset,A=i.markerEndOffset,l=n?a:s;if(!(!l||!Ne(l))){var c=0,u,h,d,f,g,v;if(n){var p=this.getStartTangent(),y=pe(p,2),m=y[0],w=y[1];d=w[0],f=w[1],u=m[0]-w[0],h=m[1]-w[1],g=o||0,v=this.markerStartAngle}else{var B=this.getEndTangent(),b=pe(B,2),E=b[0],x=b[1];d=x[0],f=x[1],u=E[0]-x[0],h=E[1]-x[1],g=A||0,v=this.markerEndAngle}c=Math.atan2(h,u),l.setLocalEulerAngles(c*180/Math.PI+v),l.setLocalPosition(d+Math.cos(c)*g,f+Math.sin(c)*g)}}},{key:"placeMarkerMid",value:function(n){var i=this.parsedStyle.d.segments;if(this.markerMidList.forEach(function(c){c.remove()}),n&&Ne(n))for(var a=1;a<i.length-1;a++){var s=pe(i[a].currentPoint,2),o=s[0],A=s[1],l=a===1?n:n.cloneNode(!0);this.markerMidList.push(l),this.appendChild(l),l.setLocalPosition(o,A)}}},{key:"getTotalLength",value:function(){return f1(this)}},{key:"getPointAtLength",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=this.parsedStyle.d.absolutePath,s=GR(a,n),o=s.x,A=s.y,l=mn(xe(),Xe(o,A,0),i?this.getWorldTransform():this.getLocalTransform());return new rn(l[0],l[1])}},{key:"getPoint",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPointAtLength(n*f1(this),i)}},{key:"getStartTangent",value:function(){var n=this.parsedStyle.d.segments,i=[];if(n.length>1){var a=n[0].currentPoint,s=n[1].currentPoint,o=n[1].startTangent;i=[],o?(i.push([a[0]-o[0],a[1]-o[1]]),i.push([a[0],a[1]])):(i.push([s[0],s[1]]),i.push([a[0],a[1]]))}return i}},{key:"getEndTangent",value:function(){var n=this.parsedStyle.d.segments,i=n.length,a=[];if(i>1){var s=n[i-2].currentPoint,o=n[i-1].currentPoint,A=n[i-1].endTangent;a=[],A?(a.push([o[0]-A[0],o[1]-A[1]]),a.push([o[0],o[1]])):(a.push([s[0],s[1]]),a.push([o[0],o[1]]))}return a}}])}(et);wn.PARSED_STYLE_LIST=new Set([].concat(Fe(et.PARSED_STYLE_LIST),["d","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard","isSizeAttenuation"]));var IH=["style"],Ls=function(r){function e(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.style,a=fi(n,IH);G(this,e),t=ye(this,e,[ue({type:P.POLYGON,style:i,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},a)]),t.markerStartAngle=0,t.markerEndAngle=0,t.markerMidList=[];var s=t.parsedStyle,o=s.markerStart,A=s.markerEnd,l=s.markerMid;return o&&Ne(o)&&(t.markerStartAngle=o.getLocalEulerAngles(),t.appendChild(o)),l&&Ne(l)&&t.placeMarkerMid(l),A&&Ne(A)&&(t.markerEndAngle=A.getLocalEulerAngles(),t.appendChild(A)),t.transformMarker(!0),t.transformMarker(!1),t}return me(e,r),K(e,[{key:"attributeChangedCallback",value:function(n,i,a,s,o){n==="points"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(s&&Ne(s)&&(this.markerStartAngle=0,s.remove()),o&&Ne(o)&&(this.markerStartAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!0))):n==="markerEnd"?(s&&Ne(s)&&(this.markerEndAngle=0,s.remove()),o&&Ne(o)&&(this.markerEndAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!1))):n==="markerMid"&&this.placeMarkerMid(o)}},{key:"transformMarker",value:function(n){var i=this.parsedStyle,a=i.markerStart,s=i.markerEnd,o=i.markerStartOffset,A=i.markerEndOffset,l=i.points,c=l||{},u=c.points,h=n?a:s;if(!(!h||!Ne(h)||!u)){var d=0,f,g,v,p,y,m;if(v=u[0][0],p=u[0][1],n)f=u[1][0]-u[0][0],g=u[1][1]-u[0][1],y=o||0,m=this.markerStartAngle;else{var w=u.length;this.parsedStyle.isClosed?(f=u[w-1][0]-u[0][0],g=u[w-1][1]-u[0][1]):(v=u[w-1][0],p=u[w-1][1],f=u[w-2][0]-u[w-1][0],g=u[w-2][1]-u[w-1][1]),y=A||0,m=this.markerEndAngle}d=Math.atan2(g,f),h.setLocalEulerAngles(d*180/Math.PI+m),h.setLocalPosition(v+Math.cos(d)*y,p+Math.sin(d)*y)}}},{key:"placeMarkerMid",value:function(n){var i=this.parsedStyle.points,a=i||{},s=a.points;if(this.markerMidList.forEach(function(u){u.remove()}),this.markerMidList=[],n&&Ne(n)&&s)for(var o=1;o<(this.parsedStyle.isClosed?s.length:s.length-1);o++){var A=s[o][0],l=s[o][1],c=o===1?n:n.cloneNode(!0);this.markerMidList.push(c),this.appendChild(c),c.setLocalPosition(A,l)}}}])}(et);Ls.PARSED_STYLE_LIST=new Set([].concat(Fe(et.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isClosed","isBillboard","isSizeAttenuation"]));var _H=["style"],Gh=function(r){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.style,i=fi(t,_H);return G(this,e),ye(this,e,[ue({type:P.POLYLINE,style:n,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},i)])}return me(e,r),K(e,[{key:"getTotalLength",value:function(){return E3(this)}},{key:"getPointAtLength",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPoint(n/this.getTotalLength(),i)}},{key:"getPoint",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=this.parsedStyle.points.points;if(this.parsedStyle.points.segments.length===0){var s=[],o=0,A,l,c=this.getTotalLength();a.forEach(function(p,y){a[y+1]&&(A=[0,0],A[0]=o/c,l=kI(p[0],p[1],a[y+1][0],a[y+1][1]),o+=l,A[1]=o/c,s.push(A))}),this.parsedStyle.points.segments=s}var u=0,h=0;this.parsedStyle.points.segments.forEach(function(p,y){n>=p[0]&&n<=p[1]&&(u=(n-p[0])/(p[1]-p[0]),h=y)});var d=LI(a[h][0],a[h][1],a[h+1][0],a[h+1][1],u),f=d.x,g=d.y,v=mn(xe(),Xe(f,g,0),i?this.getWorldTransform():this.getLocalTransform());return new rn(v[0],v[1])}},{key:"getStartTangent",value:function(){var n=this.parsedStyle.points.points,i=[];return i.push([n[1][0],n[1][1]]),i.push([n[0][0],n[0][1]]),i}},{key:"getEndTangent",value:function(){var n=this.parsedStyle.points.points,i=n.length-1,a=[];return a.push([n[i-1][0],n[i-1][1]]),a.push([n[i][0],n[i][1]]),a}}])}(Ls);Gh.PARSED_STYLE_LIST=new Set([].concat(Fe(Ls.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard"]));var An=function(r){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return G(this,e),ye(this,e,[ue({type:P.RECT},t)])}return me(e,r),K(e)}(et);An.PARSED_STYLE_LIST=new Set([].concat(Fe(et.PARSED_STYLE_LIST),["x","y","z","width","height","isBillboard","isSizeAttenuation","radius"]));var kH=["style"],Qs=function(r){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.style,i=fi(t,kH);return G(this,e),ye(this,e,[ue({type:P.TEXT,style:ue({fill:"black"},n)},i)])}return me(e,r),K(e,[{key:"getComputedTextLength",value:function(){var n;return this.getGeometryBounds(),((n=this.parsedStyle.metrics)===null||n===void 0?void 0:n.maxLineWidth)||0}},{key:"getLineBoundingRects",value:function(){var n;return this.getGeometryBounds(),((n=this.parsedStyle.metrics)===null||n===void 0?void 0:n.lineMetrics)||[]}},{key:"isOverflowing",value:function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing}}])}(et);Qs.PARSED_STYLE_LIST=new Set([].concat(Fe(et.PARSED_STYLE_LIST),["x","y","z","isBillboard","billboardRotation","isSizeAttenuation","text","textAlign","textBaseline","fontStyle","fontSize","fontFamily","fontWeight","fontVariant","lineHeight","letterSpacing","leading","wordWrap","wordWrapWidth","maxLines","textOverflow","isOverflowing","textPath","textDecorationLine","textDecorationColor","textDecorationStyle","textDecorationThickness","textPathSide","textPathStartOffset","metrics","dx","dy"]));var LH=function(){function r(){G(this,r),this.registry={},this.define(P.CIRCLE,yi),this.define(P.ELLIPSE,Cl),this.define(P.RECT,An),this.define(P.IMAGE,Sl),this.define(P.LINE,Ss),this.define(P.GROUP,$t),this.define(P.PATH,wn),this.define(P.POLYGON,Ls),this.define(P.POLYLINE,Gh),this.define(P.TEXT,Qs),this.define(P.HTML,ks)}return K(r,[{key:"define",value:function(t,n){this.registry[t]=n}},{key:"get",value:function(t){return this.registry[t]}}])}(),QH={number:function(e){return new je(e)},percent:function(e){return new je(e,"%")},px:function(e){return new je(e,"px")},em:function(e){return new je(e,"em")},rem:function(e){return new je(e,"rem")},deg:function(e){return new je(e,"deg")},grad:function(e){return new je(e,"grad")},rad:function(e){return new je(e,"rad")},turn:function(e){return new je(e,"turn")},s:function(e){return new je(e,"s")},ms:function(e){return new je(e,"ms")},registerProperty:function(e){var t=e.name,n=e.inherits,i=e.interpolable,a=e.initialValue,s=e.syntax;z.styleValueRegistry.registerMetadata({n:t,inh:n,int:i,d:a,syntax:s})},registerLayout:function(e,t){z.layoutRegistry.registerLayout(e,t)}},d_=function(r){function e(){var t;G(this,e),t=ye(this,e),t.defaultView=null,t.ownerDocument=null,t.nodeName="document";try{t.timeline=new z.AnimationTimeline(t)}catch{}var n={};return Pw.forEach(function(i){var a=i.n,s=i.inh,o=i.d;s&&o&&(n[a]=ie(o)?o(P.GROUP):o)}),t.documentElement=new $t({id:"g-root",style:n}),t.documentElement.ownerDocument=t,t.documentElement.parentNode=t,t.childNodes=[t.documentElement],t}return me(e,r),K(e,[{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"createElement",value:function(n,i){if(n==="svg")return this.documentElement;var a=this.defaultView.customElements.get(n);a||(console.warn("Unsupported tagName: ",n),a=n==="tspan"?Qs:$t);var s=new a(i);return s.ownerDocument=this,s}},{key:"createElementNS",value:function(n,i,a){return this.createElement(i,a)}},{key:"cloneNode",value:function(n){throw new Error(Ve)}},{key:"destroy",value:function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch{}}},{key:"elementsFromBBox",value:function(n,i,a,s){var o=[],A=function(c){if(!(!c.isInteractive()||c.isCulled())){var u=c.parsedStyle.pointerEvents,h=u===void 0?"auto":u,d=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(h);if(!d||c.isVisible()){var f=c.getTransformedGeometryBounds(!0);f&&!tt.isEmpty(f)&&f.max[0]>=n&&f.min[0]<=a&&f.max[1]>=i&&f.min[1]<=s&&o.push(c)}c.childNodes&&c.childNodes.forEach(function(g){g instanceof et&&A(g)})}};return A(this.documentElement),o.sort(function(l,c){return c.sortable.renderOrder-l.sortable.renderOrder}),o}},{key:"elementFromPointSync",value:function(n,i){var a=this.defaultView.canvas2Viewport({x:n,y:i}),s=a.x,o=a.y,A=this.defaultView.getConfig(),l=A.width,c=A.height;if(s<0||o<0||s>l||o>c)return null;var u=this.defaultView.viewport2Client({x:s,y:o}),h=u.x,d=u.y,f=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:n,y:i,viewportX:s,viewportY:o,clientX:h,clientY:d},picked:[]}),g=f.picked;return g&&g[0]||this.documentElement}},{key:"elementFromPoint",value:function(){var t=ka(Xt().mark(function i(a,s){var o,A,l,c,u,h,d,f,g,v,p;return Xt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(o=this.defaultView.canvas2Viewport({x:a,y:s}),A=o.x,l=o.y,c=this.defaultView.getConfig(),u=c.width,h=c.height,!(A<0||l<0||A>u||l>h)){y.next=1;break}return y.abrupt("return",null);case 1:return d=this.defaultView.viewport2Client({x:A,y:l}),f=d.x,g=d.y,y.next=2,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:a,y:s,viewportX:A,viewportY:l,clientX:f,clientY:g},picked:[]});case 2:return v=y.sent,p=v.picked,y.abrupt("return",p&&p[0]||this.documentElement);case 3:case"end":return y.stop()}},i,this)}));function n(i,a){return t.apply(this,arguments)}return n}()},{key:"elementsFromPointSync",value:function(n,i){var a=this.defaultView.canvas2Viewport({x:n,y:i}),s=a.x,o=a.y,A=this.defaultView.getConfig(),l=A.width,c=A.height;if(s<0||o<0||s>l||o>c)return[];var u=this.defaultView.viewport2Client({x:s,y:o}),h=u.x,d=u.y,f=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:n,y:i,viewportX:s,viewportY:o,clientX:h,clientY:d},picked:[]}),g=f.picked;return g[g.length-1]!==this.documentElement&&g.push(this.documentElement),g}},{key:"elementsFromPoint",value:function(){var t=ka(Xt().mark(function i(a,s){var o,A,l,c,u,h,d,f,g,v,p;return Xt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(o=this.defaultView.canvas2Viewport({x:a,y:s}),A=o.x,l=o.y,c=this.defaultView.getConfig(),u=c.width,h=c.height,!(A<0||l<0||A>u||l>h)){y.next=1;break}return y.abrupt("return",[]);case 1:return d=this.defaultView.viewport2Client({x:A,y:l}),f=d.x,g=d.y,y.next=2,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:a,y:s,viewportX:A,viewportY:l,clientX:f,clientY:g},picked:[]});case 2:return v=y.sent,p=v.picked,p[p.length-1]!==this.documentElement&&p.push(this.documentElement),y.abrupt("return",p);case 3:case"end":return y.stop()}},i,this)}));function n(i,a){return t.apply(this,arguments)}return n}()},{key:"appendChild",value:function(n,i){throw new Error($s)}},{key:"insertBefore",value:function(n,i){throw new Error($s)}},{key:"removeChild",value:function(n,i){throw new Error($s)}},{key:"replaceChild",value:function(n,i,a){throw new Error($s)}},{key:"append",value:function(){throw new Error($s)}},{key:"prepend",value:function(){throw new Error($s)}},{key:"getElementById",value:function(n){return this.documentElement.getElementById(n)}},{key:"getElementsByName",value:function(n){return this.documentElement.getElementsByName(n)}},{key:"getElementsByTagName",value:function(n){return this.documentElement.getElementsByTagName(n)}},{key:"getElementsByClassName",value:function(n){return this.documentElement.getElementsByClassName(n)}},{key:"querySelector",value:function(n){return this.documentElement.querySelector(n)}},{key:"querySelectorAll",value:function(n){return this.documentElement.querySelectorAll(n)}},{key:"find",value:function(n){return this.documentElement.find(n)}},{key:"findAll",value:function(n){return this.documentElement.findAll(n)}}])}(ht),f_=function(){function r(e){G(this,r),this.strategies=e}return K(r,[{key:"apply",value:function(t){var n=t.config,i=t.camera,a=t.renderingService,s=t.renderingContext,o=this.strategies;a.hooks.cull.tap(r.tag,function(A){if(A){var l,c=A.cullable;if(o.length===0?c.visible=s.unculledEntities.indexOf(A.entity)>-1:c.visible=o.every(function(h){return h.isVisible(i,A)}),!A.isCulled()&&A.isVisible())return A;var u=((l=n.future)===null||l===void 0?void 0:l.experimentalCancelEventPropagation)===!0;return A.dispatchEvent(new Qt(Me.CULLED),u,u),null}return A}),a.hooks.afterRender.tap(r.tag,function(A){A.cullable.visibilityPlaneMask=-1})}}])}();f_.tag="Culling";var g_=function(){function r(){var e=this;G(this,r),this.autoPreventDefault=!1,this.rootPointerEvent=new ih(null),this.rootWheelEvent=new y1(null),this.onPointerMove=function(t){var n,i=(n=e.context.renderingContext.root)===null||n===void 0||(n=n.ownerDocument)===null||n===void 0?void 0:n.defaultView;if(!(i.supportsTouchEvents&&t.pointerType==="touch")){var a=e.normalizeToPointerEvent(t,i),s=ua(a),o;try{for(s.s();!(o=s.n()).done;){var A=o.value,l=e.bootstrapEvent(e.rootPointerEvent,A,i,t);e.context.eventService.mapEvent(l)}}catch(c){s.e(c)}finally{s.f()}e.setCursor(e.context.eventService.cursor)}},this.onClick=function(t){var n,i=(n=e.context.renderingContext.root)===null||n===void 0||(n=n.ownerDocument)===null||n===void 0?void 0:n.defaultView,a=e.normalizeToPointerEvent(t,i),s=ua(a),o;try{for(s.s();!(o=s.n()).done;){var A=o.value,l=e.bootstrapEvent(e.rootPointerEvent,A,i,t);e.context.eventService.mapEvent(l)}}catch(c){s.e(c)}finally{s.f()}e.setCursor(e.context.eventService.cursor)}}return K(r,[{key:"apply",value:function(t){var n=this;this.context=t;var i=t.renderingService,a=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(s){var o=n.context.renderingService.hooks.pickSync.call({position:s,picked:[],topmost:!0}),A=o.picked;return A[0]||null}),i.hooks.pointerWheel.tap(r.tag,function(s){var o=n.normalizeWheelEvent(s);n.context.eventService.mapEvent(o)}),i.hooks.pointerDown.tap(r.tag,function(s){if(!(a.supportsTouchEvents&&s.pointerType==="touch")){var o=n.normalizeToPointerEvent(s,a);if(n.autoPreventDefault&&o[0].isNormalized){var A=s.cancelable||!("cancelable"in s);A&&s.preventDefault()}var l=ua(o),c;try{for(l.s();!(c=l.n()).done;){var u=c.value,h=n.bootstrapEvent(n.rootPointerEvent,u,a,s);n.context.eventService.mapEvent(h)}}catch(d){l.e(d)}finally{l.f()}n.setCursor(n.context.eventService.cursor)}}),i.hooks.pointerUp.tap(r.tag,function(s){if(!(a.supportsTouchEvents&&s.pointerType==="touch")){var o=n.context.contextService.getDomElement(),A=n.context.eventService.isNativeEventFromCanvas(o,s),l=A?"":"outside",c=n.normalizeToPointerEvent(s,a),u=ua(c),h;try{for(u.s();!(h=u.n()).done;){var d=h.value,f=n.bootstrapEvent(n.rootPointerEvent,d,a,s);f.type+=l,n.context.eventService.mapEvent(f)}}catch(g){u.e(g)}finally{u.f()}n.setCursor(n.context.eventService.cursor)}}),i.hooks.pointerMove.tap(r.tag,this.onPointerMove),i.hooks.pointerOver.tap(r.tag,this.onPointerMove),i.hooks.pointerOut.tap(r.tag,this.onPointerMove),i.hooks.click.tap(r.tag,this.onClick),i.hooks.pointerCancel.tap(r.tag,function(s){var o=n.normalizeToPointerEvent(s,a),A=ua(o),l;try{for(A.s();!(l=A.n()).done;){var c=l.value,u=n.bootstrapEvent(n.rootPointerEvent,c,a,s);n.context.eventService.mapEvent(u)}}catch(h){A.e(h)}finally{A.f()}n.setCursor(n.context.eventService.cursor)})}},{key:"bootstrapEvent",value:function(t,n,i,a){t.view=i,t.originalEvent=null,t.nativeEvent=a,t.pointerId=n.pointerId,t.width=n.width,t.height=n.height,t.isPrimary=n.isPrimary,t.pointerType=n.pointerType,t.pressure=n.pressure,t.tangentialPressure=n.tangentialPressure,t.tiltX=n.tiltX,t.tiltY=n.tiltY,t.twist=n.twist,this.transferMouseData(t,n);var s=this.context.eventService.client2Viewport({x:n.clientX,y:n.clientY}),o=s.x,A=s.y;t.viewport.x=o,t.viewport.y=A;var l=this.context.eventService.viewport2Canvas(t.viewport),c=l.x,u=l.y;return t.canvas.x=c,t.canvas.y=u,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.isTrusted=a.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=v4[t.type]||t.type),t}},{key:"normalizeWheelEvent",value:function(t){var n=this.rootWheelEvent;this.transferMouseData(n,t),n.deltaMode=t.deltaMode,n.deltaX=t.deltaX,n.deltaY=t.deltaY,n.deltaZ=t.deltaZ;var i=this.context.eventService.client2Viewport({x:t.clientX,y:t.clientY}),a=i.x,s=i.y;n.viewport.x=a,n.viewport.y=s;var o=this.context.eventService.viewport2Canvas(n.viewport),A=o.x,l=o.y;return n.canvas.x=A,n.canvas.y=l,n.global.copyFrom(n.canvas),n.offset.copyFrom(n.canvas),n.nativeEvent=t,n.type=t.type,n}},{key:"transferMouseData",value:function(t,n){t.isTrusted=n.isTrusted,t.srcElement=n.srcElement,t.timeStamp=p1.now(),t.type=n.type,t.altKey=n.altKey,t.metaKey=n.metaKey,t.shiftKey=n.shiftKey,t.ctrlKey=n.ctrlKey,t.button=n.button,t.buttons=n.buttons,t.client.x=n.clientX,t.client.y=n.clientY,t.movement.x=n.movementX,t.movement.y=n.movementY,t.page.x=n.pageX,t.page.y=n.pageY,t.screen.x=n.screenX,t.screen.y=n.screenY,t.relatedTarget=null}},{key:"setCursor",value:function(t){this.context.contextService.applyCursorStyle(t||this.context.config.cursor||"default")}},{key:"normalizeToPointerEvent",value:function(t,n){var i=[];if(n.isTouchEvent(t))for(var a=0;a<t.changedTouches.length;a++){var s=t.changedTouches[a];he(s.button)&&(s.button=0),he(s.buttons)&&(s.buttons=1),he(s.isPrimary)&&(s.isPrimary=t.touches.length===1&&t.type==="touchstart"),he(s.width)&&(s.width=s.radiusX||1),he(s.height)&&(s.height=s.radiusY||1),he(s.tiltX)&&(s.tiltX=0),he(s.tiltY)&&(s.tiltY=0),he(s.pointerType)&&(s.pointerType="touch"),he(s.pointerId)&&(s.pointerId=s.identifier||0),he(s.pressure)&&(s.pressure=s.force||.5),he(s.twist)&&(s.twist=0),he(s.tangentialPressure)&&(s.tangentialPressure=0),s.isNormalized=!0,s.type=t.type,i.push(s)}else if(n.isMouseEvent(t)){var o=t;he(o.isPrimary)&&(o.isPrimary=!0),he(o.width)&&(o.width=1),he(o.height)&&(o.height=1),he(o.tiltX)&&(o.tiltX=0),he(o.tiltY)&&(o.tiltY=0),he(o.pointerType)&&(o.pointerType="mouse"),he(o.pointerId)&&(o.pointerId=g4),he(o.pressure)&&(o.pressure=.5),he(o.twist)&&(o.twist=0),he(o.tangentialPressure)&&(o.tangentialPressure=0),o.isNormalized=!0,i.push(o)}else i.push(t);return i}}])}();g_.tag="Event";var NH=[P.CIRCLE,P.ELLIPSE,P.IMAGE,P.RECT,P.LINE,P.POLYLINE,P.POLYGON,P.TEXT,P.PATH,P.HTML],UH=function(){function r(){G(this,r)}return K(r,[{key:"isVisible",value:function(t,n){var i,a=n.cullable;if(!a.enable)return!0;var s=n.getRenderBounds();if(tt.isEmpty(s))return!1;var o=t.getFrustum(),A=(i=n.parentNode)===null||i===void 0||(i=i.cullable)===null||i===void 0?void 0:i.visibilityPlaneMask;return a.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(n,s,A||js.INDETERMINATE,o.planes),a.visible=a.visibilityPlaneMask!==js.OUTSIDE,a.visible}},{key:"computeVisibilityWithPlaneMask",value:function(t,n,i,a){if(i===js.OUTSIDE||i===js.INSIDE)return i;for(var s=js.INSIDE,o=NH.indexOf(t.nodeName)>-1,A=0,l=a.length;A<l;++A){var c=1<<A;if(i&c&&!(o&&(A===4||A===5))){var u=a[A],h=u.normal,d=u.distance;if(ui(h,n.getPositiveFarPoint(a[A]))+d<0)return js.OUTSIDE;ui(h,n.getNegativeFarPoint(a[A]))+d<0&&(s|=c)}}return s}}])}(),v_=function(){function r(){G(this,r),this.mutationRecords=[],this.isFirstTimeRendering=!0,this.isFirstTimeRenderingFinished=!1}return K(r,[{key:"apply",value:function(t){var n=this,i,a=t.renderingService,s=t.renderingContext,o=s.root.ownerDocument.defaultView,A=function(f){a.dirty()},l=function(f){var g,v=f.detail;(g=n.mutationRecords).push.apply(g,Fe(v)),a.dirty()},c=function(f){var g=f.target;z.enableSizeAttenuation&&z.styleValueRegistry.updateSizeAttenuation(g,o.getCamera().getZoom())},u=function(f){var g=f.target;z.sceneGraphService.dirtyToRoot(g),a.dirty()};a.hooks.init.tap(r.tag,function(){o.addEventListener(Me.MOUNTED,c),o.addEventListener(Me.UNMOUNTED,u),o.addEventListener(Me.ATTR_MODIFIED,A),o.addEventListener(Me.BOUNDS_CHANGED,l)}),a.hooks.destroy.tap(r.tag,function(){o.removeEventListener(Me.MOUNTED,c),o.removeEventListener(Me.UNMOUNTED,u),o.removeEventListener(Me.ATTR_MODIFIED,A),o.removeEventListener(Me.BOUNDS_CHANGED,l),n.mutationRecords=[]});var h=(i=z.globalThis.requestIdleCallback)!==null&&i!==void 0?i:Dw.bind(z.globalThis);a.hooks.endFrame.tap(r.tag,function(){n.isFirstTimeRendering&&(n.isFirstTimeRendering=!1,h(function(){n.isFirstTimeRenderingFinished=!0})),n.mutationRecords=[]})}}])}();v_.tag="Prepare";var rr=function(r){return r.READY="ready",r.BEFORE_RENDER="beforerender",r.RERENDER="rerender",r.AFTER_RENDER="afterrender",r.BEFORE_DESTROY="beforedestroy",r.AFTER_DESTROY="afterdestroy",r.RESIZE="resize",r.DIRTY_RECTANGLE="dirtyrectangle",r.RENDERER_CHANGED="rendererchanged",r}({}),lE=500,PH=.1,RH=1e3,sc=new Qt(Me.MOUNTED),oc=new Qt(Me.UNMOUNTED),eg=new Qt(rr.BEFORE_RENDER),cE=new Qt(rr.RERENDER),tg=new Qt(rr.AFTER_RENDER),B1=function(r){function e(t){var n;G(this,e),n=ye(this,e),n.Element=et,n.inited=!1,n.context={};var i=t.container,a=t.canvas,s=t.renderer,o=t.width,A=t.height,l=t.background,c=t.cursor,u=t.supportsMutipleCanvasesInOneContainer,h=t.cleanUpOnDestroy,d=h===void 0?!0:h,f=t.offscreenCanvas,g=t.devicePixelRatio,v=t.requestAnimationFrame,p=t.cancelAnimationFrame,y=t.createImage,m=t.supportsTouchEvents,w=t.supportsPointerEvents,B=t.isTouchEvent,b=t.isMouseEvent,E=t.dblClickSpeed,x=o,S=A,C=g||Rw&&window.devicePixelRatio||1;return C=C>=1?Math.ceil(C):1,a&&(x=o||d4(a)||a.width/C,S=A||f4(a)||a.height/C),n.customElements=new LH,n.devicePixelRatio=C,n.requestAnimationFrame=v??Dw.bind(z.globalThis),n.cancelAnimationFrame=p??A_.bind(z.globalThis),n.createImage=y??function(){return new window.Image},n.supportsTouchEvents=m??"ontouchstart"in z.globalThis,n.supportsPointerEvents=w??!!z.globalThis.PointerEvent,n.isTouchEvent=B??function(F){return n.supportsTouchEvents&&F instanceof z.globalThis.TouchEvent},n.isMouseEvent=b??function(F){return!z.globalThis.MouseEvent||F instanceof z.globalThis.MouseEvent&&(!n.supportsPointerEvents||!(F instanceof z.globalThis.PointerEvent))},f&&(z.offscreenCanvas=f),n.document=new d_,n.document.defaultView=n,u||l4(i,n,d),n.initRenderingContext(ue(ue({},t),{},{width:x,height:S,background:l??"transparent",cursor:c??"default",cleanUpOnDestroy:d,devicePixelRatio:C,requestAnimationFrame:n.requestAnimationFrame,cancelAnimationFrame:n.cancelAnimationFrame,createImage:n.createImage,supportsTouchEvents:n.supportsTouchEvents,supportsPointerEvents:n.supportsPointerEvents,isTouchEvent:n.isTouchEvent,isMouseEvent:n.isMouseEvent,dblClickSpeed:E??200})),n.initDefaultCamera(x,S,s.clipSpaceNearZ),n.initRenderer(s,!0),n}return me(e,r),K(e,[{key:"initRenderingContext",value:function(n){this.context.config=n,this.context.renderingContext={root:this.document.documentElement,unculledEntities:[],renderListCurrentFrame:[],renderReasons:new Set,force:!1,dirty:!1}}},{key:"initDefaultCamera",value:function(n,i,a){var s=this,o=new z.CameraContribution;o.clipSpaceNearZ=a,o.setType(ze.EXPLORING,l1.DEFAULT).setPosition(n/2,i/2,lE).setFocalPoint(n/2,i/2,0).setOrthographic(n/-2,n/2,i/2,i/-2,PH,RH),o.canvas=this,o.eventEmitter.on(UI.UPDATED,function(){s.context.renderingContext.renderReasons.add(Co.CAMERA_CHANGED),z.enableSizeAttenuation&&s.getConfig().renderer.getConfig().enableSizeAttenuation&&s.updateSizeAttenuation()}),this.context.camera=o}},{key:"updateSizeAttenuation",value:function(){var n=this.getCamera().getZoom();this.document.documentElement.forEach(function(i){z.styleValueRegistry.updateSizeAttenuation(i,n)})}},{key:"getConfig",value:function(){return this.context.config}},{key:"getRoot",value:function(){return this.document.documentElement}},{key:"getCamera",value:function(){return this.context.camera}},{key:"getContextService",value:function(){return this.context.contextService}},{key:"getEventService",value:function(){return this.context.eventService}},{key:"getRenderingService",value:function(){return this.context.renderingService}},{key:"getRenderingContext",value:function(){return this.context.renderingContext}},{key:"getStats",value:function(){return this.getRenderingService().getStats()}},{key:"ready",get:function(){var n=this;return this.readyPromise||(this.readyPromise=new Promise(function(i){n.resolveReadyPromise=function(){i(n)}}),this.inited&&this.resolveReadyPromise()),this.readyPromise}},{key:"destroy",value:function(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,a=arguments.length>1?arguments[1]:void 0;It.clearCache();var s=((n=this.getConfig().future)===null||n===void 0?void 0:n.experimentalCancelEventPropagation)===!0;a||this.dispatchEvent(new Qt(rr.BEFORE_DESTROY),s,s),this.frameId&&this.cancelAnimationFrame(this.frameId);var o=this.getRoot();i&&(this.unmountChildren(o),this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),a||this.dispatchEvent(new Qt(rr.AFTER_DESTROY),s,s);var A=function(c){c.currentTarget=null,c.manager=null,c.target=null,c.relatedNode=null};A(sc),A(oc),A(eg),A(cE),A(tg),A(oi),A(m1),A(w1),A(h_),z.textService.clearCache()}},{key:"changeSize",value:function(n,i){this.resize(n,i)}},{key:"resize",value:function(n,i){var a,s=this.context.config;s.width=n,s.height=i,this.getContextService().resize(n,i);var o=this.context.camera,A=o.getProjectionMode();o.setPosition(n/2,i/2,lE).setFocalPoint(n/2,i/2,0),A===gr.ORTHOGRAPHIC?o.setOrthographic(n/-2,n/2,i/2,i/-2,o.getNear(),o.getFar()):o.setAspect(n/i);var l=((a=s.future)===null||a===void 0?void 0:a.experimentalCancelEventPropagation)===!0;this.dispatchEvent(new Qt(rr.RESIZE,{width:n,height:i}),l,l)}},{key:"appendChild",value:function(n,i){return this.document.documentElement.appendChild(n,i)}},{key:"insertBefore",value:function(n,i){return this.document.documentElement.insertBefore(n,i)}},{key:"removeChild",value:function(n){return this.document.documentElement.removeChild(n)}},{key:"removeChildren",value:function(){this.document.documentElement.removeChildren()}},{key:"destroyChildren",value:function(){this.document.documentElement.destroyChildren()}},{key:"render",value:function(n){var i,a=this;n&&(eg.detail=n,tg.detail=n);var s=((i=this.getConfig().future)===null||i===void 0?void 0:i.experimentalCancelEventPropagation)===!0;this.dispatchEvent(eg,s,s);var o=this.getRenderingService();o.render(this,n,function(){a.dispatchEvent(cE,s,s)}),this.dispatchEvent(tg,s,s)}},{key:"run",value:function(){var n=this,i=function(s,o){n.render(o),n.frameId=n.requestAnimationFrame(i)};i()}},{key:"initRenderer",value:function(n){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!n)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new g_,new v_,new f_([new UH])),this.loadRendererContainerModule(n),this.context.contextService=new this.context.ContextService(ue(ue({},z),this.context)),this.context.renderingService=new q4(z,this.context),this.context.eventService=new W4(z,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(n,a,!0)):this.context.contextService.initAsync().then(function(){i.initRenderingService(n,a)}).catch(function(s){console.error(s)})}},{key:"initRenderingService",value:function(n){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.context.renderingService.init(function(){var o;i.inited=!0;var A=((o=i.getConfig().future)===null||o===void 0?void 0:o.experimentalCancelEventPropagation)===!0;a?s?i.requestAnimationFrame(function(){i.dispatchEvent(new Qt(rr.READY),A,A)}):i.dispatchEvent(new Qt(rr.READY),A,A):i.dispatchEvent(new Qt(rr.RENDERER_CHANGED),A,A),i.readyPromise&&i.resolveReadyPromise(),a||i.getRoot().forEach(function(l){var c,u;(c=(u=l).dirty)===null||c===void 0||c.call(u,!0,!0)}),i.mountChildren(i.getRoot()),n.getConfig().enableAutoRendering&&i.run()})}},{key:"loadRendererContainerModule",value:function(n){var i=this,a=n.getPlugins();a.forEach(function(s){s.context=i.context,s.init(z)})}},{key:"setRenderer",value:function(n){var i=this.getConfig();if(i.renderer!==n){var a=i.renderer;i.renderer=n,this.destroy(!1,!0),Fe((a==null?void 0:a.getPlugins())||[]).reverse().forEach(function(s){s.destroy(z)}),this.initRenderer(n)}}},{key:"setCursor",value:function(n){var i=this.getConfig();i.cursor=n,this.getContextService().applyCursorStyle(n)}},{key:"unmountChildren",value:function(n){var i=this;if(n.childNodes.forEach(function(o){i.unmountChildren(o)}),this.inited){if(n.isMutationObserved)n.dispatchEvent(oc);else{var a,s=((a=this.getConfig().future)===null||a===void 0?void 0:a.experimentalCancelEventPropagation)===!0;oc.target=n,this.dispatchEvent(oc,!0,s)}n!==this.document.documentElement&&(n.ownerDocument=null),n.isConnected=!1}n.isCustomElement&&n.disconnectedCallback&&n.disconnectedCallback()}},{key:"mountChildren",value:function(n){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rh(n);if(this.inited){if(!n.isConnected&&(n.ownerDocument=this.document,n.isConnected=!0,!a))if(n.isMutationObserved)n.dispatchEvent(sc);else{var s,o=((s=this.getConfig().future)===null||s===void 0?void 0:s.experimentalCancelEventPropagation)===!0;sc.target=n,this.dispatchEvent(sc,!0,o)}}else console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",n.nodeName);n.childNodes.forEach(function(A){i.mountChildren(A,a)}),n.isCustomElement&&n.connectedCallback&&n.connectedCallback()}},{key:"mountFragment",value:function(n){this.mountChildren(n,!1)}},{key:"client2Viewport",value:function(n){return this.getEventService().client2Viewport(n)}},{key:"viewport2Client",value:function(n){return this.getEventService().viewport2Client(n)}},{key:"viewport2Canvas",value:function(n){return this.getEventService().viewport2Canvas(n)}},{key:"canvas2Viewport",value:function(n){return this.getEventService().canvas2Viewport(n)}},{key:"getPointByClient",value:function(n,i){return this.client2Viewport({x:n,y:i})}},{key:"getClientByPoint",value:function(n,i){return this.viewport2Client({x:n,y:i})}}])}(u_),DH=function(){function r(){G(this,r),this.cacheStore=new Map}return K(r,[{key:"onRefAdded",value:function(t){}},{key:"has",value:function(t){return this.cacheStore.has(t)}},{key:"put",value:function(t,n,i){return this.cacheStore.has(t)?!1:(this.cacheStore.set(t,{value:n,counter:new Set([i.entity])}),this.onRefAdded(i),!0)}},{key:"get",value:function(t,n){var i=this.cacheStore.get(t);return i?(i.counter.has(n.entity)||(i.counter.add(n.entity),this.onRefAdded(n)),i.value):null}},{key:"update",value:function(t,n,i){var a=this.cacheStore.get(t);return a?(a.value=ue(ue({},a.value),n),a.counter.has(i.entity)||(a.counter.add(i.entity),this.onRefAdded(i)),!0):!1}},{key:"release",value:function(t,n){var i=this.cacheStore.get(t);return i?(i.counter.delete(n.entity),i.counter.size<=0&&this.cacheStore.delete(t),!0):!1}},{key:"releaseRef",value:function(t){var n=this;Array.from(this.cacheStore.keys()).forEach(function(i){n.release(i,t)})}},{key:"getSize",value:function(){return this.cacheStore.size}},{key:"clear",value:function(){this.cacheStore.clear()}}])}(),ng=[],rg=[],b1=function(){function r(){G(this,r)}return K(r,null,[{key:"stop",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r.api;r.rafId&&(t.cancelAnimationFrame(r.rafId),r.rafId=null)}},{key:"executeTask",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r.api;ng.length<=0&&rg.length<=0||(rg.forEach(function(n){return n()}),rg=ng.splice(0,r.TASK_NUM_PER_FRAME),r.rafId=t.requestAnimationFrame(function(){r.executeTask(t)}))}},{key:"sliceImage",value:function(t,n,i,a){for(var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:r.api,A=t.naturalWidth||t.width,l=t.naturalHeight||t.height,c=n-s,u=i-s,h=Math.ceil(A/c),d=Math.ceil(l/u),f={tileSize:[n,i],gridSize:[d,h],tiles:Array(d).fill(null).map(function(){return Array(h).fill(null)})},g=function(y){for(var m=function(b){ng.push(function(){var E=b*c,x=y*u,S=[Math.min(n,A-E),Math.min(i,l-x)],C=S[0],F=S[1],M=o.createCanvas();M.width=n,M.height=i;var T=M.getContext("2d");T.drawImage(t,E,x,C,F,0,0,C,F),f.tiles[y][b]={x:E,y:x,tileX:b,tileY:y,data:M},a()})},w=0;w<h;w++)m(w)},v=0;v<d;v++)g(v);return r.stop(),r.executeTask(),f}}])}();b1.TASK_NUM_PER_FRAME=10;var Xn=new DH;Xn.onRefAdded=function(e){var t=this;e.addEventListener(Me.DESTROY,function(){t.releaseRef(e)},{once:!0})};var Gw=function(){function r(e,t){G(this,r),this.gradientCache={},this.patternCache={},this.context=e,this.runtime=t}return K(r,[{key:"getImageSync",value:function(t,n,i){var a=_e(t)?t:t.src;if(Xn.has(a)){var s=Xn.get(a,n);if(s.img.complete)return i==null||i(s),s}return this.getOrCreateImage(t,n).then(function(o){i==null||i(o)}).catch(function(o){console.error(o)}),null}},{key:"getOrCreateImage",value:function(t,n){var i=this,a=_e(t)?t:t.src;if(!_e(t)&&!Xn.has(a)){var s={img:t,size:[t.naturalWidth||t.width,t.naturalHeight||t.height],tileSize:Ac(t)};Xn.put(a,s,n)}if(Xn.has(a)){var o=Xn.get(a,n);return o.img.complete?Promise.resolve(o):new Promise(function(A,l){o.img.addEventListener("load",function(){o.size=[o.img.naturalWidth||o.img.width,o.img.naturalHeight||o.img.height],o.tileSize=Ac(o.img),A(o)}),o.img.addEventListener("error",function(c){l(c)})})}return new Promise(function(A,l){var c=i.context.config.createImage();if(c){var u={img:c,size:[0,0],tileSize:Ac(c)};Xn.put(a,u,n),c.onload=function(){u.size=[c.naturalWidth||c.width,c.naturalHeight||c.height],u.tileSize=Ac(u.img),A(u)},c.onerror=function(h){l(h)},c.crossOrigin="Anonymous",c.src=a}})}},{key:"createDownSampledImage",value:function(){var e=ka(Xt().mark(function n(i,a){var s,o,A,l,c,u,h,d,f,g,v,p,y,m;return Xt().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=1,this.getOrCreateImage(i,a);case 1:if(s=w.sent,!(typeof s.downSamplingRate<"u")){w.next=2;break}return w.abrupt("return",s);case 2:if(o=this.context.config.enableLargeImageOptimization,A=typeof o=="boolean"?{}:o,l=A.maxDownSampledImageSize,c=l===void 0?2048:l,u=A.downSamplingRateThreshold,h=u===void 0?.5:u,d=this.runtime.globalThis.createImageBitmap,f=pe(s.size,2),g=f[0],v=f[1],p=s.img,y=Math.min((c+c)/(g+v),Math.max(.01,Math.min(h,.5))),m=ue(ue({},s),{},{downSamplingRate:y}),Xn.update(s.img.src,m,a),!d){w.next=7;break}return w.prev=3,w.next=4,d(s.img,{resizeWidth:g*y,resizeHeight:v*y});case 4:p=w.sent,w.next=6;break;case 5:w.prev=5,w.catch(3),y=1;case 6:w.next=8;break;case 7:y=1;case 8:return m=ue(ue({},this.getImageSync(i,a)),{},{downSampled:p,downSamplingRate:y}),Xn.update(s.img.src,m,a),w.abrupt("return",m);case 9:case"end":return w.stop()}},n,this,[[3,5]])}));function t(n,i){return e.apply(this,arguments)}return t}()},{key:"createImageTiles",value:function(){var e=ka(Xt().mark(function n(i,a,s,o){var A,l,c,u,h;return Xt().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=1,this.getOrCreateImage(i,o);case 1:return A=d.sent,l=o.ownerDocument.defaultView,c=l.requestAnimationFrame,u=l.cancelAnimationFrame,b1.api={requestAnimationFrame:c,cancelAnimationFrame:u,createCanvas:function(){return Hw.createCanvas()}},h=ue(ue({},A),b1.sliceImage(A.img,A.tileSize[0],A.tileSize[0],s)),Xn.update(A.img.src,h,o),d.abrupt("return",h);case 2:case"end":return d.stop()}},n,this)}));function t(n,i,a,s){return e.apply(this,arguments)}return t}()},{key:"releaseImage",value:function(t,n){Xn.release(_e(t)?t:t.src,n)}},{key:"releaseImageRef",value:function(t){Xn.releaseRef(t)}},{key:"getOrCreatePatternSync",value:function(t,n,i,a,s,o,A){var l=this.generatePatternKey(n);if(l&&this.patternCache[l])return this.patternCache[l];var c=n.image,u=n.repetition,h=n.transform,d,f=!1;if(_e(c)){var g=this.getImageSync(c,t,A);d=g==null?void 0:g.img}else a?(d=a,f=!0):d=c;var v=d&&i.createPattern(d,u);if(v){var p;h?p=l_(e_(h),new et({})):p=Ia(Ye()),f&&tI(p,p,[1/s,1/s,1]),v.setTransform({a:p[0],b:p[1],c:p[4],d:p[5],e:p[12]+o[0],f:p[13]+o[1]})}return l&&v&&(this.patternCache[l]=v),v}},{key:"getOrCreateGradient",value:function(t,n){var i=this.generateGradientKey(t),a=t.type,s=t.steps,o=t.min,A=t.width,l=t.height,c=t.angle,u=t.cx,h=t.cy,d=t.size;if(this.gradientCache[i])return this.gradientCache[i];var f=null;if(a===fa.LinearGradient){var g=r3(o,A,l,c),v=g.x1,p=g.y1,y=g.x2,m=g.y2;f=n.createLinearGradient(v,p,y,m)}else if(a===fa.RadialGradient){var w=i3(o,A,l,u,h,d),B=w.x,b=w.y,E=w.r;f=n.createRadialGradient(B,b,0,B,b,E)}return f&&(s.forEach(function(x){var S=x.offset,C=x.color;if(S.unit===q.kPercentage){var F;(F=f)===null||F===void 0||F.addColorStop(S.value/100,C.toString())}}),this.gradientCache[i]=f),this.gradientCache[i]}},{key:"generateGradientKey",value:function(t){var n=t.type,i=t.min,a=t.width,s=t.height,o=t.steps,A=t.angle,l=t.cx,c=t.cy,u=t.size;return"gradient-".concat(n,"-").concat((A==null?void 0:A.toString())||0,"-").concat((l==null?void 0:l.toString())||0,"-").concat((c==null?void 0:c.toString())||0,"-").concat((u==null?void 0:u.toString())||0,"-").concat(i[0],"-").concat(i[1],"-").concat(a,"-").concat(s,"-").concat(o.map(function(h){var d=h.offset,f=h.color;return"".concat(d).concat(f)}).join("-"))}},{key:"generatePatternKey",value:function(t){var n=t.image,i=t.repetition;if(_e(n))return"pattern-".concat(n,"-").concat(i);if(n.nodeName==="rect")return"pattern-".concat(n.entity,"-").concat(i)}}])}();Gw.isSupportTile=!!Hw.createCanvas();function Ac(r){if(!r.complete)return[0,0];var e=r.naturalWidth||r.width,t=r.naturalHeight||r.height,n=256;return[256,512].forEach(function(i){var a=Math.ceil(t/i),s=Math.ceil(e/i);a*s<1e3&&(n=i)}),[n,n]}var p_=function(){function r(){G(this,r)}return K(r,[{key:"apply",value:function(t){var n=t.renderingService,i=t.renderingContext,a=t.imagePool,s=i.root.ownerDocument.defaultView,o=function(u,h,d){var f=u.parsedStyle,g=f.width,v=f.height;g&&!v?u.setAttribute("height",d/h*g):!g&&v&&u.setAttribute("width",h/d*v)},A=function(u){var h=u.target,d=h.nodeName,f=h.attributes;if(d===P.IMAGE){var g=f.src,v=f.keepAspectRatio;a.getImageSync(g,h,function(p){var y=p.img,m=y.width,w=y.height;v&&o(h,m,w),h.dirty(),n.dirty()})}},l=function(u){var h=u.target,d=u.attrName,f=u.prevValue,g=u.newValue;h.nodeName!==P.IMAGE||d!=="src"||(f!==g&&a.releaseImage(f,h),_e(g)&&a.getOrCreateImage(g,h).then(function(v){var p=v.img,y=p.width,m=p.height;h.attributes.keepAspectRatio&&o(h,y,m),h.dirty(),n.dirty()}).catch(function(){}))};n.hooks.init.tap(r.tag,function(){s.addEventListener(Me.MOUNTED,A),s.addEventListener(Me.ATTR_MODIFIED,l)}),n.hooks.destroy.tap(r.tag,function(){s.removeEventListener(Me.MOUNTED,A),s.removeEventListener(Me.ATTR_MODIFIED,l)})}}])}();p_.tag="LoadImage";var HH=function(r){function e(){var t;G(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=ye(this,e,[].concat(i)),t.name="image-loader",t}return me(e,r),K(e,[{key:"init",value:function(n){this.context.imagePool=new Gw(this.context,n),this.addRenderingPlugin(new p_)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(Pa),GH=Object.freeze({__proto__:null,ImagePool:Gw,Plugin:HH}),KH="g-canvas-camera",y_=function(){function r(){G(this,r),this.displayObjectHTMLElementMap=new WeakMap}return K(r,[{key:"joinTransformMatrix",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];return"matrix(".concat([t[0],t[1],t[4],t[5],t[12]+n[0],t[13]+n[1]].join(","),")")}},{key:"apply",value:function(t,n){var i=this,a=t.camera,s=t.renderingContext,o=t.renderingService;this.context=t;var A=s.root.ownerDocument.defaultView,l=A.context.eventService.nativeHTMLMap,c=function(p,y){y.style.transform=i.joinTransformMatrix(p.getWorldTransform(),p.getOrigin())},u=function(p){var y=p.target;if(y.nodeName===P.HTML){i.$camera||(i.$camera=i.createCamera(a));var m=i.getOrCreateEl(y);i.$camera.appendChild(m),Object.keys(y.attributes).forEach(function(w){i.updateAttribute(w,y)}),c(y,m),l.set(m,y)}},h=function(p){var y=p.target;if(y.nodeName===P.HTML&&i.$camera){var m=i.getOrCreateEl(y);m&&(m.remove(),l.delete(m))}},d=function(p){var y=p.target;if(y.nodeName===P.HTML){var m=p.attrName;i.updateAttribute(m,y)}},f=function(p){for(var y=p.detail,m=0;m<y.length;m++){var w=y[m],B=w.target,b=B.nodeName===P.FRAGMENT?B.childNodes:[B];b.forEach(function(E){if(E.nodeName===P.HTML){var x=i.getOrCreateEl(E);c(E,x)}})}},g=function(){if(i.$camera){var p=i.context.config,y=p.width,m=p.height;i.$camera.parentElement.style.width="".concat(y||0,"px"),i.$camera.parentElement.style.height="".concat(m||0,"px")}};o.hooks.init.tap(r.tag,function(){A.addEventListener(rr.RESIZE,g),A.addEventListener(Me.MOUNTED,u),A.addEventListener(Me.UNMOUNTED,h),A.addEventListener(Me.ATTR_MODIFIED,d),A.addEventListener(Me.BOUNDS_CHANGED,f)}),o.hooks.endFrame.tap(r.tag,function(){i.$camera&&s.renderReasons.has(Co.CAMERA_CHANGED)&&(i.$camera.style.transform=i.joinTransformMatrix(a.getOrthoMatrix()))}),o.hooks.destroy.tap(r.tag,function(){i.$camera&&i.$camera.remove(),A.removeEventListener(rr.RESIZE,g),A.removeEventListener(Me.MOUNTED,u),A.removeEventListener(Me.UNMOUNTED,h),A.removeEventListener(Me.ATTR_MODIFIED,d),A.removeEventListener(Me.BOUNDS_CHANGED,f)})}},{key:"createCamera",value:function(t){var n=this.context.config,i=n.document,a=n.width,s=n.height,o=this.context.contextService.getDomElement(),A=o.parentNode;if(A){var l=KH,c=A.querySelector("#".concat(l));if(!c){var u=(i||document).createElement("div");u.style.overflow="hidden",u.style.pointerEvents="none",u.style.position="absolute",u.style.left="0px",u.style.top="0px",u.style.width="".concat(a||0,"px"),u.style.height="".concat(s||0,"px");var h=(i||document).createElement("div");c=h,h.id=l,h.style.position="absolute",h.style.left="".concat(o.offsetLeft||0,"px"),h.style.top="".concat(o.offsetTop||0,"px"),h.style.transformOrigin="left top",h.style.transform=this.joinTransformMatrix(t.getOrthoMatrix()),h.style.pointerEvents="none",h.style.width="100%",h.style.height="100%",u.appendChild(h),A.appendChild(u)}return c}return null}},{key:"getOrCreateEl",value:function(t){var n=this.context.config.document,i=this.displayObjectHTMLElementMap.get(t);return i||(i=(n||document).createElement("div"),t.parsedStyle.$el=i,this.displayObjectHTMLElementMap.set(t,i),t.id&&(i.id=t.id),t.name&&i.setAttribute("name",t.name),t.className&&(i.className=t.className),i.style.position="absolute",i.style["will-change"]="transform",i.style.transform=this.joinTransformMatrix(t.getWorldTransform(),t.getOrigin())),i}},{key:"updateAttribute",value:function(t,n){var i=this.getOrCreateEl(n);switch(t){case"innerHTML":var a=n.parsedStyle.innerHTML;_e(a)?i.innerHTML=a:(i.innerHTML="",i.appendChild(a));break;case"x":i.style.left="".concat(n.parsedStyle.x,"px");break;case"y":i.style.top="".concat(n.parsedStyle.y,"px");break;case"transformOrigin":var s=n.parsedStyle.transformOrigin;i.style["transform-origin"]="".concat(s[0].buildCSSText(null,null,"")," ").concat(s[1].buildCSSText(null,null,""));break;case"width":var o=n.parsedStyle.width;i.style.width=Z(o)?"".concat(o,"px"):o.toString();break;case"height":var A=n.parsedStyle.height;i.style.height=Z(A)?"".concat(A,"px"):A.toString();break;case"zIndex":var l=n.parsedStyle.zIndex;i.style["z-index"]="".concat(l);break;case"visibility":var c=n.parsedStyle.visibility;i.style.visibility=c;break;case"pointerEvents":var u=n.parsedStyle.pointerEvents,h=u===void 0?"auto":u;i.style.pointerEvents=h;break;case"opacity":var d=n.parsedStyle.opacity;i.style.opacity="".concat(d);break;case"fill":var f=n.parsedStyle.fill,g="";th(f)?f.isNone?g="transparent":g=n.getAttribute("fill"):Array.isArray(f)?g=n.getAttribute("fill"):Cs(f),i.style.background=g;break;case"stroke":var v=n.parsedStyle.stroke,p="";th(v)?v.isNone?p="transparent":p=n.getAttribute("stroke"):Array.isArray(v)?p=n.getAttribute("stroke"):Cs(v),i.style["border-color"]=p,i.style["border-style"]="solid";break;case"lineWidth":var y=n.parsedStyle.lineWidth;i.style["border-width"]="".concat(y||0,"px");break;case"lineDash":i.style["border-style"]="dashed";break;case"filter":var m=n.style.filter;i.style.filter=m;break;default:!le(n.style[t])&&n.style[t]!==""&&(i.style[t]=n.style[t])}}}])}();y_.tag="HTMLRendering";var zH=function(r){function e(){var t;G(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=ye(this,e,[].concat(i)),t.name="html-renderer",t}return me(e,r),K(e,[{key:"init",value:function(){this.addRenderingPlugin(new y_)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(Pa),VH=Object.freeze({__proto__:null,Plugin:zH}),m_=function(){function r(){G(this,r)}return K(r,[{key:"apply",value:function(t,n){var i=this,a=t.renderingService,s=t.renderingContext,o=t.config;this.context=t;var A=s.root.ownerDocument.defaultView,l=function(x){a.hooks.pointerMove.call(x)},c=function(x){a.hooks.pointerUp.call(x)},u=function(x){a.hooks.pointerDown.call(x)},h=function(x){a.hooks.pointerOver.call(x)},d=function(x){a.hooks.pointerOut.call(x)},f=function(x){a.hooks.pointerCancel.call(x)},g=function(x){a.hooks.pointerWheel.call(x)},v=function(x){a.hooks.click.call(x)},p=function(x){n.globalThis.document.addEventListener("pointermove",l,!0),x.addEventListener("pointerdown",u,!0),x.addEventListener("pointerleave",d,!0),x.addEventListener("pointerover",h,!0),n.globalThis.addEventListener("pointerup",c,!0),n.globalThis.addEventListener("pointercancel",f,!0)},y=function(x){x.addEventListener("touchstart",u,!0),x.addEventListener("touchend",c,!0),x.addEventListener("touchmove",l,!0),x.addEventListener("touchcancel",f,!0)},m=function(x){n.globalThis.document.addEventListener("mousemove",l,!0),x.addEventListener("mousedown",u,!0),x.addEventListener("mouseout",d,!0),x.addEventListener("mouseover",h,!0),n.globalThis.addEventListener("mouseup",c,!0)},w=function(x){n.globalThis.document.removeEventListener("pointermove",l,!0),x.removeEventListener("pointerdown",u,!0),x.removeEventListener("pointerleave",d,!0),x.removeEventListener("pointerover",h,!0),n.globalThis.removeEventListener("pointerup",c,!0),n.globalThis.removeEventListener("pointercancel",f,!0)},B=function(x){x.removeEventListener("touchstart",u,!0),x.removeEventListener("touchend",c,!0),x.removeEventListener("touchmove",l,!0),x.removeEventListener("touchcancel",f,!0)},b=function(x){n.globalThis.document.removeEventListener("mousemove",l,!0),x.removeEventListener("mousedown",u,!0),x.removeEventListener("mouseout",d,!0),x.removeEventListener("mouseover",h,!0),n.globalThis.removeEventListener("mouseup",c,!0)};a.hooks.init.tap(r.tag,function(){var E=i.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(E.style.msContentZooming="none",E.style.msTouchAction="none"):A.supportsPointerEvents&&(E.style.touchAction="none"),A.supportsPointerEvents?p(E):m(E),A.supportsTouchEvents&&y(E),o.useNativeClickEvent&&E.addEventListener("click",v,!0),E.addEventListener("wheel",g,{passive:!0,capture:!0})}),a.hooks.destroy.tap(r.tag,function(){var E=i.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(E.style.msContentZooming="",E.style.msTouchAction=""):A.supportsPointerEvents&&(E.style.touchAction=""),A.supportsPointerEvents?w(E):b(E),A.supportsTouchEvents&&B(E),o.useNativeClickEvent&&E.removeEventListener("click",v,!0),E.removeEventListener("wheel",g,!0)})}}])}();m_.tag="DOMInteraction";var jH=function(r){function e(){var t;G(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=ye(this,e,[].concat(i)),t.name="dom-interaction",t}return me(e,r),K(e,[{key:"init",value:function(){this.addRenderingPlugin(new m_)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(Pa),$H=Object.freeze({__proto__:null,Plugin:jH}),WH=function(){function r(){G(this,r)}return K(r,[{key:"apply",value:function(t){var n=t.renderingService,i=t.contextService,a=t.config,s=i.getDomElement(),o=function(g){n.hooks.pointerDown.call(g)},A=function(g){n.hooks.pointerUp.call(g)},l=function(g){n.hooks.pointerMove.call(g)},c=function(g){n.hooks.pointerOver.call(g)},u=function(g){n.hooks.pointerOut.call(g)},h=function(g){n.hooks.click.call(g)},d=function(g){n.hooks.pointerCancel.call(g)};n.hooks.init.tap(r.tag,function(){s.addEventListener("touchstart",o,!0),s.addEventListener("touchend",A,!0),s.addEventListener("touchmove",l,!0),s.addEventListener("touchcancel",d,!0),s.addEventListener("mouseout",u,!0),s.addEventListener("mouseover",c,!0),a.useNativeClickEvent&&s.addEventListener("click",h,!0)}),n.hooks.destroy.tap(r.tag,function(){s.removeEventListener("touchstart",o,!0),s.removeEventListener("touchend",A,!0),s.removeEventListener("touchmove",l,!0),s.removeEventListener("touchcancel",d,!0),s.removeEventListener("mouseout",u,!0),s.removeEventListener("mouseover",c,!0),a.useNativeClickEvent&&s.removeEventListener("click",h,!0)})}}])}();WH.tag="MobileInteraction";/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var E1=function(r,e){return E1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},E1(r,e)};function $r(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");E1(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function vr(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,[])).next())})}function Zn(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(l){return function(c){return A([l,c])}}function A(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){t.label=l[1];break}if(l[0]===6&&t.label<a[1]){t.label=a[1],a=l;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(l);break}a[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(c){l=[6,c],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var Fs=function(){function r(e,t,n,i){this.left=e,this.top=t,this.width=n,this.height=i}return r.prototype.add=function(e,t,n,i){return new r(this.left+e,this.top+t,this.width+n,this.height+i)},r.fromClientRect=function(e,t){return new r(t.left+e.windowBounds.left,t.top+e.windowBounds.top,t.width,t.height)},r.fromDOMRectList=function(e,t){var n=Array.from(t).find(function(i){return i.width!==0});return n?new r(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):r.EMPTY},r.EMPTY=new r(0,0,0,0),r}(),Kw=function(r,e){return Fs.fromClientRect(r,e.getBoundingClientRect())},Kh=function(r){for(var e=[],t=0,n=r.length;t<n;){var i=r.charCodeAt(t++);if(i>=55296&&i<=56319&&t<n){var a=r.charCodeAt(t++);(a&64512)===56320?e.push(((i&1023)<<10)+(a&1023)+65536):(e.push(i),t--)}else e.push(i)}return e},Mt=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var t=r.length;if(!t)return"";for(var n=[],i=-1,a="";++i<t;){var s=r[i];s<=65535?n.push(s):(s-=65536,n.push((s>>10)+55296,s%1024+56320)),(i+1===t||n.length>16384)&&(a+=String.fromCharCode.apply(String,n),n.length=0)}return a},uE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qH=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var lc=0;lc<uE.length;lc++)qH[uE.charCodeAt(lc)]=lc;var hE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",yA=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var cc=0;cc<hE.length;cc++)yA[hE.charCodeAt(cc)]=cc;var YH=function(r){var e=r.length*.75,t=r.length,n,i=0,a,s,o,A;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);var l=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(l)?l:new Uint8Array(l);for(n=0;n<t;n+=4)a=yA[r.charCodeAt(n)],s=yA[r.charCodeAt(n+1)],o=yA[r.charCodeAt(n+2)],A=yA[r.charCodeAt(n+3)],c[i++]=a<<2|s>>4,c[i++]=(s&15)<<4|o>>2,c[i++]=(o&3)<<6|A&63;return l},XH=function(r){for(var e=r.length,t=[],n=0;n<e;n+=2)t.push(r[n+1]<<8|r[n]);return t},ZH=function(r){for(var e=r.length,t=[],n=0;n<e;n+=4)t.push(r[n+3]<<24|r[n+2]<<16|r[n+1]<<8|r[n]);return t},gs=5,zw=11,ig=2,JH=zw-gs,w_=65536>>gs,e6=1<<gs,ag=e6-1,t6=1024>>gs,n6=w_+t6,r6=n6,i6=32,a6=r6+i6,s6=65536>>zw,o6=1<<JH,A6=o6-1,dE=function(r,e,t){return r.slice?r.slice(e,t):new Uint16Array(Array.prototype.slice.call(r,e,t))},l6=function(r,e,t){return r.slice?r.slice(e,t):new Uint32Array(Array.prototype.slice.call(r,e,t))},c6=function(r,e){var t=YH(r),n=Array.isArray(t)?ZH(t):new Uint32Array(t),i=Array.isArray(t)?XH(t):new Uint16Array(t),a=24,s=dE(i,a/2,n[4]/2),o=n[5]===2?dE(i,(a+n[4])/2):l6(n,Math.ceil((a+n[4])/4));return new u6(n[0],n[1],n[2],n[3],s,o)},u6=function(){function r(e,t,n,i,a,s){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=i,this.index=a,this.data=s}return r.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>gs],t=(t<<ig)+(e&ag),this.data[t];if(e<=65535)return t=this.index[w_+(e-55296>>gs)],t=(t<<ig)+(e&ag),this.data[t];if(e<this.highStart)return t=a6-s6+(e>>zw),t=this.index[t],t+=e>>gs&A6,t=this.index[t],t=(t<<ig)+(e&ag),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r}(),fE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h6=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var uc=0;uc<fE.length;uc++)h6[fE.charCodeAt(uc)]=uc;var d6="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",gE=50,f6=1,B_=2,b_=3,g6=4,v6=5,vE=7,E_=8,pE=9,ga=10,x1=11,yE=12,C1=13,p6=14,mA=15,S1=16,hc=17,sA=18,y6=19,mE=20,F1=21,oA=22,sg=23,Ws=24,Jn=25,wA=26,BA=27,qs=28,m6=29,is=30,w6=31,dc=32,fc=33,T1=34,M1=35,O1=36,rl=37,I1=38,Cu=39,Su=40,og=41,x_=42,B6=43,b6=[9001,65288],C_="!",Ie="",gc="",_1=c6(d6),Ti=[is,O1],k1=[f6,B_,b_,v6],S_=[ga,E_],wE=[BA,wA],E6=k1.concat(S_),BE=[I1,Cu,Su,T1,M1],x6=[mA,C1],C6=function(r,e){e===void 0&&(e="strict");var t=[],n=[],i=[];return r.forEach(function(a,s){var o=_1.get(a);if(o>gE?(i.push(!0),o-=gE):i.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(a)!==-1)return n.push(s),t.push(S1);if(o===g6||o===x1){if(s===0)return n.push(s),t.push(is);var A=t[s-1];return E6.indexOf(A)===-1?(n.push(n[s-1]),t.push(A)):(n.push(s),t.push(is))}if(n.push(s),o===w6)return t.push(e==="strict"?F1:rl);if(o===x_||o===m6)return t.push(is);if(o===B6)return a>=131072&&a<=196605||a>=196608&&a<=262141?t.push(rl):t.push(is);t.push(o)}),[n,t,i]},Ag=function(r,e,t,n){var i=n[t];if(Array.isArray(r)?r.indexOf(i)!==-1:r===i)for(var a=t;a<=n.length;){a++;var s=n[a];if(s===e)return!0;if(s!==ga)break}if(i===ga)for(var a=t;a>0;){a--;var o=n[a];if(Array.isArray(r)?r.indexOf(o)!==-1:r===o)for(var A=t;A<=n.length;){A++;var s=n[A];if(s===e)return!0;if(s!==ga)break}if(o!==ga)break}return!1},bE=function(r,e){for(var t=r;t>=0;){var n=e[t];if(n===ga)t--;else return n}return 0},S6=function(r,e,t,n,i){if(t[n]===0)return Ie;var a=n-1;if(Array.isArray(i)&&i[a]===!0)return Ie;var s=a-1,o=a+1,A=e[a],l=s>=0?e[s]:0,c=e[o];if(A===B_&&c===b_)return Ie;if(k1.indexOf(A)!==-1)return C_;if(k1.indexOf(c)!==-1||S_.indexOf(c)!==-1)return Ie;if(bE(a,e)===E_)return gc;if(_1.get(r[a])===x1||(A===dc||A===fc)&&_1.get(r[o])===x1||A===vE||c===vE||A===pE||[ga,C1,mA].indexOf(A)===-1&&c===pE||[hc,sA,y6,Ws,qs].indexOf(c)!==-1||bE(a,e)===oA||Ag(sg,oA,a,e)||Ag([hc,sA],F1,a,e)||Ag(yE,yE,a,e))return Ie;if(A===ga)return gc;if(A===sg||c===sg)return Ie;if(c===S1||A===S1)return gc;if([C1,mA,F1].indexOf(c)!==-1||A===p6||l===O1&&x6.indexOf(A)!==-1||A===qs&&c===O1||c===mE||Ti.indexOf(c)!==-1&&A===Jn||Ti.indexOf(A)!==-1&&c===Jn||A===BA&&[rl,dc,fc].indexOf(c)!==-1||[rl,dc,fc].indexOf(A)!==-1&&c===wA||Ti.indexOf(A)!==-1&&wE.indexOf(c)!==-1||wE.indexOf(A)!==-1&&Ti.indexOf(c)!==-1||[BA,wA].indexOf(A)!==-1&&(c===Jn||[oA,mA].indexOf(c)!==-1&&e[o+1]===Jn)||[oA,mA].indexOf(A)!==-1&&c===Jn||A===Jn&&[Jn,qs,Ws].indexOf(c)!==-1)return Ie;if([Jn,qs,Ws,hc,sA].indexOf(c)!==-1)for(var u=a;u>=0;){var h=e[u];if(h===Jn)return Ie;if([qs,Ws].indexOf(h)!==-1)u--;else break}if([BA,wA].indexOf(c)!==-1)for(var u=[hc,sA].indexOf(A)!==-1?s:a;u>=0;){var h=e[u];if(h===Jn)return Ie;if([qs,Ws].indexOf(h)!==-1)u--;else break}if(I1===A&&[I1,Cu,T1,M1].indexOf(c)!==-1||[Cu,T1].indexOf(A)!==-1&&[Cu,Su].indexOf(c)!==-1||[Su,M1].indexOf(A)!==-1&&c===Su||BE.indexOf(A)!==-1&&[mE,wA].indexOf(c)!==-1||BE.indexOf(c)!==-1&&A===BA||Ti.indexOf(A)!==-1&&Ti.indexOf(c)!==-1||A===Ws&&Ti.indexOf(c)!==-1||Ti.concat(Jn).indexOf(A)!==-1&&c===oA&&b6.indexOf(r[o])===-1||Ti.concat(Jn).indexOf(c)!==-1&&A===sA)return Ie;if(A===og&&c===og){for(var d=t[a],f=1;d>0&&(d--,e[d]===og);)f++;if(f%2!==0)return Ie}return A===dc&&c===fc?Ie:gc},F6=function(r,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=C6(r,e.lineBreak),n=t[0],i=t[1],a=t[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(i=i.map(function(o){return[Jn,is,x_].indexOf(o)!==-1?rl:o}));var s=e.wordBreak==="keep-all"?a.map(function(o,A){return o&&r[A]>=19968&&r[A]<=40959}):void 0;return[n,i,s]},T6=function(){function r(e,t,n,i){this.codePoints=e,this.required=t===C_,this.start=n,this.end=i}return r.prototype.slice=function(){return Mt.apply(void 0,this.codePoints.slice(this.start,this.end))},r}(),M6=function(r,e){var t=Kh(r),n=F6(t,e),i=n[0],a=n[1],s=n[2],o=t.length,A=0,l=0;return{next:function(){if(l>=o)return{done:!0,value:null};for(var c=Ie;l<o&&(c=S6(t,a,i,++l,s))===Ie;);if(c!==Ie||l===o){var u=new T6(t,c,A,l);return A=l,{value:u,done:!1}}return{done:!0,value:null}}}},O6=1,I6=2,Fl=4,EE=8,ah=10,xE=47,GA=92,_6=9,k6=32,vc=34,AA=61,L6=35,Q6=36,N6=37,pc=39,yc=40,lA=41,U6=95,Hn=45,P6=33,R6=60,D6=62,H6=64,G6=91,K6=93,z6=61,V6=123,mc=63,j6=125,CE=124,$6=126,W6=128,SE=65533,lg=42,As=43,q6=44,Y6=58,X6=59,il=46,Z6=0,J6=8,e5=11,t5=14,n5=31,r5=127,ri=-1,F_=48,T_=97,M_=101,i5=102,a5=117,s5=122,O_=65,I_=69,__=70,o5=85,A5=90,gn=function(r){return r>=F_&&r<=57},l5=function(r){return r>=55296&&r<=57343},Ys=function(r){return gn(r)||r>=O_&&r<=__||r>=T_&&r<=i5},c5=function(r){return r>=T_&&r<=s5},u5=function(r){return r>=O_&&r<=A5},h5=function(r){return c5(r)||u5(r)},d5=function(r){return r>=W6},wc=function(r){return r===ah||r===_6||r===k6},sh=function(r){return h5(r)||d5(r)||r===U6},FE=function(r){return sh(r)||gn(r)||r===Hn},f5=function(r){return r>=Z6&&r<=J6||r===e5||r>=t5&&r<=n5||r===r5},Aa=function(r,e){return r!==GA?!1:e!==ah},Bc=function(r,e,t){return r===Hn?sh(e)||Aa(e,t):sh(r)?!0:!!(r===GA&&Aa(r,e))},cg=function(r,e,t){return r===As||r===Hn?gn(e)?!0:e===il&&gn(t):gn(r===il?e:r)},g5=function(r){var e=0,t=1;(r[e]===As||r[e]===Hn)&&(r[e]===Hn&&(t=-1),e++);for(var n=[];gn(r[e]);)n.push(r[e++]);var i=n.length?parseInt(Mt.apply(void 0,n),10):0;r[e]===il&&e++;for(var a=[];gn(r[e]);)a.push(r[e++]);var s=a.length,o=s?parseInt(Mt.apply(void 0,a),10):0;(r[e]===I_||r[e]===M_)&&e++;var A=1;(r[e]===As||r[e]===Hn)&&(r[e]===Hn&&(A=-1),e++);for(var l=[];gn(r[e]);)l.push(r[e++]);var c=l.length?parseInt(Mt.apply(void 0,l),10):0;return t*(i+o*Math.pow(10,-s))*Math.pow(10,A*c)},v5={type:2},p5={type:3},y5={type:4},m5={type:13},w5={type:8},B5={type:21},b5={type:9},E5={type:10},x5={type:11},C5={type:12},S5={type:14},bc={type:23},F5={type:1},T5={type:25},M5={type:24},O5={type:26},I5={type:27},_5={type:28},k5={type:29},L5={type:31},L1={type:32},k_=function(){function r(){this._value=[]}return r.prototype.write=function(e){this._value=this._value.concat(Kh(e))},r.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==L1;)e.push(t),t=this.consumeToken();return e},r.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case vc:return this.consumeStringToken(vc);case L6:var t=this.peekCodePoint(0),n=this.peekCodePoint(1),i=this.peekCodePoint(2);if(FE(t)||Aa(n,i)){var a=Bc(t,n,i)?I6:O6,s=this.consumeName();return{type:5,value:s,flags:a}}break;case Q6:if(this.peekCodePoint(0)===AA)return this.consumeCodePoint(),m5;break;case pc:return this.consumeStringToken(pc);case yc:return v5;case lA:return p5;case lg:if(this.peekCodePoint(0)===AA)return this.consumeCodePoint(),S5;break;case As:if(cg(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case q6:return y5;case Hn:var o=e,A=this.peekCodePoint(0),l=this.peekCodePoint(1);if(cg(o,A,l))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Bc(o,A,l))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(A===Hn&&l===D6)return this.consumeCodePoint(),this.consumeCodePoint(),M5;break;case il:if(cg(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case xE:if(this.peekCodePoint(0)===lg)for(this.consumeCodePoint();;){var c=this.consumeCodePoint();if(c===lg&&(c=this.consumeCodePoint(),c===xE))return this.consumeToken();if(c===ri)return this.consumeToken()}break;case Y6:return O5;case X6:return I5;case R6:if(this.peekCodePoint(0)===P6&&this.peekCodePoint(1)===Hn&&this.peekCodePoint(2)===Hn)return this.consumeCodePoint(),this.consumeCodePoint(),T5;break;case H6:var u=this.peekCodePoint(0),h=this.peekCodePoint(1),d=this.peekCodePoint(2);if(Bc(u,h,d)){var s=this.consumeName();return{type:7,value:s}}break;case G6:return _5;case GA:if(Aa(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case K6:return k5;case z6:if(this.peekCodePoint(0)===AA)return this.consumeCodePoint(),w5;break;case V6:return x5;case j6:return C5;case a5:case o5:var f=this.peekCodePoint(0),g=this.peekCodePoint(1);return f===As&&(Ys(g)||g===mc)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case CE:if(this.peekCodePoint(0)===AA)return this.consumeCodePoint(),b5;if(this.peekCodePoint(0)===CE)return this.consumeCodePoint(),B5;break;case $6:if(this.peekCodePoint(0)===AA)return this.consumeCodePoint(),E5;break;case ri:return L1}return wc(e)?(this.consumeWhiteSpace(),L5):gn(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):sh(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Mt(e)}},r.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},r.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},r.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},r.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();Ys(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var n=!1;t===mc&&e.length<6;)e.push(t),t=this.consumeCodePoint(),n=!0;if(n){var i=parseInt(Mt.apply(void 0,e.map(function(A){return A===mc?F_:A})),16),a=parseInt(Mt.apply(void 0,e.map(function(A){return A===mc?__:A})),16);return{type:30,start:i,end:a}}var s=parseInt(Mt.apply(void 0,e),16);if(this.peekCodePoint(0)===Hn&&Ys(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var o=[];Ys(t)&&o.length<6;)o.push(t),t=this.consumeCodePoint();var a=parseInt(Mt.apply(void 0,o),16);return{type:30,start:s,end:a}}else return{type:30,start:s,end:s}},r.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===yc?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===yc?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},r.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===ri)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===pc||t===vc){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===ri||this.peekCodePoint(0)===lA)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),bc)}for(;;){var i=this.consumeCodePoint();if(i===ri||i===lA)return{type:22,value:Mt.apply(void 0,e)};if(wc(i))return this.consumeWhiteSpace(),this.peekCodePoint(0)===ri||this.peekCodePoint(0)===lA?(this.consumeCodePoint(),{type:22,value:Mt.apply(void 0,e)}):(this.consumeBadUrlRemnants(),bc);if(i===vc||i===pc||i===yc||f5(i))return this.consumeBadUrlRemnants(),bc;if(i===GA)if(Aa(i,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),bc;else e.push(i)}},r.prototype.consumeWhiteSpace=function(){for(;wc(this.peekCodePoint(0));)this.consumeCodePoint()},r.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===lA||e===ri)return;Aa(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},r.prototype.consumeStringSlice=function(e){for(var t=5e4,n="";e>0;){var i=Math.min(t,e);n+=Mt.apply(void 0,this._value.splice(0,i)),e-=i}return this._value.shift(),n},r.prototype.consumeStringToken=function(e){var t="",n=0;do{var i=this._value[n];if(i===ri||i===void 0||i===e)return t+=this.consumeStringSlice(n),{type:0,value:t};if(i===ah)return this._value.splice(0,n),F5;if(i===GA){var a=this._value[n+1];a!==ri&&a!==void 0&&(a===ah?(t+=this.consumeStringSlice(n),n=-1,this._value.shift()):Aa(i,a)&&(t+=this.consumeStringSlice(n),t+=Mt(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},r.prototype.consumeNumber=function(){var e=[],t=Fl,n=this.peekCodePoint(0);for((n===As||n===Hn)&&e.push(this.consumeCodePoint());gn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var i=this.peekCodePoint(1);if(n===il&&gn(i))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=EE;gn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),i=this.peekCodePoint(1);var a=this.peekCodePoint(2);if((n===I_||n===M_)&&((i===As||i===Hn)&&gn(a)||gn(i)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=EE;gn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[g5(e),t]},r.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],n=e[1],i=this.peekCodePoint(0),a=this.peekCodePoint(1),s=this.peekCodePoint(2);if(Bc(i,a,s)){var o=this.consumeName();return{type:15,number:t,flags:n,unit:o}}return i===N6?(this.consumeCodePoint(),{type:16,number:t,flags:n}):{type:17,number:t,flags:n}},r.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Ys(e)){for(var t=Mt(e);Ys(this.peekCodePoint(0))&&t.length<6;)t+=Mt(this.consumeCodePoint());wc(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(t,16);return n===0||l5(n)||n>1114111?SE:n}return e===ri?SE:e},r.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(FE(t))e+=Mt(t);else if(Aa(t,this.peekCodePoint(0)))e+=Mt(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),e}},r}(),L_=function(){function r(e){this._tokens=e}return r.create=function(e){var t=new k_;return t.write(e),new r(t.read())},r.parseValue=function(e){return r.create(e).parseComponentValue()},r.parseValues=function(e){return r.create(e).parseComponentValues()},r.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},r.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===32)return e;e.push(t),e.push()}},r.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},r.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||Q5(n,e))return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue()),n=this.consumeToken()}},r.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue())}},r.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?L1:e},r.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},r}(),Tl=function(r){return r.type===15},zh=function(r){return r.type===17},Et=function(r){return r.type===20},Q1=function(r,e){return Et(r)&&r.value===e},Vh=function(r){return r.type!==31&&r.type!==4},Bi=function(r){var e=[],t=[];return r.forEach(function(n){if(n.type===4){if(t.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(t),t=[];return}n.type!==31&&t.push(n)}),t.length&&e.push(t),e},Q5=function(r,e){return e===11&&r.type===12||e===28&&r.type===29?!0:e===2&&r.type===3},La=function(r){return r.type===17||r.type===15},Nt=function(r){return r.type===16||La(r)},Q_=function(r){return r.length>1?[r[0],r[1]]:[r[0]]},sn={type:17,number:0,flags:Fl},Vw={type:16,number:50,flags:Fl},va={type:16,number:100,flags:Fl},bA=function(r,e,t){var n=r[0],i=r[1];return[nt(n,e),nt(typeof i<"u"?i:n,t)]},nt=function(r,e){if(r.type===16)return r.number/100*e;if(Tl(r))switch(r.unit){case"rem":case"em":return 16*r.number;case"px":default:return r.number}return r.number},N_="deg",U_="grad",P_="rad",R_="turn",jh={name:"angle",parse:function(r,e){if(e.type===15)switch(e.unit){case N_:return Math.PI*e.number/180;case U_:return Math.PI/200*e.number;case P_:return e.number;case R_:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},D_=function(r){return r.type===15&&(r.unit===N_||r.unit===U_||r.unit===P_||r.unit===R_)},H_=function(r){var e=r.filter(Et).map(function(t){return t.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[sn,sn];case"to top":case"bottom":return Er(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[sn,va];case"to right":case"left":return Er(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[va,va];case"to bottom":case"top":return Er(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[va,sn];case"to left":case"right":return Er(270)}return 0},Er=function(r){return Math.PI*r/180},Sa={name:"color",parse:function(r,e){if(e.type===18){var t=N5[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return t(r,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),i=e.value.substring(1,2),a=e.value.substring(2,3);return pa(parseInt(n+n,16),parseInt(i+i,16),parseInt(a+a,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),i=e.value.substring(1,2),a=e.value.substring(2,3),s=e.value.substring(3,4);return pa(parseInt(n+n,16),parseInt(i+i,16),parseInt(a+a,16),parseInt(s+s,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),i=e.value.substring(2,4),a=e.value.substring(4,6);return pa(parseInt(n,16),parseInt(i,16),parseInt(a,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),i=e.value.substring(2,4),a=e.value.substring(4,6),s=e.value.substring(6,8);return pa(parseInt(n,16),parseInt(i,16),parseInt(a,16),parseInt(s,16)/255)}}if(e.type===20){var o=al[e.value.toUpperCase()];if(typeof o<"u")return o}return al.TRANSPARENT}},So=function(r){return(255&r)===0},Yt=function(r){var e=255&r,t=255&r>>8,n=255&r>>16,i=255&r>>24;return e<255?"rgba("+i+","+n+","+t+","+e/255+")":"rgb("+i+","+n+","+t+")"},pa=function(r,e,t,n){return(r<<24|e<<16|t<<8|Math.round(n*255)<<0)>>>0},TE=function(r,e){if(r.type===17)return r.number;if(r.type===16){var t=e===3?1:255;return e===3?r.number/100*t:Math.round(r.number/100*t)}return 0},ME=function(r,e){var t=e.filter(Vh);if(t.length===3){var n=t.map(TE),i=n[0],a=n[1],s=n[2];return pa(i,a,s,1)}if(t.length===4){var o=t.map(TE),i=o[0],a=o[1],s=o[2],A=o[3];return pa(i,a,s,A)}return 0};function ug(r,e,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(e-r)*t*6+r:t<1/2?e:t<2/3?(e-r)*6*(2/3-t)+r:r}var OE=function(r,e){var t=e.filter(Vh),n=t[0],i=t[1],a=t[2],s=t[3],o=(n.type===17?Er(n.number):jh.parse(r,n))/(Math.PI*2),A=Nt(i)?i.number/100:0,l=Nt(a)?a.number/100:0,c=typeof s<"u"&&Nt(s)?nt(s,1):1;if(A===0)return pa(l*255,l*255,l*255,1);var u=l<=.5?l*(A+1):l+A-l*A,h=l*2-u,d=ug(h,u,o+1/3),f=ug(h,u,o),g=ug(h,u,o-1/3);return pa(d*255,f*255,g*255,c)},N5={hsl:OE,hsla:OE,rgb:ME,rgba:ME},IE=function(r,e){return Sa.parse(r,L_.create(e).parseComponentValue())},al={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},U5={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(r,e){return e.map(function(t){if(Et(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},P5={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},$h=function(r,e){var t=Sa.parse(r,e[0]),n=e[1];return n&&Nt(n)?{color:t,stop:n}:{color:t,stop:null}},_E=function(r,e){var t=r[0],n=r[r.length-1];t.stop===null&&(t.stop=sn),n.stop===null&&(n.stop=va);for(var i=[],a=0,s=0;s<r.length;s++){var o=r[s].stop;if(o!==null){var A=nt(o,e);A>a?i.push(A):i.push(a),a=A}else i.push(null)}for(var l=null,s=0;s<i.length;s++){var c=i[s];if(c===null)l===null&&(l=s);else if(l!==null){for(var u=s-l,h=i[l-1],d=(c-h)/(u+1),f=1;f<=u;f++)i[l+f-1]=d*f;l=null}}return r.map(function(g,v){var p=g.color;return{color:p,stop:Math.max(Math.min(1,i[v]/e),0)}})},R5=function(r,e,t){var n=e/2,i=t/2,a=nt(r[0],e)-n,s=i-nt(r[1],t);return(Math.atan2(s,a)+Math.PI*2)%(Math.PI*2)},D5=function(r,e,t){var n=typeof r=="number"?r:R5(r,e,t),i=Math.abs(e*Math.sin(n))+Math.abs(t*Math.cos(n)),a=e/2,s=t/2,o=i/2,A=Math.sin(n-Math.PI/2)*o,l=Math.cos(n-Math.PI/2)*o;return[i,a-l,a+l,s-A,s+A]},Qr=function(r,e){return Math.sqrt(r*r+e*e)},kE=function(r,e,t,n,i){var a=[[0,0],[0,e],[r,0],[r,e]];return a.reduce(function(s,o){var A=o[0],l=o[1],c=Qr(t-A,n-l);return(i?c<s.optimumDistance:c>s.optimumDistance)?{optimumCorner:o,optimumDistance:c}:s},{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},H5=function(r,e,t,n,i){var a=0,s=0;switch(r.size){case 0:r.shape===0?a=s=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(t),Math.abs(t-i)):r.shape===1&&(a=Math.min(Math.abs(e),Math.abs(e-n)),s=Math.min(Math.abs(t),Math.abs(t-i)));break;case 2:if(r.shape===0)a=s=Math.min(Qr(e,t),Qr(e,t-i),Qr(e-n,t),Qr(e-n,t-i));else if(r.shape===1){var o=Math.min(Math.abs(t),Math.abs(t-i))/Math.min(Math.abs(e),Math.abs(e-n)),A=kE(n,i,e,t,!0),l=A[0],c=A[1];a=Qr(l-e,(c-t)/o),s=o*a}break;case 1:r.shape===0?a=s=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(t),Math.abs(t-i)):r.shape===1&&(a=Math.max(Math.abs(e),Math.abs(e-n)),s=Math.max(Math.abs(t),Math.abs(t-i)));break;case 3:if(r.shape===0)a=s=Math.max(Qr(e,t),Qr(e,t-i),Qr(e-n,t),Qr(e-n,t-i));else if(r.shape===1){var o=Math.max(Math.abs(t),Math.abs(t-i))/Math.max(Math.abs(e),Math.abs(e-n)),u=kE(n,i,e,t,!1),l=u[0],c=u[1];a=Qr(l-e,(c-t)/o),s=o*a}break}return Array.isArray(r.size)&&(a=nt(r.size[0],n),s=r.size.length===2?nt(r.size[1],i):a),[a,s]},G5=function(r,e){var t=Er(180),n=[];return Bi(e).forEach(function(i,a){if(a===0){var s=i[0];if(s.type===20&&s.value==="to"){t=H_(i);return}else if(D_(s)){t=jh.parse(r,s);return}}var o=$h(r,i);n.push(o)}),{angle:t,stops:n,type:1}},Ec=function(r,e){var t=Er(180),n=[];return Bi(e).forEach(function(i,a){if(a===0){var s=i[0];if(s.type===20&&["top","left","right","bottom"].indexOf(s.value)!==-1){t=H_(i);return}else if(D_(s)){t=(jh.parse(r,s)+Er(270))%Er(360);return}}var o=$h(r,i);n.push(o)}),{angle:t,stops:n,type:1}},K5=function(r,e){var t=Er(180),n=[],i=1,a=0,s=3,o=[];return Bi(e).forEach(function(A,l){var c=A[0];if(l===0){if(Et(c)&&c.value==="linear"){i=1;return}else if(Et(c)&&c.value==="radial"){i=2;return}}if(c.type===18){if(c.name==="from"){var u=Sa.parse(r,c.values[0]);n.push({stop:sn,color:u})}else if(c.name==="to"){var u=Sa.parse(r,c.values[0]);n.push({stop:va,color:u})}else if(c.name==="color-stop"){var h=c.values.filter(Vh);if(h.length===2){var u=Sa.parse(r,h[1]),d=h[0];zh(d)&&n.push({stop:{type:16,number:d.number*100,flags:d.flags},color:u})}}}}),i===1?{angle:(t+Er(180))%Er(360),stops:n,type:i}:{size:s,shape:a,stops:n,position:o,type:i}},G_="closest-side",K_="farthest-side",z_="closest-corner",V_="farthest-corner",j_="circle",$_="ellipse",W_="cover",q_="contain",z5=function(r,e){var t=0,n=3,i=[],a=[];return Bi(e).forEach(function(s,o){var A=!0;if(o===0){var l=!1;A=s.reduce(function(u,h){if(l)if(Et(h))switch(h.value){case"center":return a.push(Vw),u;case"top":case"left":return a.push(sn),u;case"right":case"bottom":return a.push(va),u}else(Nt(h)||La(h))&&a.push(h);else if(Et(h))switch(h.value){case j_:return t=0,!1;case $_:return t=1,!1;case"at":return l=!0,!1;case G_:return n=0,!1;case W_:case K_:return n=1,!1;case q_:case z_:return n=2,!1;case V_:return n=3,!1}else if(La(h)||Nt(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return u},A)}if(A){var c=$h(r,s);i.push(c)}}),{size:n,shape:t,stops:i,position:a,type:2}},xc=function(r,e){var t=0,n=3,i=[],a=[];return Bi(e).forEach(function(s,o){var A=!0;if(o===0?A=s.reduce(function(c,u){if(Et(u))switch(u.value){case"center":return a.push(Vw),!1;case"top":case"left":return a.push(sn),!1;case"right":case"bottom":return a.push(va),!1}else if(Nt(u)||La(u))return a.push(u),!1;return c},A):o===1&&(A=s.reduce(function(c,u){if(Et(u))switch(u.value){case j_:return t=0,!1;case $_:return t=1,!1;case q_:case G_:return n=0,!1;case K_:return n=1,!1;case z_:return n=2,!1;case W_:case V_:return n=3,!1}else if(La(u)||Nt(u))return Array.isArray(n)||(n=[]),n.push(u),!1;return c},A)),A){var l=$h(r,s);i.push(l)}}),{size:n,shape:t,stops:i,position:a,type:2}},V5=function(r){return r.type===1},j5=function(r){return r.type===2},jw={name:"image",parse:function(r,e){if(e.type===22){var t={url:e.value,type:0};return r.cache.addImage(e.value),t}if(e.type===18){var n=Y_[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(r,e.values)}throw new Error("Unsupported image type "+e.type)}};function $5(r){return!(r.type===20&&r.value==="none")&&(r.type!==18||!!Y_[r.name])}var Y_={"linear-gradient":G5,"-moz-linear-gradient":Ec,"-ms-linear-gradient":Ec,"-o-linear-gradient":Ec,"-webkit-linear-gradient":Ec,"radial-gradient":z5,"-moz-radial-gradient":xc,"-ms-radial-gradient":xc,"-o-radial-gradient":xc,"-webkit-radial-gradient":xc,"-webkit-gradient":K5},W5={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(r,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e.filter(function(n){return Vh(n)&&$5(n)}).map(function(n){return jw.parse(r,n)})}},q5={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(r,e){return e.map(function(t){if(Et(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Y5={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(r,e){return Bi(e).map(function(t){return t.filter(Nt)}).map(Q_)}},X5={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(r,e){return Bi(e).map(function(t){return t.filter(Et).map(function(n){return n.value}).join(" ")}).map(Z5)}},Z5=function(r){switch(r){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Fo;(function(r){r.AUTO="auto",r.CONTAIN="contain",r.COVER="cover"})(Fo||(Fo={}));var J5={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(r,e){return Bi(e).map(function(t){return t.filter(eG)})}},eG=function(r){return Et(r)||Nt(r)},Wh=function(r){return{name:"border-"+r+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},tG=Wh("top"),nG=Wh("right"),rG=Wh("bottom"),iG=Wh("left"),qh=function(r){return{name:"border-radius-"+r,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return Q_(t.filter(Nt))}}},aG=qh("top-left"),sG=qh("top-right"),oG=qh("bottom-right"),AG=qh("bottom-left"),Yh=function(r){return{name:"border-"+r+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},lG=Yh("top"),cG=Yh("right"),uG=Yh("bottom"),hG=Yh("left"),Xh=function(r){return{name:"border-"+r+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Tl(t)?t.number:0}}},dG=Xh("top"),fG=Xh("right"),gG=Xh("bottom"),vG=Xh("left"),pG={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},yG={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(r,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},mG={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(r,e){return e.filter(Et).reduce(function(t,n){return t|wG(n.value)},0)}},wG=function(r){switch(r){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},BG={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},bG={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(r,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},oh;(function(r){r.NORMAL="normal",r.STRICT="strict"})(oh||(oh={}));var EG={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"strict":return oh.STRICT;case"normal":default:return oh.NORMAL}}},xG={name:"line-height",initialValue:"normal",prefix:!1,type:4},LE=function(r,e){return Et(r)&&r.value==="normal"?1.2*e:r.type===17?e*r.number:Nt(r)?nt(r,e):e},CG={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(r,e){return e.type===20&&e.value==="none"?null:jw.parse(r,e)}},SG={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(r,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},FG={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Zh=function(r){return{name:"margin-"+r,initialValue:"0",prefix:!1,type:4}},TG=Zh("top"),MG=Zh("right"),OG=Zh("bottom"),IG=Zh("left"),_G={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(r,e){return e.filter(Et).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},kG={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Jh=function(r){return{name:"padding-"+r,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},LG=Jh("top"),QG=Jh("right"),NG=Jh("bottom"),UG=Jh("left"),PG={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(r,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},RG={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(r,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},DG={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.length===1&&Q1(e[0],"none")?[]:Bi(e).map(function(t){for(var n={color:al.TRANSPARENT,offsetX:sn,offsetY:sn,blur:sn},i=0,a=0;a<t.length;a++){var s=t[a];La(s)?(i===0?n.offsetX=s:i===1?n.offsetY=s:n.blur=s,i++):n.color=Sa.parse(r,s)}return n})}},HG={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},GG={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(r,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var t=VG[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return t(e.values)}return null}},KG=function(r){var e=r.filter(function(t){return t.type===17}).map(function(t){return t.number});return e.length===6?e:null},zG=function(r){var e=r.filter(function(A){return A.type===17}).map(function(A){return A.number}),t=e[0],n=e[1];e[2],e[3];var i=e[4],a=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var s=e[12],o=e[13];return e[14],e[15],e.length===16?[t,n,i,a,s,o]:null},VG={matrix:KG,matrix3d:zG},QE={type:16,number:50,flags:Fl},jG=[QE,QE],$G={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(r,e){var t=e.filter(Nt);return t.length!==2?jG:[t[0],t[1]]}},WG={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},KA;(function(r){r.NORMAL="normal",r.BREAK_ALL="break-all",r.KEEP_ALL="keep-all"})(KA||(KA={}));var qG={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"break-all":return KA.BREAK_ALL;case"keep-all":return KA.KEEP_ALL;case"normal":default:return KA.NORMAL}}},YG={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(r,e){if(e.type===20)return{auto:!0,order:0};if(zh(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},X_={name:"time",parse:function(r,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},XG={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(r,e){return zh(e)?e.number:1}},ZG={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},JG={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(r,e){return e.filter(Et).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return t!==0})}},eK={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(r,e){var t=[],n=[];return e.forEach(function(i){switch(i.type){case 20:case 0:t.push(i.value);break;case 17:t.push(i.number.toString());break;case 4:n.push(t.join(" ")),t.length=0;break}}),t.length&&n.push(t.join(" ")),n.map(function(i){return i.indexOf(" ")===-1?i:"'"+i+"'"})}},tK={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},nK={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(r,e){if(zh(e))return e.number;if(Et(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},rK={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.filter(Et).map(function(t){return t.value})}},iK={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Kt=function(r,e){return(r&e)!==0},aK={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(r,e){return e.filter(Tl).map(function(t){return X_.parse(r,t)})}},sK={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.length===1&&Q1(e[0],"none")?[]:Bi(e).map(function(t){for(var n={color:255,offsetX:sn,offsetY:sn,blur:sn,spread:sn,inset:!1},i=0,a=0;a<t.length;a++){var s=t[a];Q1(s,"inset")?n.inset=!0:La(s)?(i===0?n.offsetX=s:i===1?n.offsetY=s:i===2?n.blur=s:n.spread=s,i++):n.color=Sa.parse(r,s)}return n})}},oK={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(r,e){var t=[0,1,2],n=[];return e.filter(Et).forEach(function(i){switch(i.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),t.forEach(function(i){n.indexOf(i)===-1&&n.push(i)}),n}},AK={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},lK={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(r,e){return Tl(e)?e.number:0}},cK=function(){function r(e,t){var n,i;this.animationDuration=Ae(e,aK,t.animationDuration),this.backgroundClip=Ae(e,U5,t.backgroundClip),this.backgroundColor=Ae(e,P5,t.backgroundColor),this.backgroundImage=Ae(e,W5,t.backgroundImage),this.backgroundOrigin=Ae(e,q5,t.backgroundOrigin),this.backgroundPosition=Ae(e,Y5,t.backgroundPosition),this.backgroundRepeat=Ae(e,X5,t.backgroundRepeat),this.backgroundSize=Ae(e,J5,t.backgroundSize),this.borderTopColor=Ae(e,tG,t.borderTopColor),this.borderRightColor=Ae(e,nG,t.borderRightColor),this.borderBottomColor=Ae(e,rG,t.borderBottomColor),this.borderLeftColor=Ae(e,iG,t.borderLeftColor),this.borderTopLeftRadius=Ae(e,aG,t.borderTopLeftRadius),this.borderTopRightRadius=Ae(e,sG,t.borderTopRightRadius),this.borderBottomRightRadius=Ae(e,oG,t.borderBottomRightRadius),this.borderBottomLeftRadius=Ae(e,AG,t.borderBottomLeftRadius),this.borderTopStyle=Ae(e,lG,t.borderTopStyle),this.borderRightStyle=Ae(e,cG,t.borderRightStyle),this.borderBottomStyle=Ae(e,uG,t.borderBottomStyle),this.borderLeftStyle=Ae(e,hG,t.borderLeftStyle),this.borderTopWidth=Ae(e,dG,t.borderTopWidth),this.borderRightWidth=Ae(e,fG,t.borderRightWidth),this.borderBottomWidth=Ae(e,gG,t.borderBottomWidth),this.borderLeftWidth=Ae(e,vG,t.borderLeftWidth),this.boxShadow=Ae(e,sK,t.boxShadow),this.color=Ae(e,pG,t.color),this.direction=Ae(e,yG,t.direction),this.display=Ae(e,mG,t.display),this.float=Ae(e,BG,t.cssFloat),this.fontFamily=Ae(e,eK,t.fontFamily),this.fontSize=Ae(e,tK,t.fontSize),this.fontStyle=Ae(e,iK,t.fontStyle),this.fontVariant=Ae(e,rK,t.fontVariant),this.fontWeight=Ae(e,nK,t.fontWeight),this.letterSpacing=Ae(e,bG,t.letterSpacing),this.lineBreak=Ae(e,EG,t.lineBreak),this.lineHeight=Ae(e,xG,t.lineHeight),this.listStyleImage=Ae(e,CG,t.listStyleImage),this.listStylePosition=Ae(e,SG,t.listStylePosition),this.listStyleType=Ae(e,FG,t.listStyleType),this.marginTop=Ae(e,TG,t.marginTop),this.marginRight=Ae(e,MG,t.marginRight),this.marginBottom=Ae(e,OG,t.marginBottom),this.marginLeft=Ae(e,IG,t.marginLeft),this.opacity=Ae(e,XG,t.opacity);var a=Ae(e,_G,t.overflow);this.overflowX=a[0],this.overflowY=a[a.length>1?1:0],this.overflowWrap=Ae(e,kG,t.overflowWrap),this.paddingTop=Ae(e,LG,t.paddingTop),this.paddingRight=Ae(e,QG,t.paddingRight),this.paddingBottom=Ae(e,NG,t.paddingBottom),this.paddingLeft=Ae(e,UG,t.paddingLeft),this.paintOrder=Ae(e,oK,t.paintOrder),this.position=Ae(e,RG,t.position),this.textAlign=Ae(e,PG,t.textAlign),this.textDecorationColor=Ae(e,ZG,(n=t.textDecorationColor)!==null&&n!==void 0?n:t.color),this.textDecorationLine=Ae(e,JG,(i=t.textDecorationLine)!==null&&i!==void 0?i:t.textDecoration),this.textShadow=Ae(e,DG,t.textShadow),this.textTransform=Ae(e,HG,t.textTransform),this.transform=Ae(e,GG,t.transform),this.transformOrigin=Ae(e,$G,t.transformOrigin),this.visibility=Ae(e,WG,t.visibility),this.webkitTextStrokeColor=Ae(e,AK,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=Ae(e,lK,t.webkitTextStrokeWidth),this.wordBreak=Ae(e,qG,t.wordBreak),this.zIndex=Ae(e,YG,t.zIndex)}return r.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},r.prototype.isTransparent=function(){return So(this.backgroundColor)},r.prototype.isTransformed=function(){return this.transform!==null},r.prototype.isPositioned=function(){return this.position!==0},r.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},r.prototype.isFloating=function(){return this.float!==0},r.prototype.isInlineLevel=function(){return Kt(this.display,4)||Kt(this.display,33554432)||Kt(this.display,268435456)||Kt(this.display,536870912)||Kt(this.display,67108864)||Kt(this.display,134217728)},r}(),Ae=function(r,e,t){var n=new k_,i=t!==null&&typeof t<"u"?t.toString():e.initialValue;n.write(i);var a=new L_(n.read());switch(e.type){case 2:var s=a.parseComponentValue();return e.parse(r,Et(s)?s.value:e.initialValue);case 0:return e.parse(r,a.parseComponentValue());case 1:return e.parse(r,a.parseComponentValues());case 4:return a.parseComponentValue();case 3:switch(e.format){case"angle":return jh.parse(r,a.parseComponentValue());case"color":return Sa.parse(r,a.parseComponentValue());case"image":return jw.parse(r,a.parseComponentValue());case"length":var o=a.parseComponentValue();return La(o)?o:sn;case"length-percentage":var A=a.parseComponentValue();return Nt(A)?A:sn;case"time":return X_.parse(r,a.parseComponentValue())}break}},uK="data-html2canvas-debug",hK=function(r){var e=r.getAttribute(uK);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},NE=function(r,e){var t=hK(r);return t===1||e===t},bi=function(){function r(e,t){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,NE(t,3))debugger;this.styles=new cK(e,window.getComputedStyle(t,null)),h8(t)&&(this.styles.animationDuration.some(function(n){return n>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=Kw(this.context,t),NE(t,4)&&(this.flags|=16)}return r}(),dK="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",UE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",EA=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Cc=0;Cc<UE.length;Cc++)EA[UE.charCodeAt(Cc)]=Cc;var fK=function(r){var e=r.length*.75,t=r.length,n,i=0,a,s,o,A;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);var l=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(l)?l:new Uint8Array(l);for(n=0;n<t;n+=4)a=EA[r.charCodeAt(n)],s=EA[r.charCodeAt(n+1)],o=EA[r.charCodeAt(n+2)],A=EA[r.charCodeAt(n+3)],c[i++]=a<<2|s>>4,c[i++]=(s&15)<<4|o>>2,c[i++]=(o&3)<<6|A&63;return l},gK=function(r){for(var e=r.length,t=[],n=0;n<e;n+=2)t.push(r[n+1]<<8|r[n]);return t},vK=function(r){for(var e=r.length,t=[],n=0;n<e;n+=4)t.push(r[n+3]<<24|r[n+2]<<16|r[n+1]<<8|r[n]);return t},vs=5,$w=11,hg=2,pK=$w-vs,Z_=65536>>vs,yK=1<<vs,dg=yK-1,mK=1024>>vs,wK=Z_+mK,BK=wK,bK=32,EK=BK+bK,xK=65536>>$w,CK=1<<pK,SK=CK-1,PE=function(r,e,t){return r.slice?r.slice(e,t):new Uint16Array(Array.prototype.slice.call(r,e,t))},FK=function(r,e,t){return r.slice?r.slice(e,t):new Uint32Array(Array.prototype.slice.call(r,e,t))},TK=function(r,e){var t=fK(r),n=Array.isArray(t)?vK(t):new Uint32Array(t),i=Array.isArray(t)?gK(t):new Uint16Array(t),a=24,s=PE(i,a/2,n[4]/2),o=n[5]===2?PE(i,(a+n[4])/2):FK(n,Math.ceil((a+n[4])/4));return new MK(n[0],n[1],n[2],n[3],s,o)},MK=function(){function r(e,t,n,i,a,s){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=i,this.index=a,this.data=s}return r.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>vs],t=(t<<hg)+(e&dg),this.data[t];if(e<=65535)return t=this.index[Z_+(e-55296>>vs)],t=(t<<hg)+(e&dg),this.data[t];if(e<this.highStart)return t=EK-xK+(e>>$w),t=this.index[t],t+=e>>vs&SK,t=this.index[t],t=(t<<hg)+(e&dg),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r}(),RE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",OK=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Sc=0;Sc<RE.length;Sc++)OK[RE.charCodeAt(Sc)]=Sc;var IK=1,fg=2,gg=3,DE=4,HE=5,_K=7,GE=8,vg=9,pg=10,KE=11,zE=12,VE=13,jE=14,yg=15,kK=function(r){for(var e=[],t=0,n=r.length;t<n;){var i=r.charCodeAt(t++);if(i>=55296&&i<=56319&&t<n){var a=r.charCodeAt(t++);(a&64512)===56320?e.push(((i&1023)<<10)+(a&1023)+65536):(e.push(i),t--)}else e.push(i)}return e},LK=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var t=r.length;if(!t)return"";for(var n=[],i=-1,a="";++i<t;){var s=r[i];s<=65535?n.push(s):(s-=65536,n.push((s>>10)+55296,s%1024+56320)),(i+1===t||n.length>16384)&&(a+=String.fromCharCode.apply(String,n),n.length=0)}return a},QK=TK(dK),yr="",mg="",NK=function(r){return QK.get(r)},UK=function(r,e,t){var n=t-2,i=e[n],a=e[t-1],s=e[t];if(a===fg&&s===gg)return yr;if(a===fg||a===gg||a===DE||s===fg||s===gg||s===DE)return mg;if(a===GE&&[GE,vg,KE,zE].indexOf(s)!==-1||(a===KE||a===vg)&&(s===vg||s===pg)||(a===zE||a===pg)&&s===pg||s===VE||s===HE||s===_K||a===IK)return yr;if(a===VE&&s===jE){for(;i===HE;)i=e[--n];if(i===jE)return yr}if(a===yg&&s===yg){for(var o=0;i===yg;)o++,i=e[--n];if(o%2===0)return yr}return mg},PK=function(r){var e=kK(r),t=e.length,n=0,i=0,a=e.map(NK);return{next:function(){if(n>=t)return{done:!0,value:null};for(var s=yr;n<t&&(s=UK(e,a,++n))===yr;);if(s!==yr||n===t){var o=LK.apply(null,e.slice(i,n));return i=n,{value:o,done:!1}}return{done:!0,value:null}}}},RK=function(r){for(var e=PK(r),t=[],n;!(n=e.next()).done;)n.value&&t.push(n.value.slice());return t},DK=function(r){var e=123;if(r.createRange){var t=r.createRange();if(t.getBoundingClientRect){var n=r.createElement("boundtest");n.style.height=e+"px",n.style.display="block",r.body.appendChild(n),t.selectNode(n);var i=t.getBoundingClientRect(),a=Math.round(i.height);if(r.body.removeChild(n),a===e)return!0}}return!1},HK=function(r){var e=r.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",r.body.appendChild(e);var t=r.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,i=Kh(n.data).map(function(A){return Mt(A)}),a=0,s={},o=i.every(function(A,l){t.setStart(n,a),t.setEnd(n,a+A.length);var c=t.getBoundingClientRect();a+=A.length;var u=c.x>s.x||c.y>s.y;return s=c,l===0?!0:u});return r.body.removeChild(e),o},GK=function(){return typeof new Image().crossOrigin<"u"},KK=function(){return typeof new XMLHttpRequest().responseType=="string"},zK=function(r){var e=new Image,t=r.createElement("canvas"),n=t.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),t.toDataURL()}catch{return!1}return!0},$E=function(r){return r[0]===0&&r[1]===255&&r[2]===0&&r[3]===255},VK=function(r){var e=r.createElement("canvas"),t=100;e.width=t,e.height=t;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,t,t);var i=new Image,a=e.toDataURL();i.src=a;var s=N1(t,t,0,0,i);return n.fillStyle="red",n.fillRect(0,0,t,t),WE(s).then(function(o){n.drawImage(o,0,0);var A=n.getImageData(0,0,t,t).data;n.fillStyle="red",n.fillRect(0,0,t,t);var l=r.createElement("div");return l.style.backgroundImage="url("+a+")",l.style.height=t+"px",$E(A)?WE(N1(t,t,0,0,l)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),$E(n.getImageData(0,0,t,t).data)}).catch(function(){return!1})},N1=function(r,e,t,n,i){var a="http://www.w3.org/2000/svg",s=document.createElementNS(a,"svg"),o=document.createElementNS(a,"foreignObject");return s.setAttributeNS(null,"width",r.toString()),s.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",t.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),s.appendChild(o),o.appendChild(i),s},WE=function(r){return new Promise(function(e,t){var n=new Image;n.onload=function(){return e(n)},n.onerror=t,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})},tr={get SUPPORT_RANGE_BOUNDS(){var r=DK(document);return Object.defineProperty(tr,"SUPPORT_RANGE_BOUNDS",{value:r}),r},get SUPPORT_WORD_BREAKING(){var r=tr.SUPPORT_RANGE_BOUNDS&&HK(document);return Object.defineProperty(tr,"SUPPORT_WORD_BREAKING",{value:r}),r},get SUPPORT_SVG_DRAWING(){var r=zK(document);return Object.defineProperty(tr,"SUPPORT_SVG_DRAWING",{value:r}),r},get SUPPORT_FOREIGNOBJECT_DRAWING(){var r=typeof Array.from=="function"&&typeof window.fetch=="function"?VK(document):Promise.resolve(!1);return Object.defineProperty(tr,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:r}),r},get SUPPORT_CORS_IMAGES(){var r=GK();return Object.defineProperty(tr,"SUPPORT_CORS_IMAGES",{value:r}),r},get SUPPORT_RESPONSE_TYPE(){var r=KK();return Object.defineProperty(tr,"SUPPORT_RESPONSE_TYPE",{value:r}),r},get SUPPORT_CORS_XHR(){var r="withCredentials"in new XMLHttpRequest;return Object.defineProperty(tr,"SUPPORT_CORS_XHR",{value:r}),r},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var r=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(tr,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:r}),r}},zA=function(){function r(e,t){this.text=e,this.bounds=t}return r}(),jK=function(r,e,t,n){var i=qK(e,t),a=[],s=0;return i.forEach(function(o){if(t.textDecorationLine.length||o.trim().length>0)if(tr.SUPPORT_RANGE_BOUNDS){var A=qE(n,s,o.length).getClientRects();if(A.length>1){var l=Ww(o),c=0;l.forEach(function(h){a.push(new zA(h,Fs.fromDOMRectList(r,qE(n,c+s,h.length).getClientRects()))),c+=h.length})}else a.push(new zA(o,Fs.fromDOMRectList(r,A)))}else{var u=n.splitText(o.length);a.push(new zA(o,$K(r,n))),n=u}else tr.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));s+=o.length}),a},$K=function(r,e){var t=e.ownerDocument;if(t){var n=t.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var i=e.parentNode;if(i){i.replaceChild(n,e);var a=Kw(r,n);return n.firstChild&&i.replaceChild(n.firstChild,n),a}}return Fs.EMPTY},qE=function(r,e,t){var n=r.ownerDocument;if(!n)throw new Error("Node has no owner document");var i=n.createRange();return i.setStart(r,e),i.setEnd(r,e+t),i},Ww=function(r){if(tr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(r)).map(function(t){return t.segment})}return RK(r)},WK=function(r,e){if(tr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(r)).map(function(n){return n.segment})}return XK(r,e)},qK=function(r,e){return e.letterSpacing!==0?Ww(r):WK(r,e)},YK=[32,160,4961,65792,65793,4153,4241],XK=function(r,e){for(var t=M6(r,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],i,a=function(){if(i.value){var s=i.value.slice(),o=Kh(s),A="";o.forEach(function(l){YK.indexOf(l)===-1?A+=Mt(l):(A.length&&n.push(A),n.push(Mt(l)),A="")}),A.length&&n.push(A)}};!(i=t.next()).done;)a();return n},ZK=function(){function r(e,t,n){this.text=JK(t.data,n.textTransform),this.textBounds=jK(e,this.text,n,t)}return r}(),JK=function(r,e){switch(e){case 1:return r.toLowerCase();case 3:return r.replace(e8,t8);case 2:return r.toUpperCase();default:return r}},e8=/(^|\s|:|-|\(|\))([a-z])/g,t8=function(r,e,t){return r.length>0?e+t.toUpperCase():r},J_=function(r){$r(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.src=n.currentSrc||n.src,i.intrinsicWidth=n.naturalWidth,i.intrinsicHeight=n.naturalHeight,i.context.cache.addImage(i.src),i}return e}(bi),ek=function(r){$r(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.canvas=n,i.intrinsicWidth=n.width,i.intrinsicHeight=n.height,i}return e}(bi),tk=function(r){$r(e,r);function e(t,n){var i=r.call(this,t,n)||this,a=new XMLSerializer,s=Kw(t,n);return n.setAttribute("width",s.width+"px"),n.setAttribute("height",s.height+"px"),i.svg="data:image/svg+xml,"+encodeURIComponent(a.serializeToString(n)),i.intrinsicWidth=n.width.baseVal.value,i.intrinsicHeight=n.height.baseVal.value,i.context.cache.addImage(i.svg),i}return e}(bi),nk=function(r){$r(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.value=n.value,i}return e}(bi),U1=function(r){$r(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.start=n.start,i.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,i}return e}(bi),n8=[{type:15,flags:0,unit:"px",number:3}],r8=[{type:16,flags:0,number:50}],i8=function(r){return r.width>r.height?new Fs(r.left+(r.width-r.height)/2,r.top,r.height,r.height):r.width<r.height?new Fs(r.left,r.top+(r.height-r.width)/2,r.width,r.width):r},a8=function(r){var e=r.type===s8?new Array(r.value.length+1).join(""):r.value;return e.length===0?r.placeholder||"":e},Ah="checkbox",lh="radio",s8="password",YE=707406591,qw=function(r){$r(e,r);function e(t,n){var i=r.call(this,t,n)||this;switch(i.type=n.type.toLowerCase(),i.checked=n.checked,i.value=a8(n),(i.type===Ah||i.type===lh)&&(i.styles.backgroundColor=3739148031,i.styles.borderTopColor=i.styles.borderRightColor=i.styles.borderBottomColor=i.styles.borderLeftColor=2779096575,i.styles.borderTopWidth=i.styles.borderRightWidth=i.styles.borderBottomWidth=i.styles.borderLeftWidth=1,i.styles.borderTopStyle=i.styles.borderRightStyle=i.styles.borderBottomStyle=i.styles.borderLeftStyle=1,i.styles.backgroundClip=[0],i.styles.backgroundOrigin=[0],i.bounds=i8(i.bounds)),i.type){case Ah:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=n8;break;case lh:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=r8;break}return i}return e}(bi),rk=function(r){$r(e,r);function e(t,n){var i=r.call(this,t,n)||this,a=n.options[n.selectedIndex||0];return i.value=a&&a.text||"",i}return e}(bi),ik=function(r){$r(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.value=n.value,i}return e}(bi),ak=function(r){$r(e,r);function e(t,n){var i=r.call(this,t,n)||this;i.src=n.src,i.width=parseInt(n.width,10)||0,i.height=parseInt(n.height,10)||0,i.backgroundColor=i.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){i.tree=A8(t,n.contentWindow.document.documentElement);var a=n.contentWindow.document.documentElement?IE(t,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):al.TRANSPARENT,s=n.contentWindow.document.body?IE(t,getComputedStyle(n.contentWindow.document.body).backgroundColor):al.TRANSPARENT;i.backgroundColor=So(a)?So(s)?i.styles.backgroundColor:s:a}}catch{}return i}return e}(bi),o8=["OL","UL","MENU"],Fu=function(r,e,t,n){for(var i=e.firstChild,a=void 0;i;i=a)if(a=i.nextSibling,u8(i)&&i.data.trim().length>0)t.textNodes.push(new ZK(r,i,t.styles));else if(ok(i))if(B8(i)&&i.assignedNodes)i.assignedNodes().forEach(function(o){return Fu(r,o,t,n)});else{var s=sk(r,i);s.styles.isVisible()&&(l8(i,s,n)?s.flags|=4:c8(s.styles)&&(s.flags|=2),o8.indexOf(i.tagName)!==-1&&(s.flags|=8),t.elements.push(s),i.slot,i.shadowRoot?Fu(r,i.shadowRoot,s,n):!lk(i)&&!Ak(i)&&!ck(i)&&Fu(r,i,s,n))}},sk=function(r,e){return m8(e)?new J_(r,e):y8(e)?new ek(r,e):Ak(e)?new tk(r,e):f8(e)?new nk(r,e):g8(e)?new U1(r,e):v8(e)?new qw(r,e):ck(e)?new rk(r,e):lk(e)?new ik(r,e):w8(e)?new ak(r,e):new bi(r,e)},A8=function(r,e){var t=sk(r,e);return t.flags|=4,Fu(r,e,t,t),t},l8=function(r,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||p8(r)&&t.styles.isTransparent()},c8=function(r){return r.isPositioned()||r.isFloating()},u8=function(r){return r.nodeType===Node.TEXT_NODE},ok=function(r){return r.nodeType===Node.ELEMENT_NODE},h8=function(r){return ok(r)&&typeof r.style<"u"&&!d8(r)},d8=function(r){return typeof r.className=="object"},f8=function(r){return r.tagName==="LI"},g8=function(r){return r.tagName==="OL"},v8=function(r){return r.tagName==="INPUT"},Ak=function(r){return r.tagName==="svg"},p8=function(r){return r.tagName==="BODY"},y8=function(r){return r.tagName==="CANVAS"},m8=function(r){return r.tagName==="IMG"},w8=function(r){return r.tagName==="IFRAME"},lk=function(r){return r.tagName==="TEXTAREA"},ck=function(r){return r.tagName==="SELECT"},B8=function(r){return r.tagName==="SLOT"},XE={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},ZE={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},b8={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},E8={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Xs=function(r,e,t,n,i,a){return r<e||r>t?Yw(r,i,a.length>0):n.integers.reduce(function(s,o,A){for(;r>=o;)r-=o,s+=n.values[A];return s},"")+a},uk=function(r,e,t,n){var i="";do t||r--,i=n(r)+i,r/=e;while(r*e>=e);return i},Ct=function(r,e,t,n,i){var a=t-e+1;return(r<0?"-":"")+(uk(Math.abs(r),a,n,function(s){return Mt(Math.floor(s%a)+e)})+i)},Xa=function(r,e,t){t===void 0&&(t=". ");var n=e.length;return uk(Math.abs(r),n,!1,function(i){return e[Math.floor(i%n)]})+t},Ao=1,ia=2,aa=4,xA=8,Mi=function(r,e,t,n,i,a){if(r<-9999||r>9999)return Yw(r,4,i.length>0);var s=Math.abs(r),o=i;if(s===0)return e[0]+o;for(var A=0;s>0&&A<=4;A++){var l=s%10;l===0&&Kt(a,Ao)&&o!==""?o=e[l]+o:l>1||l===1&&A===0||l===1&&A===1&&Kt(a,ia)||l===1&&A===1&&Kt(a,aa)&&r>100||l===1&&A>1&&Kt(a,xA)?o=e[l]+(A>0?t[A-1]:"")+o:l===1&&A>0&&(o=t[A-1]+o),s=Math.floor(s/10)}return(r<0?n:"")+o},JE="",ex="",tx="",wg="",Yw=function(r,e,t){var n=t?". ":"",i=t?"":"",a=t?", ":"",s=t?" ":"";switch(e){case 0:return""+s;case 1:return""+s;case 2:return""+s;case 5:var o=Ct(r,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return Xa(r,"",i);case 6:return Xs(r,1,3999,XE,3,n).toLowerCase();case 7:return Xs(r,1,3999,XE,3,n);case 8:return Ct(r,945,969,!1,n);case 9:return Ct(r,97,122,!1,n);case 10:return Ct(r,65,90,!1,n);case 11:return Ct(r,1632,1641,!0,n);case 12:case 49:return Xs(r,1,9999,ZE,3,n);case 35:return Xs(r,1,9999,ZE,3,n).toLowerCase();case 13:return Ct(r,2534,2543,!0,n);case 14:case 30:return Ct(r,6112,6121,!0,n);case 15:return Xa(r,"",i);case 16:return Xa(r,"",i);case 17:case 48:return Mi(r,"",JE,"",i,ia|aa|xA);case 47:return Mi(r,"",ex,"",i,Ao|ia|aa|xA);case 42:return Mi(r,"",JE,"",i,ia|aa|xA);case 41:return Mi(r,"",ex,"",i,Ao|ia|aa|xA);case 26:return Mi(r,"","",tx,i,0);case 25:return Mi(r,"","",tx,i,Ao|ia|aa);case 31:return Mi(r,"","",wg,a,Ao|ia|aa);case 33:return Mi(r,"","",wg,a,0);case 32:return Mi(r,"","",wg,a,Ao|ia|aa);case 18:return Ct(r,2406,2415,!0,n);case 20:return Xs(r,1,19999,E8,3,n);case 21:return Ct(r,2790,2799,!0,n);case 22:return Ct(r,2662,2671,!0,n);case 22:return Xs(r,1,10999,b8,3,n);case 23:return Xa(r,"");case 24:return Xa(r,"");case 27:return Ct(r,3302,3311,!0,n);case 28:return Xa(r,"",i);case 29:return Xa(r,"",i);case 34:return Ct(r,3792,3801,!0,n);case 37:return Ct(r,6160,6169,!0,n);case 38:return Ct(r,4160,4169,!0,n);case 39:return Ct(r,2918,2927,!0,n);case 40:return Ct(r,1776,1785,!0,n);case 43:return Ct(r,3046,3055,!0,n);case 44:return Ct(r,3174,3183,!0,n);case 45:return Ct(r,3664,3673,!0,n);case 46:return Ct(r,3872,3881,!0,n);case 3:default:return Ct(r,48,57,!0,n)}},nx;(function(r){r[r.BEFORE=0]="BEFORE",r[r.AFTER=1]="AFTER"})(nx||(nx={}));var x8=function(){function r(){}return r.getOrigin=function(e){var t=r._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},r.isSameOrigin=function(e){return r.getOrigin(e)===r._origin},r.setContext=function(e){r._link=e.document.createElement("a"),r._origin=r.getOrigin(e.location.href)},r._origin="about:blank",r}(),re=function(){function r(e,t){this.type=0,this.x=e,this.y=t}return r.prototype.add=function(e,t){return new r(this.x+e,this.y+t)},r}(),Zs=function(r,e,t){return new re(r.x+(e.x-r.x)*t,r.y+(e.y-r.y)*t)},Fc=function(){function r(e,t,n,i){this.type=1,this.start=e,this.startControl=t,this.endControl=n,this.end=i}return r.prototype.subdivide=function(e,t){var n=Zs(this.start,this.startControl,e),i=Zs(this.startControl,this.endControl,e),a=Zs(this.endControl,this.end,e),s=Zs(n,i,e),o=Zs(i,a,e),A=Zs(s,o,e);return t?new r(this.start,n,s,A):new r(A,o,a,this.end)},r.prototype.add=function(e,t){return new r(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},r.prototype.reverse=function(){return new r(this.end,this.endControl,this.startControl,this.start)},r}(),br=function(r){return r.type===1},C8=function(){function r(e){var t=e.styles,n=e.bounds,i=bA(t.borderTopLeftRadius,n.width,n.height),a=i[0],s=i[1],o=bA(t.borderTopRightRadius,n.width,n.height),A=o[0],l=o[1],c=bA(t.borderBottomRightRadius,n.width,n.height),u=c[0],h=c[1],d=bA(t.borderBottomLeftRadius,n.width,n.height),f=d[0],g=d[1],v=[];v.push((a+A)/n.width),v.push((f+u)/n.width),v.push((s+g)/n.height),v.push((l+h)/n.height);var p=Math.max.apply(Math,v);p>1&&(a/=p,s/=p,A/=p,l/=p,u/=p,h/=p,f/=p,g/=p);var y=n.width-A,m=n.height-h,w=n.width-u,B=n.height-g,b=t.borderTopWidth,E=t.borderRightWidth,x=t.borderBottomWidth,S=t.borderLeftWidth,C=nt(t.paddingTop,e.bounds.width),F=nt(t.paddingRight,e.bounds.width),M=nt(t.paddingBottom,e.bounds.width),T=nt(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=a>0||s>0?ut(n.left+S/3,n.top+b/3,a-S/3,s-b/3,Ke.TOP_LEFT):new re(n.left+S/3,n.top+b/3),this.topRightBorderDoubleOuterBox=a>0||s>0?ut(n.left+y,n.top+b/3,A-E/3,l-b/3,Ke.TOP_RIGHT):new re(n.left+n.width-E/3,n.top+b/3),this.bottomRightBorderDoubleOuterBox=u>0||h>0?ut(n.left+w,n.top+m,u-E/3,h-x/3,Ke.BOTTOM_RIGHT):new re(n.left+n.width-E/3,n.top+n.height-x/3),this.bottomLeftBorderDoubleOuterBox=f>0||g>0?ut(n.left+S/3,n.top+B,f-S/3,g-x/3,Ke.BOTTOM_LEFT):new re(n.left+S/3,n.top+n.height-x/3),this.topLeftBorderDoubleInnerBox=a>0||s>0?ut(n.left+S*2/3,n.top+b*2/3,a-S*2/3,s-b*2/3,Ke.TOP_LEFT):new re(n.left+S*2/3,n.top+b*2/3),this.topRightBorderDoubleInnerBox=a>0||s>0?ut(n.left+y,n.top+b*2/3,A-E*2/3,l-b*2/3,Ke.TOP_RIGHT):new re(n.left+n.width-E*2/3,n.top+b*2/3),this.bottomRightBorderDoubleInnerBox=u>0||h>0?ut(n.left+w,n.top+m,u-E*2/3,h-x*2/3,Ke.BOTTOM_RIGHT):new re(n.left+n.width-E*2/3,n.top+n.height-x*2/3),this.bottomLeftBorderDoubleInnerBox=f>0||g>0?ut(n.left+S*2/3,n.top+B,f-S*2/3,g-x*2/3,Ke.BOTTOM_LEFT):new re(n.left+S*2/3,n.top+n.height-x*2/3),this.topLeftBorderStroke=a>0||s>0?ut(n.left+S/2,n.top+b/2,a-S/2,s-b/2,Ke.TOP_LEFT):new re(n.left+S/2,n.top+b/2),this.topRightBorderStroke=a>0||s>0?ut(n.left+y,n.top+b/2,A-E/2,l-b/2,Ke.TOP_RIGHT):new re(n.left+n.width-E/2,n.top+b/2),this.bottomRightBorderStroke=u>0||h>0?ut(n.left+w,n.top+m,u-E/2,h-x/2,Ke.BOTTOM_RIGHT):new re(n.left+n.width-E/2,n.top+n.height-x/2),this.bottomLeftBorderStroke=f>0||g>0?ut(n.left+S/2,n.top+B,f-S/2,g-x/2,Ke.BOTTOM_LEFT):new re(n.left+S/2,n.top+n.height-x/2),this.topLeftBorderBox=a>0||s>0?ut(n.left,n.top,a,s,Ke.TOP_LEFT):new re(n.left,n.top),this.topRightBorderBox=A>0||l>0?ut(n.left+y,n.top,A,l,Ke.TOP_RIGHT):new re(n.left+n.width,n.top),this.bottomRightBorderBox=u>0||h>0?ut(n.left+w,n.top+m,u,h,Ke.BOTTOM_RIGHT):new re(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=f>0||g>0?ut(n.left,n.top+B,f,g,Ke.BOTTOM_LEFT):new re(n.left,n.top+n.height),this.topLeftPaddingBox=a>0||s>0?ut(n.left+S,n.top+b,Math.max(0,a-S),Math.max(0,s-b),Ke.TOP_LEFT):new re(n.left+S,n.top+b),this.topRightPaddingBox=A>0||l>0?ut(n.left+Math.min(y,n.width-E),n.top+b,y>n.width+E?0:Math.max(0,A-E),Math.max(0,l-b),Ke.TOP_RIGHT):new re(n.left+n.width-E,n.top+b),this.bottomRightPaddingBox=u>0||h>0?ut(n.left+Math.min(w,n.width-S),n.top+Math.min(m,n.height-x),Math.max(0,u-E),Math.max(0,h-x),Ke.BOTTOM_RIGHT):new re(n.left+n.width-E,n.top+n.height-x),this.bottomLeftPaddingBox=f>0||g>0?ut(n.left+S,n.top+Math.min(B,n.height-x),Math.max(0,f-S),Math.max(0,g-x),Ke.BOTTOM_LEFT):new re(n.left+S,n.top+n.height-x),this.topLeftContentBox=a>0||s>0?ut(n.left+S+T,n.top+b+C,Math.max(0,a-(S+T)),Math.max(0,s-(b+C)),Ke.TOP_LEFT):new re(n.left+S+T,n.top+b+C),this.topRightContentBox=A>0||l>0?ut(n.left+Math.min(y,n.width+S+T),n.top+b+C,y>n.width+S+T?0:A-S+T,l-(b+C),Ke.TOP_RIGHT):new re(n.left+n.width-(E+F),n.top+b+C),this.bottomRightContentBox=u>0||h>0?ut(n.left+Math.min(w,n.width-(S+T)),n.top+Math.min(m,n.height+b+C),Math.max(0,u-(E+F)),h-(x+M),Ke.BOTTOM_RIGHT):new re(n.left+n.width-(E+F),n.top+n.height-(x+M)),this.bottomLeftContentBox=f>0||g>0?ut(n.left+S+T,n.top+B,Math.max(0,f-(S+T)),g-(x+M),Ke.BOTTOM_LEFT):new re(n.left+S+T,n.top+n.height-(x+M))}return r}(),Ke;(function(r){r[r.TOP_LEFT=0]="TOP_LEFT",r[r.TOP_RIGHT=1]="TOP_RIGHT",r[r.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",r[r.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Ke||(Ke={}));var ut=function(r,e,t,n,i){var a=4*((Math.sqrt(2)-1)/3),s=t*a,o=n*a,A=r+t,l=e+n;switch(i){case Ke.TOP_LEFT:return new Fc(new re(r,l),new re(r,l-o),new re(A-s,e),new re(A,e));case Ke.TOP_RIGHT:return new Fc(new re(r,e),new re(r+s,e),new re(A,l-o),new re(A,l));case Ke.BOTTOM_RIGHT:return new Fc(new re(A,e),new re(A,e+o),new re(r+s,l),new re(r,l));case Ke.BOTTOM_LEFT:default:return new Fc(new re(A,l),new re(A-s,l),new re(r,e+o),new re(r,e))}},ch=function(r){return[r.topLeftBorderBox,r.topRightBorderBox,r.bottomRightBorderBox,r.bottomLeftBorderBox]},S8=function(r){return[r.topLeftContentBox,r.topRightContentBox,r.bottomRightContentBox,r.bottomLeftContentBox]},uh=function(r){return[r.topLeftPaddingBox,r.topRightPaddingBox,r.bottomRightPaddingBox,r.bottomLeftPaddingBox]},F8=function(){function r(e,t,n){this.offsetX=e,this.offsetY=t,this.matrix=n,this.type=0,this.target=6}return r}(),Tc=function(){function r(e,t){this.path=e,this.target=t,this.type=1}return r}(),T8=function(){function r(e){this.opacity=e,this.type=2,this.target=6}return r}(),M8=function(r){return r.type===0},hk=function(r){return r.type===1},O8=function(r){return r.type===2},rx=function(r,e){return r.length===e.length?r.some(function(t,n){return t===e[n]}):!1},I8=function(r,e,t,n,i){return r.map(function(a,s){switch(s){case 0:return a.add(e,t);case 1:return a.add(e+n,t);case 2:return a.add(e+n,t+i);case 3:return a.add(e,t+i)}return a})},dk=function(){function r(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return r}(),fk=function(){function r(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new C8(this.container),this.container.styles.opacity<1&&this.effects.push(new T8(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,i=this.container.bounds.top+this.container.styles.transformOrigin[1].number,a=this.container.styles.transform;this.effects.push(new F8(n,i,a))}if(this.container.styles.overflowX!==0){var s=ch(this.curves),o=uh(this.curves);rx(s,o)?this.effects.push(new Tc(s,6)):(this.effects.push(new Tc(s,2)),this.effects.push(new Tc(o,4)))}}return r.prototype.getEffects=function(e){for(var t=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,i=this.effects.slice(0);n;){var a=n.effects.filter(function(A){return!hk(A)});if(t||n.container.styles.position!==0||!n.parent){if(i.unshift.apply(i,a),t=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var s=ch(n.curves),o=uh(n.curves);rx(s,o)||i.unshift(new Tc(o,6))}}else i.unshift.apply(i,a);n=n.parent}return i.filter(function(A){return Kt(A.target,e)})},r}(),P1=function(r,e,t,n){r.container.elements.forEach(function(i){var a=Kt(i.flags,4),s=Kt(i.flags,2),o=new fk(i,r);Kt(i.styles.display,2048)&&n.push(o);var A=Kt(i.flags,8)?[]:n;if(a||s){var l=a||i.styles.isPositioned()?t:e,c=new dk(o);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var u=i.styles.zIndex.order;if(u<0){var h=0;l.negativeZIndex.some(function(f,g){return u>f.element.container.styles.zIndex.order?(h=g,!1):h>0}),l.negativeZIndex.splice(h,0,c)}else if(u>0){var d=0;l.positiveZIndex.some(function(f,g){return u>=f.element.container.styles.zIndex.order?(d=g+1,!1):d>0}),l.positiveZIndex.splice(d,0,c)}else l.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else i.styles.isFloating()?l.nonPositionedFloats.push(c):l.nonPositionedInlineLevel.push(c);P1(o,c,a?c:t,A)}else i.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),P1(o,e,t,A);Kt(i.flags,8)&&gk(i,A)})},gk=function(r,e){for(var t=r instanceof U1?r.start:1,n=r instanceof U1?r.reversed:!1,i=0;i<e.length;i++){var a=e[i];a.container instanceof nk&&typeof a.container.value=="number"&&a.container.value!==0&&(t=a.container.value),a.listValue=Yw(t,a.container.styles.listStyleType,!0),t+=n?-1:1}},_8=function(r){var e=new fk(r,null),t=new dk(e),n=[];return P1(e,t,t,n),gk(e.container,n),t},ix=function(r,e){switch(e){case 0:return xr(r.topLeftBorderBox,r.topLeftPaddingBox,r.topRightBorderBox,r.topRightPaddingBox);case 1:return xr(r.topRightBorderBox,r.topRightPaddingBox,r.bottomRightBorderBox,r.bottomRightPaddingBox);case 2:return xr(r.bottomRightBorderBox,r.bottomRightPaddingBox,r.bottomLeftBorderBox,r.bottomLeftPaddingBox);case 3:default:return xr(r.bottomLeftBorderBox,r.bottomLeftPaddingBox,r.topLeftBorderBox,r.topLeftPaddingBox)}},k8=function(r,e){switch(e){case 0:return xr(r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox,r.topRightBorderBox,r.topRightBorderDoubleOuterBox);case 1:return xr(r.topRightBorderBox,r.topRightBorderDoubleOuterBox,r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox);case 2:return xr(r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox,r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox);case 3:default:return xr(r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox,r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox)}},L8=function(r,e){switch(e){case 0:return xr(r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox,r.topRightBorderDoubleInnerBox,r.topRightPaddingBox);case 1:return xr(r.topRightBorderDoubleInnerBox,r.topRightPaddingBox,r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox);case 2:return xr(r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox,r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox);case 3:default:return xr(r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox,r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox)}},Q8=function(r,e){switch(e){case 0:return Mc(r.topLeftBorderStroke,r.topRightBorderStroke);case 1:return Mc(r.topRightBorderStroke,r.bottomRightBorderStroke);case 2:return Mc(r.bottomRightBorderStroke,r.bottomLeftBorderStroke);case 3:default:return Mc(r.bottomLeftBorderStroke,r.topLeftBorderStroke)}},Mc=function(r,e){var t=[];return br(r)?t.push(r.subdivide(.5,!1)):t.push(r),br(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},xr=function(r,e,t,n){var i=[];return br(r)?i.push(r.subdivide(.5,!1)):i.push(r),br(t)?i.push(t.subdivide(.5,!0)):i.push(t),br(n)?i.push(n.subdivide(.5,!0).reverse()):i.push(n),br(e)?i.push(e.subdivide(.5,!1).reverse()):i.push(e),i},vk=function(r){var e=r.bounds,t=r.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},hh=function(r){var e=r.styles,t=r.bounds,n=nt(e.paddingLeft,t.width),i=nt(e.paddingRight,t.width),a=nt(e.paddingTop,t.width),s=nt(e.paddingBottom,t.width);return t.add(n+e.borderLeftWidth,a+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+i),-(e.borderTopWidth+e.borderBottomWidth+a+s))},N8=function(r,e){return r===0?e.bounds:r===2?hh(e):vk(e)},U8=function(r,e){return r===0?e.bounds:r===2?hh(e):vk(e)},Bg=function(r,e,t){var n=N8(lo(r.styles.backgroundOrigin,e),r),i=U8(lo(r.styles.backgroundClip,e),r),a=P8(lo(r.styles.backgroundSize,e),t,n),s=a[0],o=a[1],A=bA(lo(r.styles.backgroundPosition,e),n.width-s,n.height-o),l=R8(lo(r.styles.backgroundRepeat,e),A,a,n,i),c=Math.round(n.left+A[0]),u=Math.round(n.top+A[1]);return[l,c,u,s,o]},Js=function(r){return Et(r)&&r.value===Fo.AUTO},Oc=function(r){return typeof r=="number"},P8=function(r,e,t){var n=e[0],i=e[1],a=e[2],s=r[0],o=r[1];if(!s)return[0,0];if(Nt(s)&&o&&Nt(o))return[nt(s,t.width),nt(o,t.height)];var A=Oc(a);if(Et(s)&&(s.value===Fo.CONTAIN||s.value===Fo.COVER)){if(Oc(a)){var l=t.width/t.height;return l<a!=(s.value===Fo.COVER)?[t.width,t.width/a]:[t.height*a,t.height]}return[t.width,t.height]}var c=Oc(n),u=Oc(i),h=c||u;if(Js(s)&&(!o||Js(o))){if(c&&u)return[n,i];if(!A&&!h)return[t.width,t.height];if(h&&A){var d=c?n:i*a,f=u?i:n/a;return[d,f]}var g=c?n:t.width,v=u?i:t.height;return[g,v]}if(A){var p=0,y=0;return Nt(s)?p=nt(s,t.width):Nt(o)&&(y=nt(o,t.height)),Js(s)?p=y*a:(!o||Js(o))&&(y=p/a),[p,y]}var m=null,w=null;if(Nt(s)?m=nt(s,t.width):o&&Nt(o)&&(w=nt(o,t.height)),m!==null&&(!o||Js(o))&&(w=c&&u?m/n*i:t.height),w!==null&&Js(s)&&(m=c&&u?w/i*n:t.width),m!==null&&w!==null)return[m,w];throw new Error("Unable to calculate background-size for element")},lo=function(r,e){var t=r[e];return typeof t>"u"?r[0]:t},R8=function(r,e,t,n,i){var a=e[0],s=e[1],o=t[0],A=t[1];switch(r){case 2:return[new re(Math.round(n.left),Math.round(n.top+s)),new re(Math.round(n.left+n.width),Math.round(n.top+s)),new re(Math.round(n.left+n.width),Math.round(A+n.top+s)),new re(Math.round(n.left),Math.round(A+n.top+s))];case 3:return[new re(Math.round(n.left+a),Math.round(n.top)),new re(Math.round(n.left+a+o),Math.round(n.top)),new re(Math.round(n.left+a+o),Math.round(n.height+n.top)),new re(Math.round(n.left+a),Math.round(n.height+n.top))];case 1:return[new re(Math.round(n.left+a),Math.round(n.top+s)),new re(Math.round(n.left+a+o),Math.round(n.top+s)),new re(Math.round(n.left+a+o),Math.round(n.top+s+A)),new re(Math.round(n.left+a),Math.round(n.top+s+A))];default:return[new re(Math.round(i.left),Math.round(i.top)),new re(Math.round(i.left+i.width),Math.round(i.top)),new re(Math.round(i.left+i.width),Math.round(i.height+i.top)),new re(Math.round(i.left),Math.round(i.height+i.top))]}},D8="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",ax="Hidden Text",H8=function(){function r(e){this._data={},this._document=e}return r.prototype.parseMetrics=function(e,t){var n=this._document.createElement("div"),i=this._document.createElement("img"),a=this._document.createElement("span"),s=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=t,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",s.appendChild(n),i.src=D8,i.width=1,i.height=1,i.style.margin="0",i.style.padding="0",i.style.verticalAlign="baseline",a.style.fontFamily=e,a.style.fontSize=t,a.style.margin="0",a.style.padding="0",a.appendChild(this._document.createTextNode(ax)),n.appendChild(a),n.appendChild(i);var o=i.offsetTop-a.offsetTop+2;n.removeChild(a),n.appendChild(this._document.createTextNode(ax)),n.style.lineHeight="normal",i.style.verticalAlign="super";var A=i.offsetTop-n.offsetTop+2;return s.removeChild(n),{baseline:o,middle:A}},r.prototype.getMetrics=function(e,t){var n=e+" "+t;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,t)),this._data[n]},r}(),pk=function(){function r(e,t){this.context=e,this.options=t}return r}(),G8=1e4;(function(r){$r(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i._activeEffects=[],i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),n.canvas||(i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px"),i.fontMetrics=new H8(document),i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.ctx.textBaseline="bottom",i._activeEffects=[],i.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),i}return e.prototype.applyEffects=function(t){for(var n=this;this._activeEffects.length;)this.popEffect();t.forEach(function(i){return n.applyEffect(i)})},e.prototype.applyEffect=function(t){this.ctx.save(),O8(t)&&(this.ctx.globalAlpha=t.opacity),M8(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),hk(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return vr(this,void 0,void 0,function(){var n;return Zn(this,function(i){switch(i.label){case 0:return n=t.element.container.styles,n.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(t){return vr(this,void 0,void 0,function(){return Zn(this,function(n){switch(n.label){case 0:if(Kt(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(t)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(t,n,i){var a=this;if(n===0)this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+i);else{var s=Ww(t.text);s.reduce(function(o,A){return a.ctx.fillText(A,o,t.bounds.top+i),o+a.ctx.measureText(A).width},t.bounds.left)}},e.prototype.createFontStyle=function(t){var n=t.fontVariant.filter(function(s){return s==="normal"||s==="small-caps"}).join(""),i=$8(t.fontFamily).join(", "),a=Tl(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,n,t.fontWeight,a,i].join(" "),i,a]},e.prototype.renderTextNode=function(t,n){return vr(this,void 0,void 0,function(){var i,a,s,o,A,l,c,u,h=this;return Zn(this,function(d){return i=this.createFontStyle(n),a=i[0],s=i[1],o=i[2],this.ctx.font=a,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",A=this.fontMetrics.getMetrics(s,o),l=A.baseline,c=A.middle,u=n.paintOrder,t.textBounds.forEach(function(f){u.forEach(function(g){switch(g){case 0:h.ctx.fillStyle=Yt(n.color),h.renderTextWithLetterSpacing(f,n.letterSpacing,l);var v=n.textShadow;v.length&&f.text.trim().length&&(v.slice(0).reverse().forEach(function(p){h.ctx.shadowColor=Yt(p.color),h.ctx.shadowOffsetX=p.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=p.offsetY.number*h.options.scale,h.ctx.shadowBlur=p.blur.number,h.renderTextWithLetterSpacing(f,n.letterSpacing,l)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),n.textDecorationLine.length&&(h.ctx.fillStyle=Yt(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(p){switch(p){case 1:h.ctx.fillRect(f.bounds.left,Math.round(f.bounds.top+l),f.bounds.width,1);break;case 2:h.ctx.fillRect(f.bounds.left,Math.round(f.bounds.top),f.bounds.width,1);break;case 3:h.ctx.fillRect(f.bounds.left,Math.ceil(f.bounds.top+c),f.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&f.text.trim().length&&(h.ctx.strokeStyle=Yt(n.webkitTextStrokeColor),h.ctx.lineWidth=n.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(f.text,f.bounds.left,f.bounds.top+l)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(t,n,i){if(i&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var a=hh(t),s=uh(n);this.path(s),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(i,0,0,t.intrinsicWidth,t.intrinsicHeight,a.left,a.top,a.width,a.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return vr(this,void 0,void 0,function(){var n,i,a,s,o,A,y,y,l,c,u,h,w,d,f,B,g,v,p,y,m,w,B;return Zn(this,function(b){switch(b.label){case 0:this.applyEffects(t.getEffects(4)),n=t.container,i=t.curves,a=n.styles,s=0,o=n.textNodes,b.label=1;case 1:return s<o.length?(A=o[s],[4,this.renderTextNode(A,a)]):[3,4];case 2:b.sent(),b.label=3;case 3:return s++,[3,1];case 4:if(!(n instanceof J_))return[3,8];b.label=5;case 5:return b.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return y=b.sent(),this.renderReplacedElement(n,i,y),[3,8];case 7:return b.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof ek&&this.renderReplacedElement(n,i,n.canvas),!(n instanceof tk))return[3,12];b.label=9;case 9:return b.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return y=b.sent(),this.renderReplacedElement(n,i,y),[3,12];case 11:return b.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof ak&&n.tree?(l=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,l.render(n.tree)]):[3,14];case 13:c=b.sent(),n.width&&n.height&&this.ctx.drawImage(c,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),b.label=14;case 14:if(n instanceof qw&&(u=Math.min(n.bounds.width,n.bounds.height),n.type===Ah?n.checked&&(this.ctx.save(),this.path([new re(n.bounds.left+u*.39363,n.bounds.top+u*.79),new re(n.bounds.left+u*.16,n.bounds.top+u*.5549),new re(n.bounds.left+u*.27347,n.bounds.top+u*.44071),new re(n.bounds.left+u*.39694,n.bounds.top+u*.5649),new re(n.bounds.left+u*.72983,n.bounds.top+u*.23),new re(n.bounds.left+u*.84,n.bounds.top+u*.34085),new re(n.bounds.left+u*.39363,n.bounds.top+u*.79)]),this.ctx.fillStyle=Yt(YE),this.ctx.fill(),this.ctx.restore()):n.type===lh&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+u/2,n.bounds.top+u/2,u/4,0,Math.PI*2,!0),this.ctx.fillStyle=Yt(YE),this.ctx.fill(),this.ctx.restore())),K8(n)&&n.value.length){switch(h=this.createFontStyle(a),w=h[0],d=h[1],f=this.fontMetrics.getMetrics(w,d).baseline,this.ctx.font=w,this.ctx.fillStyle=Yt(a.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=V8(n.styles.textAlign),B=hh(n),g=0,n.styles.textAlign){case 1:g+=B.width/2;break;case 2:g+=B.width;break}v=B.add(g,0,0,-B.height/2+1),this.ctx.save(),this.path([new re(B.left,B.top),new re(B.left+B.width,B.top),new re(B.left+B.width,B.top+B.height),new re(B.left,B.top+B.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new zA(n.value,v),a.letterSpacing,f),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Kt(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(p=n.styles.listStyleImage,p.type!==0)return[3,18];y=void 0,m=p.url,b.label=15;case 15:return b.trys.push([15,17,,18]),[4,this.context.cache.match(m)];case 16:return y=b.sent(),this.ctx.drawImage(y,n.bounds.left-(y.width+10),n.bounds.top),[3,18];case 17:return b.sent(),this.context.logger.error("Error loading list-style-image "+m),[3,18];case 18:return[3,20];case 19:t.listValue&&n.styles.listStyleType!==-1&&(w=this.createFontStyle(a)[0],this.ctx.font=w,this.ctx.fillStyle=Yt(a.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",B=new Fs(n.bounds.left,n.bounds.top+nt(n.styles.paddingTop,n.bounds.width),n.bounds.width,LE(a.lineHeight,a.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new zA(t.listValue,B),a.letterSpacing,LE(a.lineHeight,a.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),b.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(t){return vr(this,void 0,void 0,function(){var n,i,p,a,s,p,o,A,p,l,c,p,u,h,p,d,f,p,g,v,p;return Zn(this,function(y){switch(y.label){case 0:if(Kt(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:y.sent(),n=0,i=t.negativeZIndex,y.label=2;case 2:return n<i.length?(p=i[n],[4,this.renderStack(p)]):[3,5];case 3:y.sent(),y.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:y.sent(),a=0,s=t.nonInlineLevel,y.label=7;case 7:return a<s.length?(p=s[a],[4,this.renderNode(p)]):[3,10];case 8:y.sent(),y.label=9;case 9:return a++,[3,7];case 10:o=0,A=t.nonPositionedFloats,y.label=11;case 11:return o<A.length?(p=A[o],[4,this.renderStack(p)]):[3,14];case 12:y.sent(),y.label=13;case 13:return o++,[3,11];case 14:l=0,c=t.nonPositionedInlineLevel,y.label=15;case 15:return l<c.length?(p=c[l],[4,this.renderStack(p)]):[3,18];case 16:y.sent(),y.label=17;case 17:return l++,[3,15];case 18:u=0,h=t.inlineLevel,y.label=19;case 19:return u<h.length?(p=h[u],[4,this.renderNode(p)]):[3,22];case 20:y.sent(),y.label=21;case 21:return u++,[3,19];case 22:d=0,f=t.zeroOrAutoZIndexOrTransformedOrOpacity,y.label=23;case 23:return d<f.length?(p=f[d],[4,this.renderStack(p)]):[3,26];case 24:y.sent(),y.label=25;case 25:return d++,[3,23];case 26:g=0,v=t.positiveZIndex,y.label=27;case 27:return g<v.length?(p=v[g],[4,this.renderStack(p)]):[3,30];case 28:y.sent(),y.label=29;case 29:return g++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var n=this;t.forEach(function(i,a){var s=br(i)?i.start:i;a===0?n.ctx.moveTo(s.x,s.y):n.ctx.lineTo(s.x,s.y),br(i)&&n.ctx.bezierCurveTo(i.startControl.x,i.startControl.y,i.endControl.x,i.endControl.y,i.end.x,i.end.y)})},e.prototype.renderRepeat=function(t,n,i,a){this.path(t),this.ctx.fillStyle=n,this.ctx.translate(i,a),this.ctx.fill(),this.ctx.translate(-i,-a)},e.prototype.resizeImage=function(t,n,i){var a;if(t.width===n&&t.height===i)return t;var s=(a=this.canvas.ownerDocument)!==null&&a!==void 0?a:document,o=s.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,i);var A=o.getContext("2d");return A.drawImage(t,0,0,t.width,t.height,0,0,n,i),o},e.prototype.renderBackgroundImage=function(t){return vr(this,void 0,void 0,function(){var n,i,a,s,o,A;return Zn(this,function(l){switch(l.label){case 0:n=t.styles.backgroundImage.length-1,i=function(c){var u,h,d,C,Q,L,T,O,x,f,C,Q,L,T,O,g,v,p,y,m,w,B,b,E,x,S,C,F,M,T,O,_,Q,L,k,U,D,j,X,W,Y,se;return Zn(this,function(te){switch(te.label){case 0:if(c.type!==0)return[3,5];u=void 0,h=c.url,te.label=1;case 1:return te.trys.push([1,3,,4]),[4,a.context.cache.match(h)];case 2:return u=te.sent(),[3,4];case 3:return te.sent(),a.context.logger.error("Error loading background-image "+h),[3,4];case 4:return u&&(d=Bg(t,n,[u.width,u.height,u.width/u.height]),C=d[0],Q=d[1],L=d[2],T=d[3],O=d[4],x=a.ctx.createPattern(a.resizeImage(u,T,O),"repeat"),a.renderRepeat(C,x,Q,L)),[3,6];case 5:V5(c)?(f=Bg(t,n,[null,null,null]),C=f[0],Q=f[1],L=f[2],T=f[3],O=f[4],g=D5(c.angle,T,O),v=g[0],p=g[1],y=g[2],m=g[3],w=g[4],B=document.createElement("canvas"),B.width=T,B.height=O,b=B.getContext("2d"),E=b.createLinearGradient(p,m,y,w),_E(c.stops,v).forEach(function(ne){return E.addColorStop(ne.stop,Yt(ne.color))}),b.fillStyle=E,b.fillRect(0,0,T,O),T>0&&O>0&&(x=a.ctx.createPattern(B,"repeat"),a.renderRepeat(C,x,Q,L))):j5(c)&&(S=Bg(t,n,[null,null,null]),C=S[0],F=S[1],M=S[2],T=S[3],O=S[4],_=c.position.length===0?[Vw]:c.position,Q=nt(_[0],T),L=nt(_[_.length-1],O),k=H5(c,Q,L,T,O),U=k[0],D=k[1],U>0&&D>0&&(j=a.ctx.createRadialGradient(F+Q,M+L,0,F+Q,M+L,U),_E(c.stops,U*2).forEach(function(ne){return j.addColorStop(ne.stop,Yt(ne.color))}),a.path(C),a.ctx.fillStyle=j,U!==D?(X=t.bounds.left+.5*t.bounds.width,W=t.bounds.top+.5*t.bounds.height,Y=D/U,se=1/Y,a.ctx.save(),a.ctx.translate(X,W),a.ctx.transform(1,0,0,Y,0,0),a.ctx.translate(-X,-W),a.ctx.fillRect(F,se*(M-W)+W,T,O*se),a.ctx.restore()):a.ctx.fill())),te.label=6;case 6:return n--,[2]}})},a=this,s=0,o=t.styles.backgroundImage.slice(0).reverse(),l.label=1;case 1:return s<o.length?(A=o[s],[5,i(A)]):[3,4];case 2:l.sent(),l.label=3;case 3:return s++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(t,n,i){return vr(this,void 0,void 0,function(){return Zn(this,function(a){return this.path(ix(i,n)),this.ctx.fillStyle=Yt(t),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(t,n,i,a){return vr(this,void 0,void 0,function(){var s,o;return Zn(this,function(A){switch(A.label){case 0:return n<3?[4,this.renderSolidBorder(t,i,a)]:[3,2];case 1:return A.sent(),[2];case 2:return s=k8(a,i),this.path(s),this.ctx.fillStyle=Yt(t),this.ctx.fill(),o=L8(a,i),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(t){return vr(this,void 0,void 0,function(){var n,i,a,s,o,A,l,c,u=this;return Zn(this,function(h){switch(h.label){case 0:return this.applyEffects(t.getEffects(2)),n=t.container.styles,i=!So(n.backgroundColor)||n.backgroundImage.length,a=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],s=z8(lo(n.backgroundClip,0),t.curves),i||n.boxShadow.length?(this.ctx.save(),this.path(s),this.ctx.clip(),So(n.backgroundColor)||(this.ctx.fillStyle=Yt(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(d){u.ctx.save();var f=ch(t.curves),g=d.inset?0:G8,v=I8(f,-g+(d.inset?1:-1)*d.spread.number,(d.inset?1:-1)*d.spread.number,d.spread.number*(d.inset?-2:2),d.spread.number*(d.inset?-2:2));d.inset?(u.path(f),u.ctx.clip(),u.mask(v)):(u.mask(f),u.ctx.clip(),u.path(v)),u.ctx.shadowOffsetX=d.offsetX.number+g,u.ctx.shadowOffsetY=d.offsetY.number,u.ctx.shadowColor=Yt(d.color),u.ctx.shadowBlur=d.blur.number,u.ctx.fillStyle=d.inset?Yt(d.color):"rgba(0,0,0,1)",u.ctx.fill(),u.ctx.restore()}),h.label=2;case 2:o=0,A=0,l=a,h.label=3;case 3:return A<l.length?(c=l[A],c.style!==0&&!So(c.color)&&c.width>0?c.style!==2?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,o,t.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return c.style!==3?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,o,t.curves,3)];case 6:return h.sent(),[3,11];case 7:return c.style!==4?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,o,t.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,o,t.curves)];case 10:h.sent(),h.label=11;case 11:o++,h.label=12;case 12:return A++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(t,n,i,a,s){return vr(this,void 0,void 0,function(){var o,A,l,c,u,h,d,f,g,v,p,y,m,w,B,b,B,b;return Zn(this,function(E){return this.ctx.save(),o=Q8(a,i),A=ix(a,i),s===2&&(this.path(A),this.ctx.clip()),br(A[0])?(l=A[0].start.x,c=A[0].start.y):(l=A[0].x,c=A[0].y),br(A[1])?(u=A[1].end.x,h=A[1].end.y):(u=A[1].x,h=A[1].y),i===0||i===2?d=Math.abs(l-u):d=Math.abs(c-h),this.ctx.beginPath(),s===3?this.formatPath(o):this.formatPath(A.slice(0,2)),f=n<3?n*3:n*2,g=n<3?n*2:n,s===3&&(f=n,g=n),v=!0,d<=f*2?v=!1:d<=f*2+g?(p=d/(2*f+g),f*=p,g*=p):(y=Math.floor((d+g)/(f+g)),m=(d-y*f)/(y-1),w=(d-(y+1)*f)/y,g=w<=0||Math.abs(g-m)<Math.abs(g-w)?m:w),v&&(s===3?this.ctx.setLineDash([0,f+g]):this.ctx.setLineDash([f,g])),s===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Yt(t),this.ctx.stroke(),this.ctx.setLineDash([]),s===2&&(br(A[0])&&(B=A[3],b=A[0],this.ctx.beginPath(),this.formatPath([new re(B.end.x,B.end.y),new re(b.start.x,b.start.y)]),this.ctx.stroke()),br(A[1])&&(B=A[1],b=A[2],this.ctx.beginPath(),this.formatPath([new re(B.end.x,B.end.y),new re(b.start.x,b.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(t){return vr(this,void 0,void 0,function(){var n;return Zn(this,function(i){switch(i.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Yt(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=_8(t),[4,this.renderStack(n)];case 1:return i.sent(),this.applyEffects([]),[2,this.canvas]}})})},e})(pk);var K8=function(r){return r instanceof ik||r instanceof rk?!0:r instanceof qw&&r.type!==lh&&r.type!==Ah},z8=function(r,e){switch(r){case 0:return ch(e);case 2:return S8(e);case 1:default:return uh(e)}},V8=function(r){switch(r){case 1:return"center";case 2:return"right";case 0:default:return"left"}},j8=["-apple-system","system-ui"],$8=function(r){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?r.filter(function(e){return j8.indexOf(e)===-1}):r};(function(r){$r(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),i.options=n,i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px",i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),i}return e.prototype.render=function(t){return vr(this,void 0,void 0,function(){var n,i;return Zn(this,function(a){switch(a.label){case 0:return n=N1(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,W8(n)];case 1:return i=a.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Yt(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(i,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e})(pk);var W8=function(r){return new Promise(function(e,t){var n=new Image;n.onload=function(){e(n)},n.onerror=t,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})};typeof window<"u"&&x8.setContext(window);/*!
 * @antv/g
 * @description A core module for rendering engine implements DOM API.
 * @version 6.3.1
 * @date 12/24/2025, 11:55:39 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var bg=function(r){function e(t,n,i,a){var s;return G(this,e),s=ye(this,e,[t]),s.currentTime=i,s.timelineTime=a,s.target=n,s.type="finish",s.bubbles=!1,s.currentTarget=n,s.defaultPrevented=!1,s.eventPhase=s.AT_TARGET,s.timeStamp=Date.now(),s.currentTime=i,s.timelineTime=a,s}return me(e,r),K(e)}(Hh),q8=0,Y8=function(){function r(e,t){var n;G(this,r),this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=e,e.animation=this,this.timeline=t,this.id="".concat(q8++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number((n=this.effect)===null||n===void 0?void 0:n.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}return K(r,[{key:"pending",get:function(){return this._startTime===null&&!this._paused&&this.playbackRate!==0||this.currentTimePending}},{key:"playState",get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"}},{key:"ready",get:function(){var t=this;return this.readyPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise(function(n,i){t.resolveReadyPromise=function(){n(t)},t.rejectReadyPromise=function(){i(new Error)}}),this.pending||this.resolveReadyPromise()),this.readyPromise}},{key:"finished",get:function(){var t=this;return this.finishedPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise(function(n,i){t.resolveFinishedPromise=function(){n(t)},t.rejectFinishedPromise=function(){i(new Error)}}),this.playState==="finished"&&this.resolveFinishedPromise()),this.finishedPromise}},{key:"currentTime",get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(t){if(t=Number(t),!isNaN(t)){if(this.timeline.restart(),!this._paused&&this._startTime!==null){var n;this._startTime=Number((n=this.timeline)===null||n===void 0?void 0:n.currentTime)-t/this.playbackRate}this.currentTimePending=!1,this._currentTime!==t&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(t,!0),this.timeline.applyDirtiedAnimation(this))}}},{key:"startTime",get:function(){return this._startTime},set:function(t){if(t!==null){if(this.updatePromises(),t=Number(t),isNaN(t)||this._paused||this._idle)return;this._startTime=t,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(t){if(t!==this._playbackRate){this.updatePromises();var n=this.currentTime;this._playbackRate=t,this.startTime=null,this.playState!=="paused"&&this.playState!=="idle"&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),n!==null&&(this.currentTime=n),this.updatePromises()}}},{key:"_isFinished",get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)}},{key:"totalDuration",get:function(){return this._totalDuration}},{key:"_needsTick",get:function(){return this.pending||this.playState==="running"||!this._finishedFlag}},{key:"updatePromises",value:function(){var t;if((t=this.effect.target)!==null&&t!==void 0&&t.destroyed)return this.readyPromise=void 0,this.finishedPromise=void 0,!1;var n=this.oldPlayState,i=this.pending?"pending":this.playState;return this.readyPromise&&i!==n&&(i==="idle"?(this.rejectReadyPromise(),this.readyPromise=void 0):n==="pending"?this.resolveReadyPromise():i==="pending"&&(this.readyPromise=void 0)),this.finishedPromise&&i!==n&&(i==="idle"?(this.rejectFinishedPromise(),this.finishedPromise=void 0):i==="finished"?this.resolveFinishedPromise():n==="finished"&&(this.finishedPromise=void 0)),this.oldPlayState=i,this.readyPromise||this.finishedPromise}},{key:"play",value:function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),this.timeline.animations.indexOf(this)===-1&&this.timeline.animations.push(this),this.updatePromises()}},{key:"pause",value:function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),!this._isFinished&&!this._paused&&!this._idle?this.currentTimePending=!0:this._idle&&(this.rewind(),this._idle=!1),this._startTime=null,this._paused=!0,this.updatePromises()}},{key:"finish",value:function(){this.updatePromises(),!this._idle&&(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())}},{key:"cancel",value:function(){var t=this;if(this.updatePromises(),!!this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=null,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var n=new bg(null,this,this.currentTime,null);setTimeout(function(){t.oncancel(n)})}}},{key:"reverse",value:function(){this.updatePromises();var t=this.currentTime;this.playbackRate*=-1,this.play(),t!==null&&(this.currentTime=t),this.updatePromises()}},{key:"updatePlaybackRate",value:function(t){this.playbackRate=t}},{key:"targetAnimations",value:function(){var t,n=(t=this.effect)===null||t===void 0?void 0:t.target;return n.getAnimations()}},{key:"markTarget",value:function(){var t=this.targetAnimations();t.indexOf(this)===-1&&t.push(this)}},{key:"unmarkTarget",value:function(){var t=this.targetAnimations(),n=t.indexOf(this);n!==-1&&t.splice(n,1)}},{key:"tick",value:function(t,n){!this._idle&&!this._paused&&(this._startTime===null?n&&(this.startTime=t-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((t-this._startTime)*this.playbackRate)),n&&(this.currentTimePending=!1,this.fireEvents(t))}},{key:"rewind",value:function(){if(this.playbackRate>=0)this.currentTime=0;else if(this._totalDuration<1/0)this.currentTime=this._totalDuration;else throw new Error("Unable to rewind negative playback rate animation with infinite duration")}},{key:"persist",value:function(){throw new Error(Ve)}},{key:"addEventListener",value:function(t,n,i){throw new Error(Ve)}},{key:"removeEventListener",value:function(t,n,i){throw new Error(Ve)}},{key:"dispatchEvent",value:function(t){throw new Error(Ve)}},{key:"commitStyles",value:function(){throw new Error(Ve)}},{key:"ensureAlive",value:function(){if(this.playbackRate<0&&this.currentTime===0){var t;this._inEffect=!!((t=this.effect)!==null&&t!==void 0&&t.update(-1))}else{var n;this._inEffect=!!((n=this.effect)!==null&&n!==void 0&&n.update(this.currentTime))}!this._inTimeline&&(this._inEffect||!this._finishedFlag)&&(this._inTimeline=!0,this.timeline.animations.push(this))}},{key:"tickCurrentTime",value:function(t,n){t!==this._currentTime&&(this._currentTime=t,this._isFinished&&!n&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())}},{key:"fireEvents",value:function(t){var n=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var i=new bg(null,this,this.currentTime,t);setTimeout(function(){n.onfinish&&n.onfinish(i)})}this._finishedFlag=!0}}else{if(this.onframe&&this.playState==="running"){var a=new bg(null,this,this.currentTime,t);this.onframe(a)}this._finishedFlag=!1}}}])}(),X8=4,Z8=.001,J8=1e-7,ez=10,CA=11,Ic=1/(CA-1),tz=typeof Float32Array=="function",yk=function(e,t){return 1-3*t+3*e},mk=function(e,t){return 3*t-6*e},wk=function(e){return 3*e},dh=function(e,t,n){return((yk(t,n)*e+mk(t,n))*e+wk(t))*e},Bk=function(e,t,n){return 3*yk(t,n)*e*e+2*mk(t,n)*e+wk(t)},nz=function(e,t,n,i,a){var s,o,A=0;do o=t+(n-t)/2,s=dh(o,i,a)-e,s>0?n=o:t=o;while(Math.abs(s)>J8&&++A<ez);return o},rz=function(e,t,n,i){for(var a=0;a<X8;++a){var s=Bk(t,n,i);if(s===0)return t;var o=dh(t,n,i)-e;t-=o/s}return t},Xw=function(e,t,n,i){if(!(e>=0&&e<=1&&n>=0&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&n===i)return function(A){return A};for(var a=tz?new Float32Array(CA):new Array(CA),s=0;s<CA;++s)a[s]=dh(s*Ic,e,n);var o=function(l){for(var c=0,u=1,h=CA-1;u!==h&&a[u]<=l;++u)c+=Ic;--u;var d=(l-a[u])/(a[u+1]-a[u]),f=c+d*Ic,g=Bk(f,e,n);return g>=Z8?rz(l,f,e,n):g===0?f:nz(l,c,c+Ic,e,n)};return function(A){return A===0||A===1?A:dh(o(A),t,i)}},iz=function(e){return e=e.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())}),e.charAt(0)==="-"?e.substring(1):e},_c=function(e){return Math.pow(e,2)},kc=function(e){return Math.pow(e,3)},Lc=function(e){return Math.pow(e,4)},Qc=function(e){return Math.pow(e,5)},Nc=function(e){return Math.pow(e,6)},Uc=function(e){return 1-Math.cos(e*Math.PI/2)},Pc=function(e){return 1-Math.sqrt(1-e*e)},Rc=function(e){return e*e*(3*e-2)},Dc=function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)},Hc=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=pe(t,2),i=n[0],a=i===void 0?1:i,s=n[1],o=s===void 0?.5:s,A=vt(Number(a),1,10),l=vt(Number(o),.1,2);return e===0||e===1?e:-A*Math.pow(2,10*(e-1))*Math.sin((e-1-l/(Math.PI*2)*Math.asin(1/A))*(Math.PI*2)/l)},cA=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=pe(t,4),a=i[0],s=a===void 0?1:a,o=i[1],A=o===void 0?100:o,l=i[2],c=l===void 0?10:l,u=i[3],h=u===void 0?0:u;s=vt(s,.1,1e3),A=vt(A,.1,1e3),c=vt(c,.1,1e3),h=vt(h,.1,1e3);var d=Math.sqrt(A/s),f=c/(2*Math.sqrt(A*s)),g=f<1?d*Math.sqrt(1-f*f):0,v=1,p=f<1?(f*d+-h)/g:-h+d,y=n?n*e/1e3:e;return f<1?y=Math.exp(-y*f*d)*(v*Math.cos(g*y)+p*Math.sin(g*y)):y=(v+p*y)*Math.exp(-y*d),e===0||e===1?e:1-y},Eg=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=t,i=pe(n,2),a=i[0],s=a===void 0?10:a,o=i[1],A=o==="start"?Math.ceil:Math.floor;return A(vt(e,0,1)*s)/s},sx=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=pe(t,4),i=n[0],a=n[1],s=n[2],o=n[3];return Xw(i,a,s,o)(e)},Gc=Xw(.42,0,1,1),hr=function(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return 1-e(1-t,n,i)}},dr=function(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return t<.5?e(t*2,n,i)/2:1-e(t*-2+2,n,i)/2}},fr=function(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return t<.5?(1-e(1-t*2,n,i))/2:(e(t*2-1,n,i)+1)/2}},ox={steps:Eg,"step-start":function(e){return Eg(e,[1,"start"])},"step-end":function(e){return Eg(e,[1,"end"])},linear:function(e){return e},"cubic-bezier":sx,ease:function(e){return sx(e,[.25,.1,.25,1])},in:Gc,out:hr(Gc),"in-out":dr(Gc),"out-in":fr(Gc),"in-quad":_c,"out-quad":hr(_c),"in-out-quad":dr(_c),"out-in-quad":fr(_c),"in-cubic":kc,"out-cubic":hr(kc),"in-out-cubic":dr(kc),"out-in-cubic":fr(kc),"in-quart":Lc,"out-quart":hr(Lc),"in-out-quart":dr(Lc),"out-in-quart":fr(Lc),"in-quint":Qc,"out-quint":hr(Qc),"in-out-quint":dr(Qc),"out-in-quint":fr(Qc),"in-expo":Nc,"out-expo":hr(Nc),"in-out-expo":dr(Nc),"out-in-expo":fr(Nc),"in-sine":Uc,"out-sine":hr(Uc),"in-out-sine":dr(Uc),"out-in-sine":fr(Uc),"in-circ":Pc,"out-circ":hr(Pc),"in-out-circ":dr(Pc),"out-in-circ":fr(Pc),"in-back":Rc,"out-back":hr(Rc),"in-out-back":dr(Rc),"out-in-back":fr(Rc),"in-bounce":Dc,"out-bounce":hr(Dc),"in-out-bounce":dr(Dc),"out-in-bounce":fr(Dc),"in-elastic":Hc,"out-elastic":hr(Hc),"in-out-elastic":dr(Hc),"out-in-elastic":fr(Hc),spring:cA,"spring-in":cA,"spring-out":hr(cA),"spring-in-out":dr(cA),"spring-out-in":fr(cA)},az=function(e){return iz(e).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim()},sz=function(e){return ox[az(e)]||ox.linear},oz=function(e){return e},Az=1,lz=.5,Ax=0;function lx(r,e){return function(t){if(t>=1)return 1;var n=1/r;return t+=e*n,t-t%n}}var Kc="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",cz=new RegExp("cubic-bezier\\(".concat(Kc,",").concat(Kc,",").concat(Kc,",").concat(Kc,"\\)")),uz=/steps\(\s*(\d+)\s*\)/,hz=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function Zw(r){var e=cz.exec(r);if(e)return Xw.apply(void 0,Fe(e.slice(1).map(Number)));var t=uz.exec(r);if(t)return lx(Number(t[1]),Ax);var n=hz.exec(r);return n?lx(Number(n[1]),{start:Az,middle:lz,end:Ax}[n[2]]):sz(r)}function dz(r){return Math.abs(fz(r)/(r.playbackRate||1))}function fz(r){var e;return r.duration===0||r.iterations===0?0:(r.duration==="auto"?0:Number(r.duration))*((e=r.iterations)!==null&&e!==void 0?e:1)}var bk=0,Jw=1,ed=2,Ek=3;function gz(r,e,t){if(e===null)return bk;var n=t.endTime;return e<Math.min(t.delay,n)?Jw:e>=Math.min(t.delay+r+t.endDelay,n)?ed:Ek}function vz(r,e,t,n,i){switch(n){case Jw:return e==="backwards"||e==="both"?0:null;case Ek:return t-i;case ed:return e==="forwards"||e==="both"?r:null;case bk:return null}}function pz(r,e,t,n,i){var a=i;return r===0?e!==Jw&&(a+=t):a+=n/r,a}function yz(r,e,t,n,i,a){var s=r===1/0?e%1:r%1;return s===0&&t===ed&&n!==0&&(i!==0||a===0)&&(s=1),s}function mz(r,e,t,n){return r===ed&&e===1/0?1/0:t===1?Math.floor(n)-1:Math.floor(n)}function wz(r,e,t){var n=r;if(r!=="normal"&&r!=="reverse"){var i=e;r==="alternate-reverse"&&(i+=1),n="normal",i!==1/0&&i%2!==0&&(n="reverse")}return n==="normal"?t:1-t}function Bz(r,e,t){var n=gz(r,e,t),i=vz(r,t.fill,e,n,t.delay);if(i===null)return null;var a=t.duration==="auto"?0:t.duration,s=pz(a,n,t.iterations,i,t.iterationStart),o=yz(s,t.iterationStart,n,t.iterations,i,a),A=mz(n,t.iterations,o,s),l=wz(t.direction,A,o);return t.currentIteration=A,t.progress=l,t.easingFunction(l)}function bz(r,e,t){var n=Ez(r,e),i=xz(n,t);return function(a,s){if(s!==null)i.filter(function(A){return s>=A.applyFrom&&s<A.applyTo}).forEach(function(A){var l=s-A.startOffset,c=A.endOffset-A.startOffset,u=c===0?0:l/c;a.setAttribute(A.property,A.interpolation(u),!1,!1)});else for(var o in n)xk(o)&&a.setAttribute(o,null)}}function xk(r){return r!=="offset"&&r!=="easing"&&r!=="composite"&&r!=="computedOffset"}function Ez(r,e){for(var t={},n=0;n<r.length;n++)for(var i in r[n])if(xk(i)){var a={offset:r[n].offset,computedOffset:r[n].computedOffset,easing:r[n].easing,easingFunction:Zw(r[n].easing)||e.easingFunction,value:r[n][i]};t[i]=t[i]||[],t[i].push(a)}return t}function xz(r,e){var t=[];for(var n in r)for(var i=r[n],a=0;a<i.length-1;a++){var s=a,o=a+1,A=i[s].computedOffset,l=i[o].computedOffset,c=A,u=l;a===0&&(c=-1/0,l===0&&(o=s)),a===i.length-2&&(u=1/0,A===1&&(s=o)),t.push({applyFrom:c,applyTo:u,startOffset:i[s].computedOffset,endOffset:i[o].computedOffset,easingFunction:i[s].easingFunction,property:n,interpolation:Cz(n,i[s].value,i[o].value,e)})}return t.sort(function(h,d){return h.startOffset-d.startOffset}),t}var cx=function(e,t,n){return function(i){var a=Ck(e,t,i);return Z(a)?a:n(a)}};function Cz(r,e,t,n){var i=t_[r];if(i&&i.syntax&&i.int){var a=z.styleValueRegistry.getPropertySyntax(i.syntax);if(a){var s=a.parser,o=s?s(e,n):e,A=s?s(t,n):t,l=a.mixer(o,A,n);if(l){var c=cx.apply(void 0,Fe(l));return function(u){return u===0?e:u===1?t:c(u)}}}}return cx(!1,!0,function(u){return u?t:e})}function Ck(r,e,t){if(typeof r=="number"&&typeof e=="number")return r*(1-t)+e*t;if(typeof r=="boolean"&&typeof e=="boolean"||typeof r=="string"&&typeof e=="string")return t<.5?r:e;if(Array.isArray(r)&&Array.isArray(e)){for(var n=r.length,i=e.length,a=Math.max(n,i),s=[],o=0;o<a;o++)s.push(Ck(r[o<n?o:n-1],e[o<i?o:i-1],t));return s}throw new Error("Mismatched interpolation arguments ".concat(r,":").concat(e))}var Sz=function(){function r(){G(this,r),this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=oz,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}return K(r,[{key:"easing",get:function(){return this._easing},set:function(t){this.easingFunction=Zw(t),this._easing=t}}])}();function Fz(r){var e=[];for(var t in r)if(!(t in["easing","offset","composite"])){var n=r[t];Array.isArray(n)||(n=[n]);for(var i=n.length,a=0;a<i;a++){if(!e[a]){var s={};"offset"in r&&(s.offset=Number(r.offset)),"easing"in r&&(s.easing=r.easing),"composite"in r&&(s.composite=r.composite),e[a]=s}n[a]!==void 0&&n[a]!==null&&(e[a][t]=n[a])}}return e.sort(function(o,A){return(o.computedOffset||0)-(A.computedOffset||0)}),e}function ux(r,e){if(r===null)return[];Array.isArray(r)||(r=Fz(r));for(var t=r.map(function(A){var l={};e!=null&&e.composite&&(l.composite="auto");for(var c in A){var u=A[c];if(c==="offset"){if(u!==null){if(u=Number(u),!isFinite(u))throw new Error("Keyframe offsets must be numbers.");if(u<0||u>1)throw new Error("Keyframe offsets must be between 0 and 1.");l.computedOffset=u}}else if(c==="composite"&&["replace","add","accumulate","auto"].indexOf(u)===-1)throw new Error("".concat(u," compositing is not supported"));l[c]=u}return l.offset===void 0&&(l.offset=null),l.easing===void 0&&(l.easing=(e==null?void 0:e.easing)||"linear"),l.composite===void 0&&(l.composite="auto"),l}),n=!0,i=-1/0,a=0;a<t.length;a++){var s=t[a].offset;if(le(s))n=!1;else{if(s<i)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");i=s}}t=t.filter(function(A){return Number(A.offset)>=0&&Number(A.offset)<=1});function o(){var A,l=t,c=l.length;if(t[c-1].computedOffset=Number((A=t[c-1].offset)!==null&&A!==void 0?A:1),c>1){var u;t[0].computedOffset=Number((u=t[0].offset)!==null&&u!==void 0?u:0)}for(var h=0,d=Number(t[0].computedOffset),f=1;f<c;f++){var g=t[f].computedOffset;if(!le(g)&&!le(d)){for(var v=1;v<f-h;v++)t[h+v].computedOffset=d+(Number(g)-d)*v/(f-h);h=f,d=Number(g)}}}return n||o(),t}var Tz="backwards|forwards|both|none".split("|"),Mz="reverse|alternate|alternate-reverse".split("|");function Oz(r,e){var t=new Sz;return typeof r=="number"&&!isNaN(r)?t.duration=r:r!==void 0&&Object.keys(r).forEach(function(n){if(r[n]!==void 0&&r[n]!==null&&r[n]!=="auto"){if((typeof t[n]=="number"||n==="duration")&&(typeof r[n]!="number"||isNaN(r[n]))||n==="fill"&&Tz.indexOf(r[n])===-1||n==="direction"&&Mz.indexOf(r[n])===-1)return;t[n]=r[n]}}),t}function Iz(r,e){return r=_z(r??{duration:"auto"}),Oz(r)}function _z(r){return typeof r=="number"&&(isNaN(r)?r={duration:"auto"}:r={duration:r}),r}var kz=function(){function r(e,t,n){var i=this;G(this,r),this.composite="replace",this.iterationComposite="replace",this.target=e,this.timing=Iz(n),this.timing.effect=this,this.timing.activeDuration=dz(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=ux(t,this.timing),this.interpolations=bz(this.normalizedKeyframes,this.timing,this.target);var a=z.globalThis.Proxy;this.computedTiming=a?new a(this.timing,{get:function(o,A){return A==="duration"?o.duration==="auto"?0:o.duration:A==="fill"?o.fill==="auto"?"none":o.fill:A==="localTime"?i.animation&&i.animation.currentTime||null:A==="currentIteration"?!i.animation||i.animation.playState!=="running"?null:o.currentIteration||0:A==="progress"?!i.animation||i.animation.playState!=="running"?null:o.progress||0:o[A]},set:function(){return!0}}):this.timing}return K(r,[{key:"applyInterpolations",value:function(){this.interpolations(this.target,Number(this.timeFraction))}},{key:"update",value:function(t){return t===null?!1:(this.timeFraction=Bz(this.timing.activeDuration,t,this.timing),this.timeFraction!==null)}},{key:"getKeyframes",value:function(){return this.normalizedKeyframes}},{key:"setKeyframes",value:function(t){this.normalizedKeyframes=ux(t)}},{key:"getComputedTiming",value:function(){return this.computedTiming}},{key:"getTiming",value:function(){return this.timing}},{key:"updateTiming",value:function(t){var n=this;Object.keys(t||{}).forEach(function(i){n.timing[i]=t[i]})}}])}();function hx(r,e){return Number(r.id)-Number(e.id)}var Lz=function(){function r(e){var t=this;G(this,r),this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(n){t.currentTime=n,t.discardAnimations(),t.animations.length===0?t.timelineTicking=!1:t.requestAnimationFrame(t.webAnimationsNextTick)},this.processRafCallbacks=function(n){var i=t.rafCallbacks;t.rafCallbacks=[],n<Number(t.currentTime)&&(n=Number(t.currentTime)),t.animations.sort(hx),t.animations=t.tick(n,!0,t.animations)[0],i.forEach(function(a){a[1](n)}),t.applyPendingEffects()},this.document=e}return K(r,[{key:"getAnimations",value:function(){return this.discardAnimations(),this.animations.slice()}},{key:"isTicking",value:function(){return this.inTick}},{key:"play",value:function(t,n,i){var a=new kz(t,n,i),s=new Y8(a,this);return this.animations.push(s),this.restartWebAnimationsNextTick(),s.updatePromises(),s.play(),s.updatePromises(),s}},{key:"applyDirtiedAnimation",value:function(t){var n=this;if(!this.inTick){t.markTarget();var i=t.targetAnimations();i.sort(hx);var a=this.tick(Number(this.currentTime),!1,i.slice())[1];a.forEach(function(s){var o=n.animations.indexOf(s);o!==-1&&n.animations.splice(o,1)}),this.applyPendingEffects()}}},{key:"restart",value:function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame(function(){}),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame}},{key:"destroy",value:function(){this.document.defaultView.cancelAnimationFrame(this.frameId)}},{key:"applyPendingEffects",value:function(){this.pendingEffects.forEach(function(t){t==null||t.applyInterpolations()}),this.pendingEffects=[]}},{key:"updateAnimationsPromises",value:function(){this.animationsWithPromises=this.animationsWithPromises.filter(function(t){return t.updatePromises()})}},{key:"discardAnimations",value:function(){this.updateAnimationsPromises(),this.animations=this.animations.filter(function(t){return t.playState!=="finished"&&t.playState!=="idle"})}},{key:"restartWebAnimationsNextTick",value:function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))}},{key:"rAF",value:function(t){var n=this.rafId++;return this.rafCallbacks.length===0&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([n,t]),n}},{key:"requestAnimationFrame",value:function(t){var n=this;return this.rAF(function(i){n.updateAnimationsPromises(),t(i),n.updateAnimationsPromises()})}},{key:"tick",value:function(t,n,i){var a=this,s,o;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=t,this.ticking=!1;var A=[],l=[],c=[],u=[];return i.forEach(function(h){h.tick(t,n),h._inEffect?(l.push(h.effect),h.markTarget()):(A.push(h.effect),h.unmarkTarget()),h._needsTick&&(a.ticking=!0);var d=h._inEffect||h._needsTick;h._inTimeline=d,d?c.push(h):u.push(h)}),(s=this.pendingEffects).push.apply(s,A),(o=this.pendingEffects).push.apply(o,l),this.ticking&&this.requestAnimationFrame(function(){}),this.inTick=!1,[c,u]}}])}();z.EasingFunction=Zw;z.AnimationTimeline=Lz;var Qz=function(r){function e(){var t;G(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=ye(this,e,[].concat(i)),t.landmarks=[],t}return me(e,r),K(e,[{key:"rotate",value:function(n,i,a){if(this.relElevation=bo(i),this.relAzimuth=bo(n),this.relRoll=bo(a),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===ze.EXPLORING){var s=da(Lt(),[1,0,0],De((this.rotateWorld?1:-1)*this.relElevation)),o=da(Lt(),[0,1,0],De((this.rotateWorld?1:-1)*this.relAzimuth)),A=da(Lt(),[0,0,1],De(this.relRoll)),l=Ca(Lt(),o,s);l=Ca(Lt(),l,A);var c=Mw(Ye(),l);wo(this.matrix,this.matrix,[0,0,-this.distance]),yn(this.matrix,this.matrix,c),wo(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===ze.ORBITING||this.type===ze.EXPLORING?this._getPosition():this.type===ze.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(n,i){var a=En(n,i,0),s=_i(this.position);return xa(s,s,Ku(xe(),this.right,a[0])),xa(s,s,Ku(xe(),this.up,a[1])),this._setPosition(s),this.triggerUpdate(),this}},{key:"dolly",value:function(n){var i=this.forward,a=_i(this.position),s=n*this.dollyingStep,o=this.distance+n*this.dollyingStep;return s=Math.max(Math.min(o,this.maxDistance),this.minDistance)-this.distance,a[0]+=s*i[0],a[1]+=s*i[1],a[2]+=s*i[2],this._setPosition(a),this.type===ze.ORBITING||this.type===ze.EXPLORING?this._getDistance():this.type===ze.TRACKING&&xa(this.focalPoint,a,this.distanceVector),this.triggerUpdate(),this}},{key:"cancelLandmarkAnimation",value:function(){this.landmarkAnimationID!==void 0&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)}},{key:"createLandmark",value:function(n){var i,a,s,o,A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=A.position,c=l===void 0?this.position:l,u=A.focalPoint,h=u===void 0?this.focalPoint:u,d=A.roll,f=A.zoom,g=new z.CameraContribution;g.setType(this.type,void 0),g.setPosition(c[0],(i=c[1])!==null&&i!==void 0?i:this.position[1],(a=c[2])!==null&&a!==void 0?a:this.position[2]),g.setFocalPoint(h[0],(s=h[1])!==null&&s!==void 0?s:this.focalPoint[1],(o=h[2])!==null&&o!==void 0?o:this.focalPoint[2]),g.setRoll(d??this.roll),g.setZoom(f??this.zoom);var v={name:n,matrix:XO(g.getWorldTransform()),right:_i(g.right),up:_i(g.up),forward:_i(g.forward),position:_i(g.getPosition()),focalPoint:_i(g.getFocalPoint()),distanceVector:_i(g.getDistanceVector()),distance:g.getDistance(),dollyingStep:g.getDollyingStep(),azimuth:g.getAzimuth(),elevation:g.getElevation(),roll:g.getRoll(),relAzimuth:g.relAzimuth,relElevation:g.relElevation,relRoll:g.relRoll,zoom:g.getZoom()};return this.landmarks.push(v),v}},{key:"gotoLandmark",value:function(n){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=_e(n)?this.landmarks.find(function(F){return F.name===n}):n;if(s){var o=Z(a)?{duration:a}:a,A=o.easing,l=A===void 0?"linear":A,c=o.duration,u=c===void 0?100:c,h=o.easingFunction,d=h===void 0?void 0:h,f=o.onfinish,g=f===void 0?void 0:f,v=o.onframe,p=v===void 0?void 0:v,y=.01;this.cancelLandmarkAnimation();var m=s.position,w=s.focalPoint,B=s.zoom,b=s.roll,E=d||z.EasingFunction(l),x,S=function(){i.setFocalPoint(w),i.setPosition(m),i.setRoll(b),i.setZoom(B),i.computeMatrix(),i.triggerUpdate(),g==null||g()};if(u===0)return S();var C=function(M){x===void 0&&(x=M);var T=M-x;if(T>=u){S();return}var O=E(T/u),_=xe(),Q=xe(),L=1,k=0;Zm(_,i.focalPoint,w,O),Zm(Q,i.position,m,O),k=i.roll*(1-O)+b*O,L=i.zoom*(1-O)+B*O,i.setFocalPoint(_),i.setPosition(Q),i.setRoll(k),i.setZoom(L);var U=pb(_,w)+pb(Q,m);if(U<=y&&B===void 0&&b===void 0)return S();i.computeMatrix(),i.triggerUpdate(),T<u&&(p==null||p(O),i.landmarkAnimationID=i.canvas.requestAnimationFrame(C))};this.canvas.requestAnimationFrame(C)}}}])}(PI);z.CameraContribution=Qz;var Nz=["body","startHead","endHead","startHeadOffset","endHeadOffset"],Uz=["body","startHead","endHead","startHeadOffset","endHeadOffset"],Pz=["body","startHead","endHead","startHeadOffset","endHeadOffset"],Sk=function(r){function e(t){var n;G(this,e),n=ye(this,e,[ue(ue({},t),{},{type:e.tag})]);var i=n.attributes,a=i.body,s=i.startHead,o=i.endHead;i.startHeadOffset,i.endHeadOffset;var A=fi(i,Nz);if(!a)throw new Error("Arrow's body is required");return n.body=a,n.appendChild(n.body),n.handleBodyAttributeChanged(n.body),s&&n.appendArrowHead(n.getArrowHeadType(s),!0),o&&n.appendArrowHead(n.getArrowHeadType(o),!1),n.applyArrowStyle(A,[n.body,n.startHead,n.endHead]),n}return me(e,r),K(e,[{key:"handleBodyAttributeChanged",value:function(n){var i=this;n.addEventListener(Me.ATTR_MODIFIED,function(a){var s=a.attrName;s==="x1"||s==="y1"?i.startHead&&i.transformArrowHead(i.startHead,!0):(s==="x2"||s==="y2")&&i.endHead&&i.transformArrowHead(i.endHead,!1)})}},{key:"getBody",value:function(){return this.body}},{key:"getStartHead",value:function(){return this.startHead}},{key:"getEndHead",value:function(){return this.endHead}},{key:"attributeChangedCallback",value:function(n,i,a){if(n==="opacity"||n==="strokeOpacity"||n==="stroke"||n==="lineWidth"||n==="increasedLineWidthForHitTesting")this.applyArrowStyle(ee({},n,a),[this.body,this.startHead,this.endHead]);else if(n==="startHead"||n==="endHead"){var s=n==="startHead";if(this.destroyArrowHead(s),a){var o=this.attributes;o.body,o.startHead,o.endHead,o.startHeadOffset,o.endHeadOffset;var A=fi(o,Uz);this.appendArrowHead(this.getArrowHeadType(a),s),this.applyArrowStyle(A,[s?this.startHead:this.endHead])}}else if(n==="body"){var l=this.attributes;l.body,l.startHead,l.endHead,l.startHeadOffset,l.endHeadOffset;var c=fi(l,Pz);this.body.destroy(),this.body=a,this.appendChild(this.body),this.applyArrowStyle(c,[this.body])}else n==="startHeadOffset"?this.moveArrowHeadAlongTangent(a,!0):n==="endHeadOffset"&&this.moveArrowHeadAlongTangent(a,!1)}},{key:"getArrowHeadType",value:function(n){return typeof n=="boolean"?"default":"custom"}},{key:"appendArrowHead",value:function(n,i){var a;n==="default"?a=this.createDefaultArrowHead():a=i?this.attributes.startHead:this.attributes.endHead,this.transformArrowHead(a,i),a.setAttribute("zIndex",1),i?this.startHead=a:this.endHead=a,this.appendChild(a);var s=i?this.attributes.startHeadOffset:this.attributes.endHeadOffset;s&&this.moveArrowHeadAlongTangent(s,i)}},{key:"transformArrowHead",value:function(n,i){var a=xe(),s=0,o=0,A=0,l=0,c=0,u=this.body&&this.body.nodeName;if(u===P.LINE){var h=this.body.attributes,d=h.x1,f=h.x2,g=h.y1,v=h.y2;o=i?f:d,A=i?d:f,l=i?v:g,c=i?g:v}else if(u===P.POLYLINE){var p=this.body.attributes.points,y=p.length;o=i?p[1][0]:p[y-2][0],l=i?p[1][1]:p[y-2][1],A=i?p[0][0]:p[y-1][0],c=i?p[0][1]:p[y-1][1]}else if(u===P.PATH){var m=this.getTangent(this.body,i),w=pe(m,2),B=w[0],b=w[1];o=B[0],l=B[1],A=b[0],c=b[1]}var E=o-A,x=l-c;s=Math.atan2(x,E),a=Xe(A,c,0),i?(this.startHeadPosition=a,this.startHeadRad=s):(this.endHeadPosition=a,this.endHeadRad=s),n.setLocalPosition(a),n.setLocalEulerAngles(s*180/Math.PI+n.getLocalEulerAngles())}},{key:"moveArrowHeadAlongTangent",value:function(n,i){var a=i?this.startHead:this.endHead;a&&a.setLocalPosition(gI(xe(),i?this.startHeadPosition:this.endHeadPosition,Xe(Math.cos(i?this.startHeadRad:this.endHeadRad)*n,Math.sin(i?this.startHeadRad:this.endHeadRad)*n,0))),this.body}},{key:"destroyArrowHead",value:function(n){n&&this.startHead&&(this.startHead.destroy(),this.startHead=void 0),!n&&this.endHead&&(this.endHead.destroy(),this.endHead=void 0)}},{key:"getTangent",value:function(n,i){return i?n.getStartTangent():n.getEndTangent()}},{key:"createDefaultArrowHead",value:function(){var n=this.attributes,i=n.stroke,a=n.lineWidth,s=Math.sin,o=Math.cos,A=Math.PI,l=10*o(A/6);return new wn({style:{d:"M".concat(l/2,",").concat(10*s(A/6)," L-").concat(l/2,",0 L").concat(l/2,",-").concat(10*s(A/6)),stroke:i,lineWidth:a,transformOrigin:"center"}})}},{key:"applyArrowStyle",value:function(n,i){var a=n.opacity,s=n.stroke,o=n.strokeOpacity,A=n.lineWidth,l=n.increasedLineWidthForHitTesting;i.forEach(function(c){c&&(le(a)||(c.style.opacity=a),le(s)||(c.style.stroke=s),le(o)||(c.style.strokeOpacity=o),le(A)||(c.style.lineWidth=A),le(l)||(c.style.increasedLineWidthForHitTesting=l))})}}])}(xl);Sk.tag="arrow";Sk.PARSED_STYLE_LIST=new Set([].concat(Fe(xl.PARSED_STYLE_LIST),["body","startHead","endHead","startHeadOffset","endHeadOffset","stroke","lineWidth","opacity","strokeOpacity"]));var eB=Math.PI,Rz=eB*2,uA=Math.sin,zc=Math.cos,Dz=Math.acos,un=Math.atan2,VA=Math.sqrt,R1=Math.max,ii=Math.min,co=1e-4,Hz=[{name:"sr",inherits:!1,interpolable:!0,syntax:$.LENGTH_PERCENTAGE},{name:"sr0",inherits:!1,interpolable:!0,syntax:$.LENGTH_PERCENTAGE},{name:"startAngle",inherits:!1,interpolable:!0,syntax:$.ANGLE},{name:"endAngle",inherits:!1,interpolable:!0,syntax:$.ANGLE}];Hz.forEach(function(r){QH.registerProperty(r)});var Lr=function(e,t,n,i){return{x:e+n*Math.cos(i),y:t+n*Math.sin(i)}};function Gz(r,e,t,n,i,a,s,o){var A=t-r,l=n-e,c=s-i,u=o-a,h=u*A-c*l;if(!(h*h<co))return h=(c*(e-a)-u*(r-i))/h,[r+h*A,e+h*l]}function Vc(r,e,t,n,i,a,s){var o=r-t,A=e-n,l=a/VA(o*o+A*A),c=l*A,u=-l*o,h=r+c,d=e+u,f=t+c,g=n+u,v=(h+f)/2,p=(d+g)/2,y=f-h,m=g-d,w=y*y+m*m,B=i-a,b=h*g-f*d,E=(m<0?-1:1)*VA(R1(0,B*B*w-b*b)),x=(b*m-y*E)/w,S=(-b*y-m*E)/w,C=(b*m+y*E)/w,F=(-b*y+m*E)/w,M=x-v,T=S-p,O=C-v,_=F-p;return M*M+T*T>O*O+_*_&&(x=C,S=F),{cx:x,cy:S,x0:-c,y0:-u,x1:x*(i/B-1),y1:S*(i/B-1)}}function Oi(r,e){return e=e<0&&r>=0?e+Rz:e,e-r<=eB?0:1}var Kz=function(r){function e(t){var n;return G(this,e),n=ye(this,e,[t]),n.updatePath(),n}return me(e,r),K(e,[{key:"setAttribute",value:function(n,i,a){qu(e,"setAttribute",this)([n,i,a]),["startAngle","endAngle","sr","sr0","radius"].indexOf(n)>-1&&this.updatePath()}},{key:"updatePath",value:function(){var n=this.parsedStyle,i=n.x,a=n.y,s=n.startAngle,o=n.endAngle,A=n.sr,l=n.sr0,c=n.radius,u=this.createPath(i,a,s?De(s):0,o?De(o):Math.PI*2,A||0,l||0,c||[0,0,0,0]);qu(e,"setAttribute",this)(["d",u])}},{key:"createPath",value:function(n,i,a,s,o,A,l){if(!(o<=0)){var c=Lr(n,i,o,a),u=Lr(n,i,o,s),h=Lr(n,i,A,a),d=Lr(n,i,A,s);if(Bo(s-a,Math.PI*2)){var f=Lr(n,i,o,a+Math.PI),g=Lr(n,i,A,a+Math.PI),v=[["M",c.x,c.y],["A",o,o,0,1,1,f.x,f.y],["A",o,o,0,1,1,u.x,u.y],["M",h.x,h.y]];return A&&(v.push(["A",A,A,0,1,0,g.x,g.y]),v.push(["A",A,A,0,1,0,d.x,d.y])),v.push(["M",c.x,c.y]),v.push(["Z"]),v}var p=s-a,y=o*zc(a),m=o*uA(a),w=A*zc(s),B=A*uA(s),b=o*zc(s),E=o*uA(s),x=A*zc(a),S=A*uA(a),C=pe(l,4),F=C[0],M=C[1],T=C[2],O=C[3],_=(o-A)/2,Q=ii(_,F),L=ii(_,M),k=ii(_,T),U=ii(_,O),D=R1(Q,L),j=R1(k,U),X=D,W=j;if((D>co||j>co)&&p<eB){var Y=Gz(y,m,x,S,b,E,w,B);if(Y){var se=y-Y[0],te=m-Y[1],ne=b-Y[0],Le=E-Y[1],ke=1/uA(Dz((se*ne+te*Le)/(VA(se*se+te*te)*VA(ne*ne+Le*Le)))/2),Ue=VA(Y[0]*Y[0]+Y[1]*Y[1]);X=ii(D,(o-Ue)/(ke+1)),W=ii(j,(A-Ue)/(ke-1))}}var ct=Oi(a,s),Pe=[];if(X>co){var xt=ii(F,X),In=ii(M,X),fe=Vc(x,S,y,m,o,xt),We=Vc(b,E,w,B,o,In);if(Pe.push(["M",n+fe.cx+fe.x0,i+fe.cy+fe.y0]),X<D&&xt===In){var Qe=un(fe.y0,fe.x0),Mr=un(We.y0,We.x0);Pe.push(["A",X,X,0,Oi(Qe,Mr),1,n+We.cx+We.x0,i+We.cy+We.y0])}else{if(xt>0){var qn=un(fe.y0,fe.x0),Va=un(fe.y1,fe.x1),Jr=Lr(n,i,o,Va);Pe.push(["A",xt,xt,0,Oi(qn,Va),1,Jr.x,Jr.y])}var Yn=un(fe.cy+fe.y1,fe.cx+fe.x1),mt=un(We.cy+We.y1,We.cx+We.x1),ei=Lr(n,i,o,mt);if(Pe.push(["A",o,o,0,Oi(Yn,mt),1,ei.x,ei.y]),In>0){var _n=un(We.y1,We.x1),Or=un(We.y0,We.x0);Pe.push(["A",In,In,0,Oi(_n,Or),1,n+We.cx+We.x0,i+We.cy+We.y0])}}}else Pe.push(["M",c.x,c.y]),Pe.push(["A",o,o,0,ct,1,u.x,u.y]);if(A<co)Pe.push(["L",d.x,d.y]);else if(W>co){var ti=ii(O,W),kn=ii(T,W),Ht=Vc(w,B,0,0,A-o,kn),Gt=Vc(0,0,x,S,A-o,ti);if(Pe.push(["L",n+Ht.cx+Ht.x0,i+Ht.cy+Ht.y0]),W<j&&ti===kn){var _f=un(Ht.y0,Ht.x0),Jo=un(Gt.y0,Gt.x0),Ir=Lr(n,i,A,Jo);Pe.push(["A",X,X,0,Oi(_f,Jo),1,Ir.x,Ir.y])}else{if(kn>0){var Fi=un(Ht.y0,Ht.x0),cb=un(Ht.y1,Ht.x1),ub=Lr(n,i,A-o,cb);Pe.push(["A",kn,kn,0,Oi(Fi,cb),1,ub.x,ub.y])}var RU=un(Ht.cy+Ht.y1,Ht.cx+Ht.x1),hb=un(Gt.cy+Gt.y1,Gt.cx+Gt.x1),Vl=Lr(n,i,A,hb);if(Pe.push(["A",A,A,0,Oi(hb,RU),0,Vl.x,Vl.y]),Pe.push(["L",Vl.x,Vl.y]),ti>0){var DU=un(Gt.y1,Gt.x1),HU=un(Gt.y0,Gt.x0);Pe.push(["A",ti,ti,0,Oi(DU,HU),1,n+Gt.cx+Gt.x0,i+Gt.cy+Gt.y0])}}}else Pe.push(["L",d.x,d.y]),Pe.push(["A",A,A,0,ct,0,h.x,h.y]);return Pe.push(["Z"]),Pe}}}])}(wn);Kz.PARSED_STYLE_LIST=new Set([].concat(Fe(wn.PARSED_STYLE_LIST),["x","y","sr","sr0","radius","startAngle","endAngle"]));const zz={duration:500},Vz={duration:1e3,easing:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",iterations:1,fill:"both"};var st;(function(r){r.NodeAdded="NodeAdded",r.NodeUpdated="NodeUpdated",r.NodeRemoved="NodeRemoved",r.EdgeAdded="EdgeAdded",r.EdgeUpdated="EdgeUpdated",r.EdgeRemoved="EdgeRemoved",r.ComboAdded="ComboAdded",r.ComboUpdated="ComboUpdated",r.ComboRemoved="ComboRemoved"})(st||(st={}));var Un;(function(r){r.DRAW="draw",r.COLLAPSE="collapse",r.EXPAND="expand",r.TRANSFORM="transform"})(Un||(Un={}));var zr;(function(r){r.CLICK="canvas:click",r.DBLCLICK="canvas:dblclick",r.POINTER_OVER="canvas:pointerover",r.POINTER_LEAVE="canvas:pointerleave",r.POINTER_ENTER="canvas:pointerenter",r.POINTER_MOVE="canvas:pointermove",r.POINTER_OUT="canvas:pointerout",r.POINTER_DOWN="canvas:pointerdown",r.POINTER_UP="canvas:pointerup",r.CONTEXT_MENU="canvas:contextmenu",r.DRAG_START="canvas:dragstart",r.DRAG="canvas:drag",r.DRAG_END="canvas:dragend",r.DRAG_ENTER="canvas:dragenter",r.DRAG_OVER="canvas:dragover",r.DRAG_LEAVE="canvas:dragleave",r.DROP="canvas:drop",r.WHEEL="canvas:wheel"})(zr||(zr={}));var ls;(function(r){r.CLICK="combo:click",r.DBLCLICK="combo:dblclick",r.POINTER_OVER="combo:pointerover",r.POINTER_LEAVE="combo:pointerleave",r.POINTER_ENTER="combo:pointerenter",r.POINTER_MOVE="combo:pointermove",r.POINTER_OUT="combo:pointerout",r.POINTER_DOWN="combo:pointerdown",r.POINTER_UP="combo:pointerup",r.CONTEXT_MENU="combo:contextmenu",r.DRAG_START="combo:dragstart",r.DRAG="combo:drag",r.DRAG_END="combo:dragend",r.DRAG_ENTER="combo:dragenter",r.DRAG_OVER="combo:dragover",r.DRAG_LEAVE="combo:dragleave",r.DROP="combo:drop"})(ls||(ls={}));var R;(function(r){r.CLICK="click",r.DBLCLICK="dblclick",r.POINTER_OVER="pointerover",r.POINTER_LEAVE="pointerleave",r.POINTER_ENTER="pointerenter",r.POINTER_MOVE="pointermove",r.POINTER_OUT="pointerout",r.POINTER_DOWN="pointerdown",r.POINTER_UP="pointerup",r.CONTEXT_MENU="contextmenu",r.DRAG_START="dragstart",r.DRAG="drag",r.DRAG_END="dragend",r.DRAG_ENTER="dragenter",r.DRAG_OVER="dragover",r.DRAG_LEAVE="dragleave",r.DROP="drop",r.KEY_DOWN="keydown",r.KEY_UP="keyup",r.WHEEL="wheel",r.PINCH="pinch"})(R||(R={}));var po;(function(r){r.KEY_DOWN="keydown",r.KEY_UP="keyup"})(po||(po={}));var Qo;(function(r){r.CLICK="edge:click",r.DBLCLICK="edge:dblclick",r.POINTER_OVER="edge:pointerover",r.POINTER_LEAVE="edge:pointerleave",r.POINTER_ENTER="edge:pointerenter",r.POINTER_MOVE="edge:pointermove",r.POINTER_OUT="edge:pointerout",r.POINTER_DOWN="edge:pointerdown",r.POINTER_UP="edge:pointerup",r.CONTEXT_MENU="edge:contextmenu",r.DRAG_ENTER="edge:dragenter",r.DRAG_OVER="edge:dragover",r.DRAG_LEAVE="edge:dragleave",r.DROP="edge:drop"})(Qo||(Qo={}));var V;(function(r){r.BEFORE_CANVAS_INIT="beforecanvasinit",r.AFTER_CANVAS_INIT="aftercanvasinit",r.BEFORE_SIZE_CHANGE="beforesizechange",r.AFTER_SIZE_CHANGE="aftersizechange",r.BEFORE_ELEMENT_CREATE="beforeelementcreate",r.AFTER_ELEMENT_CREATE="afterelementcreate",r.BEFORE_ELEMENT_UPDATE="beforeelementupdate",r.AFTER_ELEMENT_UPDATE="afterelementupdate",r.BEFORE_ELEMENT_DESTROY="beforeelementdestroy",r.AFTER_ELEMENT_DESTROY="afterelementdestroy",r.BEFORE_ELEMENT_TRANSLATE="beforeelementtranslate",r.AFTER_ELEMENT_TRANSLATE="afterelementtranslate",r.BEFORE_DRAW="beforedraw",r.AFTER_DRAW="afterdraw",r.BEFORE_RENDER="beforerender",r.AFTER_RENDER="afterrender",r.BEFORE_ANIMATE="beforeanimate",r.AFTER_ANIMATE="afteranimate",r.BEFORE_LAYOUT="beforelayout",r.AFTER_LAYOUT="afterlayout",r.BEFORE_STAGE_LAYOUT="beforestagelayout",r.AFTER_STAGE_LAYOUT="afterstagelayout",r.BEFORE_TRANSFORM="beforetransform",r.AFTER_TRANSFORM="aftertransform",r.BATCH_START="batchstart",r.BATCH_END="batchend",r.BEFORE_DESTROY="beforedestroy",r.AFTER_DESTROY="afterdestroy",r.BEFORE_RENDERER_CHANGE="beforerendererchange",r.AFTER_RENDERER_CHANGE="afterrendererchange"})(V||(V={}));var la;(function(r){r.UNDO="undo",r.REDO="redo",r.CANCEL="cancel",r.ADD="add",r.CLEAR="clear",r.CHANGE="change"})(la||(la={}));var Sn;(function(r){r.CLICK="node:click",r.DBLCLICK="node:dblclick",r.POINTER_OVER="node:pointerover",r.POINTER_LEAVE="node:pointerleave",r.POINTER_ENTER="node:pointerenter",r.POINTER_MOVE="node:pointermove",r.POINTER_OUT="node:pointerout",r.POINTER_DOWN="node:pointerdown",r.POINTER_UP="node:pointerup",r.CONTEXT_MENU="node:contextmenu",r.DRAG_START="node:dragstart",r.DRAG="node:drag",r.DRAG_END="node:dragend",r.DRAG_ENTER="node:dragenter",r.DRAG_OVER="node:dragover",r.DRAG_LEAVE="node:dragleave",r.DROP="node:drop"})(Sn||(Sn={}));const qe="combo",ir="tree";var sl;(function(r){r.NODE="node",r.EDGE="edge",r.COMBO="combo",r.THEME="theme",r.PALETTE="palette",r.LAYOUT="layout",r.BEHAVIOR="behavior",r.PLUGIN="plugin",r.ANIMATION="animation",r.TRANSFORM="transform",r.SHAPE="shape"})(sl||(sl={}));const D1={animation:{},behavior:{},combo:{},edge:{},layout:{},node:{},palette:{},theme:{},plugin:{},transform:{},shape:{}};function Vi(r,e){var t;const n=(t=D1[r])===null||t===void 0?void 0:t[e];if(n)return n}const jz="5.0.51",$z="G6";function Di(r){return`[${$z} v${jz}] ${r}`}const Ei={mute:!1,debug:r=>{console.debug(Di(r))},info:r=>{console.info(Di(r))},warn:r=>{console.warn(Di(r))},error:r=>{console.error(Di(r))}};function Fk(r){const{theme:e}=r;if(!e)return{};const t=Vi(sl.THEME,e);return t||(Ei.warn(`The theme of ${e} is not registered.`),{})}function tB(r,e){if(Array.isArray(r)&&r.length===0)return null;const t=Array.isArray(r)?r[0]:r,n=Array.isArray(r)?r.slice(1):e||[];return new Proxy(t,{get(i,a){return typeof i[a]=="function"&&!["onframe","onfinish"].includes(a)?(...s)=>{i[a](...s),n.forEach(o=>{var A;return(A=o[a])===null||A===void 0?void 0:A.call(o,...s)})}:a==="finished"?Promise.all([t.finished,...n.map(s=>s.finished)]):Reflect.get(i,a)},set(i,a,s){return["onframe","onfinish"].includes(a)||n.forEach(o=>{o[a]=s}),Reflect.set(i,a,s)}})}function H1(r){const e=r.reduce((n,i)=>(Object.entries(i).forEach(([a,s])=>{n[a]===void 0?n[a]=[s]:n[a].push(s)}),n),{});Object.entries(e).forEach(([n,i])=>{(i.length!==r.length||i.some(a=>le(a))||i.every(a=>!["sourceNode","targetNode","childrenNode"].includes(n)&&pt(a,i[0])))&&delete e[n]});const t=Object.entries(e).reduce((n,[i,a])=>(a.forEach((s,o)=>{n[o]?n[o][i]=s:n[o]={[i]:s}}),n),[]);return r.length!==0&&t.length===0&&t.push({_:0},{_:0}),t}function ol(r){switch(r){case"opacity":return 1;case"x":case"y":case"z":case"zIndex":return 0;case"visibility":return"visible";case"collapsed":return!1;case"states":return[];default:return}}function Tk(r,e){const{animation:t}=r;if(t===!1||e===!1)return!1;const n=Object.assign({},zz);return Ot(t)&&Object.assign(n,t),Ot(e)&&Object.assign(n,e),n}function Wz(r){if(typeof r=="string"){const e=Vi(sl.ANIMATION,r);return e||(Ei.warn(`The animation of ${r} is not registered.`),[])}return r}function qz(r,e,t,n){var i,a;const{animation:s}=r;if(s===!1||n===!1)return[];const o=(i=r==null?void 0:r[e])===null||i===void 0?void 0:i.animation;if(o===!1)return[];const A=o==null?void 0:o[t];if(A===!1)return[];const l=(a=Fk(r)[e])===null||a===void 0?void 0:a.animation,c=(h=[])=>Wz(h).map(d=>Object.assign(Object.assign(Object.assign(Object.assign({},Vz),Ot(s)&&s),d),Ot(n)&&n));if(A)return c(A);if(!l)return[];const u=l[t];return u===!1?[]:c(u)}function Mk(r,e,t,n=[]){if(!n&&r===0&&e===0&&t===0)return null;if(Array.isArray(n)){let a=-1;const s=[];for(let o=0;o<n.length;o++){const A=n[o];if(A[0]==="translate"){if(A[1]===r&&A[2]===e)return null;a=o,s.push(["translate",r,e])}else if(A[0]==="translate3d"){if(A[1]===r&&A[2]===e&&A[3]===t)return null;a=o,s.push(["translate3d",r,e,t??0])}else s.push(A)}return a===-1&&s.splice(0,0,Z(t)?["translate3d",r,e,t??0]:["translate",r,e]),s.length===0?null:s}const i=n?n.replace(/translate(3d)?\([^)]*\)/g,""):"";return t===0?`translate(${r}, ${e})${i}`:`translate3d(${r}, ${e}, ${t})${i}`}var Yz=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const Xz=(r,e,t)=>{if(!t.length)return null;const[n,i]=e,a=l=>{var c;if(l){const u=r.getShape(l);if(!u)return null;const h=`get${$u(l)}Style`,d=((c=r==null?void 0:r[h])===null||c===void 0?void 0:c.bind(r))||(v=>v),f=(d==null?void 0:d(n))||{},g=(d==null?void 0:d(i))||{};return{shape:u,fromStyle:f,toStyle:g}}else return{shape:r,fromStyle:n,toStyle:i}};let s;const o=t.map(l=>{var{fields:c,shape:u,states:h}=l,d=Yz(l,["fields","shape","states"]);const f=a(u);if(!f)return null;const{shape:g,fromStyle:v,toStyle:p}=f,y=[{},{}];if(c.forEach(w=>{var B,b;Object.assign(y[0],{[w]:(B=v[w])!==null&&B!==void 0?B:ol(w)}),Object.assign(y[1],{[w]:(b=p[w])!==null&&b!==void 0?b:ol(w)})}),y.some(w=>Object.keys(w).some(B=>["x","y","z"].includes(B)))){const{x:w=0,y:B=0,z:b,transform:E=""}=g.attributes||{};y.forEach(x=>{var S,C,F;x.transform=Mk((S=x.x)!==null&&S!==void 0?S:w,(C=x.y)!==null&&C!==void 0?C:B,(F=x.z)!==null&&F!==void 0?F:b,E)})}const m=g.animate(H1(y),d);return u===void 0&&(s=m),m}).filter(Boolean),A=s||(o==null?void 0:o[0]);return A?tB(A,o.filter(l=>l!==l)):null},Zz=[{fields:["opacity"]}],Jz=[{fields:["x","y"]}],Ok=[{fields:["x","y"]}],eV=Ok,Ik=[{fields:["sourceNode","targetNode"]}],tV=Ik,_k=[{fields:["childrenNode","x","y"]}],nV=_k;function rV(r){return"source"in r&&"target"in r}function iV(r){return r.length===2}function No(r){return r instanceof Float32Array?!0:Array.isArray(r)&&(r.length===2||r.length===3)?r.every(e=>typeof e=="number"):!1}function mi(r,e,t){return r>=e&&r<=t}function Sr(r=0){if(Array.isArray(r)){const[e=0,t=e,n=e,i=t]=r;return[e,t,n,i]}return[r,r,r,r]}function aV(r=0){const e=Sr(r);return e[0]+e[2]}function xi(r){return r.max[0]-r.min[0]}function Ci(r){return r.max[1]-r.min[1]}function Ra(r){return[xi(r),Ci(r)]}function ya(r,e){const t=No(r)?nB(r):r.getShape("key").getBounds();return e?Da(t,e):t}function nB(r){const[e,t,n=0]=r,i=new tt;return i.setMinMax([e,t,n],[e,t,n]),i}function Da(r,e){const[t,n,i,a]=Sr(e),[s,o,A]=r.min,[l,c,u]=r.max,h=new tt;return h.setMinMax([s-a,o-t,A],[l+n,c+i,u]),h}function Ml(r){if(r.length===0)return new tt;if(r.length===1)return r[0];const e=new tt;e.setMinMax(r[0].min,r[0].max);for(let t=1;t<r.length;t++){const n=r[t];e.setMinMax([Math.min(e.min[0],n.min[0]),Math.min(e.min[1],n.min[1]),Math.min(e.min[2],n.min[2])],[Math.max(e.max[0],n.max[0]),Math.max(e.max[1],n.max[1]),Math.max(e.max[2],n.max[2])])}return e}function sV(r,e){const[t,n]=r.min,[i,a]=r.max,[s,o]=e.min,[A,l]=e.max;return t>=s&&i<=A&&n>=o&&a<=l}function Vr(r,e){return mi(r[0],e.min[0],e.max[0])&&mi(r[1],e.min[1],e.max[1])}function kk(r,e,t=!1){const{min:[n,i],max:[a,s]}=e,o=(r[1]===i||r[1]===s)&&(t||mi(r[0],n,a)),A=(r[0]===n||r[0]===a)&&(t||mi(r[1],i,s));return o||A}function oV(r,e){return!Vr(r,e)}function fh(r,e){const{center:t}=e;return r[0]===t[0]&&r[1]===t[1]}function jA(r,e){const[t,n]=r,[i,a]=e.min,[s,o]=e.max,A=t-i,l=s-t,c=n-a,u=o-n,h=Math.min(A,l,c,u);return h===A?"left":h===l?"right":h===c?"top":h===u?"bottom":"left"}function ps(r,e){const t=_a(r);if(Vr(r,e))switch(jA(r,e)){case"left":t[0]=e.min[0];break;case"right":t[0]=e.max[0];break;case"top":t[1]=e.min[1];break;case"bottom":t[1]=e.max[1];break}else{const[n,i]=r,[a,s]=e.min,[o,A]=e.max;t[0]=mi(n,a,o)?n:n<a?a:o,t[1]=mi(i,s,A)?i:i<s?s:A}return t}function AV(r,e){const{center:t}=r,[n,i]=Ra(r),a=e==="up"||e==="down"?t[0]:e==="right"?t[0]-n/6:t[0]+n/6,s=e==="left"||e==="right"?t[1]:e==="down"?t[1]-i/6:t[1]+i/6;return[a,s]}function lV(r,e){let[t,n]=Ra(r);return[t,n]=e==="up"||e==="down"?[t,n]:[n,t],(Math.pow(n,2)-Math.pow(Math.sqrt(Math.pow(t/2,2)+Math.pow(n,2))-t/2,2))/(2*n)}function cV(r){const{min:[e,t],max:[n,i]}=r,a=[e,i],s=[n,i],o=[n,t],A=[e,t];return[[a,s],[s,o],[o,A],[A,a]]}var uV=function(e,t){return e===t},dx=function(){function r(e,t){t===void 0&&(t=null),this.value=e,this.next=t}return r.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},r}(),hV=function(){function r(e){e===void 0&&(e=uV),this.head=null,this.tail=null,this.compare=e}return r.prototype.prepend=function(e){var t=new dx(e,this.head);return this.head=t,this.tail||(this.tail=t),this},r.prototype.append=function(e){var t=new dx(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},r.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var n=this.head;if(n!==null)for(;n.next;)this.compare(n.next.value,e)?(t=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,e)&&(this.tail=n),t},r.prototype.find=function(e){var t=e.value,n=t===void 0?void 0:t,i=e.callback,a=i===void 0?void 0:i;if(!this.head)return null;for(var s=this.head;s;){if(a&&a(s.value)||n!==void 0&&this.compare(s.value,n))return s;s=s.next}return null},r.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},r.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},r.prototype.fromArray=function(e){var t=this;return e.forEach(function(n){return t.append(n)}),this},r.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},r.prototype.reverse=function(){for(var e=this.head,t=null,n=null;e;)n=e.next,e.next=t,t=e,e=n;this.tail=this.head,this.head=t},r.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(t){return t.toString(e)}).toString()},r}(),dV=function(e,t,n){t===void 0&&(t=[]);var i=t.filter(function(A){return A.source===e||A.target===e});if(n==="target"){var a=function(l){return l.source===e};return i.filter(a).map(function(A){return A.target})}if(n==="source"){var s=function(l){return l.target===e};return i.filter(s).map(function(A){return A.source})}var o=function(l){return l.source===e?l.target:l.source};return i.map(o)},fV=function(e,t){return t.filter(function(n){return n.source===e})},gV=function(e,t){return t.filter(function(n){return n.source===e||n.target===e})},vV=function(e){var t={},n=e.nodes,i=n===void 0?[]:n,a=e.edges,s=a===void 0?[]:a;return i.forEach(function(o){t[o.id]={degree:0,inDegree:0,outDegree:0}}),s.forEach(function(o){t[o.source].degree++,t[o.source].outDegree++,t[o.target].degree++,t[o.target].inDegree++}),t},pV={}.toString,rB=function(r,e){return pV.call(r)==="[object "+e+"]"};const Lk=function(r){return rB(r,"Function")},Qk=function(r){return Array.isArray?Array.isArray(r):rB(r,"Array")},yV=function(r){var e=typeof r;return r!==null&&e==="object"||e==="function"};function mV(r,e){if(r){var t;if(Qk(r))for(var n=0,i=r.length;n<i&&(t=e(r[n],n),t!==!1);n++);else if(yV(r)){for(var a in r)if(r.hasOwnProperty(a)&&(t=e(r[a],a),t===!1))break}}}const wV=function(r){return rB(r,"String")};var BV=Object.values?function(r){return Object.values(r)}:function(r){var e=[];return mV(r,function(t,n){Lk(r)&&n==="prototype"||e.push(t)}),e};const bV=function(r,e){if(!Lk(r))throw new TypeError("Expected a function");var t=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=e?e.apply(this,n):n[0],s=t.cache;if(s.has(a))return s.get(a);var o=r.apply(this,n);return s.set(a,o),o};return t.cache=new Map,t};var jc;bV(function(r,e){e===void 0&&(e={});var t=e.fontSize,n=e.fontFamily,i=e.fontWeight,a=e.fontStyle,s=e.fontVariant;return jc||(jc=document.createElement("canvas").getContext("2d")),jc.font=[a,s,i,t+"px",n].join(" "),jc.measureText(wV(r)?r:"").width},function(r,e){return e===void 0&&(e={}),fR([r],BV(e)).join("")});var EV=function(e,t,n){for(var i=1/0,a,s=0;s<t.length;s++){var o=t[s].id;!n[o]&&e[o]<=i&&(i=e[o],a=t[s])}return a},xV=function(e,t,n,i){var a=e.nodes,s=a===void 0?[]:a,o=e.edges,A=o===void 0?[]:o,l={},c={},u={};s.forEach(function(y,m){var w=y.id;c[w]=1/0,w===t&&(c[w]=0)});for(var h=s.length,d=function(m){var w=EV(c,s,l),B=w.id;if(l[B]=!0,c[B]===1/0)return"continue";var b=[];n?b=fV(B,A):b=gV(B,A),b.forEach(function(E){var x=E.target,S=E.source,C=x===B?S:x,F=i&&E[i]?E[i]:1;c[C]>c[w.id]+F?(c[C]=c[w.id]+F,u[C]=[w.id]):c[C]===c[w.id]+F&&u[C].push(w.id)})},f=0;f<h;f++)d();u[t]=[t];var g={};for(var v in c)c[v]!==1/0&&Nk(t,v,u,g);var p={};for(var v in g)p[v]=g[v][0];return{length:c,path:p,allPath:g}};function Nk(r,e,t,n){if(r===e)return[r];if(n[e])return n[e];for(var i=[],a=0,s=t[e];a<s.length;a++){var o=s[a],A=Nk(r,o,t,n);if(!A)return;for(var l=0,c=A;l<c.length;l++){var u=c[l];Qk(u)?i.push(oe(oe([],u,!0),[e],!1)):i.push([u,e])}}return n[e]=i,n[e]}var Uk=function(e,t,n,i,a){var s=xV(e,t,i,a),o=s.length,A=s.path,l=s.allPath;return{length:o[n],path:A[n],allPath:l[n]}},fx;(function(r){r.EuclideanDistance="euclideanDistance"})(fx||(fx={}));var CV=function(e,t,n){typeof t!="number"&&(t=1e-6),typeof n!="number"&&(n=.85);for(var i=1,a=0,s=1e3,o=e.nodes,A=o===void 0?[]:o,l=e.edges,c=l===void 0?[]:l,u=A.length,h,d={},f={},g=0;g<u;++g){var v=A[g],p=v.id;d[p]=1/u,f[p]=1/u}for(var y=vV(e);s>0&&i>t;){a=0;for(var g=0;g<u;++g){var v=A[g],p=v.id;if(h=0,y[v.id].inDegree===0)d[p]=0;else{for(var m=dV(p,c,"source"),w=0;w<m.length;++w){var B=m[w],b=y[B].outDegree;b>0&&(h+=f[B]/b)}d[p]=n*h,a+=d[p]}}a=(1-a)/u,i=0;for(var g=0;g<u;++g){var v=A[g],p=v.id;h=d[p]+a,i+=Math.abs(h-f[p]),f[p]=h}s-=1}return f};(function(){function r(e){e===void 0&&(e=10),this.linkedList=new hV,this.maxStep=e}return Object.defineProperty(r.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),r.prototype.isEmpty=function(){return!this.linkedList.head},r.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},r.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},r.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},r.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},r.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},r.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},r})();function N(r){if(r.id!==void 0)return r.id;if(r.source!==void 0&&r.target!==void 0)return`${r.source}-${r.target}`;throw new Error(Di("The datum does not have available id."))}function $c(r){return r.combo}function Pk(r,e){const t={nodes:(r.nodes||[]).map(N),edges:(r.edges||[]).map(N),combos:(r.combos||[]).map(N)};return e?Object.values(t).flat():t}const Rk=(r,e,t)=>{var n;switch(t.type){case"degree":{const i=new Map;return(n=r.nodes)===null||n===void 0||n.forEach(a=>{const s=e(N(a),t.direction).length;i.set(N(a),s)}),i}case"betweenness":return SV(r,t.directed,t.weightPropertyName);case"closeness":return FV(r,t.directed,t.weightPropertyName);case"eigenvector":return MV(r,t.directed);case"pagerank":return TV(r,t.epsilon,t.linkProb);default:return Dk(r)}},Dk=r=>{var e;const t=new Map;return(e=r.nodes)===null||e===void 0||e.forEach(n=>{t.set(N(n),0)}),t},SV=(r,e,t)=>{const n=Dk(r),{nodes:i=[]}=r;return i.forEach(a=>{i.forEach(s=>{if(a!==s){const{allPath:o}=Uk(r,N(a),N(s),e,t),A=o.length;o.flat().forEach(l=>{l!==N(a)&&l!==N(s)&&n.set(l,n.get(l)+1/A)})}})}),n},FV=(r,e,t)=>{const n=new Map,{nodes:i=[]}=r;return i.forEach(a=>{const s=i.reduce((o,A)=>{if(a!==A){const{length:l}=Uk(r,N(a),N(A),e,t);o+=l}return o},0);n.set(N(a),1/s)}),n},TV=(r,e,t)=>{var n;const i=new Map,a=CV(r,e,t);return(n=r.nodes)===null||n===void 0||n.forEach(s=>{i.set(N(s),a[N(s)])}),i},MV=(r,e)=>{const{nodes:t=[]}=r,n=OV(r,e),i=IV(n,t.length),a=new Map;return t.forEach((s,o)=>{a.set(N(s),i[o])}),a},OV=(r,e)=>{const{nodes:t=[],edges:n=[]}=r,i=Array(t.length).fill(null).map(()=>Array(t.length).fill(0));return n.forEach(({source:a,target:s})=>{const o=t.findIndex(l=>N(l)===a),A=t.findIndex(l=>N(l)===s);e?i[o][A]=1:(i[o][A]=1,i[A][o]=1)}),i},IV=(r,e,t=100,n=1e-6)=>{let i=Array(e).fill(1),a=1/0;for(let s=0;s<t&&a>n;s++){const o=Array(e).fill(0);for(let l=0;l<e;l++)for(let c=0;c<e;c++)o[l]+=r[l][c]*i[c];const A=Math.sqrt(o.reduce((l,c)=>l+c*c,0));for(let l=0;l<e;l++)o[l]/=A;a=Math.sqrt(o.reduce((l,c,u)=>l+(c-i[u])*c,0)),i=o}return i};function Fa(r,e,t,n=pt){const i=new Map(r.map(h=>[t(h),h])),a=new Map(e.map(h=>[t(h),h])),s=new Set(i.keys()),o=new Set(a.keys()),A=[],l=[],c=[],u=[];return o.forEach(h=>{s.has(h)?n(i.get(h),a.get(h))?u.push(a.get(h)):l.push(a.get(h)):A.push(a.get(h))}),s.forEach(h=>{o.has(h)||c.push(i.get(h))}),{enter:A,exit:c,keep:u,update:l}}function Ts(r,e,t){const n=i=>{t&&!t(i)||(i.style.visibility=e)};r.forEach(i=>{n(i)})}function _V(r,e,t){const n={},i=a=>(a in n||(n[a]=0),`${e}-${a}-${n[a]++}`);return t.map(a=>typeof a=="string"?{type:a,key:i(a)}:typeof a=="function"?a.call(r):a.key?a:Object.assign(Object.assign({},a),{key:i(a.type)}))}class iB{constructor(e){this.extensions=[],this.extensionMap={},this.context=e}setExtensions(e){const t=_V(this.context.graph,this.category,e),{enter:n,update:i,exit:a,keep:s}=Fa(this.extensions,t,o=>o.key);this.createExtensions(n),this.updateExtensions([...i,...s]),this.destroyExtensions(a),this.extensions=t}createExtension(e){const{category:t}=this,{key:n,type:i}=e,a=Vi(t,i);if(!a)return Ei.warn(`The extension ${i} of ${t} is not registered.`);const s=new a(this.context,e);s.initialized=!0,this.extensionMap[n]=s}createExtensions(e){e.forEach(t=>this.createExtension(t))}updateExtension(e){const{key:t}=e,n=this.extensionMap[t];n&&n.update(e)}updateExtensions(e){e.forEach(t=>this.updateExtension(t))}destroyExtension(e){const t=this.extensionMap[e];t&&(t.initialized&&!t.destroyed&&t.destroy(),delete this.extensionMap[e])}destroyExtensions(e){e.forEach(({key:t})=>this.destroyExtension(t))}destroy(){this.destroyExtensions(this.extensions),this.context={},this.extensions=[],this.extensionMap={}}}class aB{constructor(e,t){this.events=[],this.initialized=!1,this.destroyed=!1,this.context=e,this.options=t}update(e){this.options=Object.assign(this.options,e)}destroy(){this.context={},this.options={},this.destroyed=!0}}class ur extends aB{}class td extends ur{constructor(e,t){super(e,Object.assign({},td.defaultOptions,t)),this.isOverlapping=(n,i)=>i.some(a=>n.intersects(a)),this.occupiedBounds=[],this.detectLabelCollision=n=>{const i=this.context.viewport,a={show:[],hide:[]};return this.occupiedBounds=[],n.forEach(s=>{const o=s.getShape("label").getRenderBounds();i.isInViewport(o,!0)&&!this.isOverlapping(o,this.occupiedBounds)?(a.show.push(s),this.occupiedBounds.push(Da(o,this.options.padding))):a.hide.push(s)}),a},this.hideLabelIfExceedViewport=(n,i)=>{const{exit:a}=Fa(n,i,s=>s.id);a==null||a.forEach(this.hideLabel)},this.nodeCentralities=new Map,this.sortNodesByCentrality=(n,i)=>{const{model:a}=this.context,s=a.getData(),o=a.getRelatedEdgesData.bind(a);return n.map(l=>(this.nodeCentralities.has(l.id)||(this.nodeCentralities=Rk(s,o,i)),{node:l,centrality:this.nodeCentralities.get(l.id)})).sort((l,c)=>c.centrality-l.centrality).map(l=>l.node)},this.sortLabelElementsInView=n=>{const{sort:i,sortNode:a,sortCombo:s,sortEdge:o}=this.options,{model:A}=this.context;if(ie(i))return n.sort((g,v)=>i(A.getElementDataById(g.id),A.getElementDataById(v.id)));const{node:l=[],edge:c=[],combo:u=[]}=Ph(n,g=>g.type),h=ie(s)?u.sort((g,v)=>s(...A.getComboData([g.id,v.id]))):u,d=ie(a)?l.sort((g,v)=>a(...A.getNodeData([g.id,v.id]))):this.sortNodesByCentrality(l,a),f=ie(o)?c.sort((g,v)=>o(...A.getEdgeData([g.id,v.id]))):c;return[...h,...d,...f]},this.labelElementsInView=[],this.isFirstRender=!0,this.onToggleVisibility=n=>{var i;if(((i=n.data)===null||i===void 0?void 0:i.stage)==="zIndex")return;if(!this.validate(n)){this.hiddenElements.size>0&&(this.hiddenElements.forEach(this.showLabel),this.hiddenElements.clear());return}const a=this.isFirstRender?this.getLabelElements():this.getLabelElementsInView();this.hideLabelIfExceedViewport(this.labelElementsInView,a),this.labelElementsInView=a;const s=this.sortLabelElementsInView(this.labelElementsInView),{show:o,hide:A}=this.detectLabelCollision(s);for(let l=o.length-1;l>=0;l--)this.showLabel(o[l]);A.forEach(this.hideLabel)},this.hiddenElements=new Map,this.hideLabel=n=>{const i=n.getShape("label");i&&Ts(i,"hidden"),this.hiddenElements.set(n.id,n)},this.showLabel=n=>{const i=n.getShape("label");i&&Ts(i,"visible"),n.toFront(),this.hiddenElements.delete(n.id)},this.onTransform=EI(this.onToggleVisibility,this.options.throttle,{leading:!0}),this.enableToggle=!0,this.toggle=n=>{this.enableToggle&&this.onToggleVisibility(n)},this.onBeforeRender=()=>{this.enableToggle=!1},this.onAfterRender=n=>{this.onToggleVisibility(n),this.enableToggle=!0},this.bindEvents()}update(e){this.unbindEvents(),super.update(e),this.bindEvents(),this.onToggleVisibility({})}getLabelElements(){const{elementMap:e}=this.context.element,t=[];for(const n in e){const i=e[n];i.isVisible()&&i.getShape("label")&&t.push(i)}return t}getLabelElementsInView(){const e=this.context.viewport;return this.getLabelElements().filter(t=>e.isInViewport(t.getShape("key").getRenderBounds()))}bindEvents(){const{graph:e}=this.context;e.on(V.BEFORE_RENDER,this.onBeforeRender),e.on(V.AFTER_RENDER,this.onAfterRender),e.on(V.AFTER_DRAW,this.toggle),e.on(V.AFTER_LAYOUT,this.toggle),e.on(V.AFTER_TRANSFORM,this.onTransform)}unbindEvents(){const{graph:e}=this.context;e.off(V.BEFORE_RENDER,this.onBeforeRender),e.off(V.AFTER_RENDER,this.onAfterRender),e.off(V.AFTER_DRAW,this.toggle),e.off(V.AFTER_LAYOUT,this.toggle),e.off(V.AFTER_TRANSFORM,this.onTransform)}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return ie(t)?t(e):!!t}destroy(){this.unbindEvents(),super.destroy()}}td.defaultOptions={enable:!0,throttle:100,padding:0,sortNode:{type:"degree"}};const gx=[0,0,0];function ve(r,e){return r.map((t,n)=>t+e[n])}function $e(r,e){return r.map((t,n)=>t-e[n])}function Dr(r,e){return typeof e=="number"?r.map(t=>t*e):r.map((t,n)=>t*e[n])}function jr(r,e){return typeof e=="number"?r.map(t=>t/e):r.map((t,n)=>t/e[n])}function kV(r,e){return r.reduce((t,n,i)=>t+n*e[i],0)}function LV(r,e){const t=Al(r),n=Al(e);return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function ma(r,e){return r.map(t=>t*e)}function rt(r,e){return Math.sqrt(r.reduce((t,n,i)=>t+Math.pow(n-e[i]||0,2),0))}function gh(r,e){return r.reduce((t,n,i)=>t+Math.abs(n-e[i]),0)}function zi(r){const e=r.reduce((t,n)=>t+Math.pow(n,2),0);return r.map(t=>t/Math.sqrt(e))}function sB(r,e,t=!1){const n=r[0]*e[1]-r[1]*e[0];let i=Math.acos(Dr(r,e).reduce((a,s)=>a+s,0)/(rt(r,gx)*rt(e,gx)));return t&&n<0&&(i=2*Math.PI-i),i}function nd(r,e=!0){return e?[-r[1],r[0]]:[r[1],-r[0]]}function xg(r,e){return r.map(t=>t%e)}function Ms(r){return[r[0],r[1]]}function Al(r){return iV(r)?[r[0],r[1],0]:r}function Hk(r){const[e,t]=r;return!e&&!t?0:Math.atan2(t,e)}function Gk(r,e){const[t,n]=r;if(e%360===0)return[t,n];const i=e*Math.PI/180,a=Math.cos(i),s=Math.sin(i);return[t*a-n*s,t*s+n*a]}function Kk(r,e){const[t,n]=r,[i,a]=e,s=$e(t,n),o=$e(i,a);return LV(s,o).every(A=>A===0)}function oB(r,e,t=!1){if(Kk(r,e))return;const[n,i]=r,[a,s]=e,o=((n[0]-a[0])*(a[1]-s[1])-(n[1]-a[1])*(a[0]-s[0]))/((n[0]-i[0])*(a[1]-s[1])-(n[1]-i[1])*(a[0]-s[0])),A=s[0]-a[0]?(n[0]-a[0]+o*(i[0]-n[0]))/(s[0]-a[0]):(n[1]-a[1]+o*(i[1]-n[1]))/(s[1]-a[1]);if(!(!t&&(!mi(o,0,1)||!mi(A,0,1))))return[n[0]+o*(i[0]-n[0]),n[1]+o*(i[1]-n[1])]}function zk(r){if(Array.isArray(r))return mi(r[0],0,1)&&mi(r[1],0,1)?r:[.5,.5];const e=r.split("-"),t=e.includes("left")?0:e.includes("right")?1:.5,n=e.includes("top")?0:e.includes("bottom")?1:.5;return[t,n]}function Vt(r){const{x:e=0,y:t=0,z:n=0}=r.style||{};return[+e,+t,+n]}function QV(r){const{x:e,y:t,z:n}=r.style||{};return e!==void 0||t!==void 0||n!==void 0}function NV(r,e){const[t,n]=e,{min:i,max:a}=r;return[i[0]+t*(a[0]-i[0]),i[1]+n*(a[1]-i[1])]}function Ni(r,e="center"){const t=zk(e);return NV(r,t)}function an(r){var e;return[r.x,r.y,(e=r.z)!==null&&e!==void 0?e:0]}function Hr(r){var e;return{x:r[0],y:r[1],z:(e=r[2])!==null&&e!==void 0?e:0}}function hA(r,e=0){return r.map(t=>parseFloat(t.toFixed(e)))}function Ta(r,e,t,n=!1){if(pt(r,e))return r;const i=n?$e(r,e):$e(e,r),a=zi(i),s=[a[0]*t,a[1]*t];return ve(Ms(r),s)}function Vk(r,e){return r[1]===e[1]}function UV(r,e){return r[0]===e[0]}function PV(r,e){return Vk(r,e)||UV(r,e)}function jk(r,e,t){return Kk([r,e],[e,t])}function $k(r,e){return[2*e[0]-r[0],2*e[1]-r[1]]}function Wk(r,e,t,n=!0,i=!1){for(let a=0;a<t.length;a++){let s=t[a],o=t[(a+1)%t.length];n&&(s=ve(e,s),o=ve(e,o));const A=i?$k(r,e):r,l=oB([e,A],[s,o]);if(l)return{point:l,line:[s,o]}}return{point:e,line:void 0}}function RV(r,e,t,n){const i=r[0],a=r[1];let s=!1;t===void 0&&(t=0),n===void 0&&(n=e.length);const o=n-t;for(let A=0,l=o-1;A<o;l=A++){const c=e[A+t][0],u=e[A+t][1],h=e[l+t][0],d=e[l+t][1];u>a!=d>a&&i<(h-c)*(a-u)/(d-u)+c&&(s=!s)}return s}function DV(r,e,t=!1){const n=Ni(e,"center"),i=[Ni(e,"left-top"),Ni(e,"right-top"),Ni(e,"right-bottom"),Ni(e,"left-bottom")];return Wk(r,n,i,!1,t).point}function rd(r,e,t=!1){const n=e.center,i=t?$k(r,n):r,a=$e(i,e.center),s=Math.atan2(a[1],a[0]);if(isNaN(s))return n;const o=xi(e)/2,A=Ci(e)/2,l=n[0]+o*Math.cos(s),c=n[1]+A*Math.sin(s);return[l,c]}function HV(r,e){let t=1/0,n=[r[0],e[0]];return r.forEach(i=>{e.forEach(a=>{const s=rt(i,a);s<t&&(t=s,n=[i,a])})}),n}function GV(r,e){let t=1/0,n=[[0,0],[0,0]];return e.forEach(i=>{const a=KV(r,i);a<t&&(t=a,n=i)}),n}function KV(r,e){const t=qk(r,e);return rt(r,t)}function qk(r,e){const[t,n]=e[0],[i,a]=e[1],[s,o]=r,A=i-t,l=a-n;if(A===0&&l===0)return[t,n];let c=((s-t)*A+(o-n)*l)/(A*A+l*l);c>1?c=1:c<0&&(c=0);const u=t+c*A,h=n+c*l;return[u,h]}function zV(r){const e=r.reduce((t,n)=>ve(t,n),[0,0]);return jr(e,r.length)}function AB(r,e=!0){const t=zV(r);return r.sort(([n,i],[a,s])=>{const o=Math.atan2(i-t[1],n-t[0]),A=Math.atan2(s-t[1],a-t[0]);return e?A-o:o-A})}function vx(r,e){return[r,[r[0],e[1]],e,[e[0],r[1]]]}class Tt{constructor(e,t,n){if(this.phase=t,this.pointerByTouch=[],this.initialDistance=null,this.emitter=e,Tt.instance)return Tt.callbacks[this.phase].push(n),Tt.instance;this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.bindEvents(),Tt.instance=this,Tt.callbacks[this.phase].push(n)}bindEvents(){const{emitter:e}=this;e.on(R.POINTER_DOWN,this.onPointerDown),e.on(R.POINTER_MOVE,this.onPointerMove),e.on(R.POINTER_UP,this.onPointerUp)}updatePointerPosition(e,t,n){const i=this.pointerByTouch.findIndex(a=>a.pointerId===e);i>=0&&(this.pointerByTouch[i]={x:t,y:n,pointerId:e})}onPointerDown(e){const{x:t,y:n}=e.client||{};if(!(t===void 0||n===void 0)&&(this.pointerByTouch.push({x:t,y:n,pointerId:e.pointerId}),e.pointerType==="touch"&&this.pointerByTouch.length===2)){Tt.isPinching=!0;const i=this.pointerByTouch[0].x-this.pointerByTouch[1].x,a=this.pointerByTouch[0].y-this.pointerByTouch[1].y;this.initialDistance=Math.sqrt(i*i+a*a),Tt.callbacks.pinchstart.forEach(s=>s(e,{scale:0}))}}onPointerMove(e){if(this.pointerByTouch.length!==2||this.initialDistance===null)return;const{x:t,y:n}=e.client||{};if(t===void 0||n===void 0)return;this.updatePointerPosition(e.pointerId,t,n);const i=this.pointerByTouch[0].x-this.pointerByTouch[1].x,a=this.pointerByTouch[0].y-this.pointerByTouch[1].y,o=Math.sqrt(i*i+a*a)/this.initialDistance;Tt.callbacks.pinchmove.forEach(A=>A(e,{scale:(o-1)*5}))}onPointerUp(e){var t;Tt.callbacks.pinchend.forEach(n=>n(e,{scale:0})),Tt.isPinching=!1,this.initialDistance=null,this.pointerByTouch=[],(t=Tt.instance)===null||t===void 0||t.tryDestroy()}destroy(){this.emitter.off(R.POINTER_DOWN,this.onPointerDown),this.emitter.off(R.POINTER_MOVE,this.onPointerMove),this.emitter.off(R.POINTER_UP,this.onPointerUp),Tt.instance=null}off(e,t){const n=Tt.callbacks[e].indexOf(t);n>-1&&Tt.callbacks[e].splice(n,1),this.tryDestroy()}tryDestroy(){Object.values(Tt.callbacks).every(e=>e.length===0)&&this.destroy()}}Tt.isPinching=!1;Tt.instance=null;Tt.callbacks={pinchstart:[],pinchmove:[],pinchend:[]};const px=r=>r.map(e=>_e(e)?e.toLocaleLowerCase():e);class Ha{constructor(e){this.map=new Map,this.boundHandlePinch=()=>{},this.recordKey=new Set,this.onKeyDown=t=>{t!=null&&t.key&&(this.recordKey.add(t.key),this.trigger(t))},this.onKeyUp=t=>{t!=null&&t.key&&this.recordKey.delete(t.key)},this.onWheel=t=>{this.triggerExtendKey(R.WHEEL,t)},this.onDrag=t=>{this.triggerExtendKey(R.DRAG,t)},this.handlePinch=(t,n)=>{this.triggerExtendKey(R.PINCH,Object.assign(Object.assign({},t),n))},this.onFocus=()=>{this.recordKey.clear()},this.emitter=e,this.bindEvents()}bind(e,t){e.length!==0&&(e.includes(R.PINCH)&&!this.pinchHandler&&(this.boundHandlePinch=this.handlePinch.bind(this),this.pinchHandler=new Tt(this.emitter,"pinchmove",this.boundHandlePinch)),this.map.set(e,t))}unbind(e,t){this.map.forEach((n,i)=>{pt(i,e)&&(!t||t===n)&&this.map.delete(i)})}unbindAll(){this.map.clear()}match(e){const t=px(Array.from(this.recordKey)).sort(),n=px(e).sort();return pt(t,n)}bindEvents(){var e;const{emitter:t}=this;t.on(R.KEY_DOWN,this.onKeyDown),t.on(R.KEY_UP,this.onKeyUp),t.on(R.WHEEL,this.onWheel),t.on(R.DRAG,this.onDrag),(e=globalThis.addEventListener)===null||e===void 0||e.call(globalThis,"focus",this.onFocus)}trigger(e){this.map.forEach((t,n)=>{this.match(n)&&t(e)})}triggerExtendKey(e,t){this.map.forEach((n,i)=>{i.includes(e)&&pt(Array.from(this.recordKey),i.filter(a=>a!==e))&&n(t)})}destroy(){var e,t;this.unbindAll(),this.emitter.off(R.KEY_DOWN,this.onKeyDown),this.emitter.off(R.KEY_UP,this.onKeyUp),this.emitter.off(R.WHEEL,this.onWheel),this.emitter.off(R.DRAG,this.onDrag),(e=this.pinchHandler)===null||e===void 0||e.off("pinchmove",this.boundHandlePinch),(t=globalThis.removeEventListener)===null||t===void 0||t.call(globalThis,"focus",this.onFocus)}}class Ol extends ur{constructor(e,t){super(e,on({},Ol.defaultOptions,t)),this.shortcut=new Ha(e.graph),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.clearStates=this.clearStates.bind(this),this.bindEvents()}onPointerDown(e){if(!this.validate(e)||!this.isKeydown()||this.startPoint)return;const{canvas:t,graph:n}=this.context,i=Object.assign({},this.options.style);this.options.style.lineWidth&&(i.lineWidth=+this.options.style.lineWidth/n.getZoom()),this.rectShape=new An({id:"g6-brush-select",style:i}),t.appendChild(this.rectShape),this.startPoint=[e.canvas.x,e.canvas.y]}onPointerMove(e){var t;if(!this.startPoint)return;const{immediately:n,mode:i}=this.options;this.endPoint=vh(e,this.context.graph),(t=this.rectShape)===null||t===void 0||t.attr({x:Math.min(this.endPoint[0],this.startPoint[0]),y:Math.min(this.endPoint[1],this.startPoint[1]),width:Math.abs(this.endPoint[0]-this.startPoint[0]),height:Math.abs(this.endPoint[1]-this.startPoint[1])}),n&&i==="default"&&this.updateElementsStates(vx(this.startPoint,this.endPoint))}onPointerUp(e){if(this.startPoint){if(!this.endPoint){this.clearBrush();return}this.endPoint=vh(e,this.context.graph),this.updateElementsStates(vx(this.startPoint,this.endPoint)),this.clearBrush()}}clearStates(){this.endPoint||this.clearElementsStates()}clearElementsStates(){const{graph:e}=this.context,t=Object.values(e.getData()).reduce((n,i)=>Object.assign({},n,i.reduce((a,s)=>{var o;const A=(o=s.states||[])===null||o===void 0?void 0:o.filter(l=>l!==this.options.state);return a[N(s)]=A,a},{})),{});e.setElementState(t,this.options.animation)}updateElementsStates(e){const{graph:t}=this.context,{enableElements:n,state:i,mode:a,onSelect:s}=this.options,o=this.selector(t,e,n),A={};switch(a){case"union":o.forEach(l=>{A[l]=[...t.getElementState(l),i]});break;case"diff":o.forEach(l=>{const c=t.getElementState(l);A[l]=c.includes(i)?c.filter(u=>u!==i):[...c,i]});break;case"intersect":o.forEach(l=>{const c=t.getElementState(l);A[l]=c.includes(i)?[i]:[]});break;case"default":default:o.forEach(l=>{A[l]=[i]});break}ie(s)&&s(A),t.setElementState(A,this.options.animation)}selector(e,t,n){if(!n||n.length===0)return[];const i=[],a=e.getData();if(n.forEach(s=>{a[`${s}s`].forEach(o=>{const A=N(o);e.getElementVisibility(A)!=="hidden"&&RV(e.getElementPosition(A),t)&&i.push(A)})}),n.includes("edge")){const s=a.edges;s==null||s.forEach(o=>{const{source:A,target:l}=o;i.includes(A)&&i.includes(l)&&i.push(N(o))})}return i}clearBrush(){var e;(e=this.rectShape)===null||e===void 0||e.remove(),this.rectShape=void 0,this.startPoint=void 0,this.endPoint=void 0}isKeydown(){const{trigger:e}=this.options,t=Array.isArray(e)?e:[e];return this.shortcut.match(t.filter(n=>n!=="drag"))}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return ie(t)?t(e):!!t}bindEvents(){const{graph:e}=this.context;e.on(R.POINTER_DOWN,this.onPointerDown),e.on(R.POINTER_MOVE,this.onPointerMove),e.on(R.POINTER_UP,this.onPointerUp),e.on(zr.CLICK,this.clearStates)}unbindEvents(){const{graph:e}=this.context;e.off(R.POINTER_DOWN,this.onPointerDown),e.off(R.POINTER_MOVE,this.onPointerMove),e.off(R.POINTER_UP,this.onPointerUp),e.off(zr.CLICK,this.clearStates)}update(e){this.unbindEvents(),this.options=on(this.options,e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}}Ol.defaultOptions={animation:!1,enable:!0,enableElements:["node","combo","edge"],immediately:!1,mode:"default",state:"selected",trigger:["shift"],style:{width:0,height:0,lineWidth:1,fill:"#1677FF",stroke:"#1677FF",fillOpacity:.1,zIndex:2,pointerEvents:"none"}};const vh=(r,e)=>{if((r.targetType==="node"||r.targetType==="combo")&&!(r.nativeEvent.target instanceof HTMLCanvasElement)){const[t,n]=e.getCanvasByClient([r.client.x,r.client.y]);return[t,n]}return[r.canvas.x,r.canvas.y]},ji=.8,Os=["node","edge","combo"];function To(r,e,t,n,i=0){n==="TB"&&e(r,i);const a=t(r);if(a)for(const s of a)To(s,e,t,n,i+1);n==="BT"&&e(r,i)}function VV(r,e,t){const n=[[r,0]];for(;n.length;){const[i,a]=n.shift();e(i,a);const s=t(i);if(s)for(const o of s)n.push([o,a+1])}}function Yk(r,e,t,n,i="both"){if(e==="combo"||e==="node")return Cg(r,t,n,i);const a=r.getEdgeData(t);if(!a)return[];const s=Cg(r,a.source,n-1,i),o=Cg(r,a.target,n-1,i);return Array.from(new Set([...s,...o,t]))}function Cg(r,e,t,n="both"){const i=new Set,a=new Set,s=new Set;return VV(e,(o,A)=>{A>t||(s.add(o),r.getRelatedEdgesData(o,n).forEach(l=>{const c=N(l);!a.has(c)&&A<t&&(s.add(c),a.add(c))}))},o=>r.getRelatedEdgesData(o,n).map(A=>A.source===o?A.target:A.source).filter(A=>i.has(A)?!1:(i.add(A),!0))),Array.from(s)}function Sg(r){return r.states||[]}var Wc=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class id extends ur{constructor(e,t){super(e,Object.assign({},id.defaultOptions,t)),this.onClickSelect=n=>Wc(this,void 0,void 0,function*(){var i,a;this.validate(n)&&(yield this.updateState(n),(a=(i=this.options).onClick)===null||a===void 0||a.call(i,n))}),this.onClickCanvas=n=>Wc(this,void 0,void 0,function*(){var i,a;this.validate(n)&&(yield this.clearState(),(a=(i=this.options).onClick)===null||a===void 0||a.call(i,n))}),this.shortcut=new Ha(e.graph),this.bindEvents()}bindEvents(){const{graph:e}=this.context;this.unbindEvents(),Os.forEach(t=>{e.on(`${t}:${R.CLICK}`,this.onClickSelect)}),e.on(zr.CLICK,this.onClickCanvas)}get isMultipleSelect(){const{multiple:e,trigger:t}=this.options;return e&&this.shortcut.match(t)}getNeighborIds(e){const{target:t,targetType:n}=e,{graph:i}=this.context,{degree:a}=this.options;return Yk(i,n,t.id,typeof a=="function"?a(e):a).filter(s=>s!==t.id)}updateState(e){return Wc(this,void 0,void 0,function*(){const{state:t,unselectedState:n,neighborState:i,animation:a}=this.options;if(!t&&!i&&!n)return;const{target:s}=e,{graph:o}=this.context,A=o.getElementData(s.id),l=Sg(A).includes(t)?"unselect":"select",c={},u=this.isMultipleSelect,h=[s.id],d=this.getNeighborIds(e);if(u)if(Object.assign(c,this.getDataStates()),l==="select"){const f=(g,v)=>{g.forEach(p=>{const y=new Set(o.getElementState(p));y.add(v),y.delete(n),c[p]=Array.from(y)})};f(h,t),f(d,i),n&&Object.keys(c).forEach(g=>{const v=c[g];!v.includes(t)&&!v.includes(i)&&!v.includes(n)&&c[g].push(n)})}else{const f=c[s.id];c[s.id]=f.filter(g=>g!==t&&g!==i),f.includes(n)||c[s.id].push(n),d.forEach(g=>{c[g]=c[g].filter(v=>v!==i),c[g].includes(t)||c[g].push(n)})}else if(l==="select"){Object.assign(c,this.getClearStates(!!n));const f=(g,v)=>{g.forEach(p=>{c[p]||(c[p]=o.getElementState(p)),c[p].push(v)})};f(h,t),f(d,i),n&&Object.keys(c).forEach(g=>{!h.includes(g)&&!d.includes(g)&&c[g].push(n)})}else Object.assign(c,this.getClearStates());yield o.setElementState(c,a)})}getDataStates(){const{graph:e}=this.context,{nodes:t,edges:n,combos:i}=e.getData(),a={};return[...t,...n,...i].forEach(s=>{a[N(s)]=Sg(s)}),a}getClearStates(e=!1){const{graph:t}=this.context,{state:n,unselectedState:i,neighborState:a}=this.options,s=new Set([n,i,a]),{nodes:o,edges:A,combos:l}=t.getData(),c={};return[...o,...A,...l].forEach(u=>{const h=Sg(u),d=h.filter(f=>!s.has(f));(e||d.length!==h.length)&&(c[N(u)]=d)}),c}clearState(){return Wc(this,void 0,void 0,function*(){const{graph:e}=this.context;yield e.setElementState(this.getClearStates(),this.options.animation)})}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return ie(t)?t(e):!!t}unbindEvents(){const{graph:e}=this.context;Os.forEach(t=>{e.off(`${t}:${R.CLICK}`,this.onClickSelect)}),e.off(zr.CLICK,this.onClickCanvas)}destroy(){this.unbindEvents(),super.destroy()}}id.defaultOptions={animation:!0,enable:!0,multiple:!1,trigger:["shift"],state:"selected",neighborState:"selected",unselectedState:void 0,degree:0};function Kn(r){var e;return!!(!((e=r.style)===null||e===void 0)&&e.collapsed)}function ph(r,e){if(!r.startsWith(e))return!1;const t=r[e.length];return t>="A"&&t<="Z"}function jV(r,e){return`${e}${$u(r)}`}function $V(r,e,t=!0){if(!e||!ph(r,e))return r;const n=r.slice(e.length);return t?ZP(n):n}function bt(r,e){const t=Object.entries(r).reduce((n,[i,a])=>(i==="className"||i==="class"||ph(i,e)&&Object.assign(n,{[$V(i,e)]:a}),n),{});if("opacity"in r){const n=jV("opacity",e),i=r.opacity;if(n in r){const a=r[n];Object.assign(t,{opacity:i*a})}else Object.assign(t,{opacity:i})}return t}function G1(r,e){const t=e.length;return Object.keys(r).reduce((n,i)=>{if(i.startsWith(e)){const a=i.slice(t);n[a]=r[i]}return n},{})}function Xk(r,e){const t=typeof e=="string"?[e]:e,n={};return Object.keys(r).forEach(i=>{t.find(a=>i.startsWith(a))||(n[i]=r[i])}),n}function Ar(r=0){if(typeof r=="number")return[r,r,r];const[e,t=e,n=e]=r;return[e,t,n]}var WV=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};function yx(r,e){const{datum:t,graph:n}=e;return typeof r=="function"?r.call(n,t):Object.fromEntries(Object.entries(r).map(([i,a])=>typeof a=="function"?[i,a.call(n,t)]:[i,a]))}function Jt(r,e){const t=(r==null?void 0:r.style)||{},n=(e==null?void 0:e.style)||{};for(const i in t)i in n||(n[i]=t[i]);return Object.assign({},r,e,{style:n})}function qV(r){const{x:e,y:t,z:n,class:i,className:a,transform:s,transformOrigin:o,zIndex:A,visibility:l}=r;return WV(r,["x","y","z","class","className","transform","transformOrigin","zIndex","visibility"])}function YV(r,e){const t=Ar(r);let n={};return e.text&&!e.fontSize&&(n={fontSize:Math.min(...t)*.5}),e.src&&(!e.width||!e.height)&&(n={width:t[0]*.5,height:t[1]*.5}),n}function mx(r){if(r)return typeof r=="string"||typeof r=="function"||Array.isArray(r)?{type:"group",field:e=>e.id,color:r,invert:!1}:r}function XV(r,e){if(!e)return{};const{type:t,color:n,field:i,invert:a}=e,s=A=>{const l=typeof n=="string"?Vi("palette",n):n;if(typeof l=="function"){const c={};return A.forEach(([u,h])=>{c[u]=l(a?1-h:h)}),c}else if(Array.isArray(l)){const c=a?[...l].reverse():l,u={};return A.forEach(([h,d])=>{u[h]=c[d%l.length]}),u}return{}},o=(A,l)=>{var c;return typeof A=="string"?(c=l.data)===null||c===void 0?void 0:c[A]:A==null?void 0:A(l)};if(t==="group"){const A=Ph(r,h=>{if(!i)return"default";const d=o(i,h);return d?String(d):"default"}),l=Object.keys(A),c=s(l.map((h,d)=>[h,d])),u={};return Object.entries(A).forEach(([h,d])=>{d.forEach(f=>{u[N(f)]=c[h]})}),u}else if(t==="value"){const[A,l]=r.reduce(([u,h],d)=>{const f=o(i,d);if(typeof f!="number")throw new Error(Di(`Palette field ${i} is not a number`));return[Math.min(u,f),Math.max(h,f)]},[1/0,-1/0]),c=l-A;return s(r.map(u=>[u.id,(o(i,u)-A)/c]))}}function Zk(r){const e=typeof r=="string"?Vi("palette",r):r;if(typeof e!="function")return e}function Jk(r,e){let t=2*r;return typeof e=="string"?t=r*Number(e.replace("%",""))/100:typeof e=="number"&&(t=e),isNaN(t)&&(t=2*r),t}function eL(r,e,t=1,n=!1){const i=n?t:1,a=(r.max[0]-r.min[0])*i;return Jk(a,e)}function ZV(r,e,t=1){const n=rt(r[0],r[1])*t;return Jk(n,e)}class Il extends xl{constructor(e){wx(e.style),super(e),this.shapeMap={},this.animateMap={},this.render(this.attributes,this),this.setVisibility(),this.bindEvents()}get parsedAttributes(){return this.attributes}upsert(e,t,n,i,a){var s,o,A,l,c,u,h,d;const f=this.shapeMap[e];if(n===!1){f&&((s=a==null?void 0:a.beforeDestroy)===null||s===void 0||s.call(a,f),i.removeChild(f),delete this.shapeMap[e],(o=a==null?void 0:a.afterDestroy)===null||o===void 0||o.call(a,f));return}const g=typeof t=="string"?Vi(sl.SHAPE,t):t;if(!g)throw new Error(Di(`Shape ${t} not found`));if(!f||f.destroyed||!(f instanceof g)){f&&((A=a==null?void 0:a.beforeDestroy)===null||A===void 0||A.call(a,f),f==null||f.destroy(),(l=a==null?void 0:a.afterDestroy)===null||l===void 0||l.call(a,f)),(c=a==null?void 0:a.beforeCreate)===null||c===void 0||c.call(a);const v=new g({className:e,style:n});return i.appendChild(v),this.shapeMap[e]=v,(u=a==null?void 0:a.afterCreate)===null||u===void 0||u.call(a,v),v}return(h=a==null?void 0:a.beforeUpdate)===null||h===void 0||h.call(a,f),q1(f,n),(d=a==null?void 0:a.afterUpdate)===null||d===void 0||d.call(a,f),f}update(e={}){const t=Object.assign({},this.attributes,e);wx(t),H9(this,t),this.render(t,this),this.setVisibility()}bindEvents(){}getGraphicStyle(e){return qV(e)}get compositeShapes(){return[["badges","badge-"],["ports","port-"]]}animate(e,t){if(e.length===0)return null;const n=[];if(e[0].x!==void 0||e[0].y!==void 0||e[0].z!==void 0){const{x:a=0,y:s=0,z:o=0}=this.attributes;e.forEach(A=>{const{x:l=a,y:c=s,z:u=o}=A;Object.assign(A,{transform:u?[["translate3d",l,c,u]]:[["translate",l,c]]})})}const i=super.animate(e,t);if(i&&(Fg(this,i),n.push(i)),Array.isArray(e)&&e.length>0){const a=["transform","transformOrigin","x","y","z","zIndex"];if(Object.keys(e[0]).some(s=>!a.includes(s))){Object.entries(this.shapeMap).forEach(([o,A])=>{const l=`get${$u(o)}Style`,c=this[l];if(ie(c)){const u=e.map(d=>c.call(this,Object.assign(Object.assign({},this.attributes),d))),h=A.animate(H1(u),t);h&&(Fg(A,h),n.push(h))}});const s=(o,A)=>{if(!Ai(o)){const l=`get${$u(A)}Style`,c=this[l];if(ie(c)){const u=e.map(h=>c.call(this,Object.assign(Object.assign({},this.attributes),h)));Object.entries(u[0]).map(([h])=>{const d=u.map(g=>g[h]),f=o[h];if(f){const g=f.animate(H1(d),t);g&&(Fg(f,g),n.push(g))}})}}};this.compositeShapes.forEach(([o,A])=>{const l=G1(this.shapeMap,A);s(l,o)})}}return tB(n)}getShape(e){return this.shapeMap[e]}setVisibility(){const{visibility:e}=this.attributes;Ts(this,e)}destroy(){this.shapeMap={},this.animateMap={},super.destroy()}}function Fg(r,e){e==null||e.finished.then(()=>{const t=r.activeAnimations.findIndex(n=>n===e);t>-1&&r.activeAnimations.splice(t,1)})}function wx(r){if(!r)return{};if("x"in r||"y"in r||"z"in r){const{x:e=0,y:t=0,z:n,transform:i}=r,a=Mk(e,t,n,i);a&&(r.transform=a)}return r}var JV=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class wi extends Il{constructor(e){super(Jt({style:wi.defaultStyleProps},e))}isTextStyle(e){return ph(e,"label")}isBackgroundStyle(e){return ph(e,"background")}getTextStyle(e){const t=this.getGraphicStyle(e),{padding:n}=t,i=JV(t,["padding"]);return Xk(i,"background")}getBackgroundStyle(e){if(e.background===!1)return!1;const t=this.getGraphicStyle(e),{wordWrap:n,wordWrapWidth:i,padding:a}=t,s=bt(t,"background"),{min:[o,A],center:[l,c],halfExtents:[u,h]}=this.shapeMap.text.getGeometryBounds(),[d,f,g,v]=Sr(a),p=u*2+v+f,{width:y,height:m}=s;y&&m?Object.assign(s,{x:l-Number(y)/2,y:c-Number(m)/2}):Object.assign(s,{x:o-v,y:A-d,width:n?Math.min(p,i+v+f):p,height:h*2+d+g});const{radius:w}=s;if(typeof w=="string"&&w.endsWith("%")){const B=Number(w.replace("%",""))/100;s.radius=Math.min(+s.width,+s.height)*B}return s}render(e=this.parsedAttributes,t=this){this.upsert("text",Qs,this.getTextStyle(e),t),this.upsert("background",An,this.getBackgroundStyle(e),t)}getGeometryBounds(){return(this.getShape("background")||this.getShape("text")).getGeometryBounds()}}wi.defaultStyleProps={padding:0,fontSize:12,fontFamily:"system-ui, sans-serif",wordWrap:!0,maxLines:1,wordWrapWidth:128,textOverflow:"...",textBaseline:"middle",backgroundOpacity:.75,backgroundZIndex:-1,backgroundLineWidth:0};class Do extends Il{constructor(e){super(Jt({style:Do.defaultStyleProps},e))}getBadgeStyle(e){return this.getGraphicStyle(e)}render(e=this.parsedAttributes,t=this){this.upsert("label",wi,this.getBadgeStyle(e),t)}getGeometryBounds(){const e=this.getShape("label");return(e.getShape("background")||e.getShape("text")).getGeometryBounds()}}Do.defaultStyleProps={padding:[2,4,2,4],fontSize:10,wordWrap:!1,backgroundRadius:"50%",backgroundOpacity:1};function ej(r,e=!0){const t=[];return r.forEach((n,i)=>{t.push([i===0?"M":"L",...n])}),e&&t.push(["Z"]),t}const Bx={M:["x","y"],m:["dx","dy"],H:["x"],h:["dx"],V:["y"],v:["dy"],L:["x","y"],l:["dx","dy"],Z:[],z:[],C:["x1","y1","x2","y2","x","y"],c:["dx1","dy1","dx2","dy2","dx","dy"],S:["x2","y2","x","y"],s:["dx2","dy2","dx","dy"],Q:["x1","y1","x","y"],q:["dx1","dy1","dx","dy"],T:["x","y"],t:["dx","dy"],A:["rx","ry","rotation","large-arc","sweep","x","y"],a:["rx","ry","rotation","large-arc","sweep","dx","dy"]};function tj(r){const e=r.replace(/[\n\r]/g,"").replace(/-/g," -").replace(/(\d*\.)(\d+)(?=\.)/g,"$1$2 ").trim().split(/\s*,|\s+/),t=[];let n="",i={};for(;e.length>0;){let a=e.shift();a in Bx?n=a:e.unshift(a),i={type:n},Bx[n].forEach(A=>{a=e.shift(),i[A]=a}),n==="M"?n="L":n==="m"&&(n="l");const[s,...o]=Object.values(i);t.push([s,...o.map(Number)])}return t}function nj(r){const e=[];return(typeof r=="string"?tj(r):r).forEach(n=>{const i=n[0];if(i==="Z"){e.push(e[0]);return}if(i!=="A")for(let a=1;a<n.length;a=a+2)e.push([n[a],n[a+1],0]);else{const a=n.length;e.push([n[a-2],n[a-1],0])}}),e}const tL=r=>{if(r.length<2)return[["M",0,0],["L",0,0]];const e=r[0],t=r[1],n=r[r.length-1],i=r[r.length-2];r.unshift(i,n),r.push(e,t);const a=[["M",n[0],n[1]]];for(let s=1;s<r.length-2;s+=1){const[o,A]=r[s-1],[l,c]=r[s],[u,h]=r[s+1],[d,f]=s!==r.length-2?r[s+2]:[u,h],g=l+(u-o)/6,v=c+(h-A)/6,p=u-(d-l)/6,y=h-(f-c)/6;a.push(["C",g,v,p,y,u,h])}return a};function rj(r,e,t,n,i,a,s){const[o,A]=Ni(r,e),l={textAlign:e==="left"?"right":e==="right"?"left":"center",textBaseline:e==="top"?"bottom":e==="bottom"?"top":"middle",transform:[["translate",o+t,A+n]]};if(e==="center"||!i)return l;const c=nj(a);if(!c||c.length<=3)return l;const u=c.map((f,g)=>{const v=f,p=c[(g+1)%c.length];return pt(v,p)?null:[v,p]}).filter(Boolean),h=GV([o,A],u),d=qk([o,A],h);if(d&&h&&(l.transform=[["translate",d[0]+t,d[1]+n]],s)){const f=Math.atan((h[0][1]-h[1][1])/(h[0][0]-h[1][0]));l.transform.push(["rotate",f/Math.PI*180]),l.textAlign="center",(e==="right"||e==="left")&&(f>0?l.textBaseline=e==="right"?"bottom":"top":l.textBaseline=e==="right"?"top":"bottom")}return l}var ij=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class _l extends Il{constructor(e){super(Jt({style:_l.defaultStyleProps},e))}getLabelStyle(e){if(!e.label||!e.d||e.d.length===0)return!1;const t=bt(this.getGraphicStyle(e),"label"),{maxWidth:n,offsetX:i,offsetY:a,autoRotate:s,placement:o,closeToPath:A}=t,l=ij(t,["maxWidth","offsetX","offsetY","autoRotate","placement","closeToPath"]),c=this.shapeMap.key,u=c==null?void 0:c.getRenderBounds();return Object.assign(rj(u,o,i,a,A,e.d,s),{wordWrapWidth:eL(u,n)},l)}getKeyStyle(e){return this.getGraphicStyle(e)}render(e,t){this.upsert("key",wn,this.getKeyStyle(e),t),this.upsert("label",wi,this.getLabelStyle(e),t)}}_l.defaultStyleProps={label:!0,labelPlacement:"bottom",labelCloseToPath:!0,labelAutoRotate:!0,labelOffsetX:0,labelOffsetY:0};function aj(r){const e=[],t=n=>{n!=null&&n.children.length&&n.children.forEach(i=>{e.push(i),t(i)})};return t(r),e}function sj(r){const e=[];let t=r.parentNode;for(;t;)e.push(t),t=t.parentNode;return e}let lB=class extends Sl{constructor(e){super(e),this.onMounted=()=>{this.handleRadius()},this.onAttrModified=()=>{this.handleRadius()},uo=this,this.isMutationObserved=!0,this.addEventListener(Me.MOUNTED,this.onMounted),this.addEventListener(Me.ATTR_MODIFIED,this.onAttrModified)}handleRadius(){const{radius:e,clipPath:t,width:n=0,height:i=0}=this.attributes;if(e&&n&&i){const[a,s]=this.getBounds().min,o={x:a,y:s,radius:e,width:n,height:i};if(t)Object.assign(this.parsedStyle.clipPath.style,o);else{const A=new An({style:o});this.style.clipPath=A}}else t&&(this.style.clipPath=null)}};const K1=new WeakMap;let uo=null;const cB=r=>{if(uo&&sj(uo).includes(r)){const e=K1.get(r);e?e.includes(uo)||e.push(uo):K1.set(r,[uo])}},uB=r=>{const e=K1.get(r);e&&e.forEach(t=>t.handleRadius())};class nL extends Il{constructor(e){super(e)}isImage(){const{src:e}=this.attributes;return!!e}getIconStyle(e=this.attributes){const{width:t=0,height:n=0}=e,i=this.getGraphicStyle(e);return this.isImage()?Object.assign({x:-t/2,y:-n/2},i):Object.assign({textBaseline:"middle",textAlign:"center"},i)}render(e=this.attributes,t=this){this.upsert("icon",this.isImage()?lB:Qs,this.getIconStyle(e),t)}}class rL extends Il{get context(){return this.config.context}get parsedAttributes(){return this.attributes}onframe(){}animate(e,t){const n=super.animate(e,t);return n&&(n.onframe=()=>this.onframe(),n.finished.then(()=>this.onframe())),n}}var qc=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class Wr extends rL{constructor(e){super(Jt({style:Wr.defaultStyleProps},e)),this.type="node"}getSize(e=this.attributes){const{size:t}=e;return Ar(t)}getKeyStyle(e){const t=this.getGraphicStyle(e);return Object.assign(Xk(t,["label","halo","icon","badge","port"]))}getLabelStyle(e){if(e.label===!1||!e.labelText)return!1;const t=bt(this.getGraphicStyle(e),"label"),{placement:n,maxWidth:i,offsetX:a,offsetY:s}=t,o=qc(t,["placement","maxWidth","offsetX","offsetY"]),A=this.getShape("key").getLocalBounds();return Object.assign(Ux(A,n,a,s),{wordWrapWidth:eL(A,i)},o)}getHaloStyle(e){if(e.halo===!1)return!1;const t=this.getKeyStyle(e),{fill:n}=t,i=qc(t,["fill"]),a=bt(this.getGraphicStyle(e),"halo");return Object.assign(Object.assign(Object.assign({},i),{stroke:n}),a)}getIconStyle(e){if(e.icon===!1||!e.iconText&&!e.iconSrc)return!1;const t=bt(this.getGraphicStyle(e),"icon");return Object.assign(YV(e.size,t),t)}getBadgesStyle(e){var t;const n=G1(this.shapeMap,"badge-"),i={};if(Object.keys(n).forEach(u=>{i[u]=!1}),e.badge===!1||!(!((t=e.badges)===null||t===void 0)&&t.length))return i;const{badges:a=[],badgePalette:s,opacity:o=1}=e,A=qc(e,["badges","badgePalette","opacity"]),l=Zk(s),c=bt(this.getGraphicStyle(A),"badge");return a.forEach((u,h)=>{i[h]=Object.assign(Object.assign({backgroundFill:l?l[h%(l==null?void 0:l.length)]:void 0,opacity:o},c),this.getBadgeStyle(u))}),i}getBadgeStyle(e){const t=this.getShape("key"),{placement:n="top",offsetX:i,offsetY:a}=e,s=qc(e,["placement","offsetX","offsetY"]),o=Ux(t.getLocalBounds(),n,i,a,!0);return Object.assign(Object.assign({},o),s)}getPortsStyle(e){var t;const n=this.getPorts(),i={};if(Object.keys(n).forEach(o=>{i[o]=!1}),e.port===!1||!(!((t=e.ports)===null||t===void 0)&&t.length))return i;const a=bt(this.getGraphicStyle(e),"port"),{ports:s=[]}=e;return s.forEach((o,A)=>{const l=o.key||A,c=Object.assign(Object.assign({},a),o);if(BL(c))i[l]=!1;else{const[u,h]=this.getPortXY(e,o);i[l]=Object.assign({transform:[["translate",u,h]]},c)}}),i}getPortXY(e,t){const{placement:n="left"}=t,i=this.getShape("key");return gB(oj(this.context,i),n)}getPorts(){return G1(this.shapeMap,"port-")}getCenter(){return this.getShape("key").getBounds().center}getIntersectPoint(e,t=!1){const n=this.getShape("key").getBounds();return DV(e,n,t)}drawHaloShape(e,t){const n=this.getHaloStyle(e),i=this.getShape("key");this.upsert("halo",i.constructor,n,t)}drawIconShape(e,t){const n=this.getIconStyle(e);this.upsert("icon",nL,n,t),cB(this)}drawBadgeShapes(e,t){const n=this.getBadgesStyle(e);Object.keys(n).forEach(i=>{const a=n[i];this.upsert(`badge-${i}`,Do,a,t)})}drawPortShapes(e,t){const n=this.getPortsStyle(e);Object.keys(n).forEach(i=>{const a=n[i],s=`port-${i}`;this.upsert(s,yi,a,t)})}drawLabelShape(e,t){const n=this.getLabelStyle(e);this.upsert("label",wi,n,t)}_drawKeyShape(e,t){return this.drawKeyShape(e,t)}render(e=this.parsedAttributes,t=this){this._drawKeyShape(e,t),this.getShape("key")&&(this.drawHaloShape(e,t),this.drawIconShape(e,t),this.drawBadgeShapes(e,t),this.drawLabelShape(e,t),this.drawPortShapes(e,t))}update(e){super.update(e),e&&("x"in e||"y"in e||"z"in e)&&uB(this)}onframe(){this.drawBadgeShapes(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this)}}Wr.defaultStyleProps={x:0,y:0,size:32,droppable:!0,draggable:!0,port:!0,ports:[],portZIndex:2,portLinkToCenter:!1,badge:!0,badges:[],badgeZIndex:3,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloStrokeOpacity:.25,haloPointerEvents:"none",haloZIndex:-1,icon:!0,iconZIndex:1,label:!0,labelIsBillboard:!0,labelMaxWidth:"200%",labelPlacement:"bottom",labelWordWrap:!1,labelZIndex:0};function oj(r,e){if(!r)return e.getLocalBounds();const t=r.canvas.getLayer(),n=e.cloneNode();Ts(n,"hidden"),t.appendChild(n);const i=n.getLocalBounds();return n.destroy(),i}let kl=class iL extends Wr{constructor(e){super(Jt({style:iL.defaultStyleProps},e))}drawKeyShape(e,t){return this.upsert("key",yi,this.getKeyStyle(e),t)}getKeyStyle(e){const t=super.getKeyStyle(e);return Object.assign(Object.assign({},t),{r:Math.min(...this.getSize(e))/2})}getIconStyle(e){const t=super.getIconStyle(e),{r:n}=this.getShape("key").attributes,i=n*2*ji;return t?Object.assign({width:i,height:i},t):!1}getIntersectPoint(e,t=!1){const n=this.getShape("key").getBounds();return rd(e,n,t)}};kl.defaultStyleProps={size:32};class ad extends Wr{constructor(e){super(e)}get parsedAttributes(){return this.attributes}drawKeyShape(e,t){return this.upsert("key",Ls,this.getKeyStyle(e),t)}getKeyStyle(e){const t=super.getKeyStyle(e);return Object.assign(Object.assign({},t),{points:this.getPoints(e)})}getIntersectPoint(e,t=!1){var n,i;const{points:a}=this.getShape("key").attributes,s=[+(((n=this.attributes)===null||n===void 0?void 0:n.x)||0),+(((i=this.attributes)===null||i===void 0?void 0:i.y)||0)];return Wk(e,s,a,!0,t).point}}class Aj extends ad{constructor(e){super(e)}getPoints(e){const[t,n]=this.getSize(e);return D9(t,n)}}var lj=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class sd extends kl{constructor(e){super(Jt({style:sd.defaultStyleProps},e))}parseOuterR(){const{size:e}=this.parsedAttributes;return Math.min(...Ar(e))/2}parseInnerR(){const{innerR:e}=this.parsedAttributes;return _e(e)?parseInt(e)/100*this.parseOuterR():e}drawDonutShape(e,t){const{donuts:n}=e;if(!(n!=null&&n.length))return;const i=n.map(u=>Z(u)?{value:u}:u),a=bt(this.getGraphicStyle(e),"donut"),s=Zk(e.donutPalette);if(!s)return;const o=i.reduce((u,h)=>{var d;return u+((d=h.value)!==null&&d!==void 0?d:0)},0),A=this.parseOuterR(),l=this.parseInnerR();let c=0;i.forEach((u,h)=>{const{value:d=0,color:f=s[h%s.length]}=u,g=lj(u,["value","color"]),v=(o===0?1/i.length:d/o)*360;this.upsert(`round${h}`,wn,Object.assign(Object.assign(Object.assign({},a),{d:hj(A,l,c,c+v),fill:f}),g),t),c+=v})}render(e,t=this){super.render(e,t),this.drawDonutShape(e,t)}}sd.defaultStyleProps={innerR:"50%",donuts:[],donutPalette:"tableau"};const Yc=(r,e,t,n)=>[r+Math.sin(n)*t,e-Math.cos(n)*t],cj=(r,e,t,n)=>n<=0||t<=n?[["M",r-t,e],["A",t,t,0,1,1,r+t,e],["A",t,t,0,1,1,r-t,e],["Z"]]:[["M",r-t,e],["A",t,t,0,1,1,r+t,e],["A",t,t,0,1,1,r-t,e],["Z"],["M",r+n,e],["A",n,n,0,1,0,r-n,e],["A",n,n,0,1,0,r+n,e],["Z"]],uj=(r,e,t,n,i,a)=>{const[s,o]=[i/360*2*Math.PI,a/360*2*Math.PI],A=[Yc(r,e,n,s),Yc(r,e,t,s),Yc(r,e,t,o),Yc(r,e,n,o)],l=o-s>Math.PI?1:0;return[["M",A[0][0],A[0][1]],["L",A[1][0],A[1][1]],["A",t,t,0,l,1,A[2][0],A[2][1]],["L",A[3][0],A[3][1]],["A",n,n,0,l,0,A[0][0],A[0][1]],["Z"]]},hj=(r=0,e=0,t,n)=>{const[i,a]=[0,0];return Math.abs(t-n)%360<1e-6?cj(i,a,r,e):uj(i,a,r,e,t,n)};class od extends Wr{constructor(e){super(Jt({style:od.defaultStyleProps},e))}drawKeyShape(e,t){return this.upsert("key",Cl,this.getKeyStyle(e),t)}getKeyStyle(e){const t=super.getKeyStyle(e),[n,i]=this.getSize(e);return Object.assign(Object.assign({},t),{rx:n/2,ry:i/2})}getIconStyle(e){const t=super.getIconStyle(e),{rx:n,ry:i}=this.getShape("key").attributes,a=Math.min(+n,+i)*2*ji;return t?Object.assign({width:a,height:a},t):!1}getIntersectPoint(e,t=!1){const n=this.getShape("key").getBounds();return rd(e,n,t)}}od.defaultStyleProps={size:[45,35]};class dj extends ad{constructor(e){super(e)}getOuterR(e){return e.outerR||Math.min(...this.getSize(e))/2}getPoints(e){return G9(this.getOuterR(e))}getIconStyle(e){const t=super.getIconStyle(e),n=this.getOuterR(e)*ji;return t?Object.assign({width:n,height:n},t):!1}}function ai(r,e){if(!{}.hasOwnProperty.call(r,e))throw new TypeError("attempted to use private field on non-instance");return r}var fj=0;function gj(r){return"__private_"+fj+++"_"+r}/*!
 * @antv/g-canvas
 * @description A renderer implemented by Canvas 2D API
 * @version 2.2.0
 * @date 12/24/2025, 11:55:53 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var St=gj("renderState"),aL=function(){function r(e){G(this,r),this.renderQueue=[],Object.defineProperty(this,St,{writable:!0,value:{restoreStack:[],prevObject:null,currentContext:new Map}}),this.clearFullScreenLastFrame=!1,this.clearFullScreen=!1,this.vpMatrix=Ye(),this.dprMatrix=Ye(),this.tmpMat4=Ye(),this.vec3a=xe(),this.vec3b=xe(),this.vec3c=xe(),this.vec3d=xe(),this.canvasRendererPluginOptions=e}return K(r,[{key:"apply",value:function(t,n){var i=this;this.context=t;var a=this.context,s=a.config,o=a.camera,A=a.renderingService,l=a.renderingContext,c=a.pathGeneratorFactory,u=s.renderer.getConfig().enableRenderingOptimization;s.renderer.getConfig().enableDirtyCheck=!1,s.renderer.getConfig().enableDirtyRectangleRendering=!1,this.pathGeneratorFactory=c;var h=t.contextService,d=l.root.ownerDocument.defaultView;A.hooks.init.tap(r.tag,function(){var v=h.getDPR(),p=s.width,y=s.height,m=h.getContext();i.clearRect(m,0,0,p*v,y*v,s.background)}),A.hooks.destroy.tap(r.tag,function(){i.renderQueue=[],ai(i,St)[St]={restoreStack:[],prevObject:null,currentContext:null}});var f=function(){var p,y=h.getContext(),m=h.getDPR(),w=s.width,B=s.height,b=i.canvasRendererPluginOptions,E=b.dirtyObjectNumThreshold,x=b.dirtyObjectRatioThreshold,S=A.getStats(),C=S.total,F=S.rendered,M=F/C;i.clearFullScreen=i.clearFullScreenLastFrame||!((p=d.context.renderingPlugins[1])!==null&&p!==void 0&&p.isFirstTimeRenderingFinished)||A.disableDirtyRectangleRendering()||F>E&&M>x,y&&(typeof y.resetTransform=="function"?y.resetTransform():y.setTransform(1,0,0,1,0,0),i.clearFullScreen&&i.clearRect(y,0,0,w*m,B*m,s.background))},g=function(p,y){for(var m=[p];m.length>0;){var w,B=m.pop();B.isVisible()&&!B.isCulled()&&(u?i.renderDisplayObjectOptimized(B,y,i.context,ai(i,St)[St],n):i.renderDisplayObject(B,y,i.context,ai(i,St)[St],n));for(var b=((w=B.sortable)===null||w===void 0||(w=w.sorted)===null||w===void 0?void 0:w.length)>0?B.sortable.sorted:B.childNodes,E=b.length-1;E>=0;E--)m.push(b[E])}};A.hooks.endFrame.tap(r.tag,function(){if(f(),l.root.childNodes.length===0){i.clearFullScreenLastFrame=!0;return}u=s.renderer.getConfig().enableRenderingOptimization,ai(i,St)[St]={restoreStack:[],prevObject:null,currentContext:ai(i,St)[St].currentContext},ai(i,St)[St].currentContext.clear(),i.clearFullScreenLastFrame=!1;var v=h.getContext(),p=h.getDPR();if(rs(i.dprMatrix,[p,p,1]),yn(i.vpMatrix,i.dprMatrix,o.getOrthoMatrix()),i.clearFullScreen)u?(v.save(),g(l.root,v),v.restore()):g(l.root,v);else{var y=i.safeMergeAABB(i.mergeDirtyAABBs(i.renderQueue));if(tt.isEmpty(y)){i.renderQueue=[];return}var m=i.convertAABB2Rect(y),w=m.x,B=m.y,b=m.width,E=m.height,x=mn(i.vec3a,[w,B,0],i.vpMatrix),S=mn(i.vec3b,[w+b,B,0],i.vpMatrix),C=mn(i.vec3c,[w,B+E,0],i.vpMatrix),F=mn(i.vec3d,[w+b,B+E,0],i.vpMatrix),M=Math.min(x[0],S[0],F[0],C[0]),T=Math.min(x[1],S[1],F[1],C[1]),O=Math.max(x[0],S[0],F[0],C[0]),_=Math.max(x[1],S[1],F[1],C[1]),Q=Math.floor(M),L=Math.floor(T),k=Math.ceil(O-M),U=Math.ceil(_-T);v.save(),i.clearRect(v,Q,L,k,U,s.background),v.beginPath(),v.rect(Q,L,k,U),v.clip(),v.setTransform(i.vpMatrix[0],i.vpMatrix[1],i.vpMatrix[4],i.vpMatrix[5],i.vpMatrix[12],i.vpMatrix[13]);var D=s.renderer.getConfig(),j=D.enableDirtyRectangleRenderingDebug;j&&d.dispatchEvent(new Qt(rr.DIRTY_RECTANGLE,{dirtyRect:{x:Q,y:L,width:k,height:U}}));var X=y.getMin(),W=pe(X,2),Y=W[0],se=W[1],te=y.getMax(),ne=pe(te,2),Le=ne[0],ke=ne[1],Ue=l.root.ownerDocument.elementsFromBBox(Y,se,Le,ke);Ue.sort(function(ct,Pe){return ct.sortable.renderOrder-Pe.sortable.renderOrder}).forEach(function(ct){ct&&ct.isVisible()&&!ct.isCulled()&&i.renderDisplayObject(ct,v,i.context,ai(i,St)[St],n)}),v.restore(),i.renderQueue.forEach(function(ct){i.saveDirtyAABB(ct)}),i.renderQueue=[]}ai(i,St)[St].restoreStack.forEach(function(){v.restore()}),ai(i,St)[St].restoreStack=[]}),A.hooks.render.tap(r.tag,function(v){i.clearFullScreen||i.renderQueue.push(v)})}},{key:"clearRect",value:function(t,n,i,a,s,o){t.clearRect(n,i,a,s),o&&(t.fillStyle=o,t.fillRect(n,i,a,s))}},{key:"renderDisplayObjectOptimized",value:function(t,n,i,a,s){var o=t.nodeName,A=!1,l=!1,c=this.context.styleRendererFactory[o],u=this.pathGeneratorFactory[o],h=t.parsedStyle.clipPath;if(h){A=!a.prevObject||!Ym(h.getWorldTransform(),a.prevObject.getWorldTransform()),A&&(this.applyWorldTransform(n,h),a.prevObject=null);var d=this.pathGeneratorFactory[h.nodeName];d&&(n.save(),l=!0,n.beginPath(),d(n,h.parsedStyle),n.closePath(),n.clip())}if(c){A=!a.prevObject||!Ym(t.getWorldTransform(),a.prevObject.getWorldTransform()),A&&this.applyWorldTransform(n,t);var f=!a.prevObject;if(!f){var g=a.prevObject.nodeName;o===P.TEXT?f=g!==P.TEXT:o===P.IMAGE?f=g!==P.IMAGE:f=g===P.TEXT||g===P.IMAGE}c.applyStyleToContext(n,t,f,a),a.prevObject=t}u&&(n.beginPath(),u(n,t.parsedStyle),o!==P.LINE&&o!==P.PATH&&o!==P.POLYLINE&&n.closePath()),c&&c.drawToContext(n,t,ai(this,St)[St],this,s),l&&n.restore(),t.dirty(!1)}},{key:"renderDisplayObject",value:function(t,n,i,a,s){var o=t.nodeName,A=a.restoreStack[a.restoreStack.length-1];A&&!(t.compareDocumentPosition(A)&ht.DOCUMENT_POSITION_CONTAINS)&&(n.restore(),a.restoreStack.pop());var l=this.context.styleRendererFactory[o],c=this.pathGeneratorFactory[o],u=t.parsedStyle.clipPath;if(u){this.applyWorldTransform(n,u);var h=this.pathGeneratorFactory[u.nodeName];h&&(n.save(),a.restoreStack.push(t),n.beginPath(),h(n,u.parsedStyle),n.closePath(),n.clip())}l&&(this.applyWorldTransform(n,t),n.save(),this.applyAttributesToContext(n,t)),c&&(n.beginPath(),c(n,t.parsedStyle),o!==P.LINE&&o!==P.PATH&&o!==P.POLYLINE&&n.closePath()),l&&(l.render(n,t.parsedStyle,t,i,this,s),n.restore()),t.dirty(!1)}},{key:"applyAttributesToContext",value:function(t,n){var i=n.parsedStyle,a=i.stroke,s=i.fill,o=i.opacity,A=i.lineDash,l=i.lineDashOffset;A&&t.setLineDash(A),le(l)||(t.lineDashOffset=l),le(o)||(t.globalAlpha*=o),!le(a)&&!Array.isArray(a)&&!a.isNone&&(t.strokeStyle=n.attributes.stroke),!le(s)&&!Array.isArray(s)&&!s.isNone&&(t.fillStyle=n.attributes.fill)}},{key:"convertAABB2Rect",value:function(t){var n=t.getMin(),i=t.getMax(),a=Math.floor(n[0]),s=Math.floor(n[1]),o=Math.ceil(i[0]),A=Math.ceil(i[1]),l=o-a,c=A-s;return{x:a,y:s,width:l,height:c}}},{key:"mergeDirtyAABBs",value:function(t){var n=new tt;return t.forEach(function(i){var a=i.getRenderBounds();n.add(a);var s=i.renderable.dirtyRenderBounds;s&&n.add(s)}),n}},{key:"saveDirtyAABB",value:function(t){var n=t.renderable;n.dirtyRenderBounds||(n.dirtyRenderBounds=new tt);var i=t.getRenderBounds();i&&n.dirtyRenderBounds.update(i.center,i.halfExtents)}},{key:"applyWorldTransform",value:function(t,n,i){i?(Oo(this.tmpMat4,n.getLocalTransform()),yn(this.tmpMat4,i,this.tmpMat4),yn(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(Oo(this.tmpMat4,n.getWorldTransform()),yn(this.tmpMat4,this.vpMatrix,this.tmpMat4)),t.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])}},{key:"safeMergeAABB",value:function(){for(var t=new tt,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return i.forEach(function(s){t.add(s)}),t}}])}();aL.tag="CanvasRenderer";function yh(r,e,t,n,i,a,s){var o,A;if(r.image.nodeName==="rect"){var l=r.image.parsedStyle,c=l.width,u=l.height;A=n.contextService.getDPR();var h=n.config.offscreenCanvas;o=a.offscreenCanvasCreator.getOrCreateCanvas(h),o.width=c*A,o.height=u*A;var d=a.offscreenCanvasCreator.getOrCreateContext(h),f={restoreStack:[],prevObject:null,currentContext:new Map};r.image.forEach(function(v){i.renderDisplayObject(v,d,n,f,a)}),f.restoreStack.forEach(function(){d.restore()})}var g=s.getOrCreatePatternSync(e,r,t,o,A,e.getGeometryBounds().min,function(){e.dirty(),n.renderingService.dirty()});return g}function mh(r,e,t,n){var i;if(r.type===fa.LinearGradient||r.type===fa.RadialGradient){var a=e.getGeometryBounds(),s=a&&a.halfExtents[0]*2||1,o=a&&a.halfExtents[1]*2||1,A=a&&a.min||[0,0];i=n.getOrCreateGradient(ue(ue({type:r.type},r.value),{},{min:A,width:s,height:o}),t)}return i}var Xc=["shadowBlur","shadowOffsetX","shadowOffsetY"],bx=["lineCap","lineJoin","miterLimit"],kt={globalAlpha:1,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",filter:"none",globalCompositeOperation:"source-over",strokeStyle:"#000",strokeOpacity:1,lineWidth:1,lineDash:[],lineDashOffset:0,lineCap:"butt",lineJoin:"miter",miterLimit:10,fillStyle:"#000",fillOpacity:1},Ex={};function ft(r,e,t,n){var i=n.has(e)?n.get(e):kt[e];return i!==t&&(e==="lineDash"?r.setLineDash(t):r[e]=t,n.set(e,t)),i}var vj=function(){function r(e){G(this,r),this.imagePool=e}return K(r,[{key:"applyAttributesToContext",value:function(t,n){}},{key:"render",value:function(t,n,i,a,s,o){}},{key:"applyCommonStyleToContext",value:function(t,n,i,a){var s=i?Ex:a.prevObject.parsedStyle,o=n.parsedStyle;(i||o.opacity!==s.opacity)&&ft(t,"globalAlpha",le(o.opacity)?kt.globalAlpha:o.opacity,a.currentContext),(i||o.blend!==s.blend)&&ft(t,"globalCompositeOperation",le(o.blend)?kt.globalCompositeOperation:o.blend,a.currentContext)}},{key:"applyStrokeFillStyleToContext",value:function(t,n,i,a){var s=i?Ex:a.prevObject.parsedStyle,o=n.parsedStyle,A=o.lineWidth,l=A===void 0?kt.lineWidth:A,c=o.fill&&!o.fill.isNone,u=o.stroke&&!o.stroke.isNone&&l>0;if(u){if(i||n.attributes.stroke!==a.prevObject.attributes.stroke){var h=!le(o.stroke)&&!Array.isArray(o.stroke)&&!o.stroke.isNone?n.attributes.stroke:kt.strokeStyle;ft(t,"strokeStyle",h,a.currentContext)}(i||o.lineWidth!==s.lineWidth)&&ft(t,"lineWidth",le(o.lineWidth)?kt.lineWidth:o.lineWidth,a.currentContext),(i||o.lineDash!==s.lineDash)&&ft(t,"lineDash",o.lineDash||kt.lineDash,a.currentContext),(i||o.lineDashOffset!==s.lineDashOffset)&&ft(t,"lineDashOffset",le(o.lineDashOffset)?kt.lineDashOffset:o.lineDashOffset,a.currentContext);for(var d=0;d<bx.length;d++){var f=bx[d];(i||o[f]!==s[f])&&ft(t,f,le(o[f])?kt[f]:o[f],a.currentContext)}}if(c&&(i||n.attributes.fill!==a.prevObject.attributes.fill)){var g=!le(o.fill)&&!Array.isArray(o.fill)&&!o.fill.isNone?n.attributes.fill:kt.fillStyle;ft(t,"fillStyle",g,a.currentContext)}}},{key:"applyStyleToContext",value:function(t,n,i,a){var s=n.nodeName;this.applyCommonStyleToContext(t,n,i,a),s===P.IMAGE||this.applyStrokeFillStyleToContext(t,n,i,a)}},{key:"applyShadowAndFilterStyleToContext",value:function(t,n,i,a){var s=n.parsedStyle;if(i){ft(t,"shadowColor",s.shadowColor.toString(),a.currentContext);for(var o=0;o<Xc.length;o++){var A=Xc[o];ft(t,A,s[A]||kt[A],a.currentContext)}}s.filter&&s.filter.length&&ft(t,"filter",n.attributes.filter,a.currentContext)}},{key:"clearShadowAndFilterStyleForContext",value:function(t,n,i,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(n){ft(t,"shadowColor",kt.shadowColor,a.currentContext);for(var o=0;o<Xc.length;o++){var A=Xc[o];ft(t,A,kt[A],a.currentContext)}}if(i)if(n&&s){var l=t.filter;!le(l)&&l.indexOf("drop-shadow")>-1&&ft(t,"filter",l.replace(/drop-shadow\([^)]*\)/,"").trim()||kt.filter,a.currentContext)}else ft(t,"filter",kt.filter,a.currentContext)}},{key:"fillToContext",value:function(t,n,i,a,s){var o=this,A=n.parsedStyle,l=A.fill,c=A.fillRule,u=null;if(Array.isArray(l)&&l.length>0)l.forEach(function(d){var f=ft(t,"fillStyle",mh(d,n,t,o.imagePool),i.currentContext);u=u??f,c?t.fill(c):t.fill()});else{if(Cs(l)){var h=yh(l,n,t,n.ownerDocument.defaultView.context,a,s,this.imagePool);h&&(t.fillStyle=h,u=!0)}c?t.fill(c):t.fill()}u!==null&&ft(t,"fillStyle",u,i.currentContext)}},{key:"strokeToContext",value:function(t,n,i,a,s){var o=this,A=n.parsedStyle.stroke,l=null;if(Array.isArray(A)&&A.length>0)A.forEach(function(h){var d=ft(t,"strokeStyle",mh(h,n,t,o.imagePool),i.currentContext);l=l??d,t.stroke()});else{if(Cs(A)){var c=yh(A,n,t,n.ownerDocument.defaultView.context,a,s,this.imagePool);if(c){var u=ft(t,"strokeStyle",c,i.currentContext);l=l??u}}t.stroke()}l!==null&&ft(t,"strokeStyle",l,i.currentContext)}},{key:"drawToContext",value:function(t,n,i,a,s){var o,A=n.nodeName,l=n.parsedStyle,c=l.opacity,u=c===void 0?kt.globalAlpha:c,h=l.fillOpacity,d=h===void 0?kt.fillOpacity:h,f=l.strokeOpacity,g=f===void 0?kt.strokeOpacity:f,v=l.lineWidth,p=v===void 0?kt.lineWidth:v,y=l.fill&&!l.fill.isNone,m=l.stroke&&!l.stroke.isNone&&p>0;if(!(!y&&!m)){var w=!le(l.shadowColor)&&l.shadowBlur>0,B=l.shadowType==="inner",b=((o=l.fill)===null||o===void 0?void 0:o.alpha)===0,E=!!(l.filter&&l.filter.length),x=w&&m&&(A===P.PATH||A===P.LINE||A===P.POLYLINE||b||B),S=null;if(y){x||this.applyShadowAndFilterStyleToContext(t,n,w,i);var C=u*d;S=ft(t,"globalAlpha",C,i.currentContext),this.fillToContext(t,n,i,a,s),x||this.clearShadowAndFilterStyleForContext(t,w,E,i)}if(m){var F=!1,M=u*g,T=ft(t,"globalAlpha",M,i.currentContext);if(S=y?S:T,x&&(this.applyShadowAndFilterStyleToContext(t,n,w,i),F=!0,B)){var O=t.globalCompositeOperation;t.globalCompositeOperation="source-atop",this.strokeToContext(t,n,i,a,s),t.globalCompositeOperation=O,this.clearShadowAndFilterStyleForContext(t,w,E,i,!0)}this.strokeToContext(t,n,i,a,s),F&&this.clearShadowAndFilterStyleForContext(t,w,E,i)}S!==null&&ft(t,"globalAlpha",S,i.currentContext)}}}])}(),hB=function(r){function e(){return G(this,e),ye(this,e,arguments)}return me(e,r),K(e,[{key:"render",value:function(n,i,a,s,o,A){var l=i.fill,c=i.fillRule,u=i.opacity,h=u===void 0?1:u,d=i.fillOpacity,f=d===void 0?1:d,g=i.stroke,v=i.strokeOpacity,p=v===void 0?1:v,y=i.lineWidth,m=y===void 0?1:y,w=i.lineCap,B=i.lineJoin,b=i.shadowType,E=i.shadowColor,x=i.shadowBlur,S=i.filter,C=i.miterLimit,F=l&&!l.isNone,M=g&&!g.isNone&&m>0,T=(l==null?void 0:l.alpha)===0,O=!!(S&&S.length),_=!le(E)&&x>0,Q=a.nodeName,L=b==="inner",k=M&&_&&(Q===P.PATH||Q===P.LINE||Q===P.POLYLINE||T||L);F&&(n.globalAlpha=h*f,k||wh(a,n,_),sL(n,a,l,c,s,o,A,this.imagePool),k||this.clearShadowAndFilter(n,O,_)),M&&(n.globalAlpha=h*p,n.lineWidth=m,le(C)||(n.miterLimit=C),le(w)||(n.lineCap=w),le(B)||(n.lineJoin=B),k&&(L&&(n.globalCompositeOperation="source-atop"),wh(a,n,!0),L&&(z1(n,a,g,s,o,A,this.imagePool),n.globalCompositeOperation=kt.globalCompositeOperation,this.clearShadowAndFilter(n,O,!0))),z1(n,a,g,s,o,A,this.imagePool))}},{key:"clearShadowAndFilter",value:function(n,i,a){if(a&&(n.shadowColor="transparent",n.shadowBlur=0),i){var s=n.filter;!le(s)&&s.indexOf("drop-shadow")>-1&&(n.filter=s.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")}}}])}(vj);function wh(r,e,t){var n=r.parsedStyle,i=n.filter,a=n.shadowColor,s=n.shadowBlur,o=n.shadowOffsetX,A=n.shadowOffsetY;i&&i.length&&(e.filter=r.style.filter),t&&(e.shadowColor=a.toString(),e.shadowBlur=s||0,e.shadowOffsetX=o||0,e.shadowOffsetY=A||0)}function sL(r,e,t,n,i,a,s,o){var A=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1;Array.isArray(t)?t.forEach(function(l){r.fillStyle=mh(l,e,r,o),A||(n?r.fill(n):r.fill())}):(Cs(t)&&(r.fillStyle=yh(t,e,r,i,a,s,o)),A||(n?r.fill(n):r.fill()))}function z1(r,e,t,n,i,a,s){var o=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1;Array.isArray(t)?t.forEach(function(A){r.strokeStyle=mh(A,e,r,s),o||r.stroke()}):(Cs(t)&&(r.strokeStyle=yh(t,e,r,n,i,a,s)),o||r.stroke())}function pj(r,e){var t=pe(r,4),n=t[0],i=t[1],a=t[2],s=t[3],o=pe(e,4),A=o[0],l=o[1],c=o[2],u=o[3],h=Math.max(n,A),d=Math.max(i,l),f=Math.min(n+a,A+c),g=Math.min(i+s,l+u);return f<=h||g<=d?null:[h,d,f-h,g-d]}function yj(r,e){var t=mn(xe(),[r[0],r[1],0],e),n=mn(xe(),[r[0]+r[2],r[1],0],e),i=mn(xe(),[r[0],r[1]+r[3],0],e),a=mn(xe(),[r[0]+r[2],r[1]+r[3],0],e);return[Math.min(t[0],n[0],i[0],a[0]),Math.min(t[1],n[1],i[1],a[1]),Math.max(t[0],n[0],i[0],a[0])-Math.min(t[0],n[0],i[0],a[0]),Math.max(t[1],n[1],i[1],a[1])-Math.min(t[1],n[1],i[1],a[1])]}var mj=function(r){function e(){return G(this,e),ye(this,e,arguments)}return me(e,r),K(e,[{key:"renderDownSampled",value:function(n,i,a,s){var o=s.src,A=s.imageCache;if(!A.downSampled){this.imagePool.createDownSampledImage(o,a).then(function(){a.ownerDocument&&(a.dirty(),a.ownerDocument.defaultView.context.renderingService.dirty())}).catch(function(l){console.error(l)});return}n.drawImage(A.downSampled,Math.floor(s.drawRect[0]),Math.floor(s.drawRect[1]),Math.ceil(s.drawRect[2]),Math.ceil(s.drawRect[3]))}},{key:"renderTile",value:function(n,i,a,s){var o=s.src,A=s.imageCache,l=s.imageRect,c=s.drawRect,u=A.size,h=n.getTransform(),d=h.a,f=h.b,g=h.c,v=h.d,p=h.e,y=h.f;if(n.resetTransform(),!(A!=null&&A.gridSize)){this.imagePool.createImageTiles(o,[],function(){a.ownerDocument&&(a.dirty(),a.ownerDocument.defaultView.context.renderingService.dirty())},a).catch(function(_){console.error(_)});return}for(var m=[u[0]/l[2],u[1]/l[3]],w=[A.tileSize[0]/m[0],A.tileSize[1]/m[1]],B=[Math.floor((c[0]-l[0])/w[0]),Math.ceil((c[0]+c[2]-l[0])/w[0])],b=B[0],E=B[1],x=[Math.floor((c[1]-l[1])/w[1]),Math.ceil((c[1]+c[3]-l[1])/w[1])],S=x[0],C=x[1],F=S;F<=C;F++)for(var M=b;M<=E;M++){var T=A.tiles[F][M];if(T){var O=[Math.floor(l[0]+T.tileX*w[0]),Math.floor(l[1]+T.tileY*w[1]),Math.ceil(w[0]),Math.ceil(w[1])];n.drawImage(T.data,O[0],O[1],O[2],O[3])}}n.setTransform(d,f,g,v,p,y)}},{key:"render",value:function(n,i,a){var s=i.x,o=s===void 0?0:s,A=i.y,l=A===void 0?0:A,c=i.width,u=i.height,h=i.src,d=i.shadowColor,f=i.shadowBlur,g=this.imagePool.getImageSync(h,a),v=g==null?void 0:g.img,p=c,y=u;if(v){p||(p=v.width),y||(y=v.height);var m=!le(d)&&f>0;wh(a,n,m);try{var w=a.ownerDocument.defaultView.getContextService().getDomElement(),B=w.width,b=w.height,E=n.getTransform(),x=E.a,S=E.b,C=E.c,F=E.d,M=E.e,T=E.f,O=ZO(x,C,0,0,S,F,0,0,0,0,1,0,M,T,0,1),_=yj([o,l,p,y],O),Q=pj([0,0,B,b],_);if(!Q)return;if(!a.ownerDocument.defaultView.getConfig().enableLargeImageOptimization){e.renderFull(n,i,a,{image:v,drawRect:[o,l,p,y]});return}var L=_[2]/g.size[0];if(L<(g.downSamplingRate||.5)){this.renderDownSampled(n,i,a,{src:h,imageCache:g,drawRect:[o,l,p,y]});return}if(!ImagePool.isSupportTile){e.renderFull(n,i,a,{image:v,drawRect:[o,l,p,y]});return}this.renderTile(n,i,a,{src:h,imageCache:g,imageRect:_,drawRect:Q})}catch{}}}},{key:"drawToContext",value:function(n,i,a,s,o){this.render(n,i.parsedStyle,i)}}],[{key:"renderFull",value:function(n,i,a,s){n.drawImage(s.image,Math.floor(s.drawRect[0]),Math.floor(s.drawRect[1]),Math.ceil(s.drawRect[2]),Math.ceil(s.drawRect[3]))}}])}(hB),wj=function(r){function e(){return G(this,e),ye(this,e,arguments)}return me(e,r),K(e,[{key:"render",value:function(n,i,a,s,o,A){a.getBounds();var l=i.lineWidth,c=l===void 0?1:l,u=i.textAlign,h=u===void 0?"start":u,d=i.textBaseline,f=d===void 0?"alphabetic":d,g=i.lineJoin,v=g===void 0?"miter":g,p=i.miterLimit,y=p===void 0?10:p,m=i.letterSpacing,w=m===void 0?0:m,B=i.stroke,b=i.fill,E=i.fillRule,x=i.fillOpacity,S=x===void 0?1:x,C=i.strokeOpacity,F=C===void 0?1:C,M=i.opacity,T=M===void 0?1:M,O=i.metrics,_=i.x,Q=_===void 0?0:_,L=i.y,k=L===void 0?0:L,U=i.dx,D=i.dy,j=i.shadowColor,X=i.shadowBlur,W=i.textDecorationLine,Y=O.font,se=O.lines,te=O.height,ne=O.lineHeight,Le=O.lineMetrics;n.font=Y,n.lineWidth=c,n.textAlign=h==="middle"?"center":h;var ke=f;ke==="alphabetic"&&(ke="bottom"),n.lineJoin=v,le(y)||(n.miterLimit=y);var Ue=k;f==="middle"?Ue+=-te/2-ne/2:f==="bottom"||f==="alphabetic"||f==="ideographic"?Ue+=-te:(f==="top"||f==="hanging")&&(Ue+=-ne);var ct=Q+(U||0);Ue+=D||0,se.length===1&&(ke==="bottom"?(ke="middle",Ue-=.5*te):ke==="top"&&(ke="middle",Ue+=.5*te)),n.textBaseline=ke;var Pe=!le(j)&&X>0;wh(a,n,Pe);for(var xt=0;xt<se.length;xt++){var In=c/2+ct;Ue+=ne,!le(B)&&!B.isNone&&c&&this.drawLetterSpacing(n,a,se[xt],Le[xt],h,In,Ue,w,b,E,S,B,F,T,!0,s,o,A),le(b)||this.drawLetterSpacing(n,a,se[xt],Le[xt],h,In,Ue,w,b,E,S,B,F,T,!1,s,o,A)}W&&W!=="none"&&this.drawTextDecorations(n,i,a,se,ne,ct,k+(D||0),s,o,A)}},{key:"drawLetterSpacing",value:function(n,i,a,s,o,A,l,c,u,h,d,f,g,v,p,y,m,w){if(c===0){p?this.strokeText(n,i,a,A,l,f,g,y,m,w):this.fillText(n,i,a,A,l,u,h,d,v,y,m,w);return}var B=n.textAlign;n.textAlign="left";var b=A;o==="center"||o==="middle"?b=A-s.width/2:(o==="right"||o==="end")&&(b=A-s.width);for(var E=Array.from(a),x=n.measureText(a).width,S=0,C=0;C<E.length;++C){var F=E[C];p?this.strokeText(n,i,F,b,l,f,g,y,m,w):this.fillText(n,i,F,b,l,u,h,d,v,y,m,w),S=n.measureText(a.substring(C+1)).width,b+=x-S+c,x=S}n.textAlign=B}},{key:"fillText",value:function(n,i,a,s,o,A,l,c,u,h,d,f){sL(n,i,A,l,h,d,f,this.imagePool,!0);var g,v=!le(c)&&c!==1;v&&(g=n.globalAlpha,n.globalAlpha=c*u),n.fillText(a,s,o),v&&(n.globalAlpha=g)}},{key:"strokeText",value:function(n,i,a,s,o,A,l,c,u,h){z1(n,i,A,c,u,h,this.imagePool,!0);var d,f=!le(l)&&l!==1;f&&(d=n.globalAlpha,n.globalAlpha=l),n.strokeText(a,s,o),f&&(n.globalAlpha=d)}},{key:"drawTextDecorations",value:function(n,i,a,s,o,A,l,c,u,h){var d=i.textDecorationLine,f=i.textDecorationColor,g=i.textDecorationStyle,v=i.textDecorationThickness,p=v===void 0?1:v,y=i.textAlign,m=y===void 0?"start":y,w=i.lineWidth,B=w===void 0?1:w,b=i.metrics;if(!(!d||d==="none")){var E=b.lineMetrics,x=d.split(" ");switch(n.lineWidth=p,f&&(n.strokeStyle="rgba(".concat(f.r,", ").concat(f.g,", ").concat(f.b,", ").concat(f.alpha,")")),g){case"dashed":n.setLineDash([5,5]);break;case"dotted":n.setLineDash([2,2]);break;case"wavy":n.setLineDash([]);break;default:n.setLineDash([]);break}var S=l,C=i.textBaseline,F=C===void 0?"alphabetic":C;F==="middle"?S+=-b.height/2-o/2:F==="bottom"||F==="alphabetic"||F==="ideographic"?S+=-b.height:(F==="top"||F==="hanging")&&(S+=-o);for(var M=0;M<s.length;M++){S+=o;var T=E[M];if(T){var O=B/2,_=A,Q=A+T.width;m==="center"||m==="middle"?(_=A-T.width/2,Q=A+T.width/2):(m==="right"||m==="end")&&(_=A-T.width,Q=A),_+=O,Q+=O;var L=ua(x),k;try{for(L.s();!(k=L.n()).done;){var U=k.value,D=S;switch(U){case"underline":D+=2;break;case"overline":D-=o-2;break;case"line-through":D-=o/2;break;default:continue}g==="wavy"?this.drawWavyLine(n,_,Q,D):(n.beginPath(),n.moveTo(_,D),n.lineTo(Q,D),n.stroke())}}catch(j){L.e(j)}finally{L.f()}}}n.setLineDash([])}}},{key:"drawWavyLine",value:function(n,i,a,s){var o=2,A=10,l=Math.floor((a-i)/A);n.beginPath(),n.moveTo(i,s);for(var c=0;c<l;c++){var u=i+c*A+A/4,h=s+o,d=i+c*A+A/2,f=s;n.quadraticCurveTo(u,h,d,f);var g=i+c*A+A*3/4,v=s-o,p=i+(c+1)*A,y=s;n.quadraticCurveTo(g,v,p,y)}n.stroke()}},{key:"drawToContext",value:function(n,i,a,s,o){this.render(n,i.parsedStyle,i,i.ownerDocument.defaultView.context,s,o)}}])}(hB),Bj=function(r){function e(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return G(this,e),t=ye(this,e),t.name="canvas-renderer",t.options=n,t}return me(e,r),K(e,[{key:"init",value:function(){var n,i=ue({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),a=this.context.imagePool,s=new hB(a),o=(n={},ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(n,P.CIRCLE,s),P.ELLIPSE,s),P.RECT,s),P.IMAGE,new mj(a)),P.TEXT,new wj(a)),P.LINE,s),P.POLYLINE,s),P.POLYGON,s),P.PATH,s),P.GROUP,void 0),ee(ee(ee(n,P.HTML,void 0),P.MESH,void 0),P.FRAGMENT,void 0));this.context.defaultStyleRendererFactory=o,this.context.styleRendererFactory=o,this.addRenderingPlugin(new aL(i))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory}}])}(Pa),bj=xe(),Ej=xe(),xj=xe(),Cj=Ye(),oL=function(){function r(){var e=this;G(this,r),this.isHit=function(t,n,i,a){var s=e.context.pointInPathPickerFactory[t.nodeName];if(s){var o=li(Cj,i),A=mn(Ej,pn(xj,n[0],n[1],0),o);if(s(t,new rn(A[0],A[1]),a,e.isPointInPath,e.context,e.runtime))return!0}return!1},this.isPointInPath=function(t,n){var i=e.runtime.offscreenCanvasCreator.getOrCreateContext(e.context.config.offscreenCanvas),a=e.context.pathGeneratorFactory[t.nodeName];return a&&(i.beginPath(),a(i,t.parsedStyle),i.closePath()),i.isPointInPath(n.x,n.y)}}return K(r,[{key:"apply",value:function(t,n){var i,a=this,s=t.renderingService,o=t.renderingContext;this.context=t,this.runtime=n;var A=(i=o.root)===null||i===void 0?void 0:i.ownerDocument;s.hooks.pick.tapPromise(r.tag,function(){var l=ka(Xt().mark(function c(u){return Xt().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",a.pick(A,u));case 1:case"end":return h.stop()}},c)}));return function(c){return l.apply(this,arguments)}}()),s.hooks.pickSync.tap(r.tag,function(l){return a.pick(A,l)})}},{key:"pick",value:function(t,n){var i=n.topmost,a=n.position,s=a.x,o=a.y,A=pn(bj,s,o,0),l=t.elementsFromBBox(A[0],A[1],A[0],A[1]),c=[],u=ua(l),h;try{for(u.s();!(h=u.n()).done;){var d=h.value,f=d.getWorldTransform(),g=this.isHit(d,A,f,!1);if(g){var v=i_(d);if(v){var p=v.parsedStyle.clipPath,y=this.isHit(p,A,p.getWorldTransform(),!0);if(y){if(i)return n.picked=[d],n;c.push(d)}}else{if(i)return n.picked=[d],n;c.push(d)}}}}catch(m){u.e(m)}finally{u.f()}return n.picked=c,n}}])}();oL.tag="CanvasPicker";function Sj(r,e,t){var n=r.parsedStyle,i=n.cx,a=i===void 0?0:i,s=n.cy,o=s===void 0?0:s,A=n.r,l=n.fill,c=n.stroke,u=n.lineWidth,h=u===void 0?1:u,d=n.increasedLineWidthForHitTesting,f=d===void 0?0:d,g=n.pointerEvents,v=g===void 0?"auto":g,p=(h+f)/2,y=Ki(a,o,e.x,e.y),m=_s(v,l,c),w=pe(m,2),B=w[0],b=w[1];return B&&b||t?y<=A+p:B?y<=A:b?y>=A-p&&y<=A+p:!1}function Zc(r,e,t,n){return r/(t*t)+e/(n*n)}function Fj(r,e,t){var n=r.parsedStyle,i=n.cx,a=i===void 0?0:i,s=n.cy,o=s===void 0?0:s,A=n.rx,l=n.ry,c=n.fill,u=n.stroke,h=n.lineWidth,d=h===void 0?1:h,f=n.increasedLineWidthForHitTesting,g=f===void 0?0:f,v=n.pointerEvents,p=v===void 0?"auto":v,y=e.x,m=e.y,w=_s(p,c,u),B=pe(w,2),b=B[0],E=B[1],x=(d+g)/2,S=(y-a)*(y-a),C=(m-o)*(m-o);return b&&E||t?Zc(S,C,A+x,l+x)<=1:b?Zc(S,C,A,l)<=1:E?Zc(S,C,A-x,l-x)>=1&&Zc(S,C,A+x,l+x)<=1:!1}function cs(r,e,t,n,i,a){return i>=r&&i<=r+t&&a>=e&&a<=e+n}function Tj(r,e,t,n,i,a,s){var o=i/2;return cs(r-o,e-o,t,i,a,s)||cs(r+t-o,e-o,i,n,a,s)||cs(r+o,e+n-o,t,i,a,s)||cs(r-o,e+o,i,n,a,s)}function Jc(r,e,t,n,i,a,s,o){var A=(Math.atan2(o-e,s-r)+Math.PI*2)%(Math.PI*2),l={x:r+t*Math.cos(A),y:e+t*Math.sin(A)};return Ki(l.x,l.y,s,o)<=a/2}function wa(r,e,t,n,i,a,s){var o=Math.min(r,t),A=Math.max(r,t),l=Math.min(e,n),c=Math.max(e,n),u=i/2;return a>=o-u&&a<=A+u&&s>=l-u&&s<=c+u?ZR(r,e,t,n,a,s)<=i/2:!1}function AL(r,e,t,n,i){var a=r.length;if(a<2)return!1;for(var s=0;s<a-1;s++){var o=r[s][0],A=r[s][1],l=r[s+1][0],c=r[s+1][1];if(wa(o,A,l,c,e,t,n))return!0}if(i){var u=r[0],h=r[a-1];if(wa(u[0],u[1],h[0],h[1],e,t,n))return!0}return!1}var Mj=1e-6;function Tg(r){return Math.abs(r)<Mj?0:r<0?-1:1}function Oj(r,e,t){return(t[0]-r[0])*(e[1]-r[1])===(e[0]-r[0])*(t[1]-r[1])&&Math.min(r[0],e[0])<=t[0]&&t[0]<=Math.max(r[0],e[0])&&Math.min(r[1],e[1])<=t[1]&&t[1]<=Math.max(r[1],e[1])}function lL(r,e,t){var n=!1,i=r.length;if(i<=2)return!1;for(var a=0;a<i;a++){var s=r[a],o=r[(a+1)%i];if(Oj(s,o,[e,t]))return!0;Tg(s[1]-t)>0!=Tg(o[1]-t)>0&&Tg(e-(t-s[1])*(s[0]-o[0])/(s[1]-o[1])-s[0])<0&&(n=!n)}return n}function xx(r,e,t){for(var n=!1,i=0;i<r.length;i++){var a=r[i];if(n=lL(a,e,t),n)break}return n}function Ij(r,e,t){var n=r.parsedStyle,i=n.x1,a=n.y1,s=n.x2,o=n.y2,A=n.lineWidth,l=A===void 0?1:A,c=n.increasedLineWidthForHitTesting,u=c===void 0?0:c,h=n.pointerEvents,d=h===void 0?"auto":h,f=n.fill,g=n.stroke,v=_s(d,f,g),p=pe(v,2),y=p[1];return!y&&!t||!l?!1:wa(i,a,s,o,l+u,e.x,e.y)}function _j(r,e,t,n,i){for(var a=!1,s=e/2,o=0;o<r.length;o++){var A=r[o],l=A.currentPoint,c=A.params,u=A.prePoint,h=A.box;if(!(h&&!cs(h.x-s,h.y-s,h.width+e,h.height+e,t,n)))switch(A.command){case"L":case"Z":if(a=wa(u[0],u[1],l[0],l[1],e,t,n),a)return!0;break;case"Q":var d=aD(u[0],u[1],c[1],c[2],c[3],c[4],t,n);if(a=d<=e/2,a)return!0;break;case"C":var f=Sb(u[0],u[1],c[1],c[2],c[3],c[4],c[5],c[6],t,n,i);if(a=f<=e/2,a)return!0;break;case"A":A.cubicParams||(A.cubicParams=_w(u[0],u[1],c[1],c[2],c[3],c[4],c[5],c[6],c[7],void 0));for(var g=A.cubicParams,v=u,p=0;p<g.length;p+=6){var y=Sb(v[0],v[1],g[p],g[p+1],g[p+2],g[p+3],g[p+4],g[p+5],t,n,i);if(v=[g[p+4],g[p+5]],a=y<=e/2,a)return!0}break}}return a}function kj(r,e,t,n,i,a){var s=r.parsedStyle,o=s.lineWidth,A=o===void 0?1:o,l=s.increasedLineWidthForHitTesting,c=l===void 0?0:l,u=s.stroke,h=s.fill,d=s.d,f=s.pointerEvents,g=f===void 0?"auto":f,v=d.segments,p=d.hasArc,y=d.polylines,m=d.polygons,w=_s(g,(m==null?void 0:m.length)&&h,u),B=pe(w,2),b=B[0],E=B[1],x=f1(r),S=!1;return b||t?(p?S=n(r,e):S=xx(m,e.x,e.y)||xx(y,e.x,e.y),S):((E||t)&&(S=_j(v,A+c,e.x,e.y,x)),S)}function Lj(r,e,t){var n=r.parsedStyle,i=n.stroke,a=n.fill,s=n.lineWidth,o=s===void 0?1:s,A=n.increasedLineWidthForHitTesting,l=A===void 0?0:A,c=n.points,u=n.pointerEvents,h=u===void 0?"auto":u,d=_s(h,a,i),f=pe(d,2),g=f[0],v=f[1],p=!1;return(v||t)&&(p=AL(c.points,o+l,e.x,e.y,!0)),!p&&(g||t)&&(p=lL(c.points,e.x,e.y)),p}function Qj(r,e,t){var n=r.parsedStyle,i=n.lineWidth,a=i===void 0?1:i,s=n.increasedLineWidthForHitTesting,o=s===void 0?0:s,A=n.points,l=n.pointerEvents,c=l===void 0?"auto":l,u=n.fill,h=n.stroke,d=_s(c,u,h),f=pe(d,2),g=f[1];return!g&&!t||!a?!1:AL(A.points,a+o,e.x,e.y,!1)}function Nj(r,e,t,n,i){var a=r.parsedStyle,s=a.radius,o=a.fill,A=a.stroke,l=a.lineWidth,c=l===void 0?1:l,u=a.increasedLineWidthForHitTesting,h=u===void 0?0:u,d=a.x,f=d===void 0?0:d,g=a.y,v=g===void 0?0:g,p=a.width,y=a.height,m=a.pointerEvents,w=m===void 0?"auto":m,B=_s(w,o,A),b=pe(B,2),E=b[0],x=b[1],S=s&&s.some(function(T){return T!==0}),C=c+h;if(S){var M=!1;return(x||t)&&(M=Uj(f,v,p,y,s.map(function(T){return vt(T,0,Math.min(Math.abs(p)/2,Math.abs(y)/2))}),C,e.x,e.y)),!M&&(E||t)&&(M=n(r,e)),M}else{var F=C/2;if(E&&x||t)return cs(f-F,v-F,p+F,y+F,e.x,e.y);if(E)return cs(f,v,p,y,e.x,e.y);if(x)return Tj(f,v,p,y,C,e.x,e.y)}return!1}function Uj(r,e,t,n,i,a,s,o){var A=pe(i,4),l=A[0],c=A[1],u=A[2],h=A[3];return wa(r+l,e,r+t-c,e,a,s,o)||wa(r+t,e+c,r+t,e+n-u,a,s,o)||wa(r+t-u,e+n,r+h,e+n,a,s,o)||wa(r,e+n-h,r,e+l,a,s,o)||Jc(r+t-c,e+c,c,1.5*Math.PI,2*Math.PI,a,s,o)||Jc(r+t-u,e+n-u,u,0,.5*Math.PI,a,s,o)||Jc(r+h,e+n-h,h,.5*Math.PI,Math.PI,a,s,o)||Jc(r+l,e+l,l,Math.PI,1.5*Math.PI,a,s,o)}function Pj(r,e,t,n,i,a){var s=r.parsedStyle,o=s.pointerEvents,A=o===void 0?"auto":o,l=s.x,c=l===void 0?0:l,u=s.y,h=u===void 0?0:u,d=s.width,f=s.height;if(A==="non-transparent-pixel"){var g=i.config.offscreenCanvas,v=a.offscreenCanvasCreator.getOrCreateCanvas(g),p=a.offscreenCanvasCreator.getOrCreateContext(g,{willReadFrequently:!0});v.width=d,v.height=f,i.defaultStyleRendererFactory[P.IMAGE].render(p,ue(ue({},r.parsedStyle),{},{x:0,y:0}),r,void 0,void 0,void 0);var y=p.getImageData(e.x-c,e.y-h,1,1).data;return y.every(function(m){return m!==0})}return!0}function Rj(r,e,t,n){var i=r.getGeometryBounds();return e.x>=i.min[0]&&e.y>=i.min[1]&&e.x<=i.max[0]&&e.y<=i.max[1]}var Dj=function(r){function e(){var t;G(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=ye(this,e,[].concat(i)),t.name="canvas-picker",t}return me(e,r),K(e,[{key:"init",value:function(){var n,i=(n={},ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(n,P.CIRCLE,Sj),P.ELLIPSE,Fj),P.RECT,Nj),P.LINE,Ij),P.POLYLINE,Qj),P.POLYGON,Lj),P.PATH,kj),P.TEXT,Rj),P.GROUP,null),P.IMAGE,Pj),ee(ee(n,P.HTML,null),P.MESH,null));this.context.pointInPathPickerFactory=i,this.addRenderingPlugin(new oL)}},{key:"destroy",value:function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()}}])}(Pa);function Hj(r,e){var t=e.cx,n=t===void 0?0:t,i=e.cy,a=i===void 0?0:i,s=e.r;r.arc(n,a,s,0,Math.PI*2,!1)}function Gj(r,e){var t=e.cx,n=t===void 0?0:t,i=e.cy,a=i===void 0?0:i,s=e.rx,o=e.ry;if(r.ellipse)r.ellipse(n,a,s,o,0,0,Math.PI*2,!1);else{var A=s>o?s:o,l=s>o?1:s/o,c=s>o?o/s:1;r.save(),r.scale(l,c),r.arc(n,a,A,0,Math.PI*2)}}function Kj(r,e){var t=e.x1,n=e.y1,i=e.x2,a=e.y2,s=e.markerStart,o=e.markerEnd,A=e.markerStartOffset,l=e.markerEndOffset,c=0,u=0,h=0,d=0,f=0,g,v;s&&Ne(s)&&A&&(g=i-t,v=a-n,f=Math.atan2(v,g),c=Math.cos(f)*(A||0),u=Math.sin(f)*(A||0)),o&&Ne(o)&&l&&(g=t-i,v=n-a,f=Math.atan2(v,g),h=Math.cos(f)*(l||0),d=Math.sin(f)*(l||0)),r.moveTo(t+c,n+u),r.lineTo(i+h,a+d)}function zj(r,e){var t=e.markerStart,n=e.markerEnd,i=e.markerStartOffset,a=e.markerEndOffset,s=e.d,o=s.absolutePath,A=s.segments,l=0,c=0,u=0,h=0,d=0,f,g;if(t&&Ne(t)&&i){var v=t.parentNode.getStartTangent(),p=pe(v,2),y=p[0],m=p[1];f=y[0]-m[0],g=y[1]-m[1],d=Math.atan2(g,f),l=Math.cos(d)*(i||0),c=Math.sin(d)*(i||0)}if(n&&Ne(n)&&a){var w=n.parentNode.getEndTangent(),B=pe(w,2),b=B[0],E=B[1];f=b[0]-E[0],g=b[1]-E[1],d=Math.atan2(g,f),u=Math.cos(d)*(a||0),h=Math.sin(d)*(a||0)}for(var x=0;x<o.length;x++){var S=o[x],C=S[0],F=o[x+1],M=x===0&&(l!==0||c!==0),T=(x===o.length-1||F&&(F[0]==="M"||F[0]==="Z"))&&u!==0&&h!==0,O=M?[l,c]:[0,0],_=pe(O,2),Q=_[0],L=_[1],k=T?[u,h]:[0,0],U=pe(k,2),D=U[0],j=U[1];switch(C){case"M":r.moveTo(S[1]+Q,S[2]+L);break;case"L":r.lineTo(S[1]+D,S[2]+j);break;case"Q":r.quadraticCurveTo(S[1],S[2],S[3]+D,S[4]+j);break;case"C":r.bezierCurveTo(S[1],S[2],S[3],S[4],S[5]+D,S[6]+j);break;case"A":{var X=A[x].arcParams,W=X.cx,Y=X.cy,se=X.rx,te=X.ry,ne=X.startAngle,Le=X.endAngle,ke=X.xRotation,Ue=X.sweepFlag;if(r.ellipse)r.ellipse(W,Y,se,te,ke,ne,Le,!!(1-Ue));else{var ct=se>te?se:te,Pe=se>te?1:se/te,xt=se>te?te/se:1;r.translate(W,Y),r.rotate(ke),r.scale(Pe,xt),r.arc(0,0,ct,ne,Le,!!(1-Ue)),r.scale(1/Pe,1/xt),r.rotate(-ke),r.translate(-W,-Y)}T&&r.lineTo(S[6]+u,S[7]+h);break}case"Z":r.closePath();break}}}function Vj(r,e){var t=e.markerStart,n=e.markerEnd,i=e.markerStartOffset,a=e.markerEndOffset,s=e.points.points,o=s.length,A=s[0][0],l=s[0][1],c=s[o-1][0],u=s[o-1][1],h=0,d=0,f=0,g=0,v=0,p,y;t&&Ne(t)&&i&&(p=s[1][0]-s[0][0],y=s[1][1]-s[0][1],v=Math.atan2(y,p),h=Math.cos(v)*(i||0),d=Math.sin(v)*(i||0)),n&&Ne(n)&&a&&(p=s[o-1][0]-s[0][0],y=s[o-1][1]-s[0][1],v=Math.atan2(y,p),f=Math.cos(v)*(a||0),g=Math.sin(v)*(a||0)),r.moveTo(A+(h||f),l+(d||g));for(var m=1;m<o-1;m++){var w=s[m];r.lineTo(w[0],w[1])}r.lineTo(c,u)}function jj(r,e){var t=e.markerStart,n=e.markerEnd,i=e.markerStartOffset,a=e.markerEndOffset,s=e.points.points,o=s.length,A=s[0][0],l=s[0][1],c=s[o-1][0],u=s[o-1][1],h=0,d=0,f=0,g=0,v=0,p,y;t&&Ne(t)&&i&&(p=s[1][0]-s[0][0],y=s[1][1]-s[0][1],v=Math.atan2(y,p),h=Math.cos(v)*(i||0),d=Math.sin(v)*(i||0)),n&&Ne(n)&&a&&(p=s[o-2][0]-s[o-1][0],y=s[o-2][1]-s[o-1][1],v=Math.atan2(y,p),f=Math.cos(v)*(a||0),g=Math.sin(v)*(a||0)),r.moveTo(A+h,l+d);for(var m=1;m<o-1;m++){var w=s[m];r.lineTo(w[0],w[1])}r.lineTo(c+f,u+g)}function $j(r,e){var t=e.x,n=t===void 0?0:t,i=e.y,a=i===void 0?0:i,s=e.radius,o=e.width,A=e.height,l=o,c=A,u=s&&s.some(function(B){return B!==0});if(!u)r.rect(n,a,l,c);else{var h=o>0?1:-1,d=A>0?1:-1,f=h+d===0,g=s.map(function(B){return vt(B,0,Math.min(Math.abs(l)/2,Math.abs(c)/2))}),v=pe(g,4),p=v[0],y=v[1],m=v[2],w=v[3];r.moveTo(h*p+n,a),r.lineTo(l-h*y+n,a),y!==0&&r.arc(l-h*y+n,d*y+a,y,-d*Math.PI/2,h>0?0:Math.PI,f),r.lineTo(l+n,c-d*m+a),m!==0&&r.arc(l-h*m+n,c-d*m+a,m,h>0?0:Math.PI,d>0?Math.PI/2:1.5*Math.PI,f),r.lineTo(h*w+n,c+a),w!==0&&r.arc(h*w+n,c-d*w+a,w,d>0?Math.PI/2:-Math.PI/2,h>0?Math.PI:0,f),r.lineTo(n,d*p+a),p!==0&&r.arc(h*p+n,d*p+a,p,h>0?Math.PI:0,d>0?Math.PI*1.5:Math.PI/2,f)}}var Wj=function(r){function e(){var t;G(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=ye(this,e,[].concat(i)),t.name="canvas-path-generator",t}return me(e,r),K(e,[{key:"init",value:function(){var n,i=(n={},ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(n,P.CIRCLE,Hj),P.ELLIPSE,Gj),P.RECT,$j),P.LINE,Kj),P.POLYLINE,jj),P.POLYGON,Vj),P.PATH,zj),P.TEXT,void 0),P.GROUP,void 0),P.IMAGE,void 0),ee(ee(ee(n,P.HTML,void 0),P.MESH,void 0),P.FRAGMENT,void 0));this.context.pathGeneratorFactory=i}},{key:"destroy",value:function(){delete this.context.pathGeneratorFactory}}])}(Pa),qj=function(){function r(e){G(this,r),this.renderingContext=e.renderingContext,this.canvasConfig=e.config}return K(r,[{key:"init",value:function(){var t=this.canvasConfig,n=t.container,i=t.canvas;if(i)this.$canvas=i,n&&i.parentElement!==n&&n.appendChild(i),this.$container=i.parentElement,this.canvasConfig.container=this.$container;else if(n&&(this.$container=_e(n)?document.getElementById(n):n,this.$container)){var a=document.createElement("canvas");this.$container.appendChild(a),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=a}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height)}},{key:"getContext",value:function(){return this.context}},{key:"getDomElement",value:function(){return this.$canvas}},{key:"getDPR",value:function(){return this.dpr}},{key:"getBoundingClientRect",value:function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()}},{key:"destroy",value:function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)}},{key:"resize",value:function(t,n){var i=this.canvasConfig.devicePixelRatio;this.dpr=i,this.$canvas&&(this.$canvas.width=this.dpr*t,this.$canvas.height=this.dpr*n,h4(this.$canvas,t,n)),this.renderingContext.renderReasons.add(Co.CAMERA_CHANGED)}},{key:"applyCursorStyle",value:function(t){this.$container&&this.$container.style&&(this.$container.style.cursor=t)}},{key:"toDataURL",value:function(){var e=ka(Xt().mark(function n(){var i,a,s,o=arguments;return Xt().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return i=o.length>0&&o[0]!==void 0?o[0]:{},a=i.type,s=i.encoderOptions,A.abrupt("return",this.context.canvas.toDataURL(a,s));case 1:case"end":return A.stop()}},n,this)}));function t(){return e.apply(this,arguments)}return t}()}])}(),Yj=function(r){function e(){var t;G(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=ye(this,e,[].concat(i)),t.name="canvas-context-register",t}return me(e,r),K(e,[{key:"init",value:function(){this.context.ContextService=qj}},{key:"destroy",value:function(){delete this.context.ContextService}}])}(Pa),ll=function(r){function e(t){var n;return G(this,e),n=ye(this,e,[t]),n.registerPlugin(new Yj),n.registerPlugin(new GH.Plugin),n.registerPlugin(new Wj),n.registerPlugin(new Bj),n.registerPlugin(new $H.Plugin),n.registerPlugin(new Dj),n.registerPlugin(new VH.Plugin),n}return me(e,r),K(e)}(lD),Xj=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class Ad extends Wr{constructor(e){super(Object.assign(Object.assign({},e),{style:Object.assign({},Ad.defaultStyleProps,e.style)})),this.rootPointerEvent=new ih(null),this.forwardEvents=t=>{const n=this.context.canvas,i=n.context.renderingContext.root.ownerDocument.defaultView;this.normalizeToPointerEvent(t,i).forEach(s=>{const o=this.bootstrapEvent(this.rootPointerEvent,s,i,t);JA(n.context.eventService,"mappingTable.pointerupoutside",[]),n.context.eventService.mapEvent(o)})}}get eventService(){return this.context.canvas.context.eventService}get events(){return[R.CLICK,R.POINTER_DOWN,R.POINTER_MOVE,R.POINTER_UP,R.POINTER_OVER,R.POINTER_LEAVE]}getDomElement(){return this.getShape("key").getDomElement()}render(e=this.parsedAttributes,t=this){this.drawKeyShape(e,t),this.drawPortShapes(e,t)}getKeyStyle(e){const t=Es(e,["dx","dy","innerHTML","pointerEvents","cursor"]),{dx:n=0,dy:i=0}=t,a=Xj(t,["dx","dy"]),[s,o]=this.getSize(e);return Object.assign(Object.assign({x:n,y:i},a),{width:s,height:o})}drawKeyShape(e,t){const n=this.getKeyStyle(e),{x:i,y:a,width:s=0,height:o=0}=n,A=this.upsert("key-container",An,{x:i,y:a,width:s,height:o,opacity:0},t);return this.upsert("key",ks,n,A)}connectedCallback(){if(!(this.context.canvas.getRenderer("main")instanceof ll))return;const n=this.getDomElement();this.events.forEach(i=>{n.addEventListener(i,this.forwardEvents)})}attributeChangedCallback(e,t,n){e==="zIndex"&&t!==n&&(this.getDomElement().style.zIndex=n)}destroy(){const e=this.getDomElement();this.events.forEach(t=>{e.removeEventListener(t,this.forwardEvents)}),super.destroy()}normalizeToPointerEvent(e,t){const n=[];if(t.isTouchEvent(e))for(let i=0;i<e.changedTouches.length;i++){const a=e.changedTouches[i];he(a.button)&&(a.button=0),he(a.buttons)&&(a.buttons=1),he(a.isPrimary)&&(a.isPrimary=e.touches.length===1&&e.type==="touchstart"),he(a.width)&&(a.width=a.radiusX||1),he(a.height)&&(a.height=a.radiusY||1),he(a.tiltX)&&(a.tiltX=0),he(a.tiltY)&&(a.tiltY=0),he(a.pointerType)&&(a.pointerType="touch"),he(a.pointerId)&&(a.pointerId=a.identifier||0),he(a.pressure)&&(a.pressure=a.force||.5),he(a.twist)&&(a.twist=0),he(a.tangentialPressure)&&(a.tangentialPressure=0),a.isNormalized=!0,a.type=e.type,n.push(a)}else if(t.isMouseEvent(e)){const i=e;he(i.isPrimary)&&(i.isPrimary=!0),he(i.width)&&(i.width=1),he(i.height)&&(i.height=1),he(i.tiltX)&&(i.tiltX=0),he(i.tiltY)&&(i.tiltY=0),he(i.pointerType)&&(i.pointerType="mouse"),he(i.pointerId)&&(i.pointerId=1),he(i.pressure)&&(i.pressure=.5),he(i.twist)&&(i.twist=0),he(i.tangentialPressure)&&(i.tangentialPressure=0),i.isNormalized=!0,n.push(i)}else n.push(e);return n}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.metaKey=t.metaKey,e.shiftKey=t.shiftKey,e.ctrlKey=t.ctrlKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.screen.x=t.screenX,e.screen.y=t.screenY,e.relatedTarget=null}bootstrapEvent(e,t,n,i){e.view=n,e.originalEvent=null,e.nativeEvent=i,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t);const{x:a,y:s}=this.getViewportXY(t);e.viewport.x=a,e.viewport.y=s;const[o,A]=this.context.canvas.getCanvasByViewport([a,s]);return e.canvas.x=o,e.canvas.y=A,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.isTrusted=i.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e}getViewportXY(e){let t,n;const{offsetX:i,offsetY:a,clientX:s,clientY:o}=e;if(!le(i)&&!le(a))t=i,n=a;else{const A=this.eventService.client2Viewport({x:s,y:o});t=A.x,n=A.y}return{x:t,y:n}}onframe(){super.onframe();const{opacity:e}=this.attributes;this.getDomElement().style.opacity=`${e}`}}Ad.defaultStyleProps={size:[160,80],halo:!1,icon:!1,label:!1,pointerEvents:"auto"};var Cx=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};let cL=class uL extends Wr{constructor(e){super(Jt({style:uL.defaultStyleProps},e))}getKeyStyle(e){const[t,n]=this.getSize(e),i=super.getKeyStyle(e),{fillOpacity:a,opacity:s=a}=i,o=Cx(i,["fillOpacity","opacity"]);return Object.assign(Object.assign({opacity:s},o),{width:t,height:n,x:-t/2,y:-n/2})}getBounds(){return this.getShape("key").getBounds()}getHaloStyle(e){if(e.halo===!1)return!1;const t=this.getShape("key").attributes,{fill:n,stroke:i}=t;Cx(t,["fill","stroke"]);const a=bt(this.getGraphicStyle(e),"halo"),s=Number(a.lineWidth),[o,A]=ve(this.getSize(e),[s,s]),{lineWidth:l}=a,c={fill:"transparent",lineWidth:l/2,width:o-l/2,height:A-l/2,x:-(o-l/2)/2,y:-(A-l/2)/2};return Object.assign(Object.assign({},a),c)}getIconStyle(e){const t=super.getIconStyle(e),[n,i]=this.getSize(e);return t?Object.assign({width:n*ji,height:i*ji},t):!1}drawKeyShape(e,t){const n=this.upsert("key",lB,this.getKeyStyle(e),t);return cB(this),n}drawHaloShape(e,t){this.upsert("halo",An,this.getHaloStyle(e),t)}update(e){super.update(e),e&&("x"in e||"y"in e||"z"in e)&&uB(this)}};cL.defaultStyleProps={size:32};class Zj extends Wr{constructor(e){super(e)}getKeyStyle(e){const[t,n]=this.getSize(e);return Object.assign(Object.assign({},super.getKeyStyle(e)),{width:t,height:n,x:-t/2,y:-n/2})}getIconStyle(e){const t=super.getIconStyle(e),{width:n,height:i}=this.getShape("key").attributes;return t?Object.assign({width:n*ji,height:i*ji},t):!1}drawKeyShape(e,t){return this.upsert("key",An,this.getKeyStyle(e),t)}}class Jj extends ad{constructor(e){super(e)}getInnerR(e){return e.innerR||this.getOuterR(e)*3/8}getOuterR(e){return Math.min(...this.getSize(e))/2}getPoints(e){return N9(this.getOuterR(e),this.getInnerR(e))}getIconStyle(e){const t=super.getIconStyle(e),n=this.getInnerR(e)*2*ji;return t?Object.assign({width:n,height:n},t):!1}getPortXY(e,t){const{placement:n="top"}=t,i=this.getShape("key").getLocalBounds(),a=U9(this.getOuterR(e),this.getInnerR(e));return gB(i,n,a,!1)}}class ld extends ad{constructor(e){super(Jt({style:ld.defaultStyleProps},e))}getPoints(e){const{direction:t}=e,[n,i]=this.getSize(e);return P9(n,i,t)}getPortXY(e,t){const{direction:n}=e,{placement:i="top"}=t,a=this.getShape("key").getLocalBounds(),[s,o]=this.getSize(e),A=R9(s,o,n);return gB(a,i,A,!1)}getIconStyle(e){const{icon:t,iconText:n,iconSrc:i,direction:a}=e;if(t===!1||Ai(n||i))return!1;const s=bt(this.getGraphicStyle(e),"icon"),o=this.getShape("key").getLocalBounds(),[A,l]=AV(o,a),c=lV(o,a)*2*ji;return Object.assign({x:A,y:l,width:c,height:c},s)}}ld.defaultStyleProps={size:40,direction:"up"};var Sx=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class Ho extends Wr{constructor(e){super(Jt({style:Ho.defaultStyleProps},e)),this.type="combo",this.updateComboPosition(this.parsedAttributes)}getKeySize(e){const{collapsed:t,childrenNode:n=[]}=e;return n.length===0?this.getEmptyKeySize(e):t?this.getCollapsedKeySize(e):this.getExpandedKeySize(e)}getEmptyKeySize(e){const{padding:t,collapsedSize:n}=e,[i,a,s,o]=Sr(t);return ve(Ar(n),[o+a,i+s,0])}getCollapsedKeySize(e){return Ar(e.collapsedSize)}getExpandedKeySize(e){const t=this.getContentBBox(e);return[xi(t),Ci(t),0]}getContentBBox(e){const{childrenNode:t=[],padding:n}=e,i=t.map(s=>this.context.element.getElement(s)).filter(Boolean);if(i.length===0){const s=new tt,{x:o=0,y:A=0,size:l}=e,[c,u]=Ar(l);return s.setMinMax([o-c/2,A-u/2,0],[o+c/2,A+u/2,0]),s}const a=Ml(i.map(s=>s.getBounds()));return n?Da(a,n):a}drawCollapsedMarkerShape(e,t){const n=this.getCollapsedMarkerStyle(e);this.upsert("collapsed-marker",nL,n,t),cB(this)}getCollapsedMarkerStyle(e){if(!e.collapsed||!e.collapsedMarker)return!1;const t=bt(this.getGraphicStyle(e),"collapsedMarker"),{type:n}=t,i=Sx(t,["type"]),a=this.getShape("key"),[s,o]=Ni(a.getLocalBounds(),"center"),A=Object.assign(Object.assign({},i),{x:s,y:o});if(n){const l=this.getCollapsedMarkerText(n,e);Object.assign(A,{text:l})}return A}getCollapsedMarkerText(e,t){const{childrenData:n=[]}=t,{model:i}=this.context;return e==="descendant-count"?i.getDescendantsData(this.id).length.toString():e==="child-count"?n.length.toString():e==="node-count"?i.getDescendantsData(this.id).filter(a=>i.getElementType(N(a))==="node").length.toString():ie(e)?e(n):""}getComboPosition(e){const{x:t=0,y:n=0,collapsed:i,childrenData:a=[]}=e;if(a.length===0)return[+t,+n,0];if(i){const{model:s}=this.context,o=s.getDescendantsData(this.id).filter(A=>!s.isCombo(N(A)));if(o.length>0&&o.some(QV)){const A=o.reduce((l,c)=>ve(l,Vt(c)),[0,0,0]);return jr(A,o.length)}return[+t,+n,0]}return this.getContentBBox(e).center}getComboStyle(e){const[t,n]=this.getComboPosition(e);return{x:t,y:n,transform:[["translate",t,n]]}}updateComboPosition(e){const t=this.getComboStyle(e);Object.assign(this.style,t);const{x:n,y:i}=t;this.context.model.syncNodeLikeDatum({id:this.id,style:{x:n,y:i}}),uB(this)}render(e,t=this){super.render(e,t),this.drawCollapsedMarkerShape(e,t)}update(e={}){super.update(e),this.updateComboPosition(this.parsedAttributes)}onframe(){super.onframe(),this.attributes.collapsed||this.updateComboPosition(this.parsedAttributes),this.drawKeyShape(this.parsedAttributes,this)}animate(e,t){const n=super.animate(this.attributes.collapsed?e:e.map(i=>{var{x:a,y:s,z:o,transform:A}=i,l=Sx(i,["x","y","z","transform"]);return l}),t);return n&&new Proxy(n,{set:(i,a,s)=>(a==="currentTime"&&Promise.resolve().then(()=>this.onframe()),Reflect.set(i,a,s))})}}Ho.defaultStyleProps={childrenNode:[],droppable:!0,draggable:!0,collapsed:!1,collapsedSize:32,collapsedMarker:!0,collapsedMarkerZIndex:1,collapsedMarkerFontSize:12,collapsedMarkerTextAlign:"center",collapsedMarkerTextBaseline:"middle",collapsedMarkerType:"child-count"};class e9 extends Ho{constructor(e){super(e)}drawKeyShape(e,t){return this.upsert("key",yi,this.getKeyStyle(e),t)}getKeyStyle(e){const{collapsed:t}=e,n=super.getKeyStyle(e),[i]=this.getKeySize(e);return Object.assign(Object.assign(Object.assign({},n),t&&bt(n,"collapsed")),{r:i/2})}getCollapsedKeySize(e){const[t,n]=Ar(e.collapsedSize),i=Math.max(t,n)/2;return[i*2,i*2,0]}getExpandedKeySize(e){const t=this.getContentBBox(e),[n,i]=Ra(t),a=Math.sqrt(Math.pow(n,2)+Math.pow(i,2))/2;return[a*2,a*2,0]}getIntersectPoint(e,t=!1){const n=this.getShape("key").getBounds();return rd(e,n,t)}}class t9 extends Ho{constructor(e){super(e)}drawKeyShape(e,t){return this.upsert("key",An,this.getKeyStyle(e),t)}getKeyStyle(e){const t=super.getKeyStyle(e),[n,i]=this.getKeySize(e);return Object.assign(Object.assign(Object.assign({},t),e.collapsed&&bt(t,"collapsed")),{width:n,height:i,x:-n/2,y:-i/2})}}const n9={padding:10};function Fx(r,e,t,n,i,a){const{padding:s}=Object.assign(n9,a),o=ya(t,s),A=ya(n,s),l=[r,...i,e];let c=null;const u=[];for(let h=0,d=l.length;h<d-1;h++){const f=h+1,g=l[h],v=l[f],p=PV(g,v);let y=null;if(h===0)if(f===d-1)if(o.intersects(A))y=Mg(g,v,o,A);else if(!fh(g,o)&&!fh(v,A)){const m=ps(g,o),w=ps(v,A);y=Mx(m,w,Tn(m,w)),y.points.unshift(m),y.points.push(w)}else p||(y=i9(g,v,o,A));else Vr(v,o)?y=Mg(g,v,o,ya(v,s),c):p||(y=Tu(g,v,o));else f===d-1?Vr(g,A)?y=Mg(g,v,ya(g,s),A,c):p||(y=hL(g,v,A,c)):p||(y=Mx(g,v,c));y?(u.push(...y.points),c=y.direction):c=Tn(g,v),f<d-1&&u.push(v)}return u.map(Ms)}const r9={N:"S",S:"N",W:"E",E:"W"},Tx={N:-Math.PI/2,S:Math.PI/2,E:0,W:Math.PI};function Tn(r,e){const[t,n]=r,[i,a]=e;return t===i?n>a?"N":"S":n===a?t>i?"W":"E":null}function V1(r,e){return e==="N"||e==="S"?Ci(r):xi(r)}function Mx(r,e,t){const n=[r[0],e[1]],i=[e[0],r[1]],a=Tn(r,n),s=Tn(r,i),o=t?r9[t]:null,A=a===t||a!==o&&s!==t?n:i;return{points:[A],direction:Tn(A,e)}}function Tu(r,e,t){if(fh(r,t)){const n=cl(r,e,t);return{points:[n],direction:Tn(n,e)}}else{const n=ps(r,t),a=["left","right"].includes(jA(r,t))?[e[0],n[1]]:[n[0],e[1]];return{points:[a],direction:Tn(a,e)}}}function hL(r,e,t,n){const i=fh(e,t)?e:ps(e,t),a=[[i[0],r[1]],[r[0],i[1]]],s=a.filter(A=>oV(A,t)&&!kk(A,t,!0)),o=s.filter(A=>Tn(A,r)!==n);if(o.length>0){const A=o.find(l=>Tn(r,l)===n)||o[0];return{points:[A],direction:Tn(A,e)}}else{const A=KP(a,s)[0],l=Ta(e,A,V1(t,n)/2);return{points:[cl(l,r,t),l],direction:Tn(l,e)}}}function i9(r,e,t,n){let i=Tu(r,e,t);const a=Al(i.points[0]);if(Vr(a,n)){i=Tu(e,r,n);const s=Al(i.points[0]);if(Vr(s,t)){const o=Ta(r,a,V1(t,Tn(r,a))/2),A=Ta(e,s,V1(n,Tn(e,s))/2),l=[(o[0]+A[0])/2,(o[1]+A[1])/2],c=Tu(r,l,t),u=hL(l,e,n,c.direction);i.points=[c.points[0],u.points[0]],i.direction=u.direction}}return i}function Mg(r,e,t,n,i){const s=Ml([t,n]),o=rt(e,s.center)>rt(r,s.center),[A,l]=o?[e,r]:[r,e],c=Ci(s)+xi(s);let u;if(i){const f=[A[0]+c*Math.cos(Tx[i]),A[1]+c*Math.sin(Tx[i])];u=Ta(ps(f,s),f,.01)}else u=Ta(ps(A,s),A,-.01);let h=cl(u,l,s),d=[hA(u,2),hA(h,2)];if(pt(hA(u),hA(h))){const f=sB($e(u,A),[1,0,0])+Math.PI/2;h=[l[0]+c*Math.cos(f),l[1]+c*Math.sin(f),0],h=hA(Ta(ps(h,s),l,-.01),2);const g=cl(u,h,s);d=[u,g,h]}return{points:o?d.reverse():d,direction:Tn(o?u:h,e)}}function cl(r,e,t){let n=[r[0],e[1]];return Vr(n,t)&&(n=[e[0],r[1]]),n}function dL(r,e,t,n,i){let A=typeof e=="number"?e:.5;e==="start"&&(A=0),e==="end"&&(A=.99);const l=an(r.getPoint(A)),c=an(r.getPoint(A+.01));let u=e==="start"?"left":e==="end"?"right":"center";if(Vk(l,c)||!t){const[p,y]=Ox(r,A,n,i);return{transform:[["translate",p,y]],textAlign:u}}let h=Math.atan2(c[1]-l[1],c[0]-l[0]);c[0]<l[0]&&(u=u==="center"?u:u==="left"?"right":"left",n*=-1,h+=Math.PI);const[f,g]=Ox(r,A,n,i,h),v=[["translate",f,g],["rotate",h/Math.PI*180]];return{textAlign:u,transform:v}}function a9(r,e,t,n,i){var a,s;const o=((a=r.badge)===null||a===void 0?void 0:a.getGeometryBounds().halfExtents[0])*2||0,A=((s=r.label)===null||s===void 0?void 0:s.getGeometryBounds().halfExtents[0])*2||0;return dL(r.key,t,!0,(A?(A/2+o/2)*(e==="suffix"?1:-1):0)+n,i)}function Ox(r,e,t,n,i){const[a,s]=an(r.getPoint(e));let o=t,A=n;return i&&(o=t*Math.cos(i)-n*Math.sin(i),A=t*Math.sin(i)+n*Math.cos(i)),[a+o,s+A]}function j1(r,e,t,n){if(pt(r,e))return r;const i=$e(e,r),a=[r[0]+t*i[0],r[1]+t*i[1]],s=zi(nd(i,!1));return a[0]+=n*s[0],a[1]+=n*s[1],a}function s9(r){return Z(r)?[r,-r]:r}function o9(r){return Z(r)?[r,1-r]:r}function A9(r,e,t){return[["M",r[0],r[1]],["Q",t[0],t[1],e[0],e[1]]]}function fL(r,e,t){return[["M",r[0],r[1]],["C",t[0][0],t[0][1],t[1][0],t[1][1],e[0],e[1]]]}function dB(r,e=0,t=!1){const n=r.length-1,i=r[0],a=r[n],s=r.slice(1,n),o=[["M",i[0],i[1]]];return s.forEach((A,l)=>{const c=s[l-1]||i,u=s[l+1]||a;if(!jk(c,A,u)&&e){const[h,d]=l9(c,A,u,e);o.push(["L",h[0],h[1]],["Q",A[0],A[1],d[0],d[1]],["L",d[0],d[1]])}else o.push(["L",A[0],A[1]])}),o.push(["L",a[0],a[1]]),t&&o.push(["Z"]),o}function l9(r,e,t,n){const i=gh(r,e),a=gh(t,e),s=Math.min(n,Math.min(i,a)/2),o=[e[0]-s/i*(e[0]-r[0]),e[1]-s/i*(e[1]-r[1])],A=[e[0]-s/a*(e[0]-t[0]),e[1]-s/a*(e[1]-t[1])];return[o,A]}const c9=r=>{const e=Math.PI/2,t=Ci(r)/2,n=xi(r)/2,i=Math.atan2(t,n)/2,a=Math.atan2(n,t)/2;return{top:[-e-a,-e+a],"top-right":[-e+a,-i],"right-top":[-e+a,-i],right:[-i,i],"bottom-right":[i,e-a],"right-bottom":[i,e-a],bottom:[e-a,e+a],"bottom-left":[e+a,Math.PI-i],"left-bottom":[e+a,Math.PI-i],left:[Math.PI-i,Math.PI+i],"top-left":[Math.PI+i,-e-a],"left-top":[Math.PI+i,-e-a]}};function gL(r,e,t,n,i){const a=ya(r),s=r.getCenter();let o=n&&Qa(n),A=i&&Qa(i);if(!o||!A){const l=c9(a),c=l[e][0],u=l[e][1],[h,d]=Ra(a),f=Math.max(h,d),g=ve(s,[f*Math.cos(c),f*Math.sin(c),0]),v=ve(s,[f*Math.cos(u),f*Math.sin(u),0]);o=W1(r,g),A=W1(r,v),t||([o,A]=[A,o])}return[o,A]}function u9(r,e,t,n,i,a){const s=r.getPorts()[i||a],o=r.getPorts()[a||i];let[A,l]=gL(r,e,t,s,o);const c=h9(r,A,l,n);return s&&(A=ul(s,c[0])),o&&(l=ul(o,c.at(-1))),fL(A,l,c)}function h9(r,e,t,n){const i=r.getCenter();if(pt(e,t)){const a=$e(e,i),s=[n*Math.sign(a[0])||n/2,n*Math.sign(a[1])||-n/2,0];return[ve(e,s),ve(t,Dr(s,[1,-1,1]))]}return[Ta(i,e,rt(i,e)+n),Ta(i,t,rt(i,t)+n)]}function d9(r,e,t,n,i,a,s){const o=vB(r),A=o[a||s],l=o[s||a];let[c,u]=gL(r,t,n,A,l);const h=f9(r,c,u,i);return A&&(c=ul(A,h[0])),l&&(u=ul(l,h.at(-1))),dB([c,...h,u],e)}function f9(r,e,t,n){const i=[],a=ya(r);if(pt(e,t))switch(jA(e,a)){case"left":i.push([e[0]-n,e[1]]),i.push([e[0]-n,e[1]+n]),i.push([e[0],e[1]+n]);break;case"right":i.push([e[0]+n,e[1]]),i.push([e[0]+n,e[1]+n]),i.push([e[0],e[1]+n]);break;case"top":i.push([e[0],e[1]-n]),i.push([e[0]+n,e[1]-n]),i.push([e[0]+n,e[1]]);break;case"bottom":i.push([e[0],e[1]+n]),i.push([e[0]+n,e[1]+n]),i.push([e[0]+n,e[1]]);break}else{const s=jA(e,a),o=jA(t,a);if(s===o){const A=s;let l,c;switch(A){case"left":l=Math.min(e[0],t[0])-n,i.push([l,e[1]]),i.push([l,t[1]]);break;case"right":l=Math.max(e[0],t[0])+n,i.push([l,e[1]]),i.push([l,t[1]]);break;case"top":c=Math.min(e[1],t[1])-n,i.push([e[0],c]),i.push([t[0],c]);break;case"bottom":c=Math.max(e[1],t[1])+n,i.push([e[0],c]),i.push([t[0],c]);break}}else{const A=(h,d)=>({left:[d[0]-n,d[1]],right:[d[0]+n,d[1]],top:[d[0],d[1]-n],bottom:[d[0],d[1]+n]})[h],l=A(s,e),c=A(o,t),u=cl(l,c,a);i.push(l,u,c)}}return i}function $1(r,e){const t=new Set,n=new Set,i=new Set;return r.forEach(a=>{e(a).forEach(o=>{t.add(o),r.includes(o.source)&&r.includes(o.target)?n.add(o):i.add(o)})}),{edges:Array.from(t),internal:Array.from(n),external:Array.from(i)}}function Ix(r,e){const t=[];let n=r;for(;n;){t.push(n);const i=e(N(n));if(i)n=i;else break}if(t.some(i=>{var a;return(a=i.style)===null||a===void 0?void 0:a.collapsed})){const i=t.reverse().findIndex(Kn);return t[i]||t.at(-1)}return r}function g9(r,e){return e||(r<4?10:r===4?12:r*2.5)}const v9=(r,e)=>{const t=Math.max(r,e)/2;return[["M",-r/2,0],["A",t,t,0,1,0,2*t-r/2,0],["A",t,t,0,1,0,-r/2,0],["Z"]]},vL=(r,e)=>[["M",-r/2,0],["L",r/2,-e/2],["L",r/2,e/2],["Z"]],p9=(r,e)=>[["M",-r/2,0],["L",0,-e/2],["L",r/2,0],["L",0,e/2],["Z"]],y9=(r,e)=>[["M",-r/2,0],["L",r/2,-e/2],["L",4*r/5-r/2,0],["L",r/2,e/2],["Z"]],m9=(r,e)=>[["M",-r/2,-e/2],["L",r/2,-e/2],["L",r/2,e/2],["L",-r/2,e/2],["Z"]],w9=(r,e)=>{const t=r/2,n=r/7,i=r-n;return[["M",-t,0],["L",0,-e/2],["L",0,e/2],["Z"],["M",i-t,-e/2],["L",i+n-t,-e/2],["L",i+n-t,e/2],["L",i-t,e/2],["Z"]]},B9=(r,e)=>[["M",r/2,-e/2],["L",-r/2,0],["L",r/2,0],["L",-r/2,0],["L",r/2,e/2]],b9=Object.freeze(Object.defineProperty({__proto__:null,circle:v9,diamond:p9,rect:m9,simple:B9,triangle:vL,triangleRect:w9,vee:y9},Symbol.toStringTag,{value:"Module"}));var eu=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class Ga extends rL{constructor(e){super(Jt({style:Ga.defaultStyleProps},e)),this.type="edge"}get sourceNode(){const{sourceNode:e}=this.parsedAttributes;return this.context.element.getElement(e)}get targetNode(){const{targetNode:e}=this.parsedAttributes;return this.context.element.getElement(e)}getKeyStyle(e){const t=this.getGraphicStyle(e),{loop:n}=t,i=eu(t,["loop"]),{sourceNode:a,targetNode:s}=this,A={d:n&&_9(a,s)?this.getLoopPath(e):this.getKeyPath(e)};return wn.PARSED_STYLE_LIST.forEach(l=>{l in i&&(A[l]=i[l])}),A}getLoopPath(e){const{sourcePort:t,targetPort:n}=e,i=this.sourceNode,a=ya(i),s=Math.max(xi(a),Ci(a)),{placement:o,clockwise:A,dist:l=s}=bt(this.getGraphicStyle(e),"loop");return u9(i,o,A,l,t,n)}getEndpoints(e,t=!0,n=[]){const{sourcePort:i,targetPort:a}=e,{sourceNode:s,targetNode:o}=this,[A,l]=L9(s,o,i,a);if(!t){const d=A?Qa(A):s.getCenter(),f=l?Qa(l):o.getCenter();return[d,f]}const c=typeof n=="function"?n():n,u=Nx(A||s,c[0]||l||o),h=Nx(l||o,c[c.length-1]||A||s);return[u,h]}getHaloStyle(e){if(e.halo===!1)return!1;const t=this.getKeyStyle(e),n=bt(this.getGraphicStyle(e),"halo");return Object.assign(Object.assign({},t),n)}getLabelStyle(e){if(e.label===!1||!e.labelText)return!1;const t=bt(this.getGraphicStyle(e),"label"),{placement:n,offsetX:i,offsetY:a,autoRotate:s,maxWidth:o}=t,A=eu(t,["placement","offsetX","offsetY","autoRotate","maxWidth"]),l=dL(this.shapeMap.key,n,s,i,a),c=this.shapeMap.key.getLocalBounds(),u=ZV([c.min,c.max],o);return Object.assign({wordWrapWidth:u},l,A)}getBadgeStyle(e){if(e.badge===!1||!e.badgeText)return!1;const t=bt(e,"badge"),{offsetX:n,offsetY:i,placement:a}=t,s=eu(t,["offsetX","offsetY","placement"]);return Object.assign(s,a9(this.shapeMap,a,e.labelPlacement,n,i))}drawArrow(e,t){var n;const i=t==="start",s=e[t==="start"?"startArrow":"endArrow"],o=this.shapeMap.key;if(s){const A=this.getArrowStyle(e,i),[l,c,u]=i?["markerStart","markerStartOffset","startArrowOffset"]:["markerEnd","markerEndOffset","endArrowOffset"],h=o.parsedStyle[l];if(h)h.attr(A);else{const d=A.src?Sl:wn,f=new d({style:A});o.style[l]=f}o.style[c]=e[u]||A.width/2+ +A.lineWidth}else{const A=i?"markerStart":"markerEnd";(n=o.style[A])===null||n===void 0||n.destroy(),o.style[A]=null}}getArrowStyle(e,t){const n=this.getShape("key").attributes,i=t?"startArrow":"endArrow",a=bt(this.getGraphicStyle(e),i),{size:s,type:o}=a,A=eu(a,["size","type"]),[l,c]=Ar(g9(n.lineWidth,s)),h=(ie(o)?o:b9[o]||vL)(l,c);return Object.assign(Es(n,["stroke","strokeOpacity","fillOpacity"]),{width:l,height:c},Object.assign({},h&&{d:h,fill:o==="simple"?"":n.stroke}),A)}drawLabelShape(e,t){const n=this.getLabelStyle(e);this.upsert("label",wi,n,t)}drawHaloShape(e,t){const n=this.getHaloStyle(e);this.upsert("halo",wn,n,t)}drawBadgeShape(e,t){const n=this.getBadgeStyle(e);this.upsert("badge",Do,n,t)}drawSourceArrow(e){this.drawArrow(e,"start")}drawTargetArrow(e){this.drawArrow(e,"end")}drawKeyShape(e,t){const n=this.getKeyStyle(e);return this.upsert("key",wn,n,t)}render(e=this.parsedAttributes,t=this){this.drawKeyShape(e,t),this.getShape("key")&&(this.drawSourceArrow(e),this.drawTargetArrow(e),this.drawLabelShape(e,t),this.drawHaloShape(e,t),this.drawBadgeShape(e,t))}onframe(){this.drawKeyShape(this.parsedAttributes,this),this.drawSourceArrow(this.parsedAttributes),this.drawTargetArrow(this.parsedAttributes),this.drawHaloShape(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this),this.drawBadgeShape(this.parsedAttributes,this)}animate(e,t){const n=super.animate(e,t);return n&&new Proxy(n,{set:(i,a,s)=>(a==="currentTime"&&Promise.resolve().then(()=>this.onframe()),Reflect.set(i,a,s))})}}Ga.defaultStyleProps={badge:!0,badgeOffsetX:0,badgeOffsetY:0,badgePlacement:"suffix",isBillboard:!0,label:!0,labelAutoRotate:!0,labelIsBillboard:!0,labelMaxWidth:"80%",labelOffsetX:4,labelOffsetY:0,labelPlacement:"center",labelTextBaseline:"middle",labelWordWrap:!1,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloPointerEvents:"none",haloStrokeOpacity:.25,haloZIndex:-1,loop:!0,startArrow:!1,startArrowLineDash:0,startArrowLineJoin:"round",startArrowLineWidth:1,startArrowTransformOrigin:"center",startArrowType:"vee",endArrow:!1,endArrowLineDash:0,endArrowLineJoin:"round",endArrowLineWidth:1,endArrowTransformOrigin:"center",endArrowType:"vee",loopPlacement:"top",loopClockwise:!0};class Ns extends Ga{constructor(e){super(Jt({style:Ns.defaultStyleProps},e))}getKeyPath(e){const[t,n]=this.getEndpoints(e),{controlPoints:i,curvePosition:a,curveOffset:s}=e,o=this.getControlPoints(t,n,o9(a),s9(s),i);return fL(t,n,o)}getControlPoints(e,t,n,i,a){return(a==null?void 0:a.length)===2?a:[j1(e,t,n[0],i[0]),j1(e,t,n[1],i[1])]}}Ns.defaultStyleProps={curvePosition:.5,curveOffset:20};class cd extends Ns{constructor(e){super(Jt({style:cd.defaultStyleProps},e))}getControlPoints(e,t,n,i){const a=t[0]-e[0];return[[e[0]+a*n[0]+i[0],e[1]],[t[0]-a*n[1]+i[1],t[1]]]}}cd.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};class ud extends Ns{constructor(e){super(Jt({style:ud.defaultStyleProps},e))}get ref(){return this.context.model.getRootsData()[0]}getEndpoints(e){if(this.sourceNode.id===this.ref.id)return super.getEndpoints(e);const t=Vt(this.ref),n=this.sourceNode.getIntersectPoint(t,!0),i=this.targetNode.getIntersectPoint(t);return[n,i]}toRadialCoordinate(e){const t=Vt(this.ref),n=rt(e,t),i=Hk($e(e,t));return[n,i]}getControlPoints(e,t,n,i){const[a,s]=this.toRadialCoordinate(e),[o]=this.toRadialCoordinate(t),A=o-a;return[[e[0]+(A*n[0]+i[0])*Math.cos(s),e[1]+(A*n[0]+i[0])*Math.sin(s)],[t[0]-(A*n[1]-i[0])*Math.cos(s),t[1]-(A*n[1]-i[0])*Math.sin(s)]]}}ud.defaultStyleProps={curvePosition:.5,curveOffset:20};class hd extends Ns{constructor(e){super(Jt({style:hd.defaultStyleProps},e))}getControlPoints(e,t,n,i){const a=t[1]-e[1];return[[e[0],e[1]+a*n[0]+i[0]],[t[0],t[1]-a*n[1]+i[1]]]}}hd.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};let pL=class yL extends Ga{constructor(e){super(Jt({style:yL.defaultStyleProps},e))}getKeyPath(e){const[t,n]=this.getEndpoints(e);return[["M",t[0],t[1]],["L",n[0],n[1]]]}};pL.defaultStyleProps={};const E9={enableObstacleAvoidance:!1,offset:10,maxAllowedDirectionChange:Math.PI/2,maximumLoops:3e3,gridSize:5,startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{right:{stepX:1,stepY:0},left:{stepX:-1,stepY:0},bottom:{stepX:0,stepY:1},top:{stepX:0,stepY:-1}},penalties:{0:0,90:0},distFunc:gh},ki=r=>`${Math.round(r[0])}|||${Math.round(r[1])}`;function us(r,e){const t=n=>Math.round(n/e);return Z(r)?t(r):r.map(t)}function x9(r,e){const t=Math.abs(r-e);return t>Math.PI?2*Math.PI-t:t}function _x(r,e){const t=e[0]-r[0],n=e[1]-r[1];return!t&&!n?0:Math.atan2(n,t)}function mL(r,e,t,n){const i=_x(r,e),a=t[ki(r)],o=_x(a||n,r);return x9(o,i)}const C9=(r,e)=>{const{offset:t,gridSize:n}=e,i={};return r.forEach(a=>{if(!a||a.destroyed||!a.isVisible())return;const s=Da(a.getRenderBounds(),t);for(let o=us(s.min[0],n);o<=us(s.max[0],n);o+=1)for(let A=us(s.min[1],n);A<=us(s.max[1],n);A+=1)i[`${o}|||${A}`]=!0}),i};function kx(r,e,t){return Math.min(...e.map(n=>t(r,n)))}function S9(r,e,t){let n=r[0],i=t(r[0],e);for(let a=0;a<r.length;a++){const s=r[a],o=t(s,e);o<i&&(n=s,i=o)}return n}const Lx=(r,e,t,n)=>{if(!e)return[r];const{directionMap:i,offset:a}=n,s=Da(e.getRenderBounds(),a),o=Object.keys(i).reduce((A,l)=>{if(t.includes(l)){const c=i[l],[u,h]=Ra(s),d=[r[0]+c.stepX*u,r[1]+c.stepY*h],f=cV(s);for(let g=0;g<f.length;g++){const v=oB([r,d],f[g]);v&&kk(v,s)&&A.push(v)}}return A},[]);return Vr(r,s)||o.push(r),o.map(A=>us(A,n.gridSize))},F9=(r,e,t,n,i,a,s)=>{const o=[];let A=[a[0]===n[0]?n[0]:r[0]*s,a[1]===n[1]?n[1]:r[1]*s];o.unshift(A);let l=r,c=e[ki(l)];for(;c;){const d=c,f=l;mL(d,f,e,t)&&(A=[d[0]===f[0]?A[0]:d[0]*s,d[1]===f[1]?A[1]:d[1]*s],o.unshift(A)),c=e[ki(d)],l=d}const u=i.map(d=>[d[0]*s,d[1]*s]),h=S9(u,A,gh);return o.unshift(h),o};function T9(r,e,t,n){const i=Ms(r.getCenter()),a=Ms(e.getCenter()),s=Object.assign(E9,n),{gridSize:o}=s,A=s.enableObstacleAvoidance?t:[r,e],l=C9(A,s),c=us(i,o),u=us(a,o),h=Lx(i,r,s.startDirections,s),d=Lx(a,e,s.endDirections,s);h.forEach(x=>delete l[ki(x)]),d.forEach(x=>delete l[ki(x)]);const f={},g={},v={},p={},y={},m=new M9;for(let x=0;x<h.length;x++){const S=h[x],C=ki(S);f[C]=S,p[C]=0,y[C]=kx(S,d,s.distFunc),m.add({id:C,value:y[C]})}const w=d.map(x=>ki(x));let B=s.maximumLoops,b,E=1/0;for(const[x,S]of Object.entries(f))y[x]<=E&&(E=y[x],b=S);for(;Object.keys(f).length>0&&B>0;){const x=m.minId(!1);if(x)b=f[x];else break;const S=ki(b);if(w.includes(S))return F9(b,v,c,a,h,u,o);delete f[S],m.remove(S),g[S]=!0;for(const C of Object.values(s.directionMap)){const F=ve(b,[C.stepX,C.stepY]),M=ki(F);if(g[M])continue;const T=mL(b,F,v,c);if(T>s.maxAllowedDirectionChange||l[M])continue;f[M]||(f[M]=F);const O=s.penalties[T],_=s.distFunc(b,F)+(isNaN(O)?o:O),Q=p[S]+_,L=p[M];L&&Q>=L||(v[M]=b,p[M]=Q,y[M]=Q+kx(F,d,s.distFunc),m.add({id:M,value:y[M]}))}B-=1}return[]}class M9{constructor(){this.arr=[],this.map={},this.arr=[],this.map={}}_innerAdd(e,t){let n=0,i=t-1;for(;i-n>1;){const a=Math.floor((n+i)/2);if(this.arr[a].value>e.value)i=a;else if(this.arr[a].value<e.value)n=a;else{this.arr.splice(a,0,e),this.map[e.id]=!0;return}}this.arr.splice(i,0,e),this.map[e.id]=!0}add(e){delete this.map[e.id];const t=this.arr.length;if(!t||this.arr[t-1].value<e.value){this.arr.push(e),this.map[e.id]=!0;return}this._innerAdd(e,t)}remove(e){this.map[e]&&delete this.map[e]}_clearAndGetMinId(){let e;for(let t=this.arr.length-1;t>=0;t--)this.map[this.arr[t].id]?e=this.arr[t].id:this.arr.splice(t,1);return e}_findFirstId(){for(;this.arr.length;){const e=this.arr.shift();if(this.map[e.id])return e.id}}minId(e){return e?this._clearAndGetMinId():this._findFirstId()}}class dd extends Ga{constructor(e){super(Jt({style:dd.defaultStyleProps},e))}getControlPoints(e){const{router:t}=e,{sourceNode:n,targetNode:i}=this,[a,s]=this.getEndpoints(e,!1);let o=[];if(!t)o=e.controlPoints;else if(t.type==="shortest-path"){const A=this.context.element.getNodes();o=T9(n,i,A,t),o.length||(o=Fx(a,s,n,i,e.controlPoints,{padding:t.offset}))}else t.type==="orth"&&(o=Fx(a,s,n,i,e.controlPoints,t));return o}getPoints(e){const t=this.getControlPoints(e),[n,i]=this.getEndpoints(e,!0,t);return[n,...t,i]}getKeyPath(e){const t=this.getPoints(e);return dB(t,e.radius)}getLoopPath(e){const{sourcePort:t,targetPort:n,radius:i}=e,a=this.sourceNode,s=ya(a),o=Math.max(xi(s),Ci(s))/4,{placement:A,clockwise:l,dist:c=o}=bt(this.getGraphicStyle(e),"loop");return d9(a,i,A,l,c,t,n)}}dd.defaultStyleProps={radius:0,controlPoints:[],router:!1};class fd extends Ga{constructor(e){super(Jt({style:fd.defaultStyleProps},e))}getKeyPath(e){const{curvePosition:t,curveOffset:n}=e,[i,a]=this.getEndpoints(e),s=e.controlPoint||j1(i,a,t,n);return A9(i,a,s)}}fd.defaultStyleProps={curvePosition:.5,curveOffset:30};var O9=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};function Ll(r){return r instanceof Wr&&r.type==="node"}function wL(r){return r instanceof Ga}function fB(r){return r instanceof Ho}function I9(r){return Ll(r)||wL(r)||fB(r)}function _9(r,e){return!r||!e?!1:r===e}const k9={top:[.5,0],right:[1,.5],bottom:[.5,1],left:[0,.5],"left-top":[0,0],"top-left":[0,0],"left-bottom":[0,1],"bottom-left":[0,1],"right-top":[1,0],"top-right":[1,0],"right-bottom":[1,1],"bottom-right":[1,1],default:[.5,.5]};function gB(r,e,t=k9,n=!0){const i=[.5,.5],a=_e(e)?nn(t,e.toLocaleLowerCase(),i):e;if(!n&&_e(e))return a;const[s,o]=a||i;return[r.min[0]+xi(r)*s,r.min[1]+Ci(r)*o]}function vB(r){if(!r)return{};const e=r.getPorts();return(r.attributes.ports||[]).forEach((n,i)=>{var a;const{key:s,placement:o}=n;BL(n)&&(e[a=s||i]||(e[a]=Ni(r.getShape("key").getBounds(),o)))}),e}function BL(r){const{r:e}=r;return!e||Number(e)===0}function Qa(r){return No(r)?r:r.getPosition()}function L9(r,e,t,n){const i=Qx(r,e,t,n),a=Qx(e,r,n,t);return[i,a]}function Qx(r,e,t,n){const i=vB(r);if(t)return i[t];const a=Object.values(i);if(a.length===0)return;const s=a.map(l=>Qa(l)),o=Q9(e,n),[A]=HV(s,o);return a.find(l=>Qa(l)===A)}function Q9(r,e){const t=vB(r);if(e)return[Qa(t[e])];const n=Object.values(t);return n.length>0?n.map(i=>Qa(i)):[r.getCenter()]}function Nx(r,e){return fB(r)||Ll(r)?W1(r,e):ul(r,e)}function ul(r,e){if(!r||!e)return[0,0,0];if(No(r))return r;if(r.attributes.linkToCenter)return r.getPosition();const t=No(e)?e:Ll(e)?e.getCenter():e.getPosition();return rd(t,r.getBounds())}function W1(r,e){if(!r||!e)return[0,0,0];const t=No(e)?e:Ll(e)?e.getCenter():e.getPosition();return r.getIntersectPoint(t)||r.getCenter()}function Ux(r,e="bottom",t=0,n=0,i=!1){const a=e.split("-"),[s,o]=Ni(r,e),[A,l]=i?["bottom","top"]:["top","bottom"],c=a.includes("top")?l:a.includes("bottom")?A:"middle",u=a.includes("left")?"right":a.includes("right")?"left":"center";return{transform:[["translate",s+t,o+n]],textBaseline:c,textAlign:u}}function N9(r,e){return[[0,-r],[e*Math.cos(3*Math.PI/10),-e*Math.sin(3*Math.PI/10)],[r*Math.cos(Math.PI/10),-r*Math.sin(Math.PI/10)],[e*Math.cos(Math.PI/10),e*Math.sin(Math.PI/10)],[r*Math.cos(3*Math.PI/10),r*Math.sin(3*Math.PI/10)],[0,e],[-r*Math.cos(3*Math.PI/10),r*Math.sin(3*Math.PI/10)],[-e*Math.cos(Math.PI/10),e*Math.sin(Math.PI/10)],[-r*Math.cos(Math.PI/10),-r*Math.sin(Math.PI/10)],[-e*Math.cos(3*Math.PI/10),-e*Math.sin(3*Math.PI/10)]]}function U9(r,e){const t={};return t.top=[0,-r],t.left=[-r*Math.cos(Math.PI/10),-r*Math.sin(Math.PI/10)],t["left-bottom"]=[-r*Math.cos(3*Math.PI/10),r*Math.sin(3*Math.PI/10)],t.bottom=[0,e],t["right-bottom"]=[r*Math.cos(3*Math.PI/10),r*Math.sin(3*Math.PI/10)],t.right=t.default=[r*Math.cos(Math.PI/10),-r*Math.sin(Math.PI/10)],t}function P9(r,e,t){const n=e/2,i=r/2,a={up:[[-i,n],[i,n],[0,-n]],left:[[-i,0],[i,n],[i,-n]],right:[[-i,n],[-i,-n],[i,0]],down:[[-i,-n],[i,-n],[0,n]]};return a[t]||a.up}function R9(r,e,t){const n=e/2,i=r/2,a={};return t==="down"?(a.bottom=a.default=[0,n],a.right=[i,-n],a.left=[-i,-n]):t==="left"?(a.top=[i,-n],a.bottom=[i,n],a.left=a.default=[-i,0]):t==="right"?(a.top=[-i,-n],a.bottom=[-i,n],a.right=a.default=[i,0]):(a.left=[-i,n],a.top=a.default=[0,-n],a.right=[i,n]),a}function D9(r,e){return[[0,-e/2],[r/2,0],[0,e/2],[-r/2,0]]}function bL(r){return nn(r,["style","visibility"])!=="hidden"}function H9(r,e){const{zIndex:t,transform:n,transformOrigin:i,visibility:a,cursor:s,clipPath:o,component:A}=e,l=O9(e,["zIndex","transform","transformOrigin","visibility","cursor","clipPath","component"]);Object.assign(r.attributes,l),n&&r.setAttribute("transform",n),Z(t)&&r.setAttribute("zIndex",t),i&&r.setAttribute("transformOrigin",i),a&&r.setAttribute("visibility",a),s&&r.setAttribute("cursor",s),o&&r.setAttribute("clipPath",o),A&&r.setAttribute("component",A)}function q1(r,e){"update"in r?r.update(e):r.attr(e)}function G9(r){return[[0,r],[r*Math.sqrt(3)/2,r/2],[r*Math.sqrt(3)/2,-r/2],[0,-r],[-r*Math.sqrt(3)/2,-r/2],[-r*Math.sqrt(3)/2,r/2]]}function K9(r){JA(r,"__to_be_destroyed__",!0)}function Ql(r){return nn(r,"__to_be_destroyed__",!1)}var z9=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class gd extends ur{constructor(e,t){super(e,Object.assign({},gd.defaultOptions,t)),this.onCollapseExpand=n=>z9(this,void 0,void 0,function*(){if(!this.validate(n))return;const{target:i}=n;if(!I9(i))return;const a=i.id,{model:s,graph:o}=this.context,A=s.getElementDataById(a);if(!A)return!1;const{onCollapse:l,onExpand:c,animation:u,align:h}=this.options;Kn(A)?(yield o.expandElement(a,{animation:u,align:h}),c==null||c(a)):(yield o.collapseElement(a,{animation:u,align:h}),l==null||l(a))}),this.bindEvents()}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}bindEvents(){const{graph:e}=this.context,{trigger:t}=this.options;e.on(`node:${t}`,this.onCollapseExpand),e.on(`combo:${t}`,this.onCollapseExpand)}unbindEvents(){const{graph:e}=this.context,{trigger:t}=this.options;e.off(`node:${t}`,this.onCollapseExpand),e.off(`combo:${t}`,this.onCollapseExpand)}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return ie(t)?t(e):!!t}destroy(){this.unbindEvents(),super.destroy()}}gd.defaultOptions={enable:!0,animation:!0,trigger:R.DBLCLICK,align:!0};var hl=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};function Ji(r,e){const{data:t,style:n}=r,i=hl(r,["data","style"]),{data:a,style:s}=e,o=hl(e,["data","style"]),A=Object.assign(Object.assign({},i),o);return(t||a)&&Object.assign(A,{data:Object.assign(Object.assign({},t),a)}),(n||s)&&Object.assign(A,{style:Object.assign(Object.assign({},n),s)}),A}function Og(r){const{data:e,style:t}=r,i=hl(r,["data","style"]);return e&&(i.data=Object.assign({},e)),t&&(i.style=Object.assign({},t)),i}function eo(r={},e={}){const{states:t=[],data:n={},style:i={},children:a=[]}=r,s=hl(r,["states","data","style","children"]),{states:o=[],data:A={},style:l={},children:c=[]}=e,u=hl(e,["states","data","style","children"]),h=(f,g)=>f.length!==g.length?!1:f.every((v,p)=>v===g[p]),d=(f,g)=>{const v=Object.keys(f),p=Object.keys(g);return v.length!==p.length?!1:v.every(y=>f[y]===g[y])};return!(!d(s,u)||!h(a,c)||!h(t,o)||!d(n,A)||!d(i,l))}const EL="__internal_override__";function Px(r){return r[EL]!==!1}var tu=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};const V9="g6-create-edge-assist-edge-id",nu="g6-create-edge-assist-node-id";class vd extends ur{constructor(e,t){super(e,Object.assign({},vd.defaultOptions,t)),this.drop=n=>tu(this,void 0,void 0,function*(){const{targetType:i}=n;["combo","node"].includes(i)&&this.source?yield this.handleCreateEdge(n):yield this.cancelEdge()}),this.handleCreateEdge=n=>tu(this,void 0,void 0,function*(){var i,a,s;if(!this.validate(n))return;const{graph:o,canvas:A,batch:l,element:c}=this.context,{style:u}=this.options;if(this.source){this.createEdge(n),yield this.cancelEdge();return}l.startBatch(),A.setCursor("crosshair"),this.source=this.getSelectedNodeIDs([n.target.id])[0];const h=o.getElementData(this.source);o.addNodeData([{id:nu,type:"circle",[EL]:!1,style:{size:1,visibility:"hidden",ports:[{key:"port-1",placement:[.5,.5]}],x:(i=h.style)===null||i===void 0?void 0:i.x,y:(a=h.style)===null||a===void 0?void 0:a.y}}]),o.addEdgeData([{id:V9,source:this.source,target:nu,style:Object.assign({pointerEvents:"none"},u)}]),yield(s=c.draw({animation:!1}))===null||s===void 0?void 0:s.finished}),this.updateAssistEdge=n=>tu(this,void 0,void 0,function*(){var i;if(!this.source)return;const{model:a,element:s}=this.context;a.translateNodeTo(nu,[n.client.x,n.client.y]),yield(i=s.draw({animation:!1,silence:!0}))===null||i===void 0?void 0:i.finished}),this.createEdge=n=>{var i,a;const{graph:s}=this.context,{style:o,onFinish:A,onCreate:l}=this.options;if(((i=n.target)===null||i===void 0?void 0:i.id)===void 0||this.source===void 0)return;const u=(a=this.getSelectedNodeIDs([n.target.id]))===null||a===void 0?void 0:a[0],h=`${this.source}-${u}-${dR()}`,d=l({id:h,source:this.source,target:u,style:o});d&&(s.addEdgeData([d]),A(d))},this.cancelEdge=()=>tu(this,void 0,void 0,function*(){var n;if(!this.source)return;const{graph:i,element:a,batch:s}=this.context;i.removeNodeData([nu]),this.source=void 0,yield(n=a.draw({animation:!1}))===null||n===void 0?void 0:n.finished,s.endBatch()}),this.bindEvents()}update(e){super.update(e),this.bindEvents()}bindEvents(){const{graph:e}=this.context,{trigger:t}=this.options;this.unbindEvents(),t==="click"?(e.on(Sn.CLICK,this.handleCreateEdge),e.on(ls.CLICK,this.handleCreateEdge),e.on(zr.CLICK,this.cancelEdge),e.on(Qo.CLICK,this.cancelEdge)):(e.on(Sn.DRAG_START,this.handleCreateEdge),e.on(ls.DRAG_START,this.handleCreateEdge),e.on(R.POINTER_UP,this.drop)),e.on(R.POINTER_MOVE,this.updateAssistEdge)}getSelectedNodeIDs(e){return Array.from(new Set(this.context.graph.getElementDataByState("node",this.options.state).map(t=>t.id).concat(e)))}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return ie(t)?t(e):!!t}unbindEvents(){const{graph:e}=this.context;e.off(Sn.CLICK,this.handleCreateEdge),e.off(ls.CLICK,this.handleCreateEdge),e.off(zr.CLICK,this.cancelEdge),e.off(Qo.CLICK,this.cancelEdge),e.off(Sn.DRAG_START,this.handleCreateEdge),e.off(ls.DRAG_START,this.handleCreateEdge),e.off(R.POINTER_UP,this.drop),e.off(R.POINTER_MOVE,this.updateAssistEdge)}destroy(){this.unbindEvents(),super.destroy()}}vd.defaultOptions={animation:!0,enable:!0,style:{},trigger:"drag",onCreate:r=>r,onFinish:()=>{}};var Rx=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class pd extends ur{constructor(e,t){super(e,Object.assign({},pd.defaultOptions,t)),this.isDragging=!1,this.onDragStart=n=>{this.validate(n)&&(this.isDragging=!0,this.context.canvas.setCursor("grabbing"))},this.onDrag=n=>{var i,a,s,o;if(!this.isDragging||Tt.isPinching)return;const A=(a=(i=n.movement)===null||i===void 0?void 0:i.x)!==null&&a!==void 0?a:n.dx,l=(o=(s=n.movement)===null||s===void 0?void 0:s.y)!==null&&o!==void 0?o:n.dy;A|l&&this.translate([A,l],!1)},this.onDragEnd=()=>{var n,i;this.isDragging=!1,this.context.canvas.setCursor(this.defaultCursor),(i=(n=this.options).onFinish)===null||i===void 0||i.call(n)},this.invokeOnFinish=wl(()=>{var n,i;(i=(n=this.options).onFinish)===null||i===void 0||i.call(n)},300),this.shortcut=new Ha(e.graph),this.bindEvents(),this.defaultCursor=this.context.canvas.getConfig().cursor||"default"}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}bindEvents(){const{trigger:e}=this.options;if(Ot(e)){const{up:t=[],down:n=[],left:i=[],right:a=[]}=e;this.shortcut.bind(t,s=>this.onTranslate([0,1],s)),this.shortcut.bind(n,s=>this.onTranslate([0,-1],s)),this.shortcut.bind(i,s=>this.onTranslate([1,0],s)),this.shortcut.bind(a,s=>this.onTranslate([-1,0],s))}else{const{graph:t}=this.context;t.on(R.DRAG_START,this.onDragStart),t.on(R.DRAG,this.onDrag),t.on(R.DRAG_END,this.onDragEnd)}}onTranslate(e,t){return Rx(this,void 0,void 0,function*(){if(!this.validate(t))return;const{sensitivity:n}=this.options,i=n*-1;yield this.translate(Dr(e,i),this.options.animation),this.invokeOnFinish()})}translate(e,t){return Rx(this,void 0,void 0,function*(){e=this.clampByDirection(e),e=this.clampByRange(e),e=this.clampByRotation(e),yield this.context.graph.translateBy(e,t)})}clampByRotation([e,t]){const n=this.context.graph.getRotation();return Gk([e,t],n)}clampByDirection([e,t]){const{direction:n}=this.options;return n==="x"?t=0:n==="y"&&(e=0),[e,t]}clampByRange([e,t]){const{viewport:n,canvas:i}=this.context,[a,s]=i.getSize(),[o,A,l,c]=Sr(this.options.range),u=[s*o,a*A,s*l,a*c],h=Da(nB(n.getCanvasCenter()),u),d=$e(n.getViewportCenter(),[e,t,0]);if(!Vr(d,h)){const{min:[f,g],max:[v,p]}=h;(d[0]<f&&e>0||d[0]>v&&e<0)&&(e=0),(d[1]<g&&t>0||d[1]>p&&t<0)&&(t=0)}return[e,t]}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return typeof t=="function"?t(e):!!t}unbindEvents(){this.shortcut.unbindAll();const{graph:e}=this.context;e.off(R.DRAG_START,this.onDragStart),e.off(R.DRAG,this.onDrag),e.off(R.DRAG_END,this.onDragEnd)}destroy(){this.shortcut.destroy(),this.unbindEvents(),this.context.canvas.setCursor(this.defaultCursor),super.destroy()}}pd.defaultOptions={enable:r=>"targetType"in r?r.targetType==="canvas":!0,sensitivity:10,direction:"both",range:1/0};var Dx=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class Nl extends ur{constructor(e,t){super(e,Object.assign({},Nl.defaultOptions,t)),this.enable=!1,this.enableElements=["node","combo"],this.target=[],this.shadowOrigin=[0,0],this.hiddenEdges=[],this.isDragging=!1,this.onDrop=n=>Dx(this,void 0,void 0,function*(){var i;if(this.options.dropEffect!=="link")return;const{model:a,element:s}=this.context,o=n.target.id;this.target.forEach(A=>{const l=a.getParentData(A,qe);l&&N(l)===o&&a.refreshComboData(o),a.setParent(A,o,qe)}),yield(i=s==null?void 0:s.draw({animation:!0}))===null||i===void 0?void 0:i.finished}),this.setCursor=n=>{if(this.isDragging)return;const{type:i}=n,{canvas:a}=this.context,{cursor:s}=this.options;i===R.POINTER_ENTER?a.setCursor((s==null?void 0:s.grab)||"grab"):a.setCursor((s==null?void 0:s.default)||"default")},this.shortcut=new Ha(e.graph),this.onDragStart=this.onDragStart.bind(this),this.onDrag=this.onDrag.bind(this),this.onDragEnd=this.onDragEnd.bind(this),this.onDrop=this.onDrop.bind(this),this.bindEvents()}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}bindEvents(){const{graph:e,canvas:t}=this.context,n=t.getLayer().getContextService().$canvas;n&&(n.addEventListener("blur",this.onDragEnd),n.addEventListener("contextmenu",this.onDragEnd)),this.enableElements.forEach(i=>{e.on(`${i}:${R.DRAG_START}`,this.onDragStart),e.on(`${i}:${R.DRAG}`,this.onDrag),e.on(`${i}:${R.DRAG_END}`,this.onDragEnd),e.on(`${i}:${R.POINTER_ENTER}`,this.setCursor),e.on(`${i}:${R.POINTER_LEAVE}`,this.setCursor)}),["link"].includes(this.options.dropEffect)&&(e.on(ls.DROP,this.onDrop),e.on(zr.DROP,this.onDrop))}getSelectedNodeIDs(e){return Array.from(new Set(this.context.graph.getElementDataByState("node",this.options.state).map(t=>t.id).concat(e)))}getDelta(e){const t=this.context.graph.getZoom();return jr([e.dx,e.dy],t)}onDragStart(e){var t;if(this.enable=this.validate(e),!this.enable)return;const{batch:n,canvas:i,graph:a}=this.context;i.setCursor(((t=this.options.cursor)===null||t===void 0?void 0:t.grabbing)||"grabbing"),this.isDragging=!0,n.startBatch();const s=e.target.id;a.getElementState(s).includes(this.options.state)?this.target=this.getSelectedNodeIDs([s]):this.target=[s],this.hideEdge(),this.context.graph.frontElement(this.target),this.options.shadow&&this.createShadow(this.target)}onDrag(e){if(!this.enable)return;const t=this.getDelta(e);this.options.shadow?this.moveShadow(t):this.moveElement(this.target,t)}onDragEnd(){var e,t,n;if(!this.enable)return;if(this.enable=!1,this.options.shadow){if(!this.shadow)return;this.shadow.style.visibility="hidden";const{x:s=0,y:o=0}=this.shadow.attributes,[A,l]=$e([+s,+o],this.shadowOrigin);this.moveElement(this.target,[A,l])}this.showEdges(),(t=(e=this.options).onFinish)===null||t===void 0||t.call(e,this.target);const{batch:i,canvas:a}=this.context;i.endBatch(),a.setCursor(((n=this.options.cursor)===null||n===void 0?void 0:n.grab)||"grab"),this.isDragging=!1,this.target=[]}isKeydown(){const{trigger:e}=this.options;return e!=null&&e.length?this.shortcut.match(e):!0}validate(e){if(this.destroyed||Ql(e.target)||this.context.graph.isCollapsingExpanding||!this.isKeydown())return!1;const{enable:t}=this.options;return ie(t)?t(e):!!t}clampByRotation([e,t]){const n=this.context.graph.getRotation();return Gk([e,t],n)}moveElement(e,t){return Dx(this,void 0,void 0,function*(){const{graph:n,model:i}=this.context,{dropEffect:a}=this.options;a==="move"&&e.forEach(s=>i.refreshComboData(s)),n.translateElementBy(Object.fromEntries(e.map(s=>[s,this.clampByRotation(t)])),!1)})}moveShadow(e){if(!this.shadow)return;const{x:t=0,y:n=0}=this.shadow.attributes,[i,a]=e;this.shadow.attr({x:+t+i,y:+n+a})}createShadow(e){const t=bt(this.options,"shadow"),n=Ml(e.map(l=>this.context.element.getElement(l).getBounds())),[i,a]=n.min;this.shadowOrigin=[i,a];const[s,o]=Ra(n),A={width:s,height:o,x:i,y:a};this.shadow?this.shadow.attr(Object.assign(Object.assign(Object.assign({},t),A),{visibility:"visible"})):(this.shadow=new An({style:Object.assign(Object.assign(Object.assign({$layer:"transient"},t),A),{pointerEvents:"none"})}),this.context.canvas.appendChild(this.shadow))}showEdges(){this.options.shadow||this.hiddenEdges.length===0||(this.context.graph.showElement(this.hiddenEdges),this.hiddenEdges=[])}hideEdge(){const{hideEdge:e,shadow:t}=this.options;if(e==="none"||t)return;const{graph:n}=this.context;e==="all"?this.hiddenEdges=n.getEdgeData().map(N):this.hiddenEdges=Array.from(new Set(this.target.map(i=>n.getRelatedEdgesData(i,e).map(N)).flat())),n.hideElement(this.hiddenEdges)}unbindEvents(){const{graph:e,canvas:t}=this.context,n=t.getLayer().getContextService().$canvas;n&&(n.removeEventListener("blur",this.onDragEnd),n.removeEventListener("contextmenu",this.onDragEnd)),this.enableElements.forEach(i=>{e.off(`${i}:${R.DRAG_START}`,this.onDragStart),e.off(`${i}:${R.DRAG}`,this.onDrag),e.off(`${i}:${R.DRAG_END}`,this.onDragEnd),e.off(`${i}:${R.POINTER_ENTER}`,this.setCursor),e.off(`${i}:${R.POINTER_LEAVE}`,this.setCursor)}),e.off(`combo:${R.DROP}`,this.onDrop),e.off(`canvas:${R.DROP}`,this.onDrop)}destroy(){var e;this.unbindEvents(),(e=this.shadow)===null||e===void 0||e.destroy(),super.destroy()}}Nl.defaultOptions={animation:!0,enable:r=>["node","combo"].includes(r.targetType),trigger:[],dropEffect:"move",state:"selected",hideEdge:"none",shadow:!1,shadowZIndex:100,shadowFill:"#F3F9FF",shadowFillOpacity:.5,shadowStroke:"#1890FF",shadowStrokeOpacity:.9,shadowLineDash:[5,5],cursor:{default:"default",grab:"grab",grabbing:"grabbing"}};var j9="*",yd=function(){function r(){this._events={}}return r.prototype.on=function(e,t,n){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!n}),this},r.prototype.once=function(e,t){return this.on(e,t,!0)},r.prototype.emit=function(e){for(var t=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var a=this._events[e]||[],s=this._events[j9]||[],o=function(A){for(var l=A.length,c=0;c<l;c++)if(A[c]){var u=A[c],h=u.callback,d=u.once;d&&(A.splice(c,1),A.length===0&&delete t._events[e],l--,c--),h.apply(t,n)}};o(a),o(s)},r.prototype.off=function(e,t){if(!e)this._events={};else if(!t)delete this._events[e];else{for(var n=this._events[e]||[],i=n.length,a=0;a<i;a++)n[a].callback===t&&(n.splice(a,1),i--,a--);n.length===0&&delete this._events[e]}return this},r.prototype.getEvents=function(){return this._events},r}();function Y1(r,e,t,n){for(;r.length;){const i=r.shift();if(t(i))return!0;e.add(i.id),n(i.id).forEach(s=>{e.has(s.id)||(e.add(s.id),r.push(s))})}return!1}function Bh(r,e,t,n){if(t(r))return!0;e.add(r.id);for(const a of n(r.id))if(!e.has(a.id)&&Bh(a,e,t,n))return!0;return!1}const Hx=()=>!0;let $9=class{constructor(e){it(this,"graph");it(this,"nodeFilter");it(this,"edgeFilter");it(this,"cacheEnabled");it(this,"inEdgesMap",new Map);it(this,"outEdgesMap",new Map);it(this,"bothEdgesMap",new Map);it(this,"allNodesMap",new Map);it(this,"allEdgesMap",new Map);it(this,"clearCache",()=>{this.inEdgesMap.clear(),this.outEdgesMap.clear(),this.bothEdgesMap.clear(),this.allNodesMap.clear(),this.allEdgesMap.clear()});it(this,"refreshCache",()=>{this.clearCache(),this.updateCache(this.graph.getAllNodes().map(e=>e.id))});it(this,"updateCache",e=>{const t=new Set;e.forEach(n=>{const i=this.bothEdgesMap.get(n);if(i&&i.forEach(a=>t.add(a.id)),!this.hasNode(n))this.inEdgesMap.delete(n),this.outEdgesMap.delete(n),this.bothEdgesMap.delete(n),this.allNodesMap.delete(n);else{const a=this.graph.getRelatedEdges(n,"in").filter(this.edgeFilter),s=this.graph.getRelatedEdges(n,"out").filter(this.edgeFilter),o=Array.from(new Set([...a,...s]));o.forEach(A=>t.add(A.id)),this.inEdgesMap.set(n,a),this.outEdgesMap.set(n,s),this.bothEdgesMap.set(n,o),this.allNodesMap.set(n,this.graph.getNode(n))}}),t.forEach(n=>{this.hasEdge(n)?this.allEdgesMap.set(n,this.graph.getEdge(n)):this.allEdgesMap.delete(n)})});it(this,"handleGraphChanged",e=>{const t=new Set;e.changes.forEach(n=>{switch(n.type){case"NodeAdded":t.add(n.value.id);break;case"NodeDataUpdated":t.add(n.id);break;case"EdgeAdded":t.add(n.value.source),t.add(n.value.target);break;case"EdgeUpdated":(n.propertyName==="source"||n.propertyName==="target")&&(t.add(n.oldValue),t.add(n.newValue));break;case"EdgeDataUpdated":if(e.graph.hasEdge(n.id)){const i=e.graph.getEdge(n.id);t.add(i.source),t.add(i.target)}break;case"EdgeRemoved":t.add(n.value.source),t.add(n.value.target);break;case"NodeRemoved":t.add(n.value.id);break}}),this.updateCache(t)});this.graph=e.graph;const t=e.nodeFilter||Hx,n=e.edgeFilter||Hx;this.nodeFilter=t,this.edgeFilter=i=>{const{source:a,target:s}=this.graph.getEdgeDetail(i.id);return!t(a)||!t(s)?!1:n(i,a,s)},e.cache==="auto"?(this.cacheEnabled=!0,this.startAutoCache()):e.cache==="manual"?this.cacheEnabled=!0:this.cacheEnabled=!1}startAutoCache(){this.refreshCache(),this.graph.on("changed",this.handleGraphChanged)}stopAutoCache(){this.graph.off("changed",this.handleGraphChanged)}checkNodeExistence(e){this.getNode(e)}hasNode(e){if(!this.graph.hasNode(e))return!1;const t=this.graph.getNode(e);return this.nodeFilter(t)}areNeighbors(e,t){return this.checkNodeExistence(e),this.getNeighbors(t).some(n=>n.id===e)}getNode(e){const t=this.graph.getNode(e);if(!this.nodeFilter(t))throw new Error("Node not found for id: "+e);return t}getRelatedEdges(e,t){return this.checkNodeExistence(e),this.cacheEnabled?t==="in"?this.inEdgesMap.get(e):t==="out"?this.outEdgesMap.get(e):this.bothEdgesMap.get(e):this.graph.getRelatedEdges(e,t).filter(this.edgeFilter)}getDegree(e,t){return this.getRelatedEdges(e,t).length}getSuccessors(e){const n=this.getRelatedEdges(e,"out").map(i=>this.getNode(i.target));return Array.from(new Set(n))}getPredecessors(e){const n=this.getRelatedEdges(e,"in").map(i=>this.getNode(i.source));return Array.from(new Set(n))}getNeighbors(e){const t=this.getPredecessors(e),n=this.getSuccessors(e);return Array.from(new Set([...t,...n]))}hasEdge(e){if(!this.graph.hasEdge(e))return!1;const t=this.graph.getEdge(e);return this.edgeFilter(t)}getEdge(e){const t=this.graph.getEdge(e);if(!this.edgeFilter(t))throw new Error("Edge not found for id: "+e);return t}getEdgeDetail(e){const t=this.getEdge(e);return{edge:t,source:this.getNode(t.source),target:this.getNode(t.target)}}hasTreeStructure(e){return this.graph.hasTreeStructure(e)}getRoots(e){return this.graph.getRoots(e).filter(this.nodeFilter)}getChildren(e,t){return this.checkNodeExistence(e),this.graph.getChildren(e,t).filter(this.nodeFilter)}getParent(e,t){this.checkNodeExistence(e);const n=this.graph.getParent(e,t);return!n||!this.nodeFilter(n)?null:n}getAllNodes(){return this.cacheEnabled?Array.from(this.allNodesMap.values()):this.graph.getAllNodes().filter(this.nodeFilter)}getAllEdges(){return this.cacheEnabled?Array.from(this.allEdgesMap.values()):this.graph.getAllEdges().filter(this.edgeFilter)}bfs(e,t,n="out"){const i={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[n];Y1([this.getNode(e)],new Set,t,i)}dfs(e,t,n="out"){const i={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[n];Bh(this.getNode(e),new Set,t,i)}},Wt=class xL extends yd{constructor(t){super();it(this,"nodeMap",new Map);it(this,"edgeMap",new Map);it(this,"inEdgesMap",new Map);it(this,"outEdgesMap",new Map);it(this,"bothEdgesMap",new Map);it(this,"treeIndices",new Map);it(this,"changes",[]);it(this,"batchCount",0);it(this,"onChanged",()=>{});it(this,"batch",t=>{this.batchCount+=1,t(),this.batchCount-=1,this.batchCount||this.commit()});t&&(t.nodes&&this.addNodes(t.nodes),t.edges&&this.addEdges(t.edges),t.tree&&this.addTree(t.tree),t.onChanged&&(this.onChanged=t.onChanged))}commit(){const t=this.changes;this.changes=[];const n={graph:this,changes:t};this.emit("changed",n),this.onChanged(n)}reduceChanges(t){let n=[];return t.forEach(i=>{switch(i.type){case"NodeRemoved":{let a=!1;n=n.filter(s=>{if(s.type==="NodeAdded"){const o=s.value.id===i.value.id;return o&&(a=!0),!o}else{if(s.type==="NodeDataUpdated")return s.id!==i.value.id;if(s.type==="TreeStructureChanged")return s.nodeId!==i.value.id}return!0}),a||n.push(i);break}case"EdgeRemoved":{let a=!1;n=n.filter(s=>{if(s.type==="EdgeAdded"){const o=s.value.id===i.value.id;return o&&(a=!0),!o}else if(s.type==="EdgeDataUpdated"||s.type==="EdgeUpdated")return s.id!==i.value.id;return!0}),a||n.push(i);break}case"NodeDataUpdated":case"EdgeDataUpdated":case"EdgeUpdated":{const a=n.findIndex(o=>o.type===i.type&&o.id===i.id&&(i.propertyName===void 0||o.propertyName===i.propertyName)),s=n[a];s?i.propertyName!==void 0?s.newValue=i.newValue:(n.splice(a,1),n.push(i)):n.push(i);break}case"TreeStructureDetached":{n=n.filter(a=>a.type==="TreeStructureAttached"||a.type==="TreeStructureChanged"?a.treeKey!==i.treeKey:!0),n.push(i);break}case"TreeStructureChanged":{const a=n.find(s=>s.type==="TreeStructureChanged"&&s.treeKey===i.treeKey&&s.nodeId===i.nodeId);a?a.newParentId=i.newParentId:n.push(i);break}default:n.push(i);break}}),n}checkNodeExistence(t){this.getNode(t)}hasNode(t){return this.nodeMap.has(t)}areNeighbors(t,n){return this.getNeighbors(n).some(i=>i.id===t)}getNode(t){const n=this.nodeMap.get(t);if(!n)throw new Error("Node not found for id: "+t);return n}getRelatedEdges(t,n){if(this.checkNodeExistence(t),n==="in"){const i=this.inEdgesMap.get(t);return Array.from(i)}else if(n==="out"){const i=this.outEdgesMap.get(t);return Array.from(i)}else{const i=this.bothEdgesMap.get(t);return Array.from(i)}}getDegree(t,n){return this.getRelatedEdges(t,n).length}getSuccessors(t){const i=this.getRelatedEdges(t,"out").map(a=>this.getNode(a.target));return Array.from(new Set(i))}getPredecessors(t){const i=this.getRelatedEdges(t,"in").map(a=>this.getNode(a.source));return Array.from(new Set(i))}getNeighbors(t){const n=this.getPredecessors(t),i=this.getSuccessors(t);return Array.from(new Set([...n,...i]))}doAddNode(t){if(this.hasNode(t.id))throw new Error("Node already exists: "+t.id);this.nodeMap.set(t.id,t),this.inEdgesMap.set(t.id,new Set),this.outEdgesMap.set(t.id,new Set),this.bothEdgesMap.set(t.id,new Set),this.treeIndices.forEach(n=>{n.childrenMap.set(t.id,new Set)}),this.changes.push({type:"NodeAdded",value:t})}addNodes(t){this.batch(()=>{for(const n of t)this.doAddNode(n)})}addNode(t){this.addNodes([t])}doRemoveNode(t){const n=this.getNode(t),i=this.bothEdgesMap.get(t);i==null||i.forEach(a=>this.doRemoveEdge(a.id)),this.nodeMap.delete(t),this.treeIndices.forEach(a=>{var o,A;(o=a.childrenMap.get(t))==null||o.forEach(l=>{a.parentMap.delete(l.id)});const s=a.parentMap.get(t);s&&((A=a.childrenMap.get(s.id))==null||A.delete(n)),a.parentMap.delete(t),a.childrenMap.delete(t)}),this.bothEdgesMap.delete(t),this.inEdgesMap.delete(t),this.outEdgesMap.delete(t),this.changes.push({type:"NodeRemoved",value:n})}removeNodes(t){this.batch(()=>{t.forEach(n=>this.doRemoveNode(n))})}removeNode(t){this.removeNodes([t])}updateNodeDataProperty(t,n,i){const a=this.getNode(t);this.batch(()=>{const s=a.data[n],o=i;a.data[n]=o,this.changes.push({type:"NodeDataUpdated",id:t,propertyName:n,oldValue:s,newValue:o})})}mergeNodeData(t,n){this.batch(()=>{Object.entries(n).forEach(([i,a])=>{this.updateNodeDataProperty(t,i,a)})})}updateNodeData(...t){const n=t[0],i=this.getNode(n);if(typeof t[1]=="string"){this.updateNodeDataProperty(n,t[1],t[2]);return}let a;if(typeof t[1]=="function"){const s=t[1];a=s(i.data)}else typeof t[1]=="object"&&(a=t[1]);this.batch(()=>{const s=i.data,o=a;i.data=a,this.changes.push({type:"NodeDataUpdated",id:n,oldValue:s,newValue:o})})}checkEdgeExistence(t){if(!this.hasEdge(t))throw new Error("Edge not found for id: "+t)}hasEdge(t){return this.edgeMap.has(t)}getEdge(t){return this.checkEdgeExistence(t),this.edgeMap.get(t)}getEdgeDetail(t){const n=this.getEdge(t);return{edge:n,source:this.getNode(n.source),target:this.getNode(n.target)}}doAddEdge(t){if(this.hasEdge(t.id))throw new Error("Edge already exists: "+t.id);this.checkNodeExistence(t.source),this.checkNodeExistence(t.target),this.edgeMap.set(t.id,t);const n=this.inEdgesMap.get(t.target),i=this.outEdgesMap.get(t.source),a=this.bothEdgesMap.get(t.source),s=this.bothEdgesMap.get(t.target);n.add(t),i.add(t),a.add(t),s.add(t),this.changes.push({type:"EdgeAdded",value:t})}addEdges(t){this.batch(()=>{for(const n of t)this.doAddEdge(n)})}addEdge(t){this.addEdges([t])}doRemoveEdge(t){const n=this.getEdge(t),i=this.outEdgesMap.get(n.source),a=this.inEdgesMap.get(n.target),s=this.bothEdgesMap.get(n.source),o=this.bothEdgesMap.get(n.target);i.delete(n),a.delete(n),s.delete(n),o.delete(n),this.edgeMap.delete(t),this.changes.push({type:"EdgeRemoved",value:n})}removeEdges(t){this.batch(()=>{t.forEach(n=>this.doRemoveEdge(n))})}removeEdge(t){this.removeEdges([t])}updateEdgeSource(t,n){const i=this.getEdge(t);this.checkNodeExistence(n);const a=i.source,s=n;this.outEdgesMap.get(a).delete(i),this.bothEdgesMap.get(a).delete(i),this.outEdgesMap.get(s).add(i),this.bothEdgesMap.get(s).add(i),i.source=n,this.batch(()=>{this.changes.push({type:"EdgeUpdated",id:t,propertyName:"source",oldValue:a,newValue:s})})}updateEdgeTarget(t,n){const i=this.getEdge(t);this.checkNodeExistence(n);const a=i.target,s=n;this.inEdgesMap.get(a).delete(i),this.bothEdgesMap.get(a).delete(i),this.inEdgesMap.get(s).add(i),this.bothEdgesMap.get(s).add(i),i.target=n,this.batch(()=>{this.changes.push({type:"EdgeUpdated",id:t,propertyName:"target",oldValue:a,newValue:s})})}updateEdgeDataProperty(t,n,i){const a=this.getEdge(t);this.batch(()=>{const s=a.data[n],o=i;a.data[n]=o,this.changes.push({type:"EdgeDataUpdated",id:t,propertyName:n,oldValue:s,newValue:o})})}updateEdgeData(...t){const n=t[0],i=this.getEdge(n);if(typeof t[1]=="string"){this.updateEdgeDataProperty(n,t[1],t[2]);return}let a;if(typeof t[1]=="function"){const s=t[1];a=s(i.data)}else typeof t[1]=="object"&&(a=t[1]);this.batch(()=>{const s=i.data,o=a;i.data=a,this.changes.push({type:"EdgeDataUpdated",id:n,oldValue:s,newValue:o})})}mergeEdgeData(t,n){this.batch(()=>{Object.entries(n).forEach(([i,a])=>{this.updateEdgeDataProperty(t,i,a)})})}checkTreeExistence(t){if(!this.hasTreeStructure(t))throw new Error("Tree structure not found for treeKey: "+t)}hasTreeStructure(t){return this.treeIndices.has(t)}attachTreeStructure(t){this.treeIndices.has(t)||(this.treeIndices.set(t,{parentMap:new Map,childrenMap:new Map}),this.batch(()=>{this.changes.push({type:"TreeStructureAttached",treeKey:t})}))}detachTreeStructure(t){this.checkTreeExistence(t),this.treeIndices.delete(t),this.batch(()=>{this.changes.push({type:"TreeStructureDetached",treeKey:t})})}addTree(t,n){this.batch(()=>{this.attachTreeStructure(n);const i=[],a=Array.isArray(t)?t:[t];for(;a.length;){const s=a.shift();i.push(s),s.children&&a.push(...s.children)}this.addNodes(i),i.forEach(s=>{var o;(o=s.children)==null||o.forEach(A=>{this.setParent(A.id,s.id,n)})})})}getRoots(t){return this.checkTreeExistence(t),this.getAllNodes().filter(n=>!this.getParent(n.id,t))}getChildren(t,n){this.checkNodeExistence(t),this.checkTreeExistence(n);const a=this.treeIndices.get(n).childrenMap.get(t);return Array.from(a||[])}getParent(t,n){return this.checkNodeExistence(t),this.checkTreeExistence(n),this.treeIndices.get(n).parentMap.get(t)||null}getAncestors(t,n){const i=[];let a=this.getNode(t),s;for(;s=this.getParent(a.id,n);)i.push(s),a=s;return i}setParent(t,n,i){var c,u;this.checkTreeExistence(i);const a=this.treeIndices.get(i);if(!a)return;const s=this.getNode(t),o=a.parentMap.get(t);if((o==null?void 0:o.id)===n)return;if(n==null){o&&((c=a.childrenMap.get(o.id))==null||c.delete(s)),a.parentMap.delete(t);return}const A=this.getNode(n);a.parentMap.set(t,A),o&&((u=a.childrenMap.get(o.id))==null||u.delete(s));let l=a.childrenMap.get(A.id);l||(l=new Set,a.childrenMap.set(A.id,l)),l.add(s),this.batch(()=>{this.changes.push({type:"TreeStructureChanged",treeKey:i,nodeId:t,oldParentId:o==null?void 0:o.id,newParentId:A.id})})}dfsTree(t,n,i){const a=s=>this.getChildren(s,i);return Bh(this.getNode(t),new Set,n,a)}bfsTree(t,n,i){const a=s=>this.getChildren(s,i);return Y1([this.getNode(t)],new Set,n,a)}getAllNodes(){return Array.from(this.nodeMap.values())}getAllEdges(){return Array.from(this.edgeMap.values())}bfs(t,n,i="out"){const a={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[i];return Y1([this.getNode(t)],new Set,n,a)}dfs(t,n,i="out"){const a={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[i];return Bh(this.getNode(t),new Set,n,a)}clone(){const t=this.getAllNodes().map(a=>({...a,data:{...a.data}})),n=this.getAllEdges().map(a=>({...a,data:{...a.data}})),i=new xL({nodes:t,edges:n});return this.treeIndices.forEach(({parentMap:a,childrenMap:s},o)=>{const A=new Map;a.forEach((c,u)=>{A.set(u,i.getNode(c.id))});const l=new Map;s.forEach((c,u)=>{l.set(u,new Set(Array.from(c).map(h=>i.getNode(h.id))))}),i.treeIndices.set(o,{parentMap:A,childrenMap:l})}),i}toJSON(){return JSON.stringify({nodes:this.getAllNodes(),edges:this.getAllEdges()})}createView(t){return new $9({graph:this,...t})}};class md{constructor(e,t){this.context=e,this.options=t||{}}}var W9=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})},q9=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};function Y9(r){const{type:e}=r;return["compact-box","mindmap","dendrogram","indented"].includes(e)}function X9(r){return!Array.isArray(r)&&(r==null?void 0:r.preLayout)}function Mu(r){const{nodes:e,edges:t}=r,n={nodes:[],edges:[],combos:[]};return e.forEach(i=>{const a=i.data._isCombo?n.combos:n.nodes,{x:s,y:o,z:A=0}=i.data;a==null||a.push({id:i.id,style:{x:s,y:o,z:A}})}),t.forEach(i=>{const{id:a,source:s,target:o,data:{points:A=[],controlPoints:l=A.slice(1,A.length-1)}}=i;n.edges.push({id:a,source:s,target:o,style:Object.assign({},l!=null&&l.length?{controlPoints:l.map(an)}:{})})}),n}function Z9(r,e){class t extends md{constructor(i,a){if(super(i,a),this.instance=new r({}),this.id=this.instance.id,"stop"in this.instance&&"tick"in this.instance){const s=this.instance;this.stop=s.stop.bind(s),this.tick=o=>{const A=s.tick(o);return Mu(A)}}}execute(i,a){return W9(this,void 0,void 0,function*(){return Mu(yield this.instance.execute(this.graphData2LayoutModel(i),this.transformOptions(on({},this.options,a))))})}transformOptions(i){if(!("onTick"in i))return i;const a=i.onTick;return i.onTick=s=>a(Mu(s)),i}graphData2LayoutModel(i){const{nodes:a=[],edges:s=[],combos:o=[]}=i,A=a.map(d=>{const f=N(d),{data:g,style:v,combo:p}=d,y=q9(d,["data","style","combo"]),m={id:f,data:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},g),{data:g}),p?{parentId:p}:{}),{style:v}),y)};return v!=null&&v.x&&Object.assign(m.data,{x:v.x}),v!=null&&v.y&&Object.assign(m.data,{y:v.y}),v!=null&&v.z&&Object.assign(m.data,{z:v.z}),m}),l=new Map(A.map(d=>[d.id,d])),c=s.filter(d=>{const{source:f,target:g}=d;return l.has(f)&&l.has(g)}).map(d=>{const{source:f,target:g,data:v,style:p}=d;return{id:N(d),source:f,target:g,data:Object.assign({},v),style:Object.assign({},p)}}),u=o.map(d=>({id:N(d),data:Object.assign({_isCombo:!0},d.data),style:Object.assign({},d.style)})),h=new Wt({nodes:[...A,...u],edges:c});return e.model.model.hasTreeStructure(qe)&&(h.attachTreeStructure(qe),A.forEach(d=>{const f=e.model.model.getParent(d.id,qe);f&&h.hasNode(f.id)&&h.setParent(d.id,f.id,qe)})),h}}return t}function Ig(r,e,...t){if(e in r)return r[e](...t);if("instance"in r){const n=r.instance;if(e in n)return n[e](...t)}return null}function Gx(r,e){if(e in r)return r[e];if("instance"in r){const t=r.instance;if(e in t)return t[e]}return null}var J9=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class e$ extends Nl{get forceLayoutInstance(){return this.context.layout.getLayoutInstance().find(e=>["d3-force","d3-force-3d"].includes(e==null?void 0:e.id))}validate(e){return this.context.layout?this.forceLayoutInstance?super.validate(e):(Ei.warn("DragElementForce only works with d3-force or d3-force-3d layout"),!1):!1}moveElement(e,t){return J9(this,void 0,void 0,function*(){const n=this.forceLayoutInstance;this.context.graph.getNodeData(e).forEach((i,a)=>{const{x:s=0,y:o=0}=i.style||{};n&&Ig(n,"setFixedPosition",e[a],[...ve([+s,+o],this.clampByRotation(t))])})})}onDragStart(e){if(this.enable=this.validate(e),!this.enable)return;this.target=this.getSelectedNodeIDs([e.target.id]),this.hideEdge(),this.context.graph.frontElement(this.target);const t=this.forceLayoutInstance;t&&Gx(t,"simulation").alphaTarget(.3).restart(),this.context.graph.getNodeData(this.target).forEach(n=>{const{x:i=0,y:a=0}=n.style||{};t&&Ig(t,"setFixedPosition",N(n),[+i,+a])})}onDrag(e){if(!this.enable)return;const t=this.getDelta(e);this.moveElement(this.target,t)}onDragEnd(){const e=this.forceLayoutInstance;e&&Gx(e,"simulation").alphaTarget(0),!this.options.fixed&&this.context.graph.getNodeData(this.target).forEach(t=>{e&&Ig(e,"setFixedPosition",N(t),[null,null,null])})}}var Kx=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class wd extends ur{constructor(e,t){super(e,Object.assign({},wd.defaultOptions,t)),this.isZoomEvent=n=>!!(n.data&&"scale"in n.data),this.relatedEdgeToUpdate=new Set,this.zoom=this.context.graph.getZoom(),this.fixElementSize=n=>Kx(this,void 0,void 0,function*(){if(!this.validate(n))return;const{graph:i}=this.context,{state:a,nodeFilter:s,edgeFilter:o,comboFilter:A}=this.options,l=(a?i.getElementDataByState("node",a):i.getNodeData()).filter(s),c=(a?i.getElementDataByState("edge",a):i.getEdgeData()).filter(o),u=(a?i.getElementDataByState("combo",a):i.getComboData()).filter(A),h=this.isZoomEvent(n)?this.zoom=Math.max(.01,Math.min(n.data.scale,10)):this.zoom,d=[...l,...u];d.length>0&&d.forEach(f=>this.fixNodeLike(f,h)),this.updateRelatedEdges(),c.length>0&&c.forEach(f=>this.fixEdge(f,h))}),this.cachedStyles=new Map,this.getOriginalFieldValue=(n,i,a)=>{var s;const o=this.cachedStyles.get(n)||[],A=((s=o.find(l=>l.shape===i))===null||s===void 0?void 0:s.style)||{};return a in A||(A[a]=i.attributes[a],this.cachedStyles.set(n,[...o.filter(l=>l.shape!==i),{shape:i,style:A}])),A[a]},this.scaleEntireElement=(n,i,a)=>{i.setLocalScale(1/a);const s=this.cachedStyles.get(n)||[];s.push({shape:i}),this.cachedStyles.set(n,s)},this.scaleSpecificShapes=(n,i,a)=>{const s=aj(n);(Array.isArray(a)?a:[a]).forEach(A=>{const{shape:l,fields:c}=A,u=typeof l=="function"?l(s):n.getShape(l);if(u){if(!c){this.scaleEntireElement(n.id,u,i);return}c.forEach(h=>{const d=this.getOriginalFieldValue(n.id,u,h);Z(d)&&(u.style[h]=d/i)})}})},this.skipIfExceedViewport=n=>{const{viewport:i}=this.context;return!(i!=null&&i.isInViewport(n.getRenderBounds(),!1,30))},this.fixNodeLike=(n,i)=>{const a=N(n),{element:s,model:o}=this.context,A=s.getElement(a);if(!A||this.skipIfExceedViewport(A))return;o.getRelatedEdgesData(a).forEach(u=>this.relatedEdgeToUpdate.add(N(u)));const c=this.options[A.type];if(!c){this.scaleEntireElement(a,A,i);return}this.scaleSpecificShapes(A,i,c)},this.fixEdge=(n,i)=>{const a=N(n),s=this.context.element.getElement(a);if(!s||this.skipIfExceedViewport(s))return;const o=this.options.edge;if(!o){s.style.transformOrigin="center",this.scaleEntireElement(a,s,i);return}this.scaleSpecificShapes(s,i,o)},this.updateRelatedEdges=()=>{const{element:n}=this.context;this.relatedEdgeToUpdate.size>0&&this.relatedEdgeToUpdate.forEach(i=>{const a=n.getElement(i);a==null||a.update({})}),this.relatedEdgeToUpdate.clear()},this.resetTransform=n=>Kx(this,void 0,void 0,function*(){var i;!((i=n.data)===null||i===void 0)&&i.firstRender||(this.options.reset?this.restoreCachedStyles():this.fixElementSize({data:{scale:this.zoom}}))}),this.bindEvents()}restoreCachedStyles(){if(this.cachedStyles.size>0){this.cachedStyles.forEach(i=>{i.forEach(({shape:a,style:s})=>{if(Ai(s))a.setLocalScale(1);else{if(this.options.state)return;Object.entries(s).forEach(([o,A])=>a.style[o]=A)}})});const{graph:e,element:t}=this.context,n=Object.keys(Object.fromEntries(this.cachedStyles)).filter(i=>i&&e.getElementType(i)==="node");if(n.length>0){const i=new Set;n.forEach(a=>{e.getRelatedEdgesData(a).forEach(s=>i.add(N(s)))}),i.forEach(a=>{const s=t==null?void 0:t.getElement(a);s==null||s.update({})})}}}bindEvents(){const{graph:e}=this.context;e.on(V.AFTER_DRAW,this.resetTransform),e.on(V.AFTER_TRANSFORM,this.fixElementSize)}unbindEvents(){const{graph:e}=this.context;e.off(V.AFTER_DRAW,this.resetTransform),e.off(V.AFTER_TRANSFORM,this.fixElementSize)}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return ie(t)?t(e):!!t}destroy(){this.unbindEvents(),super.destroy()}}wd.defaultOptions={enable:r=>r.data.scale<1,nodeFilter:()=>!0,edgeFilter:()=>!0,comboFilter:()=>!0,edge:[{shape:"key",fields:["lineWidth"]},{shape:"halo",fields:["lineWidth"]},{shape:"label"}],reset:!1};var t$=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class Bd extends ur{constructor(e,t){super(e,Object.assign({},Bd.defaultOptions,t)),this.focus=n=>t$(this,void 0,void 0,function*(){if(!this.validate(n))return;const{graph:i}=this.context;yield i.focusElement(n.target.id,this.options.animation)}),this.shortcut=new Ha(e.graph),this.bindEvents()}bindEvents(){const{graph:e}=this.context;this.unbindEvents(),Os.forEach(t=>{e.on(`${t}:${R.CLICK}`,this.focus)})}validate(e){if(this.destroyed||!this.isKeydown())return!1;const{enable:t}=this.options;return ie(t)?t(e):!!t}isKeydown(){const{trigger:e}=this.options;return e!=null&&e.length?this.shortcut.match(e):!0}unbindEvents(){const{graph:e}=this.context;Os.forEach(t=>{e.off(`${t}:${R.CLICK}`,this.focus)})}destroy(){this.unbindEvents(),this.shortcut.destroy(),super.destroy()}}Bd.defaultOptions={animation:{easing:"ease-in",duration:500},enable:!0,trigger:[]};class bd extends ur{constructor(e,t){super(e,Object.assign({},bd.defaultOptions,t)),this.isFrozen=!1,this.toggleFrozen=n=>{this.isFrozen=n.type==="dragstart"},this.hoverElement=n=>{if(!this.validate(n))return;const i=n.type===R.POINTER_ENTER;this.updateElementsState(n,i);const{onHover:a,onHoverEnd:s}=this.options;i?a==null||a(n):s==null||s(n)},this.updateElementsState=(n,i)=>{if(!this.options.state&&!this.options.inactiveState)return;const{graph:a}=this.context,{state:s,animation:o,inactiveState:A}=this.options,l=this.getActiveIds(n),c={};if(s&&Object.assign(c,this.getElementsState(l,s,i)),A){const u=Pk(a.getData(),!0).filter(h=>!l.includes(h));Object.assign(c,this.getElementsState(u,A,i))}a.setElementState(c,o)},this.getElementsState=(n,i,a)=>{const{graph:s}=this.context,o={};return n.forEach(A=>{const l=s.getElementState(A);a?o[A]=l.includes(i)?l:[...l,i]:o[A]=l.filter(c=>c!==i)}),o},this.bindEvents()}bindEvents(){const{graph:e}=this.context;this.unbindEvents(),Os.forEach(n=>{e.on(`${n}:${R.POINTER_ENTER}`,this.hoverElement),e.on(`${n}:${R.POINTER_LEAVE}`,this.hoverElement)});const t=this.context.canvas.document;t.addEventListener(`${R.DRAG_START}`,this.toggleFrozen),t.addEventListener(`${R.DRAG_END}`,this.toggleFrozen)}getActiveIds(e){const{graph:t}=this.context,{degree:n,direction:i}=this.options,a=e.target.id;return n?Yk(t,e.targetType,a,typeof n=="function"?n(e):n,i):[a]}validate(e){if(this.destroyed||this.isFrozen||Ql(e.target)||this.context.graph.isCollapsingExpanding)return!1;const{enable:t}=this.options;return ie(t)?t(e):!!t}unbindEvents(){const{graph:e}=this.context;Os.forEach(n=>{e.off(`${n}:${R.POINTER_ENTER}`,this.hoverElement),e.off(`${n}:${R.POINTER_LEAVE}`,this.hoverElement)});const t=this.context.canvas.document;t.removeEventListener(`${R.DRAG_START}`,this.toggleFrozen),t.removeEventListener(`${R.DRAG_END}`,this.toggleFrozen)}destroy(){this.unbindEvents(),super.destroy()}}bd.defaultOptions={animation:!1,enable:!0,degree:0,direction:"both",state:"active",inactiveState:void 0};class n$ extends Ol{onPointerDown(e){if(!super.validate(e)||!super.isKeydown()||this.points)return;const{canvas:t,graph:n}=this.context;this.pathShape=new wn({id:"g6-lasso-select",style:this.options.style}),t.appendChild(this.pathShape),this.points=[vh(e,n)]}onPointerMove(e){var t;if(!this.points)return;const{immediately:n,mode:i}=this.options;this.points.push(vh(e,this.context.graph)),(t=this.pathShape)===null||t===void 0||t.setAttribute("d",ej(this.points)),n&&i==="default"&&this.points.length>2&&super.updateElementsStates(this.points)}onPointerUp(){if(this.points){if(this.points.length<2){this.clearLasso();return}super.updateElementsStates(this.points),this.clearLasso()}}clearLasso(){var e;(e=this.pathShape)===null||e===void 0||e.remove(),this.pathShape=void 0,this.points=void 0}}class Ed extends ur{constructor(e,t){super(e,Object.assign({},Ed.defaultOptions,t)),this.hiddenShapes=[],this.isVisible=!0,this.setElementsVisibility=(n,i,a)=>{n.filter(Boolean).forEach(s=>{i==="hidden"&&!s.isVisible()?this.hiddenShapes.push(s):i==="visible"&&this.hiddenShapes.includes(s)?this.hiddenShapes.splice(this.hiddenShapes.indexOf(s),1):Ts(s,i,a)})},this.filterShapes=(n,i)=>{if(ie(i))return s=>!i(n,s);const a=i==null?void 0:i[n];return s=>s.className?!(a!=null&&a.includes(s.className)):!0},this.hideShapes=n=>{if(!this.validate(n)||!this.isVisible)return;const{element:i}=this.context,{shapes:a={}}=this.options;this.setElementsVisibility(i.getNodes(),"hidden",this.filterShapes("node",a)),this.setElementsVisibility(i.getEdges(),"hidden",this.filterShapes("edge",a)),this.setElementsVisibility(i.getCombos(),"hidden",this.filterShapes("combo",a)),this.isVisible=!1},this.showShapes=wl(n=>{if(!this.validate(n)||this.isVisible)return;const{element:i}=this.context;this.setElementsVisibility(i.getNodes(),"visible"),this.setElementsVisibility(i.getEdges(),"visible"),this.setElementsVisibility(i.getCombos(),"visible"),this.isVisible=!0},this.options.debounce),this.bindEvents()}bindEvents(){const{graph:e}=this.context;e.on(V.BEFORE_TRANSFORM,this.hideShapes),e.on(V.AFTER_TRANSFORM,this.showShapes)}unbindEvents(){const{graph:e}=this.context;e.off(V.BEFORE_TRANSFORM,this.hideShapes),e.off(V.AFTER_TRANSFORM,this.showShapes)}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return ie(t)?t(e):!!t}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}}Ed.defaultOptions={enable:!0,debounce:200,shapes:r=>r==="node"};var zx=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class xd extends ur{constructor(e,t){super(e,Object.assign({},xd.defaultOptions,t)),this.onWheel=n=>zx(this,void 0,void 0,function*(){this.options.preventDefault&&n.preventDefault();const i=n.deltaX,a=n.deltaY;yield this.scroll([-i,-a],n)}),this.shortcut=new Ha(e.graph),this.bindEvents()}update(e){super.update(e),this.bindEvents()}bindEvents(){var e,t;const{trigger:n}=this.options;if(this.shortcut.unbindAll(),Ot(n)){(e=this.graphDom)===null||e===void 0||e.removeEventListener(R.WHEEL,this.onWheel);const{up:i=[],down:a=[],left:s=[],right:o=[]}=n;this.shortcut.bind(i,A=>this.scroll([0,-10],A)),this.shortcut.bind(a,A=>this.scroll([0,10],A)),this.shortcut.bind(s,A=>this.scroll([-10,0],A)),this.shortcut.bind(o,A=>this.scroll([10,0],A))}else(t=this.graphDom)===null||t===void 0||t.addEventListener(R.WHEEL,this.onWheel,{passive:!1})}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement()}formatDisplacement(e){const{sensitivity:t}=this.options;return e=Dr(e,t),e=this.clampByDirection(e),e=this.clampByRange(e),e}clampByDirection([e,t]){const{direction:n}=this.options;return n==="x"?t=0:n==="y"&&(e=0),[e,t]}clampByRange([e,t]){const{viewport:n,canvas:i}=this.context,[a,s]=i.getSize(),[o,A,l,c]=Sr(this.options.range),u=[s*o,a*A,s*l,a*c],h=Da(nB(n.getCanvasCenter()),u),d=$e(n.getViewportCenter(),[e,t,0]);if(!Vr(d,h)){const{min:[f,g],max:[v,p]}=h;(d[0]<f&&e>0||d[0]>v&&e<0)&&(e=0),(d[1]<g&&t>0||d[1]>p&&t<0)&&(t=0)}return[e,t]}scroll(e,t){return zx(this,void 0,void 0,function*(){if(!this.validate(t))return;const{onFinish:n}=this.options,i=this.context.graph,a=this.formatDisplacement(e);yield i.translateBy(a,!1),n==null||n()})}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return ie(t)?t(e):!!t}destroy(){var e;this.shortcut.destroy(),(e=this.graphDom)===null||e===void 0||e.removeEventListener(R.WHEEL,this.onWheel),super.destroy()}}xd.defaultOptions={enable:!0,sensitivity:1,preventDefault:!0,range:1/0};var Vx=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class Cd extends ur{constructor(e,t){super(e,Object.assign({},Cd.defaultOptions,t)),this.zoom=(n,i,a)=>Vx(this,void 0,void 0,function*(){if(!this.validate(i))return;const{graph:s}=this.context;let o=this.options.origin;!o&&"viewport"in i&&(o=an(i.viewport));const{sensitivity:A,onFinish:l}=this.options,c=1+vt(n,-50,50)*A/100,u=s.getZoom();yield s.zoomTo(u*c,a,o),l==null||l()}),this.onReset=()=>Vx(this,void 0,void 0,function*(){yield this.context.graph.zoomTo(1,this.options.animation)}),this.preventDefault=n=>{this.options.preventDefault&&n.preventDefault()},this.shortcut=new Ha(e.graph),this.bindEvents()}update(e){super.update(e),this.bindEvents()}bindEvents(){const{trigger:e}=this.options;if(this.shortcut.unbindAll(),Array.isArray(e))if(e.includes(R.PINCH))this.shortcut.bind([R.PINCH],t=>{this.zoom(t.scale,t,!1)});else{const t=this.context.canvas.getContainer();t==null||t.addEventListener(R.WHEEL,this.preventDefault),this.shortcut.bind([...e,R.WHEEL],n=>{const{deltaX:i,deltaY:a}=n;this.zoom(-(a??i),n,!1)})}if(typeof e=="object"){const{zoomIn:t=[],zoomOut:n=[],reset:i=[]}=e;this.shortcut.bind(t,a=>this.zoom(10,a,this.options.animation)),this.shortcut.bind(n,a=>this.zoom(-10,a,this.options.animation)),this.shortcut.bind(i,this.onReset)}}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return ie(t)?t(e):!!t}destroy(){var e;this.shortcut.destroy(),(e=this.context.canvas.getContainer())===null||e===void 0||e.removeEventListener(R.WHEEL,this.preventDefault),super.destroy()}}Cd.defaultOptions={animation:{duration:200},enable:!0,sensitivity:1,trigger:[],preventDefault:!0};function jx(r,e,t,n="height"){const i=r[n],a=e[n];return t==="center"?(i+a)/2:r.height}const Us=Object.assign,r$={getId:r=>r.id||r.name,getPreH:r=>r.preH||0,getPreV:r=>r.preV||0,getHGap:r=>r.hgap||18,getVGap:r=>r.vgap||18,getChildren:r=>r.children,getHeight:r=>r.height||36,getWidth(r){const e=r.label||" ";return r.width||18*e.split("").length}};class bh{constructor(e,t){if(this.x=0,this.y=0,this.depth=0,this.children=[],this.hgap=0,this.vgap=0,e instanceof bh||"x"in e&&"y"in e&&"children"in e){const a=e;return this.data=a.data,this.id=a.id,this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this.depth=a.depth,this.children=a.children,this.parent=a.parent,this.hgap=a.hgap,this.vgap=a.vgap,this.preH=a.preH,void(this.preV=a.preV)}this.data=e;const n=t.getHGap(e),i=t.getVGap(e);this.preH=t.getPreH(e),this.preV=t.getPreV(e),this.width=t.getWidth(e),this.height=t.getHeight(e),this.width+=this.preH,this.height+=this.preV,this.id=t.getId(e),this.addGap(n,i)}isRoot(){return this.depth===0}isLeaf(){return this.children.length===0}addGap(e,t){this.hgap+=e,this.vgap+=t,this.width+=2*e,this.height+=2*t}eachNode(e){let t,n=[this];for(;t=n.shift();)e(t),n=t.children.concat(n)}DFTraverse(e){this.eachNode(e)}BFTraverse(e){let t,n=[this];for(;t=n.shift();)e(t),n=n.concat(t.children)}getBoundingBox(){const e={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(t=>{e.left=Math.min(e.left,t.x),e.top=Math.min(e.top,t.y),e.width=Math.max(e.width,t.x+t.width),e.height=Math.max(e.height,t.y+t.height)}),e}translate(e=0,t=0){this.eachNode(n=>{n.x+=e,n.y+=t,n.x+=n.preH,n.y+=n.preV})}right2left(){const e=this.getBoundingBox();this.eachNode(t=>{t.x=t.x-2*(t.x-e.left)-t.width}),this.translate(e.width,0)}bottom2top(){const e=this.getBoundingBox();this.eachNode(t=>{t.y=t.y-2*(t.y-e.top)-t.height}),this.translate(0,e.height)}}function X1(r,e={},t){e=Us({},r$,e);const n=new bh(r,e),i=[n];let a;if(!t&&!r.collapsed){for(;a=i.shift();)if(!a.data.collapsed){const s=e.getChildren(a.data),o=s?s.length:0;if(a.children=new Array(o),s&&o)for(let A=0;A<o;A++){const l=new bh(s[A],e);a.children[A]=l,i.push(l),l.parent=a,l.depth=a.depth+1}}}return n}class Sd{constructor(e,t={}){this.options=t,this.rootNode=X1(e,t)}execute(){throw new Error("please override this method")}}let i$=class Ou{constructor(e=0,t=0,n=0,i=[]){this.x=0,this.prelim=0,this.mod=0,this.shift=0,this.change=0,this.tl=null,this.tr=null,this.el=null,this.er=null,this.msel=0,this.mser=0,this.w=e||0,this.h=t||0,this.y=n||0,this.c=i||[],this.cs=i.length}static fromNode(e,t){if(!e)return null;const n=[];return e.children.forEach(i=>{const a=Ou.fromNode(i,t);a&&n.push(a)}),t?new Ou(e.height,e.width,e.x,n):new Ou(e.width,e.height,e.y,n)}};function CL(r,e,t){t?r.y+=e:r.x+=e,r.children.forEach(n=>{CL(n,e,t)})}function SL(r,e){let t=e?r.y:r.x;return r.children.forEach(n=>{t=Math.min(SL(n,e),t)}),t}function a$(r,e){CL(r,-SL(r,e),e)}function FL(r,e,t){t?e.y=r.x:e.x=r.x,r.c.forEach((n,i)=>{FL(n,e.children[i],t)})}function TL(r,e,t=0){e?(r.x=t,t+=r.width):(r.y=t,t+=r.height),r.children.forEach(n=>{TL(n,e,t)})}function s$(r,e={}){const t=e.isHorizontal;function n(u){u.cs===0?(u.el=u,u.er=u,u.msel=u.mser=0):(u.el=u.c[0].el,u.msel=u.c[0].msel,u.er=u.c[u.cs-1].er,u.mser=u.c[u.cs-1].mser)}function i(u,h,d){let f=u.c[h-1],g=f.mod,v=u.c[h],p=v.mod;for(;f!==null&&v!==null;){d&&A(f)>d.low&&(d=d.nxt);const y=g+f.prelim+f.w-(p+v.prelim);y>0&&(p+=y,d&&a(u,h,d.index,y));const m=A(f),w=A(v);m<=w&&(f=o(f),f!==null&&(g+=f.mod)),m>=w&&(v=s(v),v!==null&&(p+=v.mod))}!f&&v?function(y,m,w,B){const b=y.c[0].el;b.tl=w;const E=B-w.mod-y.c[0].msel;b.mod+=E,b.prelim-=E,y.c[0].el=y.c[m].el,y.c[0].msel=y.c[m].msel}(u,h,v,p):f&&!v&&function(y,m,w,B){const b=y.c[m].er;b.tr=w;const E=B-w.mod-y.c[m].mser;b.mod+=E,b.prelim-=E,y.c[m].er=y.c[m-1].er,y.c[m].mser=y.c[m-1].mser}(u,h,f,g)}function a(u,h,d,f){u.c[h].mod+=f,u.c[h].msel+=f,u.c[h].mser+=f,function(g,v,p,y){if(p!==v-1){const m=v-p;g.c[p+1].shift+=y/m,g.c[v].shift-=y/m,g.c[v].change-=y-y/m}}(u,h,d,f)}function s(u){return u.cs===0?u.tl:u.c[0]}function o(u){return u.cs===0?u.tr:u.c[u.cs-1]}function A(u){return u.y+u.h}function l(u,h,d){for(;d!==null&&u>=d.low;)d=d.nxt;return{low:u,index:h,nxt:d}}TL(r,t);const c=i$.fromNode(r,t);return c&&(function u(h){if(h.cs===0)return void n(h);u(h.c[0]);let d=l(A(h.c[0].el),0,null);for(let f=1;f<h.cs;++f){u(h.c[f]);const g=A(h.c[f].er);i(h,f,d),d=l(g,f,d)}(function(f){f.prelim=(f.c[0].prelim+f.c[0].mod+f.c[f.cs-1].mod+f.c[f.cs-1].prelim+f.c[f.cs-1].w)/2-f.w/2})(h),n(h)}(c),function u(h,d){d+=h.mod,h.x=h.prelim+d,function(f){let g=0,v=0;for(let p=0;p<f.cs;p++)g+=f.c[p].shift,v+=g+f.c[p].change,f.c[p].mod+=v}(h);for(let f=0;f<h.cs;f++)u(h.c[f],d)}(c,0),FL(c,r,t),a$(r,t)),r}function ML(r,e){const t=X1(r.data,e,!0),n=X1(r.data,e,!0),i=r.children.length,a=Math.round(i/2),s=e.getSide||function(o,A){return A<a?"right":"left"};for(let o=0;o<i;o++){const A=r.children[o];s(A,o)==="right"?n.children.push(A):t.children.push(A)}return t.eachNode(o=>{o.isRoot()||(o.side="left")}),n.eachNode(o=>{o.isRoot()||(o.side="right")}),{left:t,right:n}}const sa=["LR","RL","TB","BT","H","V"],o$=["LR","RL","H"],A$=sa[0];function pB(r,e,t){const n=e.direction||A$;if(e.isHorizontal=(a=>o$.indexOf(a)>-1)(n),sa.indexOf(n)===-1)throw new TypeError(`Invalid direction: ${n}`);if(n===sa[0])t(r,e);else if(n===sa[1])t(r,e),r.right2left();else if(n===sa[2])t(r,e);else if(n===sa[3])t(r,e),r.bottom2top();else if(n===sa[4]||n===sa[5]){const{left:a,right:s}=ML(r,e);t(a,e),t(s,e),e.isHorizontal?a.right2left():a.bottom2top(),s.translate(a.x-s.x,a.y-s.y),r.x=a.x,r.y=s.y;const o=r.getBoundingBox();e.isHorizontal?o.top<0&&r.translate(0,-o.top):o.left<0&&r.translate(-o.left,0)}let i=e.fixedRoot;return i===void 0&&(i=!0),i&&r.translate(-(r.x+r.width/2+r.hgap),-(r.y+r.height/2+r.vgap)),function(a,s){if(s.radial){const[o,A]=s.isHorizontal?["x","y"]:["y","x"],l={x:1/0,y:1/0},c={x:-1/0,y:-1/0};let u=0;a.DFTraverse(f=>{u++;const{x:g,y:v}=f;l.x=Math.min(l.x,g),l.y=Math.min(l.y,v),c.x=Math.max(c.x,g),c.y=Math.max(c.y,v)});const h=c[A]-l[A];if(h===0)return;const d=2*Math.PI/u;a.DFTraverse(f=>{const g=f[A],v=l[A],p=f[o],y=a[o],m=(g-v)/h*(2*Math.PI-d)+d,w=p-y;f.x=Math.cos(m)*w,f.y=Math.sin(m)*w})}}(r,e),r}let l$=class extends Sd{execute(){return pB(this.rootNode,this.options,s$)}};const c$={};function u$(r,e){const t=Us({},c$,e);return new l$(r,t).execute()}let h$=class{constructor(e=0,t=[]){this.x=0,this.y=0,this.leftChild=null,this.rightChild=null,this.isLeaf=!1,this.height=e,this.children=t}};const d$={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function OL(r,e,t){t?(e.x=r.x,e.y=r.y):(e.x=r.y,e.y=r.x),r.children.forEach((n,i)=>{OL(n,e.children[i],t)})}function f$(r,e={}){const t=Us({},d$,e);let n=0,i=null;const a=function s(o){o.width=0,o.depth&&o.depth>n&&(n=o.depth);const A=o.children,l=A.length,c=new h$(0,[]);return A.forEach((u,h)=>{const d=s(u);c.children.push(d),h===0&&(c.leftChild=d),h===l-1&&(c.rightChild=d)}),c.originNode=o,c.isLeaf=o.isLeaf(),c}(r);return function s(o){if(o.isLeaf||o.children.length===0)o.drawingDepth=n;else{const A=o.children.map(c=>s(c)),l=Math.min(...A);o.drawingDepth=l-1}return o.drawingDepth}(a),function s(o){o.x=o.drawingDepth*t.rankSep,o.isLeaf?(o.y=0,i&&(o.y=i.y+i.height+t.nodeSep,o.originNode.parent!==i.originNode.parent&&(o.y+=t.subTreeSep)),i=o):(o.children.forEach(A=>{s(A)}),o.y=(o.leftChild.y+o.rightChild.y)/2)}(a),OL(a,r,t.isHorizontal),r}class g$ extends Sd{execute(){return this.rootNode.width=0,pB(this.rootNode,this.options,f$)}}const v$={};function p$(r,e){const t=Us({},v$,e);return new g$(r,t).execute()}function ru(r,e,t,n){let i=null;r.eachNode(a=>{(function(s,o,A,l,c){const u=(typeof A=="function"?A(s):A)*s.depth;if(!l)try{if(s.parent&&s.id===s.parent.children[0].id)return s.x+=u,void(s.y=o?o.y:0)}catch{}if(s.x+=u,o){if(s.y=o.y+jx(o,s,c),o.parent&&s.parent&&s.parent.id!==o.parent.id){const h=o.parent,d=h.y+jx(h,s,c);s.y=d>s.y?d:s.y}}else s.y=0})(a,i,e,t,n),i=a})}const SA=["LR","RL","H"],y$=SA[0];class m$ extends Sd{execute(){const e=this.options,t=this.rootNode;e.isHorizontal=!0;const{indent:n=20,dropCap:i=!0,direction:a=y$,align:s}=e;if(a&&SA.indexOf(a)===-1)throw new TypeError(`Invalid direction: ${a}`);if(a===SA[0])ru(t,n,i,s);else if(a===SA[1])ru(t,n,i,s),t.right2left();else if(a===SA[2]){const{left:o,right:A}=ML(t,e);ru(o,n,i,s),o.right2left(),ru(A,n,i,s);const l=o.getBoundingBox();A.translate(l.width,0),t.x=A.x-t.width/2}return t}}const w$={};function B$(r,e){const t=Us({},w$,e);return new m$(r,t).execute()}function IL(r,e){let t=0;return r.children.length?r.children.forEach(n=>{t+=IL(n,e)}):t=r.height,r._subTreeSep=e.getSubTreeSep(r.data),r.totalHeight=Math.max(r.height,t)+2*r._subTreeSep,r.totalHeight}function _L(r){const e=r.children,t=e.length;if(t){e.forEach(o=>{_L(o)});const n=e[0],i=e[t-1],a=i.y-n.y+i.height;let s=0;if(e.forEach(o=>{s+=o.totalHeight}),a>r.height)r.y=n.y+a/2-r.height/2;else if(e.length!==1||r.height>s){const o=r.y+(r.height-a)/2-n.y;e.forEach(A=>{A.translate(0,o)})}else r.y=(n.y+n.height/2+i.y+i.height/2)/2-r.height/2}}const b$={getSubTreeSep:()=>0};function E$(r,e={}){return e=Us({},b$,e),r.parent={x:0,width:0,height:0,y:0},r.BFTraverse(t=>{t.x=t.parent.x+t.parent.width}),r.parent=void 0,IL(r,e),r.startY=0,r.y=r.totalHeight/2-r.height/2,r.eachNode(t=>{const n=t.children,i=n.length;if(i){const a=n[0];if(a.startY=t.startY+t._subTreeSep,i===1)a.y=t.y+t.height/2-a.height/2;else{a.y=a.startY+a.totalHeight/2-a.height/2;for(let s=1;s<i;s++){const o=n[s];o.startY=n[s-1].startY+n[s-1].totalHeight,o.y=o.startY+o.totalHeight/2-o.height/2}}}}),_L(r),r}class x$ extends Sd{execute(){return pB(this.rootNode,this.options,E$)}}const C$={};function S$(r,e){const t=Us({},C$,e);return new x$(r,t).execute()}const F$=(r,e)=>{if(r!=="next"&&r!=="prev")return e},$x=r=>{r.prev.next=r.next,r.next.prev=r.prev,delete r.next,delete r.prev};let T$=class{constructor(){const e={};e.prev=e,e.next=e.prev,this.shortcut=e}dequeue(){const e=this.shortcut,t=e.prev;if(t&&t!==e)return $x(t),t}enqueue(e){const t=this.shortcut;e.prev&&e.next&&$x(e),e.next=t.next,t.next.prev=e,t.next=e,e.prev=t}toString(){const e=[],t=this.shortcut;let n=t.prev;for(;n!==t;)e.push(JSON.stringify(n,F$)),n=n==null?void 0:n.prev;return`[${e.join(", ")}]`}},M$=class extends T${};const O$=()=>1,I$=(r,e)=>{var t;if(r.getAllNodes().length<=1)return[];const n=k$(r,e||O$);return(t=_$(n.graph,n.buckets,n.zeroIdx).map(a=>r.getRelatedEdges(a.v,"out").filter(({target:s})=>s===a.w)))===null||t===void 0?void 0:t.flat()},_$=(r,e,t)=>{let n=[];const i=e[e.length-1],a=e[0];let s;for(;r.getAllNodes().length;){for(;s=a.dequeue();)_g(r,e,t,s);for(;s=i.dequeue();)_g(r,e,t,s);if(r.getAllNodes().length){for(let o=e.length-2;o>0;--o)if(s=e[o].dequeue(),s){n=n.concat(_g(r,e,t,s,!0));break}}}return n},_g=(r,e,t,n,i)=>{var a,s;const o=[];return r.hasNode(n.v)&&((a=r.getRelatedEdges(n.v,"in"))===null||a===void 0||a.forEach(A=>{const l=A.data.weight,c=r.getNode(A.source);i&&o.push({v:A.source,w:A.target,in:0,out:0}),c.data.out===void 0&&(c.data.out=0),c.data.out-=l,Z1(e,t,Object.assign({v:c.id},c.data))}),(s=r.getRelatedEdges(n.v,"out"))===null||s===void 0||s.forEach(A=>{const l=A.data.weight,c=A.target,u=r.getNode(c);u.data.in===void 0&&(u.data.in=0),u.data.in-=l,Z1(e,t,Object.assign({v:u.id},u.data))}),r.removeNode(n.v)),i?o:void 0},k$=(r,e)=>{const t=new Wt;let n=0,i=0;r.getAllNodes().forEach(A=>{t.addNode({id:A.id,data:{v:A.id,in:0,out:0}})}),r.getAllEdges().forEach(A=>{const l=t.getRelatedEdges(A.source,"out").find(u=>u.target===A.target),c=(e==null?void 0:e(A))||1;l?t.updateEdgeData(l==null?void 0:l.id,Object.assign(Object.assign({},l.data),{weight:l.data.weight+c})):t.addEdge({id:A.id,source:A.source,target:A.target,data:{weight:c}}),i=Math.max(i,t.getNode(A.source).data.out+=c),n=Math.max(n,t.getNode(A.target).data.in+=c)});const a=[],s=i+n+3;for(let A=0;A<s;A++)a.push(new M$);const o=n+1;return t.getAllNodes().forEach(A=>{Z1(a,o,Object.assign({v:A.id},t.getNode(A.id).data))}),{buckets:a,zeroIdx:o,graph:t}},Z1=(r,e,t)=>{t.out?t.in?r[t.out-t.in+e].enqueue(t):r[r.length-1].enqueue(t):r[0].enqueue(t)},L$=(r,e)=>{const n=I$(r,(i=>a=>a.data.weight||1)());n==null||n.forEach(i=>{const a=i.data;r.removeEdge(i.id),a.forwardName=i.data.name,a.reversed=!0,r.addEdge({id:i.id,source:i.target,target:i.source,data:Object.assign({},a)})})},Q$=r=>{r.getAllEdges().forEach(e=>{const t=e.data;if(t.reversed){r.removeEdge(e.id);const n=t.forwardName;delete t.reversed,delete t.forwardName,r.addEdge({id:e.id,source:e.target,target:e.source,data:Object.assign(Object.assign({},t),{forwardName:n})})}})},N$=(r,e)=>Number(r)-Number(e),Go=(r,e,t,n)=>{let i;do i=`${n}${Math.random()}`;while(r.hasNode(i));return t.dummy=e,r.addNode({id:i,data:t}),i},U$=r=>{const e=new Wt;return r.getAllNodes().forEach(t=>{e.addNode(Object.assign({},t))}),r.getAllEdges().forEach(t=>{const n=e.getRelatedEdges(t.source,"out").find(i=>i.target===t.target);n?e.updateEdgeData(n==null?void 0:n.id,Object.assign(Object.assign({},n.data),{weight:n.data.weight+t.data.weight||0,minlen:Math.max(n.data.minlen,t.data.minlen||1)})):e.addEdge({id:t.id,source:t.source,target:t.target,data:{weight:t.data.weight||0,minlen:t.data.minlen||1}})}),e},kL=r=>{const e=new Wt;return r.getAllNodes().forEach(t=>{r.getChildren(t.id).length||e.addNode(Object.assign({},t))}),r.getAllEdges().forEach(t=>{e.addEdge(t)}),e},P$=(r,e)=>r==null?void 0:r.reduce((t,n,i)=>(t[n]=e[i],t),{}),Wx=(r,e)=>{const t=Number(r.x),n=Number(r.y),i=Number(e.x)-t,a=Number(e.y)-n;let s=Number(r.width)/2,o=Number(r.height)/2;if(!i&&!a)return{x:0,y:0};let A,l;return Math.abs(a)*s>Math.abs(i)*o?(a<0&&(o=-o),A=o*i/a,l=o):(i<0&&(s=-s),A=s,l=s*a/i),{x:t+A,y:n+l}},dl=r=>{const e=[],t=LL(r)+1;for(let n=0;n<t;n++)e.push([]);r.getAllNodes().forEach(n=>{const i=n.data.rank;i!==void 0&&e[i]&&e[i].push(n.id)});for(let n=0;n<t;n++)e[n]=e[n].sort((i,a)=>N$(r.getNode(i).data.order,r.getNode(a).data.order));return e},R$=r=>{const e=r.getAllNodes().filter(n=>n.data.rank!==void 0).map(n=>n.data.rank),t=Math.min(...e);r.getAllNodes().forEach(n=>{n.data.hasOwnProperty("rank")&&t!==1/0&&(n.data.rank-=t)})},D$=(r,e=0)=>{const t=r.getAllNodes(),n=t.filter(o=>o.data.rank!==void 0).map(o=>o.data.rank),i=Math.min(...n),a=[];t.forEach(o=>{const A=(o.data.rank||0)-i;a[A]||(a[A]=[]),a[A].push(o.id)});let s=0;for(let o=0;o<a.length;o++){const A=a[o];A===void 0?o%e!==0&&(s-=1):s&&(A==null||A.forEach(l=>{const c=r.getNode(l);c&&(c.data.rank=c.data.rank||0,c.data.rank+=s)}))}},qx=(r,e,t,n)=>{const i={width:0,height:0};return Z(t)&&Z(n)&&(i.rank=t,i.order=n),Go(r,"border",i,e)},LL=r=>{let e;return r.getAllNodes().forEach(t=>{const n=t.data.rank;n!==void 0&&(e===void 0||n>e)&&(e=n)}),e||(e=0),e},H$=(r,e)=>{const t={lhs:[],rhs:[]};return r==null||r.forEach(n=>{e(n)?t.lhs.push(n):t.rhs.push(n)}),t},yB=(r,e)=>r.reduce((t,n)=>{const i=e(t),a=e(n);return i>a?n:t}),QL=(r,e,t,n,i,a)=>{n.includes(e.id)||(n.push(e.id),t||a.push(e.id),i(e.id).forEach(s=>QL(r,s,t,n,i,a)),t&&a.push(e.id))},NL=(r,e,t,n)=>{const i=Array.isArray(e)?e:[e],a=A=>r.getNeighbors(A),s=[],o=[];return i.forEach(A=>{if(r.hasNode(A.id))QL(r,A,t==="post",o,a,s);else throw new Error(`Graph does not have node: ${A}`)}),s},G$=r=>{const e=t=>{const n=r.getChildren(t),i=r.getNode(t);if(n!=null&&n.length&&n.forEach(a=>e(a.id)),i.data.hasOwnProperty("minRank")){i.data.borderLeft=[],i.data.borderRight=[];for(let a=i.data.minRank,s=i.data.maxRank+1;a<s;a+=1)Yx(r,"borderLeft","_bl",t,i,a),Yx(r,"borderRight","_br",t,i,a)}};r.getRoots().forEach(t=>e(t.id))},Yx=(r,e,t,n,i,a)=>{const s={rank:a,borderType:e,width:0,height:0},o=i.data[e][a-1],A=Go(r,"border",s,t);i.data[e][a]=A,r.setParent(A,n),o&&r.addEdge({id:`e${Math.random()}`,source:o,target:A,data:{weight:1}})},K$=(r,e)=>{const t=e.toLowerCase();(t==="lr"||t==="rl")&&UL(r)},z$=(r,e)=>{const t=e.toLowerCase();(t==="bt"||t==="rl")&&V$(r),(t==="lr"||t==="rl")&&(j$(r),UL(r))},UL=r=>{r.getAllNodes().forEach(e=>{Xx(e)}),r.getAllEdges().forEach(e=>{Xx(e)})},Xx=r=>{const e=r.data.width;r.data.width=r.data.height,r.data.height=e},V$=r=>{r.getAllNodes().forEach(e=>{kg(e.data)}),r.getAllEdges().forEach(e=>{var t;(t=e.data.points)===null||t===void 0||t.forEach(n=>kg(n)),e.data.hasOwnProperty("y")&&kg(e.data)})},kg=r=>{r!=null&&r.y&&(r.y=-r.y)},j$=r=>{r.getAllNodes().forEach(e=>{Lg(e.data)}),r.getAllEdges().forEach(e=>{var t;(t=e.data.points)===null||t===void 0||t.forEach(n=>Lg(n)),e.data.hasOwnProperty("x")&&Lg(e.data)})},Lg=r=>{const e=r.x;r.x=r.y,r.y=e},$$=r=>{const e=Go(r,"root",{},"_root"),t=W$(r);let n=Math.max(...Object.values(t));Math.abs(n)===1/0&&(n=1);const i=n-1,a=2*i+1;r.getAllEdges().forEach(o=>{o.data.minlen*=a});const s=q$(r)+1;return r.getRoots().forEach(o=>{PL(r,e,a,s,i,t,o.id)}),{nestingRoot:e,nodeRankFactor:a}},PL=(r,e,t,n,i,a,s)=>{const o=r.getChildren(s);if(!(o!=null&&o.length)){s!==e&&r.addEdge({id:`e${Math.random()}`,source:e,target:s,data:{weight:0,minlen:t}});return}const A=qx(r,"_bt"),l=qx(r,"_bb"),c=r.getNode(s);r.setParent(A,s),c.data.borderTop=A,r.setParent(l,s),c.data.borderBottom=l,o==null||o.forEach(u=>{PL(r,e,t,n,i,a,u.id);const h=u.data.borderTop?u.data.borderTop:u.id,d=u.data.borderBottom?u.data.borderBottom:u.id,f=u.data.borderTop?n:2*n,g=h!==d?1:i-a[s]+1;r.addEdge({id:`e${Math.random()}`,source:A,target:h,data:{minlen:g,weight:f,nestingEdge:!0}}),r.addEdge({id:`e${Math.random()}`,source:d,target:l,data:{minlen:g,weight:f,nestingEdge:!0}})}),r.getParent(s)||r.addEdge({id:`e${Math.random()}`,source:e,target:A,data:{weight:0,minlen:i+a[s]}})},W$=r=>{const e={},t=(n,i)=>{const a=r.getChildren(n);a==null||a.forEach(s=>t(s.id,i+1)),e[n]=i};return r.getRoots().forEach(n=>t(n.id,1)),e},q$=r=>{let e=0;return r.getAllEdges().forEach(t=>{e+=t.data.weight}),e},Y$=(r,e)=>{e&&r.removeNode(e),r.getAllEdges().forEach(t=>{t.data.nestingEdge&&r.removeEdge(t.id)})},X$="edge",RL="edge-label",Z$=(r,e)=>{r.getAllEdges().forEach(t=>J$(r,t,e))},J$=(r,e,t)=>{let n=e.source,i=r.getNode(n).data.rank;const a=e.target,s=r.getNode(a).data.rank,o=e.data.labelRank;if(s===i+1)return;r.removeEdge(e.id);let A,l,c;for(c=0,++i;i<s;++c,++i)e.data.points=[],l={originalEdge:e,width:0,height:0,rank:i},A=Go(r,X$,l,"_d"),i===o&&(l.width=e.data.width,l.height=e.data.height,l.dummy=RL,l.labelpos=e.data.labelpos),r.addEdge({id:`e${Math.random()}`,source:n,target:A,data:{weight:e.data.weight}}),c===0&&t.push(A),n=A;r.addEdge({id:`e${Math.random()}`,source:n,target:a,data:{weight:e.data.weight}})},eW=(r,e)=>{e.forEach(t=>{let n=r.getNode(t);const{data:i}=n,a=i.originalEdge;let s;a&&r.addEdge(a);let o=t;for(;n.data.dummy;)s=r.getSuccessors(o)[0],r.removeNode(o),a.data.points.push({x:n.data.x,y:n.data.y}),n.data.dummy===RL&&(a.data.x=n.data.x,a.data.y=n.data.y,a.data.width=n.data.width,a.data.height=n.data.height),o=s.id,n=r.getNode(o)})},tW=(r,e,t)=>{const n={};let i;t==null||t.forEach(a=>{let s=r.getParent(a),o,A;for(;s;){if(o=r.getParent(s.id),o?(A=n[o.id],n[o.id]=s.id):(A=i,i=s.id),A&&A!==s.id){e.hasNode(A)||e.addNode({id:A,data:{}}),e.hasNode(s.id)||e.addNode({id:s.id,data:{}}),e.hasEdge(`e${A}-${s.id}`)||e.addEdge({id:`e${A}-${s.id}`,source:A,target:s.id,data:{}});return}s=o}})},nW=(r,e,t)=>{const n=rW(r),i=new Wt({tree:[{id:n,children:[],data:{}}]});return r.getAllNodes().forEach(a=>{const s=r.getParent(a.id);(a.data.rank===e||a.data.minRank<=e&&e<=a.data.maxRank)&&(i.hasNode(a.id)||i.addNode(Object.assign({},a)),s!=null&&s.id&&!i.hasNode(s==null?void 0:s.id)&&i.addNode(Object.assign({},s)),i.setParent(a.id,(s==null?void 0:s.id)||n),r.getRelatedEdges(a.id,t).forEach(o=>{const A=o.source===a.id?o.target:o.source;i.hasNode(A)||i.addNode(Object.assign({},r.getNode(A)));const l=i.getRelatedEdges(A,"out").find(({target:u})=>u===a.id),c=l!==void 0?l.data.weight:0;l?i.updateEdgeData(l.id,Object.assign(Object.assign({},l.data),{weight:o.data.weight+c})):i.addEdge({id:o.id,source:A,target:a.id,data:{weight:o.data.weight+c}})}),a.data.hasOwnProperty("minRank")&&i.updateNodeData(a.id,Object.assign(Object.assign({},a.data),{borderLeft:a.data.borderLeft[e],borderRight:a.data.borderRight[e]})))}),i},rW=r=>{let e;for(;r.hasNode(e=`_root${Math.random()}`););return e},iW=(r,e,t)=>{const n=P$(t,t.map((c,u)=>u)),a=e.map(c=>{const u=r.getRelatedEdges(c,"out").map(h=>({pos:n[h.target]||0,weight:h.data.weight}));return u==null?void 0:u.sort((h,d)=>h.pos-d.pos)}).flat().filter(c=>c!==void 0);let s=1;for(;s<t.length;)s<<=1;const o=2*s-1;s-=1;const A=Array(o).fill(0,0,o);let l=0;return a==null||a.forEach(c=>{if(c){let u=c.pos+s;A[u]+=c.weight;let h=0;for(;u>0;)u%2&&(h+=A[u+1]),u=u-1>>1,A[u]+=c.weight;l+=c.weight*h}}),l},Zx=(r,e)=>{let t=0;for(let n=1;n<(e==null?void 0:e.length);n+=1)t+=iW(r,e[n-1],e[n]);return t},Jx=r=>{const e={},t=r.getAllNodes(),n=t.map(l=>{var c;return(c=l.data.rank)!==null&&c!==void 0?c:-1/0}),i=Math.max(...n),a=[];for(let l=0;l<i+1;l++)a.push([]);const s=t.sort((l,c)=>r.getNode(l.id).data.rank-r.getNode(c.id).data.rank),A=s.filter(l=>r.getNode(l.id).data.fixorder!==void 0).sort((l,c)=>r.getNode(l.id).data.fixorder-r.getNode(c.id).data.fixorder);return A==null||A.forEach(l=>{isNaN(r.getNode(l.id).data.rank)||a[r.getNode(l.id).data.rank].push(l.id),e[l.id]=!0}),s==null||s.forEach(l=>r.dfsTree(l.id,c=>{if(e.hasOwnProperty(c.id))return!0;e[c.id]=!0,isNaN(c.data.rank)||a[c.data.rank].push(c.id)})),a},aW=(r,e)=>e.map(t=>{const n=r.getRelatedEdges(t,"in");if(!(n!=null&&n.length))return{v:t};const i={sum:0,weight:0};return n==null||n.forEach(a=>{const s=r.getNode(a.source);i.sum+=a.data.weight*s.data.order,i.weight+=a.data.weight}),{v:t,barycenter:i.sum/i.weight,weight:i.weight}}),sW=(r,e)=>{var t,n,i;const a={};r==null||r.forEach((o,A)=>{a[o.v]={i:A,indegree:0,in:[],out:[],vs:[o.v]};const l=a[o.v];o.barycenter!==void 0&&(l.barycenter=o.barycenter,l.weight=o.weight)}),(t=e.getAllEdges())===null||t===void 0||t.forEach(o=>{const A=a[o.source],l=a[o.target];A!==void 0&&l!==void 0&&(l.indegree++,A.out.push(a[o.target]))});const s=(i=(n=Object.values(a)).filter)===null||i===void 0?void 0:i.call(n,o=>!o.indegree);return oW(s)},oW=r=>{var e,t;const n=[],i=A=>l=>{l.merged||(l.barycenter===void 0||A.barycenter===void 0||l.barycenter>=A.barycenter)&&AW(A,l)},a=A=>l=>{l.in.push(A),--l.indegree===0&&r.push(l)};for(;r!=null&&r.length;){const A=r.pop();n.push(A),(e=A.in.reverse())===null||e===void 0||e.forEach(l=>i(A)(l)),(t=A.out)===null||t===void 0||t.forEach(l=>a(A)(l))}const s=n.filter(A=>!A.merged),o=["vs","i","barycenter","weight"];return s.map(A=>{const l={};return o==null||o.forEach(c=>{A[c]!==void 0&&(l[c]=A[c])}),l})},AW=(r,e)=>{var t;let n=0,i=0;r.weight&&(n+=r.barycenter*r.weight,i+=r.weight),e.weight&&(n+=e.barycenter*e.weight,i+=e.weight),r.vs=(t=e.vs)===null||t===void 0?void 0:t.concat(r.vs),r.barycenter=n/i,r.weight=i,r.i=Math.min(e.i,r.i),e.merged=!0},lW=(r,e,t,n)=>{const i=H$(r,h=>{const d=h.hasOwnProperty("fixorder")&&!isNaN(h.fixorder);return n?!d&&h.hasOwnProperty("barycenter"):d||h.hasOwnProperty("barycenter")}),a=i.lhs,s=i.rhs.sort((h,d)=>-h.i- -d.i),o=[];let A=0,l=0,c=0;a==null||a.sort(cW(!!e,!!t)),c=eC(o,s,c),a==null||a.forEach(h=>{var d;c+=(d=h.vs)===null||d===void 0?void 0:d.length,o.push(h.vs),A+=h.barycenter*h.weight,l+=h.weight,c=eC(o,s,c)});const u={vs:o.flat()};return l&&(u.barycenter=A/l,u.weight=l),u},eC=(r,e,t)=>{let n=t,i;for(;e.length&&(i=e[e.length-1]).i<=n;)e.pop(),r==null||r.push(i.vs),n++;return n},cW=(r,e)=>(t,n)=>{if(t.fixorder!==void 0&&n.fixorder!==void 0)return t.fixorder-n.fixorder;if(t.barycenter<n.barycenter)return-1;if(t.barycenter>n.barycenter)return 1;if(e&&t.order!==void 0&&n.order!==void 0){if(t.order<n.order)return-1;if(t.order>n.order)return 1}return r?n.i-t.i:t.i-n.i},DL=(r,e,t,n,i,a)=>{var s,o,A,l;let c=r.getChildren(e).map(y=>y.id);const u=r.getNode(e),h=u?u.data.borderLeft:void 0,d=u?u.data.borderRight:void 0,f={};h&&(c=c==null?void 0:c.filter(y=>y!==h&&y!==d));const g=aW(r,c||[]);g==null||g.forEach(y=>{var m;if(!((m=r.getChildren(y.v))===null||m===void 0)&&m.length){const w=DL(r,y.v,t,n,a);f[y.v]=w,w.hasOwnProperty("barycenter")&&hW(y,w)}});const v=sW(g,t);uW(v,f),(s=v.filter(y=>y.vs.length>0))===null||s===void 0||s.forEach(y=>{const m=r.getNode(y.vs[0]);m&&(y.fixorder=m.data.fixorder,y.order=m.data.order)});const p=lW(v,n,i,a);if(h&&(p.vs=[h,p.vs,d].flat(),!((o=r.getPredecessors(h))===null||o===void 0)&&o.length)){const y=r.getNode(((A=r.getPredecessors(h))===null||A===void 0?void 0:A[0].id)||""),m=r.getNode(((l=r.getPredecessors(d))===null||l===void 0?void 0:l[0].id)||"");p.hasOwnProperty("barycenter")||(p.barycenter=0,p.weight=0),p.barycenter=(p.barycenter*p.weight+y.data.order+m.data.order)/(p.weight+2),p.weight+=2}return p},uW=(r,e)=>{r==null||r.forEach(t=>{var n;const i=(n=t.vs)===null||n===void 0?void 0:n.map(a=>e[a]?e[a].vs:a);t.vs=i.flat()})},hW=(r,e)=>{r.barycenter!==void 0?(r.barycenter=(r.barycenter*r.weight+e.barycenter*e.weight)/(r.weight+e.weight),r.weight+=e.weight):(r.barycenter=e.barycenter,r.weight=e.weight)},dW=(r,e)=>{const t=LL(r),n=[],i=[];for(let c=1;c<t+1;c++)n.push(c);for(let c=t-1;c>-1;c--)i.push(c);const a=tC(r,n,"in"),s=tC(r,i,"out");let o=Jx(r);Qg(r,o);let A=Number.POSITIVE_INFINITY,l;for(let c=0,u=0;u<4;++c,++u){nC(c%2?a:s,c%4>=2,!1,e),o=dl(r);const h=Zx(r,o);h<A&&(u=0,l=_a(o),A=h)}o=Jx(r),Qg(r,o);for(let c=0,u=0;u<4;++c,++u){nC(c%2?a:s,c%4>=2,!0,e),o=dl(r);const h=Zx(r,o);h<A&&(u=0,l=_a(o),A=h)}Qg(r,l)},tC=(r,e,t)=>e.map(n=>nW(r,n,t)),nC=(r,e,t,n)=>{const i=new Wt;r==null||r.forEach(a=>{var s;const o=a.getRoots()[0].id,A=DL(a,o,i,e,t,n);for(let l=0;l<((s=A.vs)===null||s===void 0?void 0:s.length);l++){const c=a.getNode(A.vs[l]);c&&(c.data.order=l)}tW(a,i,A.vs)})},Qg=(r,e)=>{e==null||e.forEach(t=>{t==null||t.forEach((n,i)=>{r.getNode(n).data.order=i})})},fW=(r,e)=>{const n=r.getAllNodes().filter(s=>{var o;return!(!((o=r.getChildren(s.id))===null||o===void 0)&&o.length)}).map(s=>s.data.rank),i=Math.max(...n),a=[];for(let s=0;s<i+1;s++)a[s]=[];e==null||e.forEach(s=>{const o=r.getNode(s);!o||o.data.dummy||isNaN(o.data.rank)||(o.data.fixorder=a[o.data.rank].length,a[o.data.rank].push(s))})},gW=r=>{const e={};let t=0;const n=i=>{const a=t;r.getChildren(i).forEach(s=>n(s.id)),e[i]={low:a,lim:t++}};return r.getRoots().forEach(i=>n(i.id)),e},vW=(r,e,t,n)=>{var i,a;const s=[],o=[],A=Math.min(e[t].low,e[n].low),l=Math.max(e[t].lim,e[n].lim);let c,u;c=t;do c=(i=r.getParent(c))===null||i===void 0?void 0:i.id,s.push(c);while(c&&(e[c].low>A||l>e[c].lim));for(u=c,c=n;c&&c!==u;)o.push(c),c=(a=r.getParent(c))===null||a===void 0?void 0:a.id;return{lca:u,path:s.concat(o.reverse())}},pW=(r,e)=>{const t=gW(r);e.forEach(n=>{var i,a;let s=n,o=r.getNode(s);const A=o.data.originalEdge;if(!A)return;const l=vW(r,t,A.source,A.target),c=l.path,u=l.lca;let h=0,d=c[h],f=!0;for(;s!==A.target;){if(o=r.getNode(s),f){for(;d!==u&&((i=r.getNode(d))===null||i===void 0?void 0:i.data.maxRank)<o.data.rank;)h++,d=c[h];d===u&&(f=!1)}if(!f){for(;h<c.length-1&&((a=r.getNode(c[h+1]))===null||a===void 0?void 0:a.data.minRank)<=o.data.rank;)h++;d=c[h]}r.hasNode(d)&&r.setParent(s,d),s=r.getSuccessors(s)[0].id}})},yW=(r,e)=>{const t={},n=(i,a)=>{let s=0,o=0;const A=i.length,l=a==null?void 0:a[(a==null?void 0:a.length)-1];return a==null||a.forEach((c,u)=>{var h;const d=wW(r,c),f=d?r.getNode(d.id).data.order:A;(d||c===l)&&((h=a.slice(o,u+1))===null||h===void 0||h.forEach(g=>{var v;(v=r.getPredecessors(g))===null||v===void 0||v.forEach(p=>{var y;const m=r.getNode(p.id),w=m.data.order;(w<s||f<w)&&!(m.data.dummy&&(!((y=r.getNode(g))===null||y===void 0)&&y.data.dummy))&&HL(t,p.id,g)})}),o=u+1,s=f)}),a};return e!=null&&e.length&&e.reduce(n),t},mW=(r,e)=>{const t={};function n(o,A,l,c,u){var h,d;let f;for(let g=A;g<l;g++)f=o[g],!((h=r.getNode(f))===null||h===void 0)&&h.data.dummy&&((d=r.getPredecessors(f))===null||d===void 0||d.forEach(v=>{const p=r.getNode(v.id);p.data.dummy&&(p.data.order<c||p.data.order>u)&&HL(t,v.id,f)}))}function i(o){return JSON.stringify(o.slice(1))}function a(o,A){const l=i(o);A.get(l)||(n(...o),A.set(l,!0))}const s=(o,A)=>{let l=-1,c,u=0;const h=new Map;return A==null||A.forEach((d,f)=>{var g;if(((g=r.getNode(d))===null||g===void 0?void 0:g.data.dummy)==="border"){const v=r.getPredecessors(d)||[];v.length&&(c=r.getNode(v[0].id).data.order,a([A,u,f,l,c],h),u=f,l=c)}a([A,u,A.length,c,o.length],h)}),A};return e!=null&&e.length&&e.reduce(s),t},wW=(r,e)=>{var t,n;if(!((t=r.getNode(e))===null||t===void 0)&&t.data.dummy)return(n=r.getPredecessors(e))===null||n===void 0?void 0:n.find(i=>r.getNode(i.id).data.dummy)},HL=(r,e,t)=>{let n=e,i=t;if(n>i){const s=n;n=i,i=s}let a=r[n];a||(r[n]=a={}),a[i]=!0},BW=(r,e,t)=>{let n=e,i=t;if(n>i){const a=e;n=i,i=a}return!!r[n]},bW=(r,e,t,n)=>{const i={},a={},s={};return e==null||e.forEach(o=>{o==null||o.forEach((A,l)=>{i[A]=A,a[A]=A,s[A]=l})}),e==null||e.forEach(o=>{let A=-1;o==null||o.forEach(l=>{let c=n(l).map(u=>u.id);if(c.length){c=c.sort((h,d)=>s[h]-s[d]);const u=(c.length-1)/2;for(let h=Math.floor(u),d=Math.ceil(u);h<=d;++h){const f=c[h];a[l]===l&&A<s[f]&&!BW(t,l,f)&&(a[f]=l,a[l]=i[l]=i[f],A=s[f])}}})}),{root:i,align:a}},EW=(r,e,t,n,i,a,s)=>{var o;const A={},l=xW(r,e,t,i,a,s),c=s?"borderLeft":"borderRight",u=(f,g)=>{let v=l.getAllNodes(),p=v.pop();const y={};for(;p;)y[p.id]?f(p.id):(y[p.id]=!0,v.push(p),v=v.concat(g(p.id))),p=v.pop()},h=f=>{A[f]=(l.getRelatedEdges(f,"in")||[]).reduce((g,v)=>Math.max(g,(A[v.source]||0)+v.data.weight),0)},d=f=>{const g=(l.getRelatedEdges(f,"out")||[]).reduce((p,y)=>Math.min(p,(A[y.target]||0)-y.data.weight),Number.POSITIVE_INFINITY),v=r.getNode(f);g!==Number.POSITIVE_INFINITY&&v.data.borderType!==c&&(A[f]=Math.max(A[f],g))};return u(h,l.getPredecessors.bind(l)),u(d,l.getSuccessors.bind(l)),(o=Object.values(n))===null||o===void 0||o.forEach(f=>{A[f]=A[t[f]]}),A},xW=(r,e,t,n,i,a)=>{const s=new Wt,o=TW(n,i,a);return e==null||e.forEach(A=>{let l;A==null||A.forEach(c=>{const u=t[c];if(s.hasNode(u)||s.addNode({id:u,data:{}}),l){const h=t[l],d=s.getRelatedEdges(h,"out").find(f=>f.target===u);d?s.updateEdgeData(d.id,Object.assign(Object.assign({},d.data),{weight:Math.max(o(r,c,l),d.data.weight||0)})):s.addEdge({id:`e${Math.random()}`,source:h,target:u,data:{weight:Math.max(o(r,c,l),0)}})}l=c})}),s},CW=(r,e)=>yB(Object.values(e),t=>{var n;let i=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;return(n=Object.keys(t))===null||n===void 0||n.forEach(s=>{const o=t[s],A=MW(r,s)/2;i=Math.max(o+A,i),a=Math.min(o-A,a)}),i-a});function SW(r,e){const t=Object.values(e),n=Math.min(...t),i=Math.max(...t);["u","d"].forEach(a=>{["l","r"].forEach(s=>{const o=a+s,A=r[o];let l;if(A===e)return;const c=Object.values(A);l=s==="l"?n-Math.min(...c):i-Math.max(...c),l&&(r[o]={},Object.keys(A).forEach(u=>{r[o][u]=A[u]+l}))})})}const FW=(r,e)=>{const t={};return Object.keys(r.ul).forEach(n=>{if(e)t[n]=r[e.toLowerCase()][n];else{const i=Object.values(r).map(a=>a[n]);t[n]=(i[0]+i[1])/2}}),t},TW=(r,e,t)=>(n,i,a)=>{const s=n.getNode(i),o=n.getNode(a);let A=0,l=0;if(A+=s.data.width/2,s.data.hasOwnProperty("labelpos"))switch((s.data.labelpos||"").toLowerCase()){case"l":l=-s.data.width/2;break;case"r":l=s.data.width/2;break}if(l&&(A+=t?l:-l),l=0,A+=(s.data.dummy?e:r)/2,A+=(o.data.dummy?e:r)/2,A+=o.data.width/2,o.data.labelpos)switch((o.data.labelpos||"").toLowerCase()){case"l":l=o.data.width/2;break;case"r":l=-o.data.width/2;break}return l&&(A+=t?l:-l),l=0,A},MW=(r,e)=>r.getNode(e).data.width||0,OW=(r,e)=>{const{ranksep:t=0}=e||{},n=dl(r);let i=0;n==null||n.forEach(a=>{const s=a.map(A=>r.getNode(A).data.height),o=Math.max(...s,0);a==null||a.forEach(A=>{r.getNode(A).data.y=i+o/2}),i+=o+t})},IW=(r,e)=>{const{align:t,nodesep:n=0,edgesep:i=0}=e||{},a=dl(r),s=Object.assign(yW(r,a),mW(r,a)),o={};let A=[];["u","d"].forEach(c=>{A=c==="u"?a:Object.values(a).reverse(),["l","r"].forEach(u=>{u==="r"&&(A=A.map(g=>Object.values(g).reverse()));const h=(c==="u"?r.getPredecessors:r.getSuccessors).bind(r),d=bW(r,A,s,h),f=EW(r,A,d.root,d.align,n,i,u==="r");u==="r"&&Object.keys(f).forEach(g=>f[g]=-f[g]),o[c+u]=f})});const l=CW(r,o);return l&&SW(o,l),FW(o,t)},_W=(r,e)=>{var t;const n=kL(r);OW(n,e);const i=IW(n,e);(t=Object.keys(i))===null||t===void 0||t.forEach(a=>{n.getNode(a).data.x=i[a]})},GL=r=>{const e={},t=n=>{var i;const a=r.getNode(n);if(!a)return 0;if(e[n])return a.data.rank;e[n]=!0;let s;return(i=r.getRelatedEdges(n,"out"))===null||i===void 0||i.forEach(o=>{const A=t(o.target),l=o.data.minlen,c=A-l;c&&(s===void 0||c<s)&&(s=c)}),s||(s=0),a.data.rank=s,s};r.getAllNodes().filter(n=>r.getRelatedEdges(n.id,"in").length===0).forEach(n=>t(n.id))},kW=r=>{const e={};let t;const n=s=>{var o;const A=r.getNode(s);if(!A)return 0;if(e[s])return A.data.rank;e[s]=!0;let l;return(o=r.getRelatedEdges(s,"out"))===null||o===void 0||o.forEach(c=>{const u=n(c.target),h=c.data.minlen,d=u-h;d&&(l===void 0||d<l)&&(l=d)}),l||(l=0),(t===void 0||l<t)&&(t=l),A.data.rank=l,l};r.getAllNodes().filter(s=>r.getRelatedEdges(s.id,"in").length===0).forEach(s=>{s&&n(s.id)}),t===void 0&&(t=0);const i={},a=(s,o)=>{var A;const l=r.getNode(s),c=isNaN(l.data.layer)?o:l.data.layer;(l.data.rank===void 0||l.data.rank<c)&&(l.data.rank=c),!i[s]&&(i[s]=!0,(A=r.getRelatedEdges(s,"out"))===null||A===void 0||A.forEach(u=>{a(u.target,c+u.data.minlen)}))};r.getAllNodes().forEach(s=>{const o=s.data;o&&(isNaN(o.layer)?o.rank-=t:a(s.id,o.layer))})},Na=(r,e)=>r.getNode(e.target).data.rank-r.getNode(e.source).data.rank-e.data.minlen,LW=r=>{const e=new Wt({tree:[]}),t=r.getAllNodes()[0],n=r.getAllNodes().length;e.addNode(t);let i,a;for(;QW(e,r)<n;)i=KL(e,r),a=e.hasNode(i.source)?Na(r,i):-Na(r,i),zL(e,r,a);return e},QW=(r,e)=>{const t=n=>{e.getRelatedEdges(n,"both").forEach(i=>{const a=i.source,s=n===a?i.target:a;!r.hasNode(s)&&!Na(e,i)&&(r.addNode({id:s,data:{}}),r.addEdge({id:i.id,source:n,target:s,data:{}}),t(s))})};return r.getAllNodes().forEach(n=>t(n.id)),r.getAllNodes().length},NW=r=>{const e=new Wt({tree:[]}),t=r.getAllNodes()[0],n=r.getAllNodes().length;e.addNode(t);let i,a;for(;UW(e,r)<n;)i=KL(e,r),a=e.hasNode(i.source)?Na(r,i):-Na(r,i),zL(e,r,a);return e},UW=(r,e)=>{const t=n=>{var i;(i=e.getRelatedEdges(n,"both"))===null||i===void 0||i.forEach(a=>{const s=a.source,o=n===s?a.target:s;!r.hasNode(o)&&(e.getNode(o).data.layer!==void 0||!Na(e,a))&&(r.addNode({id:o,data:{}}),r.addEdge({id:a.id,source:n,target:o,data:{}}),t(o))})};return r.getAllNodes().forEach(n=>t(n.id)),r.getAllNodes().length},KL=(r,e)=>yB(e.getAllEdges(),t=>r.hasNode(t.source)!==r.hasNode(t.target)?Na(e,t):1/0),zL=(r,e,t)=>{r.getAllNodes().forEach(n=>{const i=e.getNode(n.id);i.data.rank||(i.data.rank=0),i.data.rank+=t})},PW=r=>{const e=U$(r);GL(e);const t=LW(e);jL(t),VL(t,e);let n,i;for(;n=HW(t);)i=GW(t,e,n),KW(t,e,n,i)},VL=(r,e)=>{let t=NL(r,r.getAllNodes(),"post");t=t.slice(0,(t==null?void 0:t.length)-1),t.forEach(n=>{RW(r,e,n)})},RW=(r,e,t)=>{const i=r.getNode(t).data.parent,a=r.getRelatedEdges(t,"both").find(s=>s.target===i||s.source===i);a.data.cutvalue=DW(r,e,t)},DW=(r,e,t)=>{const i=r.getNode(t).data.parent;let a=!0,s=e.getRelatedEdges(t,"out").find(A=>A.target===i),o=0;return s||(a=!1,s=e.getRelatedEdges(i,"out").find(A=>A.target===t)),o=s.data.weight,e.getRelatedEdges(t,"both").forEach(A=>{const l=A.source===t,c=l?A.target:A.source;if(c!==i){const u=l===a,h=A.data.weight;if(o+=u?h:-h,VW(r,t,c)){const d=r.getRelatedEdges(t,"both").find(f=>f.source===c||f.target===c).data.cutvalue;o+=u?-d:d}}}),o},jL=(r,e=r.getAllNodes()[0].id)=>{$L(r,{},1,e)},$L=(r,e,t,n,i)=>{var a;const s=t;let o=t;const A=r.getNode(n);return e[n]=!0,(a=r.getNeighbors(n))===null||a===void 0||a.forEach(l=>{e[l.id]||(o=$L(r,e,o,l.id,n))}),A.data.low=s,A.data.lim=o++,i?A.data.parent=i:delete A.data.parent,o},HW=r=>r.getAllEdges().find(e=>e.data.cutvalue<0),GW=(r,e,t)=>{let n=t.source,i=t.target;e.getRelatedEdges(n,"out").find(c=>c.target===i)||(n=t.target,i=t.source);const a=r.getNode(n),s=r.getNode(i);let o=a,A=!1;a.data.lim>s.data.lim&&(o=s,A=!0);const l=e.getAllEdges().filter(c=>A===rC(r.getNode(c.source),o)&&A!==rC(r.getNode(c.target),o));return yB(l,c=>Na(e,c))},KW=(r,e,t,n)=>{const i=r.getRelatedEdges(t.source,"both").find(a=>a.source===t.target||a.target===t.target);i&&r.removeEdge(i.id),r.addEdge({id:`e${Math.random()}`,source:n.source,target:n.target,data:{}}),jL(r),VL(r,e),zW(r,e)},zW=(r,e)=>{const t=r.getAllNodes().find(i=>!i.data.parent);let n=NL(r,t,"pre");n=n.slice(1),n.forEach(i=>{const a=r.getNode(i).data.parent;let s=e.getRelatedEdges(i,"out").find(A=>A.target===a),o=!1;!s&&e.hasNode(a)&&(s=e.getRelatedEdges(a,"out").find(A=>A.target===i),o=!0),e.getNode(i).data.rank=(e.hasNode(a)&&e.getNode(a).data.rank||0)+(o?s==null?void 0:s.data.minlen:-(s==null?void 0:s.data.minlen))})},VW=(r,e,t)=>r.getRelatedEdges(e,"both").find(n=>n.source===t||n.target===t),rC=(r,e)=>e.data.low<=r.data.lim&&r.data.lim<=e.data.lim,jW=(r,e)=>{switch(e){case"network-simplex":WW(r);break;case"tight-tree":iC(r);break;case"longest-path":$W(r);break;default:iC(r)}},$W=GL,iC=r=>{kW(r),NW(r)},WW=r=>{PW(r)},qW=(r,e)=>{const{edgeLabelSpace:t,keepNodeOrder:n,prevGraph:i,rankdir:a,ranksep:s}=e;!n&&i&&XW(r,i);const o=rq(r);t&&(e.ranksep=iq(o,{rankdir:a,ranksep:s}));let A;try{A=YW(o,e)}catch(l){if(l.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,l);return}throw l}return ZW(r,o),A},YW=(r,e)=>{const{ranker:t,rankdir:n="tb",nodeOrder:i,keepNodeOrder:a,align:s,nodesep:o=50,edgesep:A=20,ranksep:l=50}=e;dq(r),L$(r);const{nestingRoot:c,nodeRankFactor:u}=$$(r);jW(kL(r),t),aq(r),D$(r,u),Y$(r,c),R$(r),sq(r),oq(r);const h=[];Z$(r,h),pW(r,h),G$(r),a&&fW(r,i),dW(r,a),fq(r),K$(r,n),_W(r,{align:s,nodesep:o,edgesep:A,ranksep:l}),gq(r),hq(r),eW(r,h),cq(r),z$(r,n);const{width:d,height:f}=Aq(r);return lq(r),uq(r),Q$(r),{width:d,height:f}},XW=(r,e)=>{r.getAllNodes().forEach(t=>{const n=r.getNode(t.id);if(e.hasNode(t.id)){const i=e.getNode(t.id);n.data.fixorder=i.data._order,delete i.data._order}else delete n.data.fixorder})},ZW=(r,e)=>{r.getAllNodes().forEach(t=>{var n;const i=r.getNode(t.id);if(i){const a=e.getNode(t.id);i.data.x=a.data.x,i.data.y=a.data.y,i.data._order=a.data.order,i.data._rank=a.data.rank,!((n=e.getChildren(t.id))===null||n===void 0)&&n.length&&(i.data.width=a.data.width,i.data.height=a.data.height)}}),r.getAllEdges().forEach(t=>{const n=r.getEdge(t.id),i=e.getEdge(t.id);n.data.points=i?i.data.points:[],i&&i.data.hasOwnProperty("x")&&(n.data.x=i.data.x,n.data.y=i.data.y)})},JW=["width","height","layer","fixorder"],eq={width:0,height:0},tq=["minlen","weight","width","height","labeloffset"],nq={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Ng=["labelpos"],rq=r=>{const e=new Wt({tree:[]});return r.getAllNodes().forEach(t=>{const n=sC(r.getNode(t.id).data),i=Object.assign(Object.assign({},eq),n),a=aC(i,JW);e.hasNode(t.id)||e.addNode({id:t.id,data:Object.assign({},a)});const s=r.hasTreeStructure("combo")?r.getParent(t.id,"combo"):r.getParent(t.id);le(s)||(e.hasNode(s.id)||e.addNode(Object.assign({},s)),e.setParent(t.id,s.id))}),r.getAllEdges().forEach(t=>{const n=sC(r.getEdge(t.id).data),i={};Ng==null||Ng.forEach(a=>{n[a]!==void 0&&(i[a]=n[a])}),e.addEdge({id:t.id,source:t.source,target:t.target,data:Object.assign({},nq,aC(n,tq),i)})}),e},iq=(r,e)=>{const{ranksep:t=0,rankdir:n}=e;return r.getAllNodes().forEach(i=>{isNaN(i.data.layer)||i.data.layer||(i.data.layer=0)}),r.getAllEdges().forEach(i=>{var a;i.data.minlen*=2,((a=i.data.labelpos)===null||a===void 0?void 0:a.toLowerCase())!=="c"&&(n==="TB"||n==="BT"?i.data.width+=i.data.labeloffset:i.data.height+=i.data.labeloffset)}),t/2},aq=r=>{r.getAllEdges().forEach(e=>{if(e.data.width&&e.data.height){const t=r.getNode(e.source),n=r.getNode(e.target),i={e,rank:(n.data.rank-t.data.rank)/2+t.data.rank};Go(r,"edge-proxy",i,"_ep")}})},sq=r=>{let e=0;return r.getAllNodes().forEach(t=>{var n,i;t.data.borderTop&&(t.data.minRank=(n=r.getNode(t.data.borderTop))===null||n===void 0?void 0:n.data.rank,t.data.maxRank=(i=r.getNode(t.data.borderBottom))===null||i===void 0?void 0:i.data.rank,e=Math.max(e,t.data.maxRank||-1/0))}),e},oq=r=>{r.getAllNodes().forEach(e=>{e.data.dummy==="edge-proxy"&&(r.getEdge(e.data.e.id).data.labelRank=e.data.rank,r.removeNode(e.id))})},Aq=(r,e)=>{let t,n=0,i,a=0;const{marginx:s=0,marginy:o=0}={},A=l=>{if(!l.data)return;const c=l.data.x,u=l.data.y,h=l.data.width,d=l.data.height;!isNaN(c)&&!isNaN(h)&&(t===void 0&&(t=c-h/2),t=Math.min(t,c-h/2),n=Math.max(n,c+h/2)),!isNaN(u)&&!isNaN(d)&&(i===void 0&&(i=u-d/2),i=Math.min(i,u-d/2),a=Math.max(a,u+d/2))};return r.getAllNodes().forEach(l=>{A(l)}),r.getAllEdges().forEach(l=>{l!=null&&l.data.hasOwnProperty("x")&&A(l)}),t-=s,i-=o,r.getAllNodes().forEach(l=>{l.data.x-=t,l.data.y-=i}),r.getAllEdges().forEach(l=>{var c;(c=l.data.points)===null||c===void 0||c.forEach(u=>{u.x-=t,u.y-=i}),l.data.hasOwnProperty("x")&&(l.data.x-=t),l.data.hasOwnProperty("y")&&(l.data.y-=i)}),{width:n-t+s,height:a-i+o}},lq=r=>{r.getAllEdges().forEach(e=>{const t=r.getNode(e.source),n=r.getNode(e.target);let i,a;e.data.points?(i=e.data.points[0],a=e.data.points[e.data.points.length-1]):(e.data.points=[],i={x:n.data.x,y:n.data.y},a={x:t.data.x,y:t.data.y}),e.data.points.unshift(Wx(t.data,i)),e.data.points.push(Wx(n.data,a))})},cq=r=>{r.getAllEdges().forEach(e=>{if(e.data.hasOwnProperty("x"))switch((e.data.labelpos==="l"||e.data.labelpos==="r")&&(e.data.width-=e.data.labeloffset),e.data.labelpos){case"l":e.data.x-=e.data.width/2+e.data.labeloffset;break;case"r":e.data.x+=e.data.width/2+e.data.labeloffset;break}})},uq=r=>{r.getAllEdges().forEach(e=>{var t;e.data.reversed&&((t=e.data.points)===null||t===void 0||t.reverse())})},hq=r=>{r.getAllNodes().forEach(e=>{var t,n,i;if(!((t=r.getChildren(e.id))===null||t===void 0)&&t.length){const a=r.getNode(e.id),s=r.getNode(a.data.borderTop),o=r.getNode(a.data.borderBottom),A=r.getNode(a.data.borderLeft[((n=a.data.borderLeft)===null||n===void 0?void 0:n.length)-1]),l=r.getNode(a.data.borderRight[((i=a.data.borderRight)===null||i===void 0?void 0:i.length)-1]);a.data.width=Math.abs((l==null?void 0:l.data.x)-(A==null?void 0:A.data.x))||10,a.data.height=Math.abs((o==null?void 0:o.data.y)-(s==null?void 0:s.data.y))||10,a.data.x=((A==null?void 0:A.data.x)||0)+a.data.width/2,a.data.y=((s==null?void 0:s.data.y)||0)+a.data.height/2}}),r.getAllNodes().forEach(e=>{e.data.dummy==="border"&&r.removeNode(e.id)})},dq=r=>{r.getAllEdges().forEach(e=>{if(e.source===e.target){const t=r.getNode(e.source);t.data.selfEdges||(t.data.selfEdges=[]),t.data.selfEdges.push(e),r.removeEdge(e.id)}})},fq=r=>{const e=dl(r);e==null||e.forEach(t=>{let n=0;t==null||t.forEach((i,a)=>{var s;const o=r.getNode(i);o.data.order=a+n,(s=o.data.selfEdges)===null||s===void 0||s.forEach(A=>{Go(r,"selfedge",{width:A.data.width,height:A.data.height,rank:o.data.rank,order:a+ ++n,e:A},"_se")}),delete o.data.selfEdges})})},gq=r=>{r.getAllNodes().forEach(e=>{const t=r.getNode(e.id);if(t.data.dummy==="selfedge"){const n=r.getNode(t.data.e.source),i=n.data.x+n.data.width/2,a=n.data.y,s=t.data.x-i,o=n.data.height/2;r.hasEdge(t.data.e.id)?r.updateEdgeData(t.data.e.id,t.data.e.data):r.addEdge({id:t.data.e.id,source:t.data.e.source,target:t.data.e.target,data:t.data.e.data}),r.removeNode(e.id),t.data.e.data.points=[{x:i+2*s/3,y:a-o},{x:i+5*s/6,y:a-o},{y:a,x:i+s},{x:i+5*s/6,y:a+o},{x:i+2*s/3,y:a+o}],t.data.e.data.x=t.data.x,t.data.e.data.y=t.data.y}})},aC=(r,e)=>{const t={};return e==null||e.forEach(n=>{r[n]!==void 0&&(t[n]=+r[n])}),t},sC=(r={})=>{const e={};return Object.keys(r).forEach(t=>{e[t.toLowerCase()]=r[t]}),e},Ui=Array.isArray,WL=r=>{const e=[],t=r.length;for(let n=0;n<t;n+=1){e[n]=[];for(let i=0;i<t;i+=1)n===i?e[n][i]=0:r[n][i]===0||!r[n][i]?e[n][i]=1/0:e[n][i]=r[n][i]}for(let n=0;n<t;n+=1)for(let i=0;i<t;i+=1)for(let a=0;a<t;a+=1)e[i][a]>e[i][n]+e[n][a]&&(e[i][a]=e[i][n]+e[n][a]);return e},qL=(r,e)=>{const{nodes:t,edges:n}=r,i=[],a={};if(!t)throw new Error("invalid nodes data!");return t&&t.forEach((s,o)=>{a[s.id]=o;const A=[];i.push(A)}),n==null||n.forEach(s=>{const{source:o,target:A}=s,l=a[o],c=a[A];l===void 0||c===void 0||(i[l][c]=1,i[c][l]=1)}),i},vq=(r,e)=>{const t=[];return r.forEach(n=>{const i=[];n.forEach(a=>{i.push(a*e)}),t.push(i)}),t},pq=r=>{let e=1/0,t=1/0,n=-1/0,i=-1/0;return r.forEach(a=>{let s=a.data.size;Ui(s)?s.length===1&&(s=[s[0],s[0]]):Z(s)?s=[s,s]:(s===void 0||isNaN(s))&&(s=[30,30]);const o=[s[0]/2,s[1]/2],A=a.data.x-o[0],l=a.data.x+o[0],c=a.data.y-o[1],u=a.data.y+o[1];e>A&&(e=A),t>c&&(t=c),n<l&&(n=l),i<u&&(i=u)}),{minX:e,minY:t,maxX:n,maxY:i}},oC=(r,e)=>Math.sqrt((r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y)),J1=(r,e,t,n="TB",i,a={})=>{if(!(e!=null&&e.length))return;const{stopBranchFn:s,stopAllFn:o}=a;for(let A=0;A<e.length;A++){const l=e[A];if(r.hasNode(l.id)&&!(s!=null&&s(l))){if(o!=null&&o(l))return;n==="TB"&&t(l),J1(r,r.getChildren(l.id,i),t,n,i,a),n!=="TB"&&t(l)}}},ew=r=>{if(r===null)return r;if(r instanceof Date)return new Date(r.getTime());if(r instanceof Array){const e=[];return r.forEach(t=>{e.push(t)}),e.map(t=>ew(t))}if(typeof r=="object"){const e={};return Object.keys(r).forEach(t=>{e[t]=ew(r[t])}),e}return r},ar=(r,e)=>{const t=ew(r);return t.data=t.data||{},e&&(Z(t.data.x)||(t.data.x=Math.random()*e[0]),Z(t.data.y)||(t.data.y=Math.random()*e[1])),t};function Ul(r){if(!r)return[0,0,0];if(Z(r))return[r,r,r];if(r.length===0)return[0,0,0];const[e,t=e,n=e]=r;return[e,t,n]}function ys(r,e){let t;return ie(e)?t=e:Z(e)?t=()=>e:t=()=>r,t}function mB(r,e,t=!0){return!e&&e!==0?n=>{const{size:i}=n.data||{};return i?Array.isArray(i)?t?Math.max(...i)||r:i:Ot(i)&&i.width&&i.height?t?Math.max(i.width,i.height)||r:[i.width,i.height]:i:r}:ie(e)?e:Z(e)?()=>e:Array.isArray(e)?()=>t?Math.max(...e)||r:e:Ot(e)&&e.width&&e.height?()=>t?Math.max(e.width,e.height)||r:[e.width,e.height]:()=>r}const wB=(r,e,t=10)=>{let n;const i=typeof e=="function"?e:()=>e||0;return r?Array.isArray(r)?n=s=>r:ie(r)?n=r:n=s=>r:n=s=>{var o,A,l;if(!((o=s.data)===null||o===void 0)&&o.bboxSize)return(A=s.data)===null||A===void 0?void 0:A.bboxSize;if(!((l=s.data)===null||l===void 0)&&l.size){const c=s.data.size;return Array.isArray(c)?c:Ot(c)?[c.width,c.height]:c}return t},s=>{const o=n(s),A=i(s);return Math.max(...Ul(o))+A}},yq={rankdir:"TB",nodesep:50,ranksep:50,edgeLabelSpace:!0,ranker:"tight-tree",controlPoints:!1,radial:!1,focusNode:null};class mq{constructor(e={}){this.options=e,this.id="antv-dagre",this.options=Object.assign(Object.assign({},yq),e)}execute(e,t){return Ce(this,void 0,void 0,function*(){return this.genericDagreLayout(!1,e,t)})}assign(e,t){return Ce(this,void 0,void 0,function*(){yield this.genericDagreLayout(!0,e,t)})}genericDagreLayout(e,t,n){return Ce(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),n),{nodeSize:a,align:s,rankdir:o="TB",ranksep:A,nodesep:l,ranksepFunc:c,nodesepFunc:u,edgeLabelSpace:h,ranker:d,nodeOrder:f,begin:g,controlPoints:v,radial:p,sortByCombo:y,preset:m}=i,w=new Wt({tree:[]}),B=ys(A||50,c),b=ys(l||50,u);let E=b,x=B;(o==="LR"||o==="RL")&&(E=B,x=b);const S=mB(10,a,!1),C=t.getAllNodes(),F=t.getAllEdges();C.forEach(k=>{const U=Ul(S(k)),D=x(k),j=E(k),X=U[0]+2*j,W=U[1]+2*D,Y=k.data.layer;Z(Y)?w.addNode({id:k.id,data:{width:X,height:W,layer:Y}}):w.addNode({id:k.id,data:{width:X,height:W}})}),y&&(w.attachTreeStructure("combo"),C.forEach(k=>{const{parentId:U}=k.data;U!==void 0&&w.hasNode(U)&&w.setParent(k.id,U,"combo")})),F.forEach(k=>{w.addEdge({id:k.id,source:k.source,target:k.target,data:{weight:k.data.weight||1}})});let M;m!=null&&m.length&&(M=new Wt({nodes:m})),qW(w,{prevGraph:M,edgeLabelSpace:h,keepNodeOrder:!!f,nodeOrder:f||[],acyclicer:"greedy",ranker:d,rankdir:o,nodesep:l,align:s});const T=[0,0];if(g){let k=1/0,U=1/0;w.getAllNodes().forEach(D=>{k>D.data.x&&(k=D.data.x),U>D.data.y&&(U=D.data.y)}),w.getAllEdges().forEach(D=>{var j;(j=D.data.points)===null||j===void 0||j.forEach(X=>{k>X.x&&(k=X.x),U>X.y&&(U=X.y)})}),T[0]=g[0]-k,T[1]=g[1]-U}const O=o==="LR"||o==="RL";if(!p){const k=new Set,D=o==="BT"||o==="RL"?(Y,se)=>se-Y:(Y,se)=>Y-se;w.getAllNodes().forEach(Y=>{Y.data.x=Y.data.x+T[0],Y.data.y=Y.data.y+T[1],k.add(O?Y.data.x:Y.data.y)});const j=Array.from(k).sort(D),X=O?(Y,se)=>Y.x!==se.x:(Y,se)=>Y.y!==se.y,W=O?(Y,se,te)=>{const ne=Math.max(se.y,te.y),Le=Math.min(se.y,te.y);return Y.filter(ke=>ke.y<=ne&&ke.y>=Le)}:(Y,se,te)=>{const ne=Math.max(se.x,te.x),Le=Math.min(se.x,te.x);return Y.filter(ke=>ke.x<=ne&&ke.x>=Le)};w.getAllEdges().forEach((Y,se)=>{var te;h&&v&&Y.data.type!=="loop"&&(Y.data.controlPoints=wq((te=Y.data.points)===null||te===void 0?void 0:te.map(({x:ne,y:Le})=>({x:ne+T[0],y:Le+T[1]})),w.getNode(Y.source),w.getNode(Y.target),j,O,X,W))})}let _=[];_=w.getAllNodes().map(k=>ar(k));const Q=w.getAllEdges();return e&&(_.forEach(k=>{t.mergeNodeData(k.id,{x:k.data.x,y:k.data.y})}),Q.forEach(k=>{t.mergeEdgeData(k.id,{controlPoints:k.data.controlPoints})})),{nodes:_,edges:Q}})}}const wq=(r,e,t,n,i,a,s)=>{let o=(r==null?void 0:r.slice(1,r.length-1))||[];if(e&&t){let{x:A,y:l}=e.data,{x:c,y:u}=t.data;if(i&&(A=e.data.y,l=e.data.x,c=t.data.y,u=t.data.x),u!==l&&A!==c){const h=n.indexOf(l),d=n[h+1];if(d){const v=o[0],p=i?{x:(l+d)/2,y:(v==null?void 0:v.y)||c}:{x:(v==null?void 0:v.x)||c,y:(l+d)/2};(!v||a(v,p))&&o.unshift(p)}const f=n.indexOf(u),g=Math.abs(f-h);if(g===1)o=s(o,e.data,t.data),o.length||o.push(i?{x:(l+u)/2,y:A}:{x:A,y:(l+u)/2});else if(g>1){const v=n[f-1];if(v){const p=o[o.length-1],y=i?{x:(u+v)/2,y:(p==null?void 0:p.y)||c}:{x:(p==null?void 0:p.x)||A,y:(u+v)/2};(!p||a(p,y))&&o.push(y)}}}}return o},Ps=(r,e,t)=>{const n=r.getAllNodes(),i=r.getAllEdges();if(!(n!=null&&n.length))return{nodes:[],edges:i};if(n.length===1)return e&&r.mergeNodeData(n[0].id,{x:t[0],y:t[1]}),{nodes:[Object.assign(Object.assign({},n[0]),{data:Object.assign(Object.assign({},n[0].data),{x:t[0],y:t[1]})})],edges:i}},Bq={radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1};class bq{constructor(e={}){this.options=e,this.id="circular",this.options=Object.assign(Object.assign({},Bq),e)}execute(e,t){return Ce(this,void 0,void 0,function*(){return this.genericCircularLayout(!1,e,t)})}assign(e,t){return Ce(this,void 0,void 0,function*(){yield this.genericCircularLayout(!0,e,t)})}genericCircularLayout(e,t,n){return Ce(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),n),{width:a,height:s,center:o,divisions:A,startAngle:l=0,endAngle:c=2*Math.PI,angleRatio:u,ordering:h,clockwise:d,nodeSpacing:f,nodeSize:g}=i,v=t.getAllNodes(),p=t.getAllEdges(),[y,m,w]=xq(a,s,o),B=v==null?void 0:v.length;if(!B||B===1)return Ps(t,e,w);const b=(c-l)/B;let{radius:E,startRadius:x,endRadius:S}=i;if(f){const O=ys(10,f),_=mB(10,g);let Q=-1/0;v.forEach(k=>{const U=_(k);Q<U&&(Q=U)});let L=0;v.forEach((k,U)=>{U===0?L+=Q||10:L+=(O(k)||0)+(Q||10)}),E=L/(2*Math.PI)}else!E&&!x&&!S?E=Math.min(m,y)/2:!x&&S?x=S:x&&!S&&(S=x);const C=b*u;let F=[];h==="topology"?F=AC(t,v):h==="topology-directed"?F=AC(t,v,!0):h==="degree"?F=Eq(t,v):F=v.map(O=>ar(O));const M=Math.ceil(B/A);for(let O=0;O<B;++O){let _=E;!_&&x!==null&&S!==null&&(_=x+O*(S-x)/(B-1)),_||(_=10+O*100/(B-1));let Q=l+O%M*C+2*Math.PI/A*Math.floor(O/M);d||(Q=c-O%M*C-2*Math.PI/A*Math.floor(O/M)),F[O].data.x=w[0]+Math.cos(Q)*_,F[O].data.y=w[1]+Math.sin(Q)*_}return e&&F.forEach(O=>{t.mergeNodeData(O.id,{x:O.data.x,y:O.data.y})}),{nodes:F,edges:p}})}}const AC=(r,e,t=!1)=>{const n=[ar(e[0])],i={},a=e.length;i[e[0].id]=!0;let s=0;return e.forEach((o,A)=>{if(A!==0)if((A===a-1||r.getDegree(o.id,"both")!==r.getDegree(e[A+1].id,"both")||r.areNeighbors(n[s].id,o.id))&&!i[o.id])n.push(ar(o)),i[o.id]=!0,s++;else{const l=t?r.getSuccessors(n[s].id):r.getNeighbors(n[s].id);let c=!1;for(let h=0;h<l.length;h++){const d=l[h];if(r.getDegree(d.id)===r.getDegree(o.id)&&!i[d.id]){n.push(ar(d)),i[d.id]=!0,c=!0;break}}let u=0;for(;!c&&(i[e[u].id]||(n.push(ar(e[u])),i[e[u].id]=!0,c=!0),u++,u!==a););}}),n};function Eq(r,e){const t=[];return e.forEach((n,i)=>{t.push(ar(n))}),t.sort((n,i)=>r.getDegree(n.id,"both")-r.getDegree(i.id,"both")),t}const xq=(r,e,t)=>{let n=r,i=e,a=t;return!n&&typeof window<"u"&&(n=window.innerWidth),!i&&typeof window<"u"&&(i=window.innerHeight),a||(a=[n/2,i/2]),[n,i,a]},Cq={nodeSize:30,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"};class tw{constructor(e={}){this.options=e,this.id="concentric",this.options=Object.assign(Object.assign({},Cq),e)}execute(e,t){return Ce(this,void 0,void 0,function*(){return this.genericConcentricLayout(!1,e,t)})}assign(e,t){return Ce(this,void 0,void 0,function*(){yield this.genericConcentricLayout(!0,e,t)})}genericConcentricLayout(e,t,n){return Ce(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),n),{center:a,width:s,height:o,sortBy:A,maxLevelDiff:l,sweep:c,clockwise:u,equidistant:h,preventOverlap:d,startAngle:f=3/2*Math.PI,nodeSize:g,nodeSpacing:v}=i,p=t.getAllNodes(),y=t.getAllEdges(),m=!s&&typeof window<"u"?window.innerWidth:s,w=!o&&typeof window<"u"?window.innerHeight:o,B=a||[m/2,w/2];if(!(p!=null&&p.length)||p.length===1)return Ps(t,e,B);const b=[];let E,x=0;Ui(g)?E=Math.max(g[0],g[1]):ie(g)?(E=-1/0,p.forEach(k=>{const U=Math.max(...Ul(g(k)));U>E&&(E=U)})):E=g,Ui(v)?x=Math.max(v[0],v[1]):Z(v)&&(x=v),p.forEach(k=>{const U=ar(k);b.push(U);let D=E;const{data:j}=U;Ui(j.size)?D=Math.max(j.size[0],j.size[1]):Z(j.size)?D=j.size:Ot(j.size)&&(D=Math.max(j.size.width,j.size.height)),E=Math.max(E,D),ie(v)&&(x=Math.max(v(k),x))});const S={};b.forEach((k,U)=>{S[k.id]=U});let C=A;(!_e(C)||b[0].data[C]===void 0)&&(C="degree"),C==="degree"?b.sort((k,U)=>t.getDegree(U.id,"both")-t.getDegree(k.id,"both")):b.sort((k,U)=>U.data[C]-k.data[C]);const F=b[0],M=(l||(C==="degree"?t.getDegree(F.id,"both"):F.data[C]))/4,T=[{nodes:[]}];let O=T[0];b.forEach(k=>{if(O.nodes.length>0){const U=Math.abs(C==="degree"?t.getDegree(O.nodes[0].id,"both")-t.getDegree(k.id,"both"):O.nodes[0].data[C]-k.data[C]);M&&U>=M&&(O={nodes:[]},T.push(O))}O.nodes.push(k)});let _=E+x;if(!d){const k=T.length>0&&T[0].nodes.length>1,D=(Math.min(m,w)/2-_)/(T.length+(k?1:0));_=Math.min(_,D)}let Q=0;if(T.forEach(k=>{const U=c===void 0?2*Math.PI-2*Math.PI/k.nodes.length:c;if(k.dTheta=U/Math.max(1,k.nodes.length-1),k.nodes.length>1&&d){const D=Math.cos(k.dTheta)-Math.cos(0),j=Math.sin(k.dTheta)-Math.sin(0),X=Math.sqrt(_*_/(D*D+j*j));Q=Math.max(X,Q)}k.r=Q,Q+=_}),h){let k=0,U=0;for(let D=0;D<T.length;D++){const X=(T[D].r||0)-U;k=Math.max(k,X)}U=0,T.forEach((D,j)=>{j===0&&(U=D.r||0),D.r=U,U+=k})}return T.forEach(k=>{const U=k.dTheta||0,D=k.r||0;k.nodes.forEach((j,X)=>{const W=f+(u?1:-1)*U*X;j.data.x=B[0]+D*Math.cos(W),j.data.y=B[1]+D*Math.sin(W)})}),e&&b.forEach(k=>t.mergeNodeData(k.id,{x:k.data.x,y:k.data.y})),{nodes:b,edges:y}})}}function Sq(r){const e=+this._x.call(null,r),t=+this._y.call(null,r);return YL(this.cover(e,t),e,t,r)}function YL(r,e,t,n){if(isNaN(e)||isNaN(t))return r;var i,a=r._root,s={data:n},o=r._x0,A=r._y0,l=r._x1,c=r._y1,u,h,d,f,g,v,p,y;if(!a)return r._root=s,r;for(;a.length;)if((g=e>=(u=(o+l)/2))?o=u:l=u,(v=t>=(h=(A+c)/2))?A=h:c=h,i=a,!(a=a[p=v<<1|g]))return i[p]=s,r;if(d=+r._x.call(null,a.data),f=+r._y.call(null,a.data),e===d&&t===f)return s.next=a,i?i[p]=s:r._root=s,r;do i=i?i[p]=new Array(4):r._root=new Array(4),(g=e>=(u=(o+l)/2))?o=u:l=u,(v=t>=(h=(A+c)/2))?A=h:c=h;while((p=v<<1|g)===(y=(f>=h)<<1|d>=u));return i[y]=a,i[p]=s,r}function Fq(r){var e,t,n=r.length,i,a,s=new Array(n),o=new Array(n),A=1/0,l=1/0,c=-1/0,u=-1/0;for(t=0;t<n;++t)isNaN(i=+this._x.call(null,e=r[t]))||isNaN(a=+this._y.call(null,e))||(s[t]=i,o[t]=a,i<A&&(A=i),i>c&&(c=i),a<l&&(l=a),a>u&&(u=a));if(A>c||l>u)return this;for(this.cover(A,l).cover(c,u),t=0;t<n;++t)YL(this,s[t],o[t],r[t]);return this}function Tq(r,e){if(isNaN(r=+r)||isNaN(e=+e))return this;var t=this._x0,n=this._y0,i=this._x1,a=this._y1;if(isNaN(t))i=(t=Math.floor(r))+1,a=(n=Math.floor(e))+1;else{for(var s=i-t||1,o=this._root,A,l;t>r||r>=i||n>e||e>=a;)switch(l=(e<n)<<1|r<t,A=new Array(4),A[l]=o,o=A,s*=2,l){case 0:i=t+s,a=n+s;break;case 1:t=i-s,a=n+s;break;case 2:i=t+s,n=a-s;break;case 3:t=i-s,n=a-s;break}this._root&&this._root.length&&(this._root=o)}return this._x0=t,this._y0=n,this._x1=i,this._y1=a,this}function Mq(){var r=[];return this.visit(function(e){if(!e.length)do r.push(e.data);while(e=e.next)}),r}function Oq(r){return arguments.length?this.cover(+r[0][0],+r[0][1]).cover(+r[1][0],+r[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Fn(r,e,t,n,i){this.node=r,this.x0=e,this.y0=t,this.x1=n,this.y1=i}function Iq(r,e,t){var n,i=this._x0,a=this._y0,s,o,A,l,c=this._x1,u=this._y1,h=[],d=this._root,f,g;for(d&&h.push(new Fn(d,i,a,c,u)),t==null?t=1/0:(i=r-t,a=e-t,c=r+t,u=e+t,t*=t);f=h.pop();)if(!(!(d=f.node)||(s=f.x0)>c||(o=f.y0)>u||(A=f.x1)<i||(l=f.y1)<a))if(d.length){var v=(s+A)/2,p=(o+l)/2;h.push(new Fn(d[3],v,p,A,l),new Fn(d[2],s,p,v,l),new Fn(d[1],v,o,A,p),new Fn(d[0],s,o,v,p)),(g=(e>=p)<<1|r>=v)&&(f=h[h.length-1],h[h.length-1]=h[h.length-1-g],h[h.length-1-g]=f)}else{var y=r-+this._x.call(null,d.data),m=e-+this._y.call(null,d.data),w=y*y+m*m;if(w<t){var B=Math.sqrt(t=w);i=r-B,a=e-B,c=r+B,u=e+B,n=d.data}}return n}function _q(r){if(isNaN(c=+this._x.call(null,r))||isNaN(u=+this._y.call(null,r)))return this;var e,t=this._root,n,i,a,s=this._x0,o=this._y0,A=this._x1,l=this._y1,c,u,h,d,f,g,v,p;if(!t)return this;if(t.length)for(;;){if((f=c>=(h=(s+A)/2))?s=h:A=h,(g=u>=(d=(o+l)/2))?o=d:l=d,e=t,!(t=t[v=g<<1|f]))return this;if(!t.length)break;(e[v+1&3]||e[v+2&3]||e[v+3&3])&&(n=e,p=v)}for(;t.data!==r;)if(i=t,!(t=t.next))return this;return(a=t.next)&&delete t.next,i?(a?i.next=a:delete i.next,this):e?(a?e[v]=a:delete e[v],(t=e[0]||e[1]||e[2]||e[3])&&t===(e[3]||e[2]||e[1]||e[0])&&!t.length&&(n?n[p]=t:this._root=t),this):(this._root=a,this)}function kq(r){for(var e=0,t=r.length;e<t;++e)this.remove(r[e]);return this}function Lq(){return this._root}function Qq(){var r=0;return this.visit(function(e){if(!e.length)do++r;while(e=e.next)}),r}function Nq(r){var e=[],t,n=this._root,i,a,s,o,A;for(n&&e.push(new Fn(n,this._x0,this._y0,this._x1,this._y1));t=e.pop();)if(!r(n=t.node,a=t.x0,s=t.y0,o=t.x1,A=t.y1)&&n.length){var l=(a+o)/2,c=(s+A)/2;(i=n[3])&&e.push(new Fn(i,l,c,o,A)),(i=n[2])&&e.push(new Fn(i,a,c,l,A)),(i=n[1])&&e.push(new Fn(i,l,s,o,c)),(i=n[0])&&e.push(new Fn(i,a,s,l,c))}return this}function Uq(r){var e=[],t=[],n;for(this._root&&e.push(new Fn(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var a,s=n.x0,o=n.y0,A=n.x1,l=n.y1,c=(s+A)/2,u=(o+l)/2;(a=i[0])&&e.push(new Fn(a,s,o,c,u)),(a=i[1])&&e.push(new Fn(a,c,o,A,u)),(a=i[2])&&e.push(new Fn(a,s,u,c,l)),(a=i[3])&&e.push(new Fn(a,c,u,A,l))}t.push(n)}for(;n=t.pop();)r(n.node,n.x0,n.y0,n.x1,n.y1);return this}function Pq(r){return r[0]}function Rq(r){return arguments.length?(this._x=r,this):this._x}function Dq(r){return r[1]}function Hq(r){return arguments.length?(this._y=r,this):this._y}function Fd(r,e,t){var n=new BB(e??Pq,t??Dq,NaN,NaN,NaN,NaN);return r==null?n:n.addAll(r)}function BB(r,e,t,n,i,a){this._x=r,this._y=e,this._x0=t,this._y0=n,this._x1=i,this._y1=a,this._root=void 0}function lC(r){for(var e={data:r.data},t=e;r=r.next;)t=t.next={data:r.data};return e}var On=Fd.prototype=BB.prototype;On.copy=function(){var r=new BB(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,t,n;if(!e)return r;if(!e.length)return r._root=lC(e),r;for(t=[{source:e,target:r._root=new Array(4)}];e=t.pop();)for(var i=0;i<4;++i)(n=e.source[i])&&(n.length?t.push({source:n,target:e.target[i]=new Array(4)}):e.target[i]=lC(n));return r};On.add=Sq;On.addAll=Fq;On.cover=Tq;On.data=Mq;On.extent=Oq;On.find=Iq;On.remove=_q;On.removeAll=kq;On.root=Lq;On.size=Qq;On.visit=Nq;On.visitAfter=Uq;On.x=Rq;On.y=Hq;function Gq(r){const e=+this._x.call(null,r),t=+this._y.call(null,r),n=+this._z.call(null,r);return XL(this.cover(e,t,n),e,t,n,r)}function XL(r,e,t,n,i){if(isNaN(e)||isNaN(t)||isNaN(n))return r;var a,s=r._root,o={data:i},A=r._x0,l=r._y0,c=r._z0,u=r._x1,h=r._y1,d=r._z1,f,g,v,p,y,m,w,B,b,E,x;if(!s)return r._root=o,r;for(;s.length;)if((w=e>=(f=(A+u)/2))?A=f:u=f,(B=t>=(g=(l+h)/2))?l=g:h=g,(b=n>=(v=(c+d)/2))?c=v:d=v,a=s,!(s=s[E=b<<2|B<<1|w]))return a[E]=o,r;if(p=+r._x.call(null,s.data),y=+r._y.call(null,s.data),m=+r._z.call(null,s.data),e===p&&t===y&&n===m)return o.next=s,a?a[E]=o:r._root=o,r;do a=a?a[E]=new Array(8):r._root=new Array(8),(w=e>=(f=(A+u)/2))?A=f:u=f,(B=t>=(g=(l+h)/2))?l=g:h=g,(b=n>=(v=(c+d)/2))?c=v:d=v;while((E=b<<2|B<<1|w)===(x=(m>=v)<<2|(y>=g)<<1|p>=f));return a[x]=s,a[E]=o,r}function Kq(r){Array.isArray(r)||(r=Array.from(r));const e=r.length,t=new Float64Array(e),n=new Float64Array(e),i=new Float64Array(e);let a=1/0,s=1/0,o=1/0,A=-1/0,l=-1/0,c=-1/0;for(let u=0,h,d,f,g;u<e;++u)isNaN(d=+this._x.call(null,h=r[u]))||isNaN(f=+this._y.call(null,h))||isNaN(g=+this._z.call(null,h))||(t[u]=d,n[u]=f,i[u]=g,d<a&&(a=d),d>A&&(A=d),f<s&&(s=f),f>l&&(l=f),g<o&&(o=g),g>c&&(c=g));if(a>A||s>l||o>c)return this;this.cover(a,s,o).cover(A,l,c);for(let u=0;u<e;++u)XL(this,t[u],n[u],i[u],r[u]);return this}function zq(r,e,t){if(isNaN(r=+r)||isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,a=this._z0,s=this._x1,o=this._y1,A=this._z1;if(isNaN(n))s=(n=Math.floor(r))+1,o=(i=Math.floor(e))+1,A=(a=Math.floor(t))+1;else{for(var l=s-n||1,c=this._root,u,h;n>r||r>=s||i>e||e>=o||a>t||t>=A;)switch(h=(t<a)<<2|(e<i)<<1|r<n,u=new Array(8),u[h]=c,c=u,l*=2,h){case 0:s=n+l,o=i+l,A=a+l;break;case 1:n=s-l,o=i+l,A=a+l;break;case 2:s=n+l,i=o-l,A=a+l;break;case 3:n=s-l,i=o-l,A=a+l;break;case 4:s=n+l,o=i+l,a=A-l;break;case 5:n=s-l,o=i+l,a=A-l;break;case 6:s=n+l,i=o-l,a=A-l;break;case 7:n=s-l,i=o-l,a=A-l;break}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=i,this._z0=a,this._x1=s,this._y1=o,this._z1=A,this}function Vq(){var r=[];return this.visit(function(e){if(!e.length)do r.push(e.data);while(e=e.next)}),r}function jq(r){return arguments.length?this.cover(+r[0][0],+r[0][1],+r[0][2]).cover(+r[1][0],+r[1][1],+r[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function Je(r,e,t,n,i,a,s){this.node=r,this.x0=e,this.y0=t,this.z0=n,this.x1=i,this.y1=a,this.z1=s}function $q(r,e,t,n){var i,a=this._x0,s=this._y0,o=this._z0,A,l,c,u,h,d,f=this._x1,g=this._y1,v=this._z1,p=[],y=this._root,m,w;for(y&&p.push(new Je(y,a,s,o,f,g,v)),n==null?n=1/0:(a=r-n,s=e-n,o=t-n,f=r+n,g=e+n,v=t+n,n*=n);m=p.pop();)if(!(!(y=m.node)||(A=m.x0)>f||(l=m.y0)>g||(c=m.z0)>v||(u=m.x1)<a||(h=m.y1)<s||(d=m.z1)<o))if(y.length){var B=(A+u)/2,b=(l+h)/2,E=(c+d)/2;p.push(new Je(y[7],B,b,E,u,h,d),new Je(y[6],A,b,E,B,h,d),new Je(y[5],B,l,E,u,b,d),new Je(y[4],A,l,E,B,b,d),new Je(y[3],B,b,c,u,h,E),new Je(y[2],A,b,c,B,h,E),new Je(y[1],B,l,c,u,b,E),new Je(y[0],A,l,c,B,b,E)),(w=(t>=E)<<2|(e>=b)<<1|r>=B)&&(m=p[p.length-1],p[p.length-1]=p[p.length-1-w],p[p.length-1-w]=m)}else{var x=r-+this._x.call(null,y.data),S=e-+this._y.call(null,y.data),C=t-+this._z.call(null,y.data),F=x*x+S*S+C*C;if(F<n){var M=Math.sqrt(n=F);a=r-M,s=e-M,o=t-M,f=r+M,g=e+M,v=t+M,i=y.data}}return i}const Wq=(r,e,t,n,i,a)=>Math.sqrt((r-n)**2+(e-i)**2+(t-a)**2);function qq(r,e,t,n){const i=[],a=r-n,s=e-n,o=t-n,A=r+n,l=e+n,c=t+n;return this.visit((u,h,d,f,g,v,p)=>{if(!u.length)do{const y=u.data;Wq(r,e,t,this._x(y),this._y(y),this._z(y))<=n&&i.push(y)}while(u=u.next);return h>A||d>l||f>c||g<a||v<s||p<o}),i}function Yq(r){if(isNaN(h=+this._x.call(null,r))||isNaN(d=+this._y.call(null,r))||isNaN(f=+this._z.call(null,r)))return this;var e,t=this._root,n,i,a,s=this._x0,o=this._y0,A=this._z0,l=this._x1,c=this._y1,u=this._z1,h,d,f,g,v,p,y,m,w,B,b;if(!t)return this;if(t.length)for(;;){if((y=h>=(g=(s+l)/2))?s=g:l=g,(m=d>=(v=(o+c)/2))?o=v:c=v,(w=f>=(p=(A+u)/2))?A=p:u=p,e=t,!(t=t[B=w<<2|m<<1|y]))return this;if(!t.length)break;(e[B+1&7]||e[B+2&7]||e[B+3&7]||e[B+4&7]||e[B+5&7]||e[B+6&7]||e[B+7&7])&&(n=e,b=B)}for(;t.data!==r;)if(i=t,!(t=t.next))return this;return(a=t.next)&&delete t.next,i?(a?i.next=a:delete i.next,this):e?(a?e[B]=a:delete e[B],(t=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&t===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!t.length&&(n?n[b]=t:this._root=t),this):(this._root=a,this)}function Xq(r){for(var e=0,t=r.length;e<t;++e)this.remove(r[e]);return this}function Zq(){return this._root}function Jq(){var r=0;return this.visit(function(e){if(!e.length)do++r;while(e=e.next)}),r}function e7(r){var e=[],t,n=this._root,i,a,s,o,A,l,c;for(n&&e.push(new Je(n,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));t=e.pop();)if(!r(n=t.node,a=t.x0,s=t.y0,o=t.z0,A=t.x1,l=t.y1,c=t.z1)&&n.length){var u=(a+A)/2,h=(s+l)/2,d=(o+c)/2;(i=n[7])&&e.push(new Je(i,u,h,d,A,l,c)),(i=n[6])&&e.push(new Je(i,a,h,d,u,l,c)),(i=n[5])&&e.push(new Je(i,u,s,d,A,h,c)),(i=n[4])&&e.push(new Je(i,a,s,d,u,h,c)),(i=n[3])&&e.push(new Je(i,u,h,o,A,l,d)),(i=n[2])&&e.push(new Je(i,a,h,o,u,l,d)),(i=n[1])&&e.push(new Je(i,u,s,o,A,h,d)),(i=n[0])&&e.push(new Je(i,a,s,o,u,h,d))}return this}function t7(r){var e=[],t=[],n;for(this._root&&e.push(new Je(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=e.pop();){var i=n.node;if(i.length){var a,s=n.x0,o=n.y0,A=n.z0,l=n.x1,c=n.y1,u=n.z1,h=(s+l)/2,d=(o+c)/2,f=(A+u)/2;(a=i[0])&&e.push(new Je(a,s,o,A,h,d,f)),(a=i[1])&&e.push(new Je(a,h,o,A,l,d,f)),(a=i[2])&&e.push(new Je(a,s,d,A,h,c,f)),(a=i[3])&&e.push(new Je(a,h,d,A,l,c,f)),(a=i[4])&&e.push(new Je(a,s,o,f,h,d,u)),(a=i[5])&&e.push(new Je(a,h,o,f,l,d,u)),(a=i[6])&&e.push(new Je(a,s,d,f,h,c,u)),(a=i[7])&&e.push(new Je(a,h,d,f,l,c,u))}t.push(n)}for(;n=t.pop();)r(n.node,n.x0,n.y0,n.z0,n.x1,n.y1,n.z1);return this}function n7(r){return r[0]}function r7(r){return arguments.length?(this._x=r,this):this._x}function i7(r){return r[1]}function a7(r){return arguments.length?(this._y=r,this):this._y}function s7(r){return r[2]}function o7(r){return arguments.length?(this._z=r,this):this._z}function ZL(r,e,t,n){var i=new bB(e??n7,t??i7,n??s7,NaN,NaN,NaN,NaN,NaN,NaN);return r==null?i:i.addAll(r)}function bB(r,e,t,n,i,a,s,o,A){this._x=r,this._y=e,this._z=t,this._x0=n,this._y0=i,this._z0=a,this._x1=s,this._y1=o,this._z1=A,this._root=void 0}function cC(r){for(var e={data:r.data},t=e;r=r.next;)t=t.next={data:r.data};return e}var cn=ZL.prototype=bB.prototype;cn.copy=function(){var r=new bB(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,t,n;if(!e)return r;if(!e.length)return r._root=cC(e),r;for(t=[{source:e,target:r._root=new Array(8)}];e=t.pop();)for(var i=0;i<8;++i)(n=e.source[i])&&(n.length?t.push({source:n,target:e.target[i]=new Array(8)}):e.target[i]=cC(n));return r};cn.add=Gq;cn.addAll=Kq;cn.cover=zq;cn.data=Vq;cn.extent=jq;cn.find=$q;cn.findAllWithinRadius=qq;cn.remove=Yq;cn.removeAll=Xq;cn.root=Zq;cn.size=Jq;cn.visit=e7;cn.visitAfter=t7;cn.x=r7;cn.y=a7;cn.z=o7;const A7=.81,Ug=.1;function l7(r,e,t,n,i=2){const a=e/t,s=r.getAllNodes(),o=s.map((c,u)=>{const{nodeStrength:h,x:d,y:f,z:g,size:v}=c.data;return{x:d,y:f,z:g,size:v,index:u,id:c.id,vx:0,vy:0,vz:0,weight:a*h}}),A=(i===2?Fd(o,c=>c.x,c=>c.y):ZL(o,c=>c.x,c=>c.y,c=>c.z)).visitAfter(c7),l=new Map;return o.forEach(c=>{l.set(c.id,c),h7(c,A,i)}),o.map((c,u)=>{const{id:h,data:d}=s[u],{mass:f=1}=d;n[h]={x:c.vx/f,y:c.vy/f,z:c.vz/f}}),n}function c7(r){let e=0,t=0,n=0,i=0,a=0;const s=r.length;if(s){for(let o=0;o<s;o++){const A=r[o];A&&A.weight&&(e+=A.weight,t+=A.x*A.weight,n+=A.y*A.weight,i+=A.z*A.weight,a+=A.size*A.weight)}r.x=t/e,r.y=n/e,r.z=i/e,r.size=a/e,r.weight=e}else{const o=r;r.x=o.data.x,r.y=o.data.y,r.z=o.data.z,r.size=o.data.size,r.weight=o.data.weight}}const u7=(r,e,t,n,i,a,s)=>{var o;if(((o=r.data)===null||o===void 0?void 0:o.id)===a.id)return;const A=[t,n,i][s-1],l=a.x-r.x||Ug,c=a.y-r.y||Ug,u=a.z-r.z||Ug,h=[l,c,u],d=A-e;let f=0;for(let p=0;p<s;p++)f+=h[p]*h[p];const v=Math.sqrt(f)*f;if(d*d*A7<f){const p=r.weight/v;return a.vx+=l*p,a.vy+=c*p,a.vz+=u*p,!0}if(r.length)return!1;if(r.data!==a){const p=r.data.weight/v;a.vx+=l*p,a.vy+=c*p,a.vz+=u*p}};function h7(r,e,t){e.visit((n,i,a,s,o)=>u7(n,i,a,s,o,r,t))}const d7={dimensions:2,maxIteration:500,gravity:10,factor:1,edgeStrength:50,nodeStrength:1e3,coulombDisScale:.005,damping:.9,maxSpeed:200,minMovement:.4,interval:.02,linkDistance:200,clusterNodeStrength:20,preventOverlap:!0,distanceThresholdMode:"mean"};class JL{constructor(e={}){this.options=e,this.id="force",this.timeInterval=0,this.judgingDistance=0,this.running=!1,this.options=Object.assign(Object.assign({},d7),e)}execute(e,t){return Ce(this,void 0,void 0,function*(){return this.genericForceLayout(!1,e,t)})}assign(e,t){return Ce(this,void 0,void 0,function*(){yield this.genericForceLayout(!0,e,t)})}stop(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval),this.running=!1}tick(e=this.options.maxIteration||1){if(this.lastResult)return this.lastResult;for(let n=0;(this.judgingDistance>this.lastOptions.minMovement||n<1)&&n<e;n++)this.runOneStep(this.lastCalcGraph,this.lastGraph,n,this.lastVelMap,this.lastOptions),this.updatePosition(this.lastGraph,this.lastCalcGraph,this.lastVelMap,this.lastOptions);const t={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&t.nodes.forEach(n=>this.lastGraph.mergeNodeData(n.id,{x:n.data.x,y:n.data.y,z:this.options.dimensions===3?n.data.z:void 0})),t}genericForceLayout(e,t,n){return Ce(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),n),a=t.getAllNodes(),s=t.getAllEdges(),o=this.formatOptions(i,t),{dimensions:A,width:l,height:c,nodeSize:u,getMass:h,nodeStrength:d,edgeStrength:f,linkDistance:g}=o,v=a.map((x,S)=>Object.assign(Object.assign({},x),{data:Object.assign(Object.assign({},x.data),{x:Z(x.data.x)?x.data.x:Math.random()*l,y:Z(x.data.y)?x.data.y:Math.random()*c,z:Z(x.data.z)?x.data.z:Math.random()*Math.sqrt(l*c),size:u(x)||30,mass:h(x),nodeStrength:d(x)})})),p=s.map(x=>Object.assign(Object.assign({},x),{data:Object.assign(Object.assign({},x.data),{edgeStrength:f(x),linkDistance:g(x,t.getNode(x.source),t.getNode(x.target))})}));if(!(a!=null&&a.length))return this.lastResult={nodes:[],edges:s},{nodes:[],edges:s};const y={};a.forEach((x,S)=>{y[x.id]={x:0,y:0,z:0}});const m=new Wt({nodes:v,edges:p});this.formatCentripetal(o,m);const{maxIteration:w,minMovement:B,onTick:b}=o;if(this.lastLayoutNodes=v,this.lastLayoutEdges=p,this.lastAssign=e,this.lastGraph=t,this.lastCalcGraph=m,this.lastOptions=o,this.lastVelMap=y,typeof window>"u")return;let E=0;return new Promise(x=>{this.timeInterval=window.setInterval(()=>{(!a||!this.running)&&x({nodes:Pg(t,v),edges:s}),this.runOneStep(m,t,E,y,o),this.updatePosition(t,m,y,o),e&&v.forEach(S=>t.mergeNodeData(S.id,{x:S.data.x,y:S.data.y,z:A===3?S.data.z:void 0})),b==null||b({nodes:Pg(t,v),edges:s}),E++,(E>=w||this.judgingDistance<B)&&(window.clearInterval(this.timeInterval),x({nodes:Pg(t,v),edges:s}))},0),this.running=!0})})}formatOptions(e,t){const n=Object.assign({},e),{width:i,height:a,getMass:s}=e;n.width=!i&&typeof window<"u"?window.innerWidth:i,n.height=!a&&typeof window<"u"?window.innerHeight:a,e.center||(n.center=[n.width/2,n.height/2]),s||(n.getMass=A=>{let l=1;Z(A==null?void 0:A.data.mass)&&(l=A==null?void 0:A.data.mass);const c=t.getDegree(A.id,"both");return!c||c<5?l:c*5*l}),n.nodeSize=wB(e.nodeSize,e.nodeSpacing);const o=e.linkDistance?ys(1,e.linkDistance):A=>1+n.nodeSize(t.getNode(A.source))+n.nodeSize(t.getNode(A.target));return n.linkDistance=o,n.nodeStrength=ys(1,e.nodeStrength),n.edgeStrength=ys(1,e.edgeStrength),n}formatCentripetal(e,t){const{dimensions:n,centripetalOptions:i,center:a,clusterNodeStrength:s,leafCluster:o,clustering:A,nodeClusterBy:l}=e,c=t.getAllNodes(),u=i||{leaf:2,single:2,others:1,center:p=>({x:a[0],y:a[1],z:n===3?a[2]:void 0})};typeof s!="function"&&(e.clusterNodeStrength=p=>s);let h,d;if(o&&l&&(h=uC(t,l),d=Array.from(new Set(c==null?void 0:c.map(p=>p.data[l])))||[],e.centripetalOptions=Object.assign(u,{single:100,leaf:p=>{const{siblingLeaves:y,sameTypeLeaves:m}=h[p.id]||{};return(m==null?void 0:m.length)===(y==null?void 0:y.length)||(d==null?void 0:d.length)===1?1:e.clusterNodeStrength(p)},others:1,center:p=>{const y=t.getDegree(p.id,"both");if(!y)return{x:100,y:100,z:0};let m;if(y===1){const{sameTypeLeaves:w=[]}=h[p.id]||{};w.length===1?m=void 0:w.length>1&&(m=hC(w))}else m=void 0;return{x:m==null?void 0:m.x,y:m==null?void 0:m.y,z:m==null?void 0:m.z}}})),A&&l){h||(h=uC(t,l)),d||(d=Array.from(new Set(c.map(y=>y.data[l])))),d=d.filter(y=>y!==void 0);const p={};d.forEach(y=>{const m=c.filter(w=>w.data[l]===y).map(w=>t.getNode(w.id));p[y]=hC(m)}),e.centripetalOptions=Object.assign(u,{single:y=>e.clusterNodeStrength(y),leaf:y=>e.clusterNodeStrength(y),others:y=>e.clusterNodeStrength(y),center:y=>{const m=p[y.data[l]];return{x:m==null?void 0:m.x,y:m==null?void 0:m.y,z:m==null?void 0:m.z}}})}const{leaf:f,single:g,others:v}=e.centripetalOptions||{};f&&typeof f!="function"&&(e.centripetalOptions.leaf=()=>f),g&&typeof g!="function"&&(e.centripetalOptions.single=()=>g),v&&typeof v!="function"&&(e.centripetalOptions.others=()=>v)}runOneStep(e,t,n,i,a){const s={},o=e.getAllNodes(),A=e.getAllEdges();if(!(o!=null&&o.length))return;const{monitor:l}=a;if(this.calRepulsive(e,s,a),A&&this.calAttractive(e,s,a),this.calGravity(e,t,s,a),this.updateVelocity(e,s,i,a),l){const c=this.calTotalEnergy(s,o);l({energy:c,nodes:t.getAllNodes(),edges:t.getAllEdges(),iterations:n})}}calTotalEnergy(e,t){if(!(t!=null&&t.length))return 0;let n=0;return t.forEach((i,a)=>{const s=e[i.id].x,o=e[i.id].y,A=this.options.dimensions===3?e[i.id].z:0,l=s*s+o*o+A*A,{mass:c=1}=i.data;n+=c*l*.5}),n}calRepulsive(e,t,n){const{dimensions:i,factor:a,coulombDisScale:s}=n;l7(e,a,s*s,t,i)}calAttractive(e,t,n){const{dimensions:i,nodeSize:a}=n;e.getAllEdges().forEach((s,o)=>{const{source:A,target:l}=s,c=e.getNode(A),u=e.getNode(l);if(!c||!u)return;let h=u.data.x-c.data.x,d=u.data.y-c.data.y,f=i===3?u.data.z-c.data.z:0;!h&&!d&&(h=Math.random()*.01,d=Math.random()*.01,i===3&&!f&&(f=Math.random()*.01));const g=Math.sqrt(h*h+d*d+f*f);if(g<a(c)+a(u))return;const v=h/g,p=d/g,y=f/g,{linkDistance:m=200,edgeStrength:w=200}=s.data||{},b=(m-g)*w,E=c.data.mass||1,x=u.data.mass||1,S=1/E,C=1/x,F=v*b,M=p*b,T=y*b;t[A].x-=F*S,t[A].y-=M*S,t[A].z-=T*S,t[l].x+=F*C,t[l].y+=M*C,t[l].z+=T*C})}calGravity(e,t,n,i){const{getCenter:a}=i,s=e.getAllNodes(),o=t.getAllNodes(),A=t.getAllEdges(),{width:l,height:c,center:u,gravity:h,centripetalOptions:d}=i;s&&s.forEach(f=>{const{id:g,data:v}=f,{mass:p,x:y,y:m,z:w}=v,B=t.getNode(g);let b=0,E=0,x=0,S=h;const C=e.getDegree(g,"in"),F=e.getDegree(g,"out"),M=e.getDegree(g,"both"),T=a==null?void 0:a(B,M);if(T){const[O,_,Q]=T;b=y-O,E=m-_,S=Q}else b=y-u[0],E=m-u[1],x=w-u[2];if(S&&(n[g].x-=S*b/p,n[g].y-=S*E/p,n[g].z-=S*x/p),d){const{leaf:O,single:_,others:Q,center:L}=d,{x:k,y:U,z:D,centerStrength:j}=(L==null?void 0:L(B,o,A,l,c))||{x:0,y:0,z:0,centerStrength:0};if(!Z(k)||!Z(U))return;const X=(y-k)/p,W=(m-U)/p,Y=(w-D)/p;if(j&&(n[g].x-=j*X,n[g].y-=j*W,n[g].z-=j*Y),M===0){const te=_(B);if(!te)return;n[g].x-=te*X,n[g].y-=te*W,n[g].z-=te*Y;return}if(C===0||F===0){const te=O(B,o,A);if(!te)return;n[g].x-=te*X,n[g].y-=te*W,n[g].z-=te*Y;return}const se=Q(B);if(!se)return;n[g].x-=se*X,n[g].y-=se*W,n[g].z-=se*Y}})}updateVelocity(e,t,n,i){const{damping:a,maxSpeed:s,interval:o,dimensions:A}=i,l=e.getAllNodes();l!=null&&l.length&&l.forEach(c=>{const{id:u}=c;let h=(n[u].x+t[u].x*o)*a||.01,d=(n[u].y+t[u].y*o)*a||.01,f=A===3?(n[u].z+t[u].z*o)*a||.01:0;const g=Math.sqrt(h*h+d*d+f*f);if(g>s){const v=s/g;h=v*h,d=v*d,f=v*f}n[u]={x:h,y:d,z:f}})}updatePosition(e,t,n,i){const{distanceThresholdMode:a,interval:s,dimensions:o}=i,A=t.getAllNodes();if(!(A!=null&&A.length)){this.judgingDistance=0;return}let l=0;a==="max"?this.judgingDistance=-1/0:a==="min"&&(this.judgingDistance=1/0),A.forEach(c=>{const{id:u}=c,h=e.getNode(u);if(Z(h.data.fx)&&Z(h.data.fy)){t.mergeNodeData(u,{x:h.data.fx,y:h.data.fy,z:o===3?h.data.fz:void 0});return}const d=n[u].x*s,f=n[u].y*s,g=o===3?n[u].z*s:0;t.mergeNodeData(u,{x:c.data.x+d,y:c.data.y+f,z:c.data.z+g});const v=Math.sqrt(d*d+f*f+g*g);switch(a){case"max":this.judgingDistance<v&&(this.judgingDistance=v);break;case"min":this.judgingDistance>v&&(this.judgingDistance=v);break;default:l=l+v;break}}),(!a||a==="mean")&&(this.judgingDistance=l/A.length)}}const uC=(r,e)=>{const t=r.getAllNodes();if(!(t!=null&&t.length))return{};const n={};return t.forEach((i,a)=>{r.getDegree(i.id,"both")===1&&(n[i.id]=f7(r,"leaf",i,e))}),n},f7=(r,e,t,n)=>{const i=r.getDegree(t.id,"in"),a=r.getDegree(t.id,"out");let s=t,o=[];i===0?(s=r.getSuccessors(t.id)[0],o=r.getNeighbors(s.id)):a===0&&(s=r.getPredecessors(t.id)[0],o=r.getNeighbors(s.id)),o=o.filter(l=>r.getDegree(l.id,"in")===0||r.getDegree(l.id,"out")===0);const A=g7(r,e,n,t,o);return{coreNode:s,siblingLeaves:o,sameTypeLeaves:A}},g7=(r,e,t,n,i)=>{const a=n.data[t]||"";let s=(i==null?void 0:i.filter(o=>o.data[t]===a))||[];return s=s.filter(o=>r.getDegree(o.id,"in")===0||r.getDegree(o.id,"out")===0),s},hC=r=>{const e={x:0,y:0};r.forEach(n=>{const{x:i,y:a}=n.data;e.x+=i||0,e.y+=a||0});const t=r.length||1;return{x:e.x/t,y:e.y/t}},Pg=(r,e)=>e.map(t=>{const{id:n,data:i}=t,a=r.getNode(n);return Object.assign(Object.assign({},a),{data:Object.assign(Object.assign({},a.data),{x:i.x,y:i.y,z:i.z})})});var Oe={};const v7=Object.prototype.toString;function fl(r){const e=v7.call(r);return e.endsWith("Array]")&&!e.includes("Big")}const p7=Object.freeze(Object.defineProperty({__proto__:null,isAnyArray:fl},Symbol.toStringTag,{value:"Module"})),y7=VO(p7);function m7(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!fl(r))throw new TypeError("input must be an array");if(r.length===0)throw new TypeError("input must not be empty");var t=e.fromIndex,n=t===void 0?0:t,i=e.toIndex,a=i===void 0?r.length:i;if(n<0||n>=r.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=n||a>r.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=r[n],o=n+1;o<a;o++)r[o]>s&&(s=r[o]);return s}function w7(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!fl(r))throw new TypeError("input must be an array");if(r.length===0)throw new TypeError("input must not be empty");var t=e.fromIndex,n=t===void 0?0:t,i=e.toIndex,a=i===void 0?r.length:i;if(n<0||n>=r.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=n||a>r.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=r[n],o=n+1;o<a;o++)r[o]<s&&(s=r[o]);return s}function B7(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(fl(r)){if(r.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var t;if(e.output!==void 0){if(!fl(e.output))throw new TypeError("output option must be an array if specified");t=e.output}else t=new Array(r.length);var n=w7(r),i=m7(r);if(n===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var a=e.min,s=a===void 0?e.autoMinMax?n:0:a,o=e.max,A=o===void 0?e.autoMinMax?i:1:o;if(s>=A)throw new RangeError("min option must be smaller than max option");for(var l=(A-s)/(i-n),c=0;c<r.length;c++)t[c]=(r[c]-n)*l+s;return t}const b7=Object.freeze(Object.defineProperty({__proto__:null,default:B7},Symbol.toStringTag,{value:"Module"})),E7=VO(b7);Object.defineProperty(Oe,"__esModule",{value:!0});var Gn=y7,dC=E7;const iu=" ".repeat(2),eQ=" ".repeat(4);function x7(){return tQ(this)}function tQ(r,e={}){const{maxRows:t=15,maxColumns:n=10,maxNumSize:i=8,padMinus:a="auto"}=e;return`${r.constructor.name} {
${iu}[
${eQ}${C7(r,t,n,i,a)}
${iu}]
${iu}rows: ${r.rows}
${iu}columns: ${r.columns}
}`}function C7(r,e,t,n,i){const{rows:a,columns:s}=r,o=Math.min(a,e),A=Math.min(s,t),l=[];if(i==="auto"){i=!1;e:for(let c=0;c<o;c++)for(let u=0;u<A;u++)if(r.get(c,u)<0){i=!0;break e}}for(let c=0;c<o;c++){let u=[];for(let h=0;h<A;h++)u.push(S7(r.get(c,h),n,i));l.push(`${u.join(" ")}`)}return A!==s&&(l[l.length-1]+=` ... ${s-t} more columns`),o!==a&&l.push(`... ${a-e} more rows`),l.join(`
${eQ}`)}function S7(r,e,t){return(r>=0&&t?` ${fC(r,e-1)}`:fC(r,e)).padEnd(e)}function fC(r,e){let t=r.toString();if(t.length<=e)return t;let n=r.toFixed(e);if(n.length>e&&(n=r.toFixed(Math.max(0,e-(n.length-e)))),n.length<=e&&!n.startsWith("0.000")&&!n.startsWith("-0.000"))return n;let i=r.toExponential(e);return i.length>e&&(i=r.toExponential(Math.max(0,e-(i.length-e)))),i.slice(0)}function F7(r,e){r.prototype.add=function(n){return typeof n=="number"?this.addS(n):this.addM(n)},r.prototype.addS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)+n);return this},r.prototype.addM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)+n.get(i,a));return this},r.add=function(n,i){return new e(n).add(i)},r.prototype.sub=function(n){return typeof n=="number"?this.subS(n):this.subM(n)},r.prototype.subS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)-n);return this},r.prototype.subM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)-n.get(i,a));return this},r.sub=function(n,i){return new e(n).sub(i)},r.prototype.subtract=r.prototype.sub,r.prototype.subtractS=r.prototype.subS,r.prototype.subtractM=r.prototype.subM,r.subtract=r.sub,r.prototype.mul=function(n){return typeof n=="number"?this.mulS(n):this.mulM(n)},r.prototype.mulS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)*n);return this},r.prototype.mulM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)*n.get(i,a));return this},r.mul=function(n,i){return new e(n).mul(i)},r.prototype.multiply=r.prototype.mul,r.prototype.multiplyS=r.prototype.mulS,r.prototype.multiplyM=r.prototype.mulM,r.multiply=r.mul,r.prototype.div=function(n){return typeof n=="number"?this.divS(n):this.divM(n)},r.prototype.divS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)/n);return this},r.prototype.divM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)/n.get(i,a));return this},r.div=function(n,i){return new e(n).div(i)},r.prototype.divide=r.prototype.div,r.prototype.divideS=r.prototype.divS,r.prototype.divideM=r.prototype.divM,r.divide=r.div,r.prototype.mod=function(n){return typeof n=="number"?this.modS(n):this.modM(n)},r.prototype.modS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)%n);return this},r.prototype.modM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)%n.get(i,a));return this},r.mod=function(n,i){return new e(n).mod(i)},r.prototype.modulus=r.prototype.mod,r.prototype.modulusS=r.prototype.modS,r.prototype.modulusM=r.prototype.modM,r.modulus=r.mod,r.prototype.and=function(n){return typeof n=="number"?this.andS(n):this.andM(n)},r.prototype.andS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)&n);return this},r.prototype.andM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)&n.get(i,a));return this},r.and=function(n,i){return new e(n).and(i)},r.prototype.or=function(n){return typeof n=="number"?this.orS(n):this.orM(n)},r.prototype.orS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)|n);return this},r.prototype.orM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)|n.get(i,a));return this},r.or=function(n,i){return new e(n).or(i)},r.prototype.xor=function(n){return typeof n=="number"?this.xorS(n):this.xorM(n)},r.prototype.xorS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)^n);return this},r.prototype.xorM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)^n.get(i,a));return this},r.xor=function(n,i){return new e(n).xor(i)},r.prototype.leftShift=function(n){return typeof n=="number"?this.leftShiftS(n):this.leftShiftM(n)},r.prototype.leftShiftS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)<<n);return this},r.prototype.leftShiftM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)<<n.get(i,a));return this},r.leftShift=function(n,i){return new e(n).leftShift(i)},r.prototype.signPropagatingRightShift=function(n){return typeof n=="number"?this.signPropagatingRightShiftS(n):this.signPropagatingRightShiftM(n)},r.prototype.signPropagatingRightShiftS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>n);return this},r.prototype.signPropagatingRightShiftM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>n.get(i,a));return this},r.signPropagatingRightShift=function(n,i){return new e(n).signPropagatingRightShift(i)},r.prototype.rightShift=function(n){return typeof n=="number"?this.rightShiftS(n):this.rightShiftM(n)},r.prototype.rightShiftS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>>n);return this},r.prototype.rightShiftM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>>n.get(i,a));return this},r.rightShift=function(n,i){return new e(n).rightShift(i)},r.prototype.zeroFillRightShift=r.prototype.rightShift,r.prototype.zeroFillRightShiftS=r.prototype.rightShiftS,r.prototype.zeroFillRightShiftM=r.prototype.rightShiftM,r.zeroFillRightShift=r.rightShift,r.prototype.not=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,~this.get(n,i));return this},r.not=function(n){return new e(n).not()},r.prototype.abs=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.abs(this.get(n,i)));return this},r.abs=function(n){return new e(n).abs()},r.prototype.acos=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.acos(this.get(n,i)));return this},r.acos=function(n){return new e(n).acos()},r.prototype.acosh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.acosh(this.get(n,i)));return this},r.acosh=function(n){return new e(n).acosh()},r.prototype.asin=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.asin(this.get(n,i)));return this},r.asin=function(n){return new e(n).asin()},r.prototype.asinh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.asinh(this.get(n,i)));return this},r.asinh=function(n){return new e(n).asinh()},r.prototype.atan=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.atan(this.get(n,i)));return this},r.atan=function(n){return new e(n).atan()},r.prototype.atanh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.atanh(this.get(n,i)));return this},r.atanh=function(n){return new e(n).atanh()},r.prototype.cbrt=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.cbrt(this.get(n,i)));return this},r.cbrt=function(n){return new e(n).cbrt()},r.prototype.ceil=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.ceil(this.get(n,i)));return this},r.ceil=function(n){return new e(n).ceil()},r.prototype.clz32=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.clz32(this.get(n,i)));return this},r.clz32=function(n){return new e(n).clz32()},r.prototype.cos=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.cos(this.get(n,i)));return this},r.cos=function(n){return new e(n).cos()},r.prototype.cosh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.cosh(this.get(n,i)));return this},r.cosh=function(n){return new e(n).cosh()},r.prototype.exp=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.exp(this.get(n,i)));return this},r.exp=function(n){return new e(n).exp()},r.prototype.expm1=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.expm1(this.get(n,i)));return this},r.expm1=function(n){return new e(n).expm1()},r.prototype.floor=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.floor(this.get(n,i)));return this},r.floor=function(n){return new e(n).floor()},r.prototype.fround=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.fround(this.get(n,i)));return this},r.fround=function(n){return new e(n).fround()},r.prototype.log=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log(this.get(n,i)));return this},r.log=function(n){return new e(n).log()},r.prototype.log1p=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log1p(this.get(n,i)));return this},r.log1p=function(n){return new e(n).log1p()},r.prototype.log10=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log10(this.get(n,i)));return this},r.log10=function(n){return new e(n).log10()},r.prototype.log2=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log2(this.get(n,i)));return this},r.log2=function(n){return new e(n).log2()},r.prototype.round=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.round(this.get(n,i)));return this},r.round=function(n){return new e(n).round()},r.prototype.sign=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sign(this.get(n,i)));return this},r.sign=function(n){return new e(n).sign()},r.prototype.sin=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sin(this.get(n,i)));return this},r.sin=function(n){return new e(n).sin()},r.prototype.sinh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sinh(this.get(n,i)));return this},r.sinh=function(n){return new e(n).sinh()},r.prototype.sqrt=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sqrt(this.get(n,i)));return this},r.sqrt=function(n){return new e(n).sqrt()},r.prototype.tan=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.tan(this.get(n,i)));return this},r.tan=function(n){return new e(n).tan()},r.prototype.tanh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.tanh(this.get(n,i)));return this},r.tanh=function(n){return new e(n).tanh()},r.prototype.trunc=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.trunc(this.get(n,i)));return this},r.trunc=function(n){return new e(n).trunc()},r.pow=function(n,i){return new e(n).pow(i)},r.prototype.pow=function(n){return typeof n=="number"?this.powS(n):this.powM(n)},r.prototype.powS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)**n);return this},r.prototype.powM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)**n.get(i,a));return this}}function mr(r,e,t){let n=t?r.rows:r.rows-1;if(e<0||e>n)throw new RangeError("Row index out of range")}function wr(r,e,t){let n=t?r.columns:r.columns-1;if(e<0||e>n)throw new RangeError("Column index out of range")}function ho(r,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==r.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function fo(r,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==r.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function EB(r,e){if(!Gn.isAnyArray(e))throw new TypeError("row indices must be an array");for(let t=0;t<e.length;t++)if(e[t]<0||e[t]>=r.rows)throw new RangeError("row indices are out of range")}function xB(r,e){if(!Gn.isAnyArray(e))throw new TypeError("column indices must be an array");for(let t=0;t<e.length;t++)if(e[t]<0||e[t]>=r.columns)throw new RangeError("column indices are out of range")}function nw(r,e,t,n,i){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(au("startRow",e),au("endRow",t),au("startColumn",n),au("endColumn",i),e>t||n>i||e<0||e>=r.rows||t<0||t>=r.rows||n<0||n>=r.columns||i<0||i>=r.columns)throw new RangeError("Submatrix indices are out of range")}function Td(r,e=0){let t=[];for(let n=0;n<r;n++)t.push(e);return t}function au(r,e){if(typeof e!="number")throw new TypeError(`${r} must be a number`)}function to(r){if(r.isEmpty())throw new Error("Empty matrix has no elements to index")}function T7(r){let e=Td(r.rows);for(let t=0;t<r.rows;++t)for(let n=0;n<r.columns;++n)e[t]+=r.get(t,n);return e}function M7(r){let e=Td(r.columns);for(let t=0;t<r.rows;++t)for(let n=0;n<r.columns;++n)e[n]+=r.get(t,n);return e}function O7(r){let e=0;for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)e+=r.get(t,n);return e}function I7(r){let e=Td(r.rows,1);for(let t=0;t<r.rows;++t)for(let n=0;n<r.columns;++n)e[t]*=r.get(t,n);return e}function _7(r){let e=Td(r.columns,1);for(let t=0;t<r.rows;++t)for(let n=0;n<r.columns;++n)e[n]*=r.get(t,n);return e}function k7(r){let e=1;for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)e*=r.get(t,n);return e}function L7(r,e,t){const n=r.rows,i=r.columns,a=[];for(let s=0;s<n;s++){let o=0,A=0,l=0;for(let c=0;c<i;c++)l=r.get(s,c)-t[s],o+=l,A+=l*l;e?a.push((A-o*o/i)/(i-1)):a.push((A-o*o/i)/i)}return a}function Q7(r,e,t){const n=r.rows,i=r.columns,a=[];for(let s=0;s<i;s++){let o=0,A=0,l=0;for(let c=0;c<n;c++)l=r.get(c,s)-t[s],o+=l,A+=l*l;e?a.push((A-o*o/n)/(n-1)):a.push((A-o*o/n)/n)}return a}function N7(r,e,t){const n=r.rows,i=r.columns,a=n*i;let s=0,o=0,A=0;for(let l=0;l<n;l++)for(let c=0;c<i;c++)A=r.get(l,c)-t,s+=A,o+=A*A;return e?(o-s*s/a)/(a-1):(o-s*s/a)/a}function U7(r,e){for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)r.set(t,n,r.get(t,n)-e[t])}function P7(r,e){for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)r.set(t,n,r.get(t,n)-e[n])}function R7(r,e){for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)r.set(t,n,r.get(t,n)-e)}function D7(r){const e=[];for(let t=0;t<r.rows;t++){let n=0;for(let i=0;i<r.columns;i++)n+=r.get(t,i)**2/(r.columns-1);e.push(Math.sqrt(n))}return e}function H7(r,e){for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)r.set(t,n,r.get(t,n)/e[t])}function G7(r){const e=[];for(let t=0;t<r.columns;t++){let n=0;for(let i=0;i<r.rows;i++)n+=r.get(i,t)**2/(r.rows-1);e.push(Math.sqrt(n))}return e}function K7(r,e){for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)r.set(t,n,r.get(t,n)/e[n])}function z7(r){const e=r.size-1;let t=0;for(let n=0;n<r.columns;n++)for(let i=0;i<r.rows;i++)t+=r.get(i,n)**2/e;return Math.sqrt(t)}function V7(r,e){for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)r.set(t,n,r.get(t,n)/e)}class Ee{static from1DArray(e,t,n){if(e*t!==n.length)throw new RangeError("data length does not match given dimensions");let a=new J(e,t);for(let s=0;s<e;s++)for(let o=0;o<t;o++)a.set(s,o,n[s*t+o]);return a}static rowVector(e){let t=new J(1,e.length);for(let n=0;n<e.length;n++)t.set(0,n,e[n]);return t}static columnVector(e){let t=new J(e.length,1);for(let n=0;n<e.length;n++)t.set(n,0,e[n]);return t}static zeros(e,t){return new J(e,t)}static ones(e,t){return new J(e,t).fill(1)}static rand(e,t,n={}){if(typeof n!="object")throw new TypeError("options must be an object");const{random:i=Math.random}=n;let a=new J(e,t);for(let s=0;s<e;s++)for(let o=0;o<t;o++)a.set(s,o,i());return a}static randInt(e,t,n={}){if(typeof n!="object")throw new TypeError("options must be an object");const{min:i=0,max:a=1e3,random:s=Math.random}=n;if(!Number.isInteger(i))throw new TypeError("min must be an integer");if(!Number.isInteger(a))throw new TypeError("max must be an integer");if(i>=a)throw new RangeError("min must be smaller than max");let o=a-i,A=new J(e,t);for(let l=0;l<e;l++)for(let c=0;c<t;c++){let u=i+Math.round(s()*o);A.set(l,c,u)}return A}static eye(e,t,n){t===void 0&&(t=e),n===void 0&&(n=1);let i=Math.min(e,t),a=this.zeros(e,t);for(let s=0;s<i;s++)a.set(s,s,n);return a}static diag(e,t,n){let i=e.length;t===void 0&&(t=i),n===void 0&&(n=t);let a=Math.min(i,t,n),s=this.zeros(t,n);for(let o=0;o<a;o++)s.set(o,o,e[o]);return s}static min(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);let n=e.rows,i=e.columns,a=new J(n,i);for(let s=0;s<n;s++)for(let o=0;o<i;o++)a.set(s,o,Math.min(e.get(s,o),t.get(s,o)));return a}static max(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);let n=e.rows,i=e.columns,a=new this(n,i);for(let s=0;s<n;s++)for(let o=0;o<i;o++)a.set(s,o,Math.max(e.get(s,o),t.get(s,o)));return a}static checkMatrix(e){return Ee.isMatrix(e)?e:new J(e)}static isMatrix(e){return e!=null&&e.klass==="Matrix"}get size(){return this.rows*this.columns}apply(e){if(typeof e!="function")throw new TypeError("callback must be a function");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.call(this,t,n);return this}to1DArray(){let e=[];for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.push(this.get(t,n));return e}to2DArray(){let e=[];for(let t=0;t<this.rows;t++){e.push([]);for(let n=0;n<this.columns;n++)e[t].push(this.get(t,n))}return e}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let e=0;e<this.rows;e++)for(let t=0;t<=e;t++)if(this.get(e,t)!==this.get(t,e))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let e=0;e<this.rows;e++)if(this.get(e,e)!==0)return!1;return!0}isEchelonForm(){let e=0,t=0,n=-1,i=!0,a=!1;for(;e<this.rows&&i;){for(t=0,a=!1;t<this.columns&&a===!1;)this.get(e,t)===0?t++:this.get(e,t)===1&&t>n?(a=!0,n=t):(i=!1,a=!0);e++}return i}isReducedEchelonForm(){let e=0,t=0,n=-1,i=!0,a=!1;for(;e<this.rows&&i;){for(t=0,a=!1;t<this.columns&&a===!1;)this.get(e,t)===0?t++:this.get(e,t)===1&&t>n?(a=!0,n=t):(i=!1,a=!0);for(let s=t+1;s<this.rows;s++)this.get(e,s)!==0&&(i=!1);e++}return i}echelonForm(){let e=this.clone(),t=0,n=0;for(;t<e.rows&&n<e.columns;){let i=t;for(let a=t;a<e.rows;a++)e.get(a,n)>e.get(i,n)&&(i=a);if(e.get(i,n)===0)n++;else{e.swapRows(t,i);let a=e.get(t,n);for(let s=n;s<e.columns;s++)e.set(t,s,e.get(t,s)/a);for(let s=t+1;s<e.rows;s++){let o=e.get(s,n)/e.get(t,n);e.set(s,n,0);for(let A=n+1;A<e.columns;A++)e.set(s,A,e.get(s,A)-e.get(t,A)*o)}t++,n++}}return e}reducedEchelonForm(){let e=this.echelonForm(),t=e.columns,n=e.rows,i=n-1;for(;i>=0;)if(e.maxRow(i)===0)i--;else{let a=0,s=!1;for(;a<n&&s===!1;)e.get(i,a)===1?s=!0:a++;for(let o=0;o<i;o++){let A=e.get(o,a);for(let l=a;l<t;l++){let c=e.get(o,l)-A*e.get(i,l);e.set(o,l,c)}}i--}return e}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{rows:t=1,columns:n=1}=e;if(!Number.isInteger(t)||t<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new TypeError("columns must be a positive integer");let i=new J(this.rows*t,this.columns*n);for(let a=0;a<t;a++)for(let s=0;s<n;s++)i.setSubMatrix(this,this.rows*a,this.columns*s);return i}fill(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,e);return this}neg(){return this.mulS(-1)}getRow(e){mr(this,e);let t=[];for(let n=0;n<this.columns;n++)t.push(this.get(e,n));return t}getRowVector(e){return J.rowVector(this.getRow(e))}setRow(e,t){mr(this,e),t=ho(this,t);for(let n=0;n<this.columns;n++)this.set(e,n,t[n]);return this}swapRows(e,t){mr(this,e),mr(this,t);for(let n=0;n<this.columns;n++){let i=this.get(e,n);this.set(e,n,this.get(t,n)),this.set(t,n,i)}return this}getColumn(e){wr(this,e);let t=[];for(let n=0;n<this.rows;n++)t.push(this.get(n,e));return t}getColumnVector(e){return J.columnVector(this.getColumn(e))}setColumn(e,t){wr(this,e),t=fo(this,t);for(let n=0;n<this.rows;n++)this.set(n,e,t[n]);return this}swapColumns(e,t){wr(this,e),wr(this,t);for(let n=0;n<this.rows;n++){let i=this.get(n,e);this.set(n,e,this.get(n,t)),this.set(n,t,i)}return this}addRowVector(e){e=ho(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e[n]);return this}subRowVector(e){e=ho(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e[n]);return this}mulRowVector(e){e=ho(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e[n]);return this}divRowVector(e){e=ho(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e[n]);return this}addColumnVector(e){e=fo(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e[t]);return this}subColumnVector(e){e=fo(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e[t]);return this}mulColumnVector(e){e=fo(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e[t]);return this}divColumnVector(e){e=fo(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e[t]);return this}mulRow(e,t){mr(this,e);for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this}mulColumn(e,t){wr(this,e);for(let n=0;n<this.rows;n++)this.set(n,e,this.get(n,e)*t);return this}max(e){if(this.isEmpty())return NaN;switch(e){case"row":{const t=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)>t[n]&&(t[n]=this.get(n,i));return t}case"column":{const t=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)>t[i]&&(t[i]=this.get(n,i));return t}case void 0:{let t=this.get(0,0);for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)>t&&(t=this.get(n,i));return t}default:throw new Error(`invalid option: ${e}`)}}maxIndex(){to(this);let e=this.get(0,0),t=[0,0];for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)>e&&(e=this.get(n,i),t[0]=n,t[1]=i);return t}min(e){if(this.isEmpty())return NaN;switch(e){case"row":{const t=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)<t[n]&&(t[n]=this.get(n,i));return t}case"column":{const t=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)<t[i]&&(t[i]=this.get(n,i));return t}case void 0:{let t=this.get(0,0);for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)<t&&(t=this.get(n,i));return t}default:throw new Error(`invalid option: ${e}`)}}minIndex(){to(this);let e=this.get(0,0),t=[0,0];for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)<e&&(e=this.get(n,i),t[0]=n,t[1]=i);return t}maxRow(e){if(mr(this,e),this.isEmpty())return NaN;let t=this.get(e,0);for(let n=1;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}maxRowIndex(e){mr(this,e),to(this);let t=this.get(e,0),n=[e,0];for(let i=1;i<this.columns;i++)this.get(e,i)>t&&(t=this.get(e,i),n[1]=i);return n}minRow(e){if(mr(this,e),this.isEmpty())return NaN;let t=this.get(e,0);for(let n=1;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}minRowIndex(e){mr(this,e),to(this);let t=this.get(e,0),n=[e,0];for(let i=1;i<this.columns;i++)this.get(e,i)<t&&(t=this.get(e,i),n[1]=i);return n}maxColumn(e){if(wr(this,e),this.isEmpty())return NaN;let t=this.get(0,e);for(let n=1;n<this.rows;n++)this.get(n,e)>t&&(t=this.get(n,e));return t}maxColumnIndex(e){wr(this,e),to(this);let t=this.get(0,e),n=[0,e];for(let i=1;i<this.rows;i++)this.get(i,e)>t&&(t=this.get(i,e),n[0]=i);return n}minColumn(e){if(wr(this,e),this.isEmpty())return NaN;let t=this.get(0,e);for(let n=1;n<this.rows;n++)this.get(n,e)<t&&(t=this.get(n,e));return t}minColumnIndex(e){wr(this,e),to(this);let t=this.get(0,e),n=[0,e];for(let i=1;i<this.rows;i++)this.get(i,e)<t&&(t=this.get(i,e),n[0]=i);return n}diag(){let e=Math.min(this.rows,this.columns),t=[];for(let n=0;n<e;n++)t.push(this.get(n,n));return t}norm(e="frobenius"){switch(e){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${e}`)}}cumulativeSum(){let e=0;for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e+=this.get(t,n),this.set(t,n,e);return this}dot(e){Ee.isMatrix(e)&&(e=e.to1DArray());let t=this.to1DArray();if(t.length!==e.length)throw new RangeError("vectors do not have the same size");let n=0;for(let i=0;i<t.length;i++)n+=t[i]*e[i];return n}mmul(e){e=J.checkMatrix(e);let t=this.rows,n=this.columns,i=e.columns,a=new J(t,i),s=new Float64Array(n);for(let o=0;o<i;o++){for(let A=0;A<n;A++)s[A]=e.get(A,o);for(let A=0;A<t;A++){let l=0;for(let c=0;c<n;c++)l+=this.get(A,c)*s[c];a.set(A,o,l)}}return a}mpow(e){if(!this.isSquare())throw new RangeError("Matrix must be square");if(!Number.isInteger(e)||e<0)throw new RangeError("Exponent must be a non-negative integer");let t=J.eye(this.rows),n=this;for(let i=e;i>=1;i/=2)i&1&&(t=t.mmul(n)),n=n.mmul(n);return t}strassen2x2(e){e=J.checkMatrix(e);let t=new J(2,2);const n=this.get(0,0),i=e.get(0,0),a=this.get(0,1),s=e.get(0,1),o=this.get(1,0),A=e.get(1,0),l=this.get(1,1),c=e.get(1,1),u=(n+l)*(i+c),h=(o+l)*i,d=n*(s-c),f=l*(A-i),g=(n+a)*c,v=(o-n)*(i+s),p=(a-l)*(A+c),y=u+f-g+p,m=d+g,w=h+f,B=u-h+d+v;return t.set(0,0,y),t.set(0,1,m),t.set(1,0,w),t.set(1,1,B),t}strassen3x3(e){e=J.checkMatrix(e);let t=new J(3,3);const n=this.get(0,0),i=this.get(0,1),a=this.get(0,2),s=this.get(1,0),o=this.get(1,1),A=this.get(1,2),l=this.get(2,0),c=this.get(2,1),u=this.get(2,2),h=e.get(0,0),d=e.get(0,1),f=e.get(0,2),g=e.get(1,0),v=e.get(1,1),p=e.get(1,2),y=e.get(2,0),m=e.get(2,1),w=e.get(2,2),B=(n+i+a-s-o-c-u)*v,b=(n-s)*(-d+v),E=o*(-h+d+g-v-p-y+w),x=(-n+s+o)*(h-d+v),S=(s+o)*(-h+d),C=n*h,F=(-n+l+c)*(h-f+p),M=(-n+l)*(f-p),T=(l+c)*(-h+f),O=(n+i+a-o-A-l-c)*p,_=c*(-h+f+g-v-p-y+m),Q=(-a+c+u)*(v+y-m),L=(a-u)*(v-m),k=a*y,U=(c+u)*(-y+m),D=(-a+o+A)*(p+y-w),j=(a-A)*(p-w),X=(o+A)*(-y+w),W=i*g,Y=A*m,se=s*f,te=l*d,ne=u*w,Le=C+k+W,ke=B+x+S+C+Q+k+U,Ue=C+F+T+O+k+D+X,ct=b+E+x+C+k+D+j,Pe=b+x+S+C+Y,xt=k+D+j+X+se,In=C+F+M+_+Q+L+k,fe=Q+L+k+U+te,We=C+F+M+T+ne;return t.set(0,0,Le),t.set(0,1,ke),t.set(0,2,Ue),t.set(1,0,ct),t.set(1,1,Pe),t.set(1,2,xt),t.set(2,0,In),t.set(2,1,fe),t.set(2,2,We),t}mmulStrassen(e){e=J.checkMatrix(e);let t=this.clone(),n=t.rows,i=t.columns,a=e.rows,s=e.columns;i!==a&&console.warn(`Multiplying ${n} x ${i} and ${a} x ${s} matrix: dimensions do not match.`);function o(u,h,d){let f=u.rows,g=u.columns;if(f===h&&g===d)return u;{let v=Ee.zeros(h,d);return v=v.setSubMatrix(u,0,0),v}}let A=Math.max(n,a),l=Math.max(i,s);t=o(t,A,l),e=o(e,A,l);function c(u,h,d,f){if(d<=512||f<=512)return u.mmul(h);d%2===1&&f%2===1?(u=o(u,d+1,f+1),h=o(h,d+1,f+1)):d%2===1?(u=o(u,d+1,f),h=o(h,d+1,f)):f%2===1&&(u=o(u,d,f+1),h=o(h,d,f+1));let g=parseInt(u.rows/2,10),v=parseInt(u.columns/2,10),p=u.subMatrix(0,g-1,0,v-1),y=h.subMatrix(0,g-1,0,v-1),m=u.subMatrix(0,g-1,v,u.columns-1),w=h.subMatrix(0,g-1,v,h.columns-1),B=u.subMatrix(g,u.rows-1,0,v-1),b=h.subMatrix(g,h.rows-1,0,v-1),E=u.subMatrix(g,u.rows-1,v,u.columns-1),x=h.subMatrix(g,h.rows-1,v,h.columns-1),S=c(Ee.add(p,E),Ee.add(y,x),g,v),C=c(Ee.add(B,E),y,g,v),F=c(p,Ee.sub(w,x),g,v),M=c(E,Ee.sub(b,y),g,v),T=c(Ee.add(p,m),x,g,v),O=c(Ee.sub(B,p),Ee.add(y,w),g,v),_=c(Ee.sub(m,E),Ee.add(b,x),g,v),Q=Ee.add(S,M);Q.sub(T),Q.add(_);let L=Ee.add(F,T),k=Ee.add(C,M),U=Ee.sub(S,C);U.add(F),U.add(O);let D=Ee.zeros(2*Q.rows,2*Q.columns);return D=D.setSubMatrix(Q,0,0),D=D.setSubMatrix(L,Q.rows,0),D=D.setSubMatrix(k,0,Q.columns),D=D.setSubMatrix(U,Q.rows,Q.columns),D.subMatrix(0,d-1,0,f-1)}return c(t,e,A,l)}scaleRows(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{min:t=0,max:n=1}=e;if(!Number.isFinite(t))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(t>=n)throw new RangeError("min must be smaller than max");let i=new J(this.rows,this.columns);for(let a=0;a<this.rows;a++){const s=this.getRow(a);s.length>0&&dC(s,{min:t,max:n,output:s}),i.setRow(a,s)}return i}scaleColumns(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{min:t=0,max:n=1}=e;if(!Number.isFinite(t))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(t>=n)throw new RangeError("min must be smaller than max");let i=new J(this.rows,this.columns);for(let a=0;a<this.columns;a++){const s=this.getColumn(a);s.length&&dC(s,{min:t,max:n,output:s}),i.setColumn(a,s)}return i}flipRows(){const e=Math.ceil(this.columns/2);for(let t=0;t<this.rows;t++)for(let n=0;n<e;n++){let i=this.get(t,n),a=this.get(t,this.columns-1-n);this.set(t,n,a),this.set(t,this.columns-1-n,i)}return this}flipColumns(){const e=Math.ceil(this.rows/2);for(let t=0;t<this.columns;t++)for(let n=0;n<e;n++){let i=this.get(n,t),a=this.get(this.rows-1-n,t);this.set(n,t,a),this.set(this.rows-1-n,t,i)}return this}kroneckerProduct(e){e=J.checkMatrix(e);let t=this.rows,n=this.columns,i=e.rows,a=e.columns,s=new J(t*i,n*a);for(let o=0;o<t;o++)for(let A=0;A<n;A++)for(let l=0;l<i;l++)for(let c=0;c<a;c++)s.set(i*o+l,a*A+c,this.get(o,A)*e.get(l,c));return s}kroneckerSum(e){if(e=J.checkMatrix(e),!this.isSquare()||!e.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let t=this.rows,n=e.rows,i=this.kroneckerProduct(J.eye(n,n)),a=J.eye(t,t).kroneckerProduct(e);return i.add(a)}transpose(){let e=new J(this.columns,this.rows);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.set(n,t,this.get(t,n));return e}sortRows(e=gC){for(let t=0;t<this.rows;t++)this.setRow(t,this.getRow(t).sort(e));return this}sortColumns(e=gC){for(let t=0;t<this.columns;t++)this.setColumn(t,this.getColumn(t).sort(e));return this}subMatrix(e,t,n,i){nw(this,e,t,n,i);let a=new J(t-e+1,i-n+1);for(let s=e;s<=t;s++)for(let o=n;o<=i;o++)a.set(s-e,o-n,this.get(s,o));return a}subMatrixRow(e,t,n){if(t===void 0&&(t=0),n===void 0&&(n=this.columns-1),t>n||t<0||t>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");let i=new J(e.length,n-t+1);for(let a=0;a<e.length;a++)for(let s=t;s<=n;s++){if(e[a]<0||e[a]>=this.rows)throw new RangeError(`Row index out of range: ${e[a]}`);i.set(a,s-t,this.get(e[a],s))}return i}subMatrixColumn(e,t,n){if(t===void 0&&(t=0),n===void 0&&(n=this.rows-1),t>n||t<0||t>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");let i=new J(n-t+1,e.length);for(let a=0;a<e.length;a++)for(let s=t;s<=n;s++){if(e[a]<0||e[a]>=this.columns)throw new RangeError(`Column index out of range: ${e[a]}`);i.set(s-t,a,this.get(s,e[a]))}return i}setSubMatrix(e,t,n){if(e=J.checkMatrix(e),e.isEmpty())return this;let i=t+e.rows-1,a=n+e.columns-1;nw(this,t,i,n,a);for(let s=0;s<e.rows;s++)for(let o=0;o<e.columns;o++)this.set(t+s,n+o,e.get(s,o));return this}selection(e,t){EB(this,e),xB(this,t);let n=new J(e.length,t.length);for(let i=0;i<e.length;i++){let a=e[i];for(let s=0;s<t.length;s++){let o=t[s];n.set(i,s,this.get(a,o))}}return n}trace(){let e=Math.min(this.rows,this.columns),t=0;for(let n=0;n<e;n++)t+=this.get(n,n);return t}clone(){return this.constructor.copy(this,new J(this.rows,this.columns))}static copy(e,t){for(const[n,i,a]of e.entries())t.set(n,i,a);return t}sum(e){switch(e){case"row":return T7(this);case"column":return M7(this);case void 0:return O7(this);default:throw new Error(`invalid option: ${e}`)}}product(e){switch(e){case"row":return I7(this);case"column":return _7(this);case void 0:return k7(this);default:throw new Error(`invalid option: ${e}`)}}mean(e){const t=this.sum(e);switch(e){case"row":{for(let n=0;n<this.rows;n++)t[n]/=this.columns;return t}case"column":{for(let n=0;n<this.columns;n++)t[n]/=this.rows;return t}case void 0:return t/this.size;default:throw new Error(`invalid option: ${e}`)}}variance(e,t={}){if(typeof e=="object"&&(t=e,e=void 0),typeof t!="object")throw new TypeError("options must be an object");const{unbiased:n=!0,mean:i=this.mean(e)}=t;if(typeof n!="boolean")throw new TypeError("unbiased must be a boolean");switch(e){case"row":{if(!Gn.isAnyArray(i))throw new TypeError("mean must be an array");return L7(this,n,i)}case"column":{if(!Gn.isAnyArray(i))throw new TypeError("mean must be an array");return Q7(this,n,i)}case void 0:{if(typeof i!="number")throw new TypeError("mean must be a number");return N7(this,n,i)}default:throw new Error(`invalid option: ${e}`)}}standardDeviation(e,t){typeof e=="object"&&(t=e,e=void 0);const n=this.variance(e,t);if(e===void 0)return Math.sqrt(n);for(let i=0;i<n.length;i++)n[i]=Math.sqrt(n[i]);return n}center(e,t={}){if(typeof e=="object"&&(t=e,e=void 0),typeof t!="object")throw new TypeError("options must be an object");const{center:n=this.mean(e)}=t;switch(e){case"row":{if(!Gn.isAnyArray(n))throw new TypeError("center must be an array");return U7(this,n),this}case"column":{if(!Gn.isAnyArray(n))throw new TypeError("center must be an array");return P7(this,n),this}case void 0:{if(typeof n!="number")throw new TypeError("center must be a number");return R7(this,n),this}default:throw new Error(`invalid option: ${e}`)}}scale(e,t={}){if(typeof e=="object"&&(t=e,e=void 0),typeof t!="object")throw new TypeError("options must be an object");let n=t.scale;switch(e){case"row":{if(n===void 0)n=D7(this);else if(!Gn.isAnyArray(n))throw new TypeError("scale must be an array");return H7(this,n),this}case"column":{if(n===void 0)n=G7(this);else if(!Gn.isAnyArray(n))throw new TypeError("scale must be an array");return K7(this,n),this}case void 0:{if(n===void 0)n=z7(this);else if(typeof n!="number")throw new TypeError("scale must be a number");return V7(this,n),this}default:throw new Error(`invalid option: ${e}`)}}toString(e){return tQ(this,e)}[Symbol.iterator](){return this.entries()}*entries(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)yield[e,t,this.get(e,t)]}*values(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)yield this.get(e,t)}}Ee.prototype.klass="Matrix";typeof Symbol<"u"&&(Ee.prototype[Symbol.for("nodejs.util.inspect.custom")]=x7);function gC(r,e){return r-e}function j7(r){return r.every(e=>typeof e=="number")}Ee.random=Ee.rand;Ee.randomInt=Ee.randInt;Ee.diagonal=Ee.diag;Ee.prototype.diagonal=Ee.prototype.diag;Ee.identity=Ee.eye;Ee.prototype.negate=Ee.prototype.neg;Ee.prototype.tensorProduct=Ee.prototype.kroneckerProduct;var ml,rw,Bs;let J=(Bs=class extends Ee{constructor(t,n){super();Lf(this,ml);it(this,"data");if(Bs.isMatrix(t))Qf(this,ml,rw).call(this,t.rows,t.columns),Bs.copy(t,this);else if(Number.isInteger(t)&&t>=0)Qf(this,ml,rw).call(this,t,n);else if(Gn.isAnyArray(t)){const i=t;if(t=i.length,n=t?i[0].length:0,typeof n!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let a=0;a<t;a++){if(i[a].length!==n)throw new RangeError("Inconsistent array dimensions");if(!j7(i[a]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(i[a]))}this.rows=t,this.columns=n}else throw new TypeError("First argument must be a positive number or an array")}set(t,n,i){return this.data[t][n]=i,this}get(t,n){return this.data[t][n]}removeRow(t){return mr(this,t),this.data.splice(t,1),this.rows-=1,this}addRow(t,n){return n===void 0&&(n=t,t=this.rows),mr(this,t,!0),n=Float64Array.from(ho(this,n)),this.data.splice(t,0,n),this.rows+=1,this}removeColumn(t){wr(this,t);for(let n=0;n<this.rows;n++){const i=new Float64Array(this.columns-1);for(let a=0;a<t;a++)i[a]=this.data[n][a];for(let a=t+1;a<this.columns;a++)i[a-1]=this.data[n][a];this.data[n]=i}return this.columns-=1,this}addColumn(t,n){typeof n>"u"&&(n=t,t=this.columns),wr(this,t,!0),n=fo(this,n);for(let i=0;i<this.rows;i++){const a=new Float64Array(this.columns+1);let s=0;for(;s<t;s++)a[s]=this.data[i][s];for(a[s++]=n[i];s<this.columns+1;s++)a[s]=this.data[i][s-1];this.data[i]=a}return this.columns+=1,this}},ml=new WeakSet,rw=function(t,n){if(this.data=[],Number.isInteger(n)&&n>=0)for(let i=0;i<t;i++)this.data.push(new Float64Array(n));else throw new TypeError("nColumns must be a positive integer");this.rows=t,this.columns=n},Bs);F7(Ee,J);var dn;const Uh=class Uh extends Ee{constructor(t){super();Lf(this,dn);if(J.isMatrix(t)){if(!t.isSymmetric())throw new TypeError("not symmetric data");jl(this,dn,J.copy(t,new J(t.rows,t.rows)))}else if(Number.isInteger(t)&&t>=0)jl(this,dn,new J(t,t));else if(jl(this,dn,new J(t)),!this.isSymmetric())throw new TypeError("not symmetric data")}get size(){return _r(this,dn).size}get rows(){return _r(this,dn).rows}get columns(){return _r(this,dn).columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(t){return J.isMatrix(t)&&t.klassType==="SymmetricMatrix"}static zeros(t){return new this(t)}static ones(t){return new this(t).fill(1)}clone(){const t=new Uh(this.diagonalSize);for(const[n,i,a]of this.upperRightEntries())t.set(n,i,a);return t}toMatrix(){return new J(this)}get(t,n){return _r(this,dn).get(t,n)}set(t,n,i){return _r(this,dn).set(t,n,i),_r(this,dn).set(n,t,i),this}removeCross(t){return _r(this,dn).removeRow(t),_r(this,dn).removeColumn(t),this}addCross(t,n){n===void 0&&(n=t,t=this.diagonalSize);const i=n.slice();return i.splice(t,1),_r(this,dn).addRow(t,i),_r(this,dn).addColumn(t,n),this}applyMask(t){if(t.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");const n=[];for(const[i,a]of t.entries())a||n.push(i);n.reverse();for(const i of n)this.removeCross(i);return this}toCompact(){const{diagonalSize:t}=this,n=new Array(t*(t+1)/2);for(let i=0,a=0,s=0;s<n.length;s++)n[s]=this.get(a,i),++i>=t&&(i=++a);return n}static fromCompact(t){const n=t.length,i=(Math.sqrt(8*n+1)-1)/2;if(!Number.isInteger(i))throw new TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(t)}`);const a=new Uh(i);for(let s=0,o=0,A=0;A<n;A++)a.set(s,o,t[A]),++s>=i&&(s=++o);return a}*upperRightEntries(){for(let t=0,n=0;t<this.diagonalSize;void 0){const i=this.get(t,n);yield[t,n,i],++n>=this.diagonalSize&&(n=++t)}}*upperRightValues(){for(let t=0,n=0;t<this.diagonalSize;void 0)yield this.get(t,n),++n>=this.diagonalSize&&(n=++t)}};dn=new WeakMap;let ms=Uh;ms.prototype.klassType="SymmetricMatrix";class Md extends ms{static isDistanceMatrix(e){return ms.isSymmetricMatrix(e)&&e.klassSubType==="DistanceMatrix"}constructor(e){if(super(e),!this.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix")}set(e,t,n){return e===t&&(n=0),super.set(e,t,n)}addCross(e,t){return t===void 0&&(t=e,e=this.diagonalSize),t=t.slice(),t[e]=0,super.addCross(e,t)}toSymmetricMatrix(){return new ms(this)}clone(){const e=new Md(this.diagonalSize);for(const[t,n,i]of this.upperRightEntries())t!==n&&e.set(t,n,i);return e}toCompact(){const{diagonalSize:e}=this,t=(e-1)*e/2,n=new Array(t);for(let i=1,a=0,s=0;s<n.length;s++)n[s]=this.get(a,i),++i>=e&&(i=++a+1);return n}static fromCompact(e){const t=e.length;if(t===0)return new this(0);const n=(Math.sqrt(8*t+1)+1)/2;if(!Number.isInteger(n))throw new TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(e)}`);const i=new this(n);for(let a=1,s=0,o=0;o<t;o++)i.set(a,s,e[o]),++a>=n&&(a=++s+1);return i}}Md.prototype.klassSubType="DistanceMatrix";class Yi extends Ee{constructor(e,t,n){super(),this.matrix=e,this.rows=t,this.columns=n}}class $7 extends Yi{constructor(e,t){wr(e,t),super(e,e.rows,1),this.column=t}set(e,t,n){return this.matrix.set(e,this.column,n),this}get(e){return this.matrix.get(e,this.column)}}class W7 extends Yi{constructor(e,t){xB(e,t),super(e,e.rows,t.length),this.columnIndices=t}set(e,t,n){return this.matrix.set(e,this.columnIndices[t],n),this}get(e,t){return this.matrix.get(e,this.columnIndices[t])}}class q7 extends Yi{constructor(e){super(e,e.rows,e.columns)}set(e,t,n){return this.matrix.set(e,this.columns-t-1,n),this}get(e,t){return this.matrix.get(e,this.columns-t-1)}}class Y7 extends Yi{constructor(e){super(e,e.rows,e.columns)}set(e,t,n){return this.matrix.set(this.rows-e-1,t,n),this}get(e,t){return this.matrix.get(this.rows-e-1,t)}}class X7 extends Yi{constructor(e,t){mr(e,t),super(e,1,e.columns),this.row=t}set(e,t,n){return this.matrix.set(this.row,t,n),this}get(e,t){return this.matrix.get(this.row,t)}}class Z7 extends Yi{constructor(e,t){EB(e,t),super(e,t.length,e.columns),this.rowIndices=t}set(e,t,n){return this.matrix.set(this.rowIndices[e],t,n),this}get(e,t){return this.matrix.get(this.rowIndices[e],t)}}class Iu extends Yi{constructor(e,t,n){EB(e,t),xB(e,n),super(e,t.length,n.length),this.rowIndices=t,this.columnIndices=n}set(e,t,n){return this.matrix.set(this.rowIndices[e],this.columnIndices[t],n),this}get(e,t){return this.matrix.get(this.rowIndices[e],this.columnIndices[t])}}class J7 extends Yi{constructor(e,t,n,i,a){nw(e,t,n,i,a),super(e,n-t+1,a-i+1),this.startRow=t,this.startColumn=i}set(e,t,n){return this.matrix.set(this.startRow+e,this.startColumn+t,n),this}get(e,t){return this.matrix.get(this.startRow+e,this.startColumn+t)}}class eY extends Yi{constructor(e){super(e,e.columns,e.rows)}set(e,t,n){return this.matrix.set(t,e,n),this}get(e,t){return this.matrix.get(t,e)}}class nQ extends Ee{constructor(e,t={}){const{rows:n=1}=t;if(e.length%n!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=n,this.columns=e.length/n,this.data=e}set(e,t,n){let i=this._calculateIndex(e,t);return this.data[i]=n,this}get(e,t){let n=this._calculateIndex(e,t);return this.data[n]}_calculateIndex(e,t){return e*this.columns+t}}class cr extends Ee{constructor(e){super(),this.data=e,this.rows=e.length,this.columns=e[0].length}set(e,t,n){return this.data[e][t]=n,this}get(e,t){return this.data[e][t]}}function tY(r,e){if(Gn.isAnyArray(r))return r[0]&&Gn.isAnyArray(r[0])?new cr(r):new nQ(r,e);throw new Error("the argument is not an array")}class Od{constructor(e){e=cr.checkMatrix(e);let t=e.clone(),n=t.rows,i=t.columns,a=new Float64Array(n),s=1,o,A,l,c,u,h,d,f,g;for(o=0;o<n;o++)a[o]=o;for(f=new Float64Array(n),A=0;A<i;A++){for(o=0;o<n;o++)f[o]=t.get(o,A);for(o=0;o<n;o++){for(g=Math.min(o,A),u=0,l=0;l<g;l++)u+=t.get(o,l)*f[l];f[o]-=u,t.set(o,A,f[o])}for(c=A,o=A+1;o<n;o++)Math.abs(f[o])>Math.abs(f[c])&&(c=o);if(c!==A){for(l=0;l<i;l++)h=t.get(c,l),t.set(c,l,t.get(A,l)),t.set(A,l,h);d=a[c],a[c]=a[A],a[A]=d,s=-s}if(A<n&&t.get(A,A)!==0)for(o=A+1;o<n;o++)t.set(o,A,t.get(o,A)/t.get(A,A))}this.LU=t,this.pivotVector=a,this.pivotSign=s}isSingular(){let e=this.LU,t=e.columns;for(let n=0;n<t;n++)if(e.get(n,n)===0)return!0;return!1}solve(e){e=J.checkMatrix(e);let t=this.LU;if(t.rows!==e.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let i=e.columns,a=e.subMatrixRow(this.pivotVector,0,i-1),s=t.columns,o,A,l;for(l=0;l<s;l++)for(o=l+1;o<s;o++)for(A=0;A<i;A++)a.set(o,A,a.get(o,A)-a.get(l,A)*t.get(o,l));for(l=s-1;l>=0;l--){for(A=0;A<i;A++)a.set(l,A,a.get(l,A)/t.get(l,l));for(o=0;o<l;o++)for(A=0;A<i;A++)a.set(o,A,a.get(o,A)-a.get(l,A)*t.get(o,l))}return a}get determinant(){let e=this.LU;if(!e.isSquare())throw new Error("Matrix must be square");let t=this.pivotSign,n=e.columns;for(let i=0;i<n;i++)t*=e.get(i,i);return t}get lowerTriangularMatrix(){let e=this.LU,t=e.rows,n=e.columns,i=new J(t,n);for(let a=0;a<t;a++)for(let s=0;s<n;s++)a>s?i.set(a,s,e.get(a,s)):a===s?i.set(a,s,1):i.set(a,s,0);return i}get upperTriangularMatrix(){let e=this.LU,t=e.rows,n=e.columns,i=new J(t,n);for(let a=0;a<t;a++)for(let s=0;s<n;s++)a<=s?i.set(a,s,e.get(a,s)):i.set(a,s,0);return i}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function Li(r,e){let t=0;return Math.abs(r)>Math.abs(e)?(t=e/r,Math.abs(r)*Math.sqrt(1+t*t)):e!==0?(t=r/e,Math.abs(e)*Math.sqrt(1+t*t)):0}class CB{constructor(e){e=cr.checkMatrix(e);let t=e.clone(),n=e.rows,i=e.columns,a=new Float64Array(i),s,o,A,l;for(A=0;A<i;A++){let c=0;for(s=A;s<n;s++)c=Li(c,t.get(s,A));if(c!==0){for(t.get(A,A)<0&&(c=-c),s=A;s<n;s++)t.set(s,A,t.get(s,A)/c);for(t.set(A,A,t.get(A,A)+1),o=A+1;o<i;o++){for(l=0,s=A;s<n;s++)l+=t.get(s,A)*t.get(s,o);for(l=-l/t.get(A,A),s=A;s<n;s++)t.set(s,o,t.get(s,o)+l*t.get(s,A))}}a[A]=-c}this.QR=t,this.Rdiag=a}solve(e){e=J.checkMatrix(e);let t=this.QR,n=t.rows;if(e.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let i=e.columns,a=e.clone(),s=t.columns,o,A,l,c;for(l=0;l<s;l++)for(A=0;A<i;A++){for(c=0,o=l;o<n;o++)c+=t.get(o,l)*a.get(o,A);for(c=-c/t.get(l,l),o=l;o<n;o++)a.set(o,A,a.get(o,A)+c*t.get(o,l))}for(l=s-1;l>=0;l--){for(A=0;A<i;A++)a.set(l,A,a.get(l,A)/this.Rdiag[l]);for(o=0;o<l;o++)for(A=0;A<i;A++)a.set(o,A,a.get(o,A)-a.get(l,A)*t.get(o,l))}return a.subMatrix(0,s-1,0,i-1)}isFullRank(){let e=this.QR.columns;for(let t=0;t<e;t++)if(this.Rdiag[t]===0)return!1;return!0}get upperTriangularMatrix(){let e=this.QR,t=e.columns,n=new J(t,t),i,a;for(i=0;i<t;i++)for(a=0;a<t;a++)i<a?n.set(i,a,e.get(i,a)):i===a?n.set(i,a,this.Rdiag[i]):n.set(i,a,0);return n}get orthogonalMatrix(){let e=this.QR,t=e.rows,n=e.columns,i=new J(t,n),a,s,o,A;for(o=n-1;o>=0;o--){for(a=0;a<t;a++)i.set(a,o,0);for(i.set(o,o,1),s=o;s<n;s++)if(e.get(o,o)!==0){for(A=0,a=o;a<t;a++)A+=e.get(a,o)*i.get(a,s);for(A=-A/e.get(o,o),a=o;a<t;a++)i.set(a,s,i.get(a,s)+A*e.get(a,o))}}return i}}let Ko=class{constructor(e,t={}){if(e=cr.checkMatrix(e),e.isEmpty())throw new Error("Matrix must be non-empty");let n=e.rows,i=e.columns;const{computeLeftSingularVectors:a=!0,computeRightSingularVectors:s=!0,autoTranspose:o=!1}=t;let A=!!a,l=!!s,c=!1,u;if(n<i)if(!o)u=e.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{u=e.transpose(),n=u.rows,i=u.columns,c=!0;let C=A;A=l,l=C}else u=e.clone();let h=Math.min(n,i),d=Math.min(n+1,i),f=new Float64Array(d),g=new J(n,h),v=new J(i,i),p=new Float64Array(i),y=new Float64Array(n),m=new Float64Array(d);for(let C=0;C<d;C++)m[C]=C;let w=Math.min(n-1,i),B=Math.max(0,Math.min(i-2,n)),b=Math.max(w,B);for(let C=0;C<b;C++){if(C<w){f[C]=0;for(let F=C;F<n;F++)f[C]=Li(f[C],u.get(F,C));if(f[C]!==0){u.get(C,C)<0&&(f[C]=-f[C]);for(let F=C;F<n;F++)u.set(F,C,u.get(F,C)/f[C]);u.set(C,C,u.get(C,C)+1)}f[C]=-f[C]}for(let F=C+1;F<i;F++){if(C<w&&f[C]!==0){let M=0;for(let T=C;T<n;T++)M+=u.get(T,C)*u.get(T,F);M=-M/u.get(C,C);for(let T=C;T<n;T++)u.set(T,F,u.get(T,F)+M*u.get(T,C))}p[F]=u.get(C,F)}if(A&&C<w)for(let F=C;F<n;F++)g.set(F,C,u.get(F,C));if(C<B){p[C]=0;for(let F=C+1;F<i;F++)p[C]=Li(p[C],p[F]);if(p[C]!==0){p[C+1]<0&&(p[C]=0-p[C]);for(let F=C+1;F<i;F++)p[F]/=p[C];p[C+1]+=1}if(p[C]=-p[C],C+1<n&&p[C]!==0){for(let F=C+1;F<n;F++)y[F]=0;for(let F=C+1;F<n;F++)for(let M=C+1;M<i;M++)y[F]+=p[M]*u.get(F,M);for(let F=C+1;F<i;F++){let M=-p[F]/p[C+1];for(let T=C+1;T<n;T++)u.set(T,F,u.get(T,F)+M*y[T])}}if(l)for(let F=C+1;F<i;F++)v.set(F,C,p[F])}}let E=Math.min(i,n+1);if(w<i&&(f[w]=u.get(w,w)),n<E&&(f[E-1]=0),B+1<E&&(p[B]=u.get(B,E-1)),p[E-1]=0,A){for(let C=w;C<h;C++){for(let F=0;F<n;F++)g.set(F,C,0);g.set(C,C,1)}for(let C=w-1;C>=0;C--)if(f[C]!==0){for(let F=C+1;F<h;F++){let M=0;for(let T=C;T<n;T++)M+=g.get(T,C)*g.get(T,F);M=-M/g.get(C,C);for(let T=C;T<n;T++)g.set(T,F,g.get(T,F)+M*g.get(T,C))}for(let F=C;F<n;F++)g.set(F,C,-g.get(F,C));g.set(C,C,1+g.get(C,C));for(let F=0;F<C-1;F++)g.set(F,C,0)}else{for(let F=0;F<n;F++)g.set(F,C,0);g.set(C,C,1)}}if(l)for(let C=i-1;C>=0;C--){if(C<B&&p[C]!==0)for(let F=C+1;F<i;F++){let M=0;for(let T=C+1;T<i;T++)M+=v.get(T,C)*v.get(T,F);M=-M/v.get(C+1,C);for(let T=C+1;T<i;T++)v.set(T,F,v.get(T,F)+M*v.get(T,C))}for(let F=0;F<i;F++)v.set(F,C,0);v.set(C,C,1)}let x=E-1,S=Number.EPSILON;for(;E>0;){let C,F;for(C=E-2;C>=-1&&C!==-1;C--){const M=Number.MIN_VALUE+S*Math.abs(f[C]+Math.abs(f[C+1]));if(Math.abs(p[C])<=M||Number.isNaN(p[C])){p[C]=0;break}}if(C===E-2)F=4;else{let M;for(M=E-1;M>=C&&M!==C;M--){let T=(M!==E?Math.abs(p[M]):0)+(M!==C+1?Math.abs(p[M-1]):0);if(Math.abs(f[M])<=S*T){f[M]=0;break}}M===C?F=3:M===E-1?F=1:(F=2,C=M)}switch(C++,F){case 1:{let M=p[E-2];p[E-2]=0;for(let T=E-2;T>=C;T--){let O=Li(f[T],M),_=f[T]/O,Q=M/O;if(f[T]=O,T!==C&&(M=-Q*p[T-1],p[T-1]=_*p[T-1]),l)for(let L=0;L<i;L++)O=_*v.get(L,T)+Q*v.get(L,E-1),v.set(L,E-1,-Q*v.get(L,T)+_*v.get(L,E-1)),v.set(L,T,O)}break}case 2:{let M=p[C-1];p[C-1]=0;for(let T=C;T<E;T++){let O=Li(f[T],M),_=f[T]/O,Q=M/O;if(f[T]=O,M=-Q*p[T],p[T]=_*p[T],A)for(let L=0;L<n;L++)O=_*g.get(L,T)+Q*g.get(L,C-1),g.set(L,C-1,-Q*g.get(L,T)+_*g.get(L,C-1)),g.set(L,T,O)}break}case 3:{const M=Math.max(Math.abs(f[E-1]),Math.abs(f[E-2]),Math.abs(p[E-2]),Math.abs(f[C]),Math.abs(p[C])),T=f[E-1]/M,O=f[E-2]/M,_=p[E-2]/M,Q=f[C]/M,L=p[C]/M,k=((O+T)*(O-T)+_*_)/2,U=T*_*(T*_);let D=0;(k!==0||U!==0)&&(k<0?D=0-Math.sqrt(k*k+U):D=Math.sqrt(k*k+U),D=U/(k+D));let j=(Q+T)*(Q-T)+D,X=Q*L;for(let W=C;W<E-1;W++){let Y=Li(j,X);Y===0&&(Y=Number.MIN_VALUE);let se=j/Y,te=X/Y;if(W!==C&&(p[W-1]=Y),j=se*f[W]+te*p[W],p[W]=se*p[W]-te*f[W],X=te*f[W+1],f[W+1]=se*f[W+1],l)for(let ne=0;ne<i;ne++)Y=se*v.get(ne,W)+te*v.get(ne,W+1),v.set(ne,W+1,-te*v.get(ne,W)+se*v.get(ne,W+1)),v.set(ne,W,Y);if(Y=Li(j,X),Y===0&&(Y=Number.MIN_VALUE),se=j/Y,te=X/Y,f[W]=Y,j=se*p[W]+te*f[W+1],f[W+1]=-te*p[W]+se*f[W+1],X=te*p[W+1],p[W+1]=se*p[W+1],A&&W<n-1)for(let ne=0;ne<n;ne++)Y=se*g.get(ne,W)+te*g.get(ne,W+1),g.set(ne,W+1,-te*g.get(ne,W)+se*g.get(ne,W+1)),g.set(ne,W,Y)}p[E-2]=j;break}case 4:{if(f[C]<=0&&(f[C]=f[C]<0?-f[C]:0,l))for(let M=0;M<=x;M++)v.set(M,C,-v.get(M,C));for(;C<x&&!(f[C]>=f[C+1]);){let M=f[C];if(f[C]=f[C+1],f[C+1]=M,l&&C<i-1)for(let T=0;T<i;T++)M=v.get(T,C+1),v.set(T,C+1,v.get(T,C)),v.set(T,C,M);if(A&&C<n-1)for(let T=0;T<n;T++)M=g.get(T,C+1),g.set(T,C+1,g.get(T,C)),g.set(T,C,M);C++}E--;break}}}if(c){let C=v;v=g,g=C}this.m=n,this.n=i,this.s=f,this.U=g,this.V=v}solve(e){let t=e,n=this.threshold,i=this.s.length,a=J.zeros(i,i);for(let h=0;h<i;h++)Math.abs(this.s[h])<=n?a.set(h,h,0):a.set(h,h,1/this.s[h]);let s=this.U,o=this.rightSingularVectors,A=o.mmul(a),l=o.rows,c=s.rows,u=J.zeros(l,c);for(let h=0;h<l;h++)for(let d=0;d<c;d++){let f=0;for(let g=0;g<i;g++)f+=A.get(h,g)*s.get(d,g);u.set(h,d,f)}return u.mmul(t)}solveForDiagonal(e){return this.solve(J.diag(e))}inverse(){let e=this.V,t=this.threshold,n=e.rows,i=e.columns,a=new J(n,this.s.length);for(let c=0;c<n;c++)for(let u=0;u<i;u++)Math.abs(this.s[u])>t&&a.set(c,u,e.get(c,u)/this.s[u]);let s=this.U,o=s.rows,A=s.columns,l=new J(n,o);for(let c=0;c<n;c++)for(let u=0;u<o;u++){let h=0;for(let d=0;d<A;d++)h+=a.get(c,d)*s.get(u,d);l.set(c,u,h)}return l}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let e=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,t=0,n=this.s;for(let i=0,a=n.length;i<a;i++)n[i]>e&&t++;return t}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return J.diag(this.s)}};function nY(r,e=!1){return r=cr.checkMatrix(r),e?new Ko(r).inverse():rQ(r,J.eye(r.rows))}function rQ(r,e,t=!1){return r=cr.checkMatrix(r),e=cr.checkMatrix(e),t?new Ko(r).solve(e):r.isSquare()?new Od(r).solve(e):new CB(r).solve(e)}function _u(r){if(r=J.checkMatrix(r),r.isSquare()){if(r.columns===0)return 1;let e,t,n,i;if(r.columns===2)return e=r.get(0,0),t=r.get(0,1),n=r.get(1,0),i=r.get(1,1),e*i-t*n;if(r.columns===3){let a,s,o;return a=new Iu(r,[1,2],[1,2]),s=new Iu(r,[1,2],[0,2]),o=new Iu(r,[1,2],[0,1]),e=r.get(0,0),t=r.get(0,1),n=r.get(0,2),e*_u(a)-t*_u(s)+n*_u(o)}else return new Od(r).determinant}else throw Error("determinant can only be calculated for a square matrix")}function rY(r,e){let t=[];for(let n=0;n<r;n++)n!==e&&t.push(n);return t}function iY(r,e,t,n=1e-9,i=1e-9){if(r>i)return new Array(e.rows+1).fill(0);{let a=e.addRow(t,[0]);for(let s=0;s<a.rows;s++)Math.abs(a.get(s,0))<n&&a.set(s,0,0);return a.to1DArray()}}function aY(r,e={}){const{thresholdValue:t=1e-9,thresholdError:n=1e-9}=e;r=J.checkMatrix(r);let i=r.rows,a=new J(i,i);for(let s=0;s<i;s++){let o=J.columnVector(r.getRow(s)),A=r.subMatrixRow(rY(i,s)).transpose(),c=new Ko(A).solve(o),u=J.sub(o,A.mmul(c)).abs().max();a.setRow(s,iY(u,c,s,t,n))}return a}function sY(r,e=Number.EPSILON){if(r=J.checkMatrix(r),r.isEmpty())return r.transpose();let t=new Ko(r,{autoTranspose:!0}),n=t.leftSingularVectors,i=t.rightSingularVectors,a=t.diagonal;for(let s=0;s<a.length;s++)Math.abs(a[s])>e?a[s]=1/a[s]:a[s]=0;return i.mmul(J.diag(a).mmul(n.transpose()))}function oY(r,e=r,t={}){r=new J(r);let n=!1;if(typeof e=="object"&&!J.isMatrix(e)&&!Gn.isAnyArray(e)?(t=e,e=r,n=!0):e=new J(e),r.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:i=!0}=t;i&&(r=r.center("column"),n||(e=e.center("column")));const a=r.transpose().mmul(e);for(let s=0;s<a.rows;s++)for(let o=0;o<a.columns;o++)a.set(s,o,a.get(s,o)*(1/(r.rows-1)));return a}function AY(r,e=r,t={}){r=new J(r);let n=!1;if(typeof e=="object"&&!J.isMatrix(e)&&!Gn.isAnyArray(e)?(t=e,e=r,n=!0):e=new J(e),r.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:i=!0,scale:a=!0}=t;i&&(r.center("column"),n||e.center("column")),a&&(r.scale("column"),n||e.scale("column"));const s=r.standardDeviation("column",{unbiased:!0}),o=n?s:e.standardDeviation("column",{unbiased:!0}),A=r.transpose().mmul(e);for(let l=0;l<A.rows;l++)for(let c=0;c<A.columns;c++)A.set(l,c,A.get(l,c)*(1/(s[l]*o[c]))*(1/(r.rows-1)));return A}class iQ{constructor(e,t={}){const{assumeSymmetric:n=!1}=t;if(e=cr.checkMatrix(e),!e.isSquare())throw new Error("Matrix is not a square matrix");if(e.isEmpty())throw new Error("Matrix must be non-empty");let i=e.columns,a=new J(i,i),s=new Float64Array(i),o=new Float64Array(i),A=e,l,c,u=!1;if(n?u=!0:u=e.isSymmetric(),u){for(l=0;l<i;l++)for(c=0;c<i;c++)a.set(l,c,A.get(l,c));lY(i,o,s,a),cY(i,o,s,a)}else{let h=new J(i,i),d=new Float64Array(i);for(c=0;c<i;c++)for(l=0;l<i;l++)h.set(l,c,A.get(l,c));uY(i,h,d,a),hY(i,o,s,a,h)}this.n=i,this.e=o,this.d=s,this.V=a}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let e=this.n,t=this.e,n=this.d,i=new J(e,e),a,s;for(a=0;a<e;a++){for(s=0;s<e;s++)i.set(a,s,0);i.set(a,a,n[a]),t[a]>0?i.set(a,a+1,t[a]):t[a]<0&&i.set(a,a-1,t[a])}return i}}function lY(r,e,t,n){let i,a,s,o,A,l,c,u;for(A=0;A<r;A++)t[A]=n.get(r-1,A);for(o=r-1;o>0;o--){for(u=0,s=0,l=0;l<o;l++)u=u+Math.abs(t[l]);if(u===0)for(e[o]=t[o-1],A=0;A<o;A++)t[A]=n.get(o-1,A),n.set(o,A,0),n.set(A,o,0);else{for(l=0;l<o;l++)t[l]/=u,s+=t[l]*t[l];for(i=t[o-1],a=Math.sqrt(s),i>0&&(a=-a),e[o]=u*a,s=s-i*a,t[o-1]=i-a,A=0;A<o;A++)e[A]=0;for(A=0;A<o;A++){for(i=t[A],n.set(A,o,i),a=e[A]+n.get(A,A)*i,l=A+1;l<=o-1;l++)a+=n.get(l,A)*t[l],e[l]+=n.get(l,A)*i;e[A]=a}for(i=0,A=0;A<o;A++)e[A]/=s,i+=e[A]*t[A];for(c=i/(s+s),A=0;A<o;A++)e[A]-=c*t[A];for(A=0;A<o;A++){for(i=t[A],a=e[A],l=A;l<=o-1;l++)n.set(l,A,n.get(l,A)-(i*e[l]+a*t[l]));t[A]=n.get(o-1,A),n.set(o,A,0)}}t[o]=s}for(o=0;o<r-1;o++){if(n.set(r-1,o,n.get(o,o)),n.set(o,o,1),s=t[o+1],s!==0){for(l=0;l<=o;l++)t[l]=n.get(l,o+1)/s;for(A=0;A<=o;A++){for(a=0,l=0;l<=o;l++)a+=n.get(l,o+1)*n.get(l,A);for(l=0;l<=o;l++)n.set(l,A,n.get(l,A)-a*t[l])}}for(l=0;l<=o;l++)n.set(l,o+1,0)}for(A=0;A<r;A++)t[A]=n.get(r-1,A),n.set(r-1,A,0);n.set(r-1,r-1,1),e[0]=0}function cY(r,e,t,n){let i,a,s,o,A,l,c,u,h,d,f,g,v,p,y,m;for(s=1;s<r;s++)e[s-1]=e[s];e[r-1]=0;let w=0,B=0,b=Number.EPSILON;for(l=0;l<r;l++){for(B=Math.max(B,Math.abs(t[l])+Math.abs(e[l])),c=l;c<r&&!(Math.abs(e[c])<=b*B);)c++;if(c>l)do{for(i=t[l],u=(t[l+1]-i)/(2*e[l]),h=Li(u,1),u<0&&(h=-h),t[l]=e[l]/(u+h),t[l+1]=e[l]*(u+h),d=t[l+1],a=i-t[l],s=l+2;s<r;s++)t[s]-=a;for(w=w+a,u=t[c],f=1,g=f,v=f,p=e[l+1],y=0,m=0,s=c-1;s>=l;s--)for(v=g,g=f,m=y,i=f*e[s],a=f*u,h=Li(u,e[s]),e[s+1]=y*h,y=e[s]/h,f=u/h,u=f*t[s]-y*i,t[s+1]=a+y*(f*i+y*t[s]),A=0;A<r;A++)a=n.get(A,s+1),n.set(A,s+1,y*n.get(A,s)+f*a),n.set(A,s,f*n.get(A,s)-y*a);u=-y*m*v*p*e[l]/d,e[l]=y*u,t[l]=f*u}while(Math.abs(e[l])>b*B);t[l]=t[l]+w,e[l]=0}for(s=0;s<r-1;s++){for(A=s,u=t[s],o=s+1;o<r;o++)t[o]<u&&(A=o,u=t[o]);if(A!==s)for(t[A]=t[s],t[s]=u,o=0;o<r;o++)u=n.get(o,s),n.set(o,s,n.get(o,A)),n.set(o,A,u)}}function uY(r,e,t,n){let i=0,a=r-1,s,o,A,l,c,u,h;for(u=i+1;u<=a-1;u++){for(h=0,l=u;l<=a;l++)h=h+Math.abs(e.get(l,u-1));if(h!==0){for(A=0,l=a;l>=u;l--)t[l]=e.get(l,u-1)/h,A+=t[l]*t[l];for(o=Math.sqrt(A),t[u]>0&&(o=-o),A=A-t[u]*o,t[u]=t[u]-o,c=u;c<r;c++){for(s=0,l=a;l>=u;l--)s+=t[l]*e.get(l,c);for(s=s/A,l=u;l<=a;l++)e.set(l,c,e.get(l,c)-s*t[l])}for(l=0;l<=a;l++){for(s=0,c=a;c>=u;c--)s+=t[c]*e.get(l,c);for(s=s/A,c=u;c<=a;c++)e.set(l,c,e.get(l,c)-s*t[c])}t[u]=h*t[u],e.set(u,u-1,h*o)}}for(l=0;l<r;l++)for(c=0;c<r;c++)n.set(l,c,l===c?1:0);for(u=a-1;u>=i+1;u--)if(e.get(u,u-1)!==0){for(l=u+1;l<=a;l++)t[l]=e.get(l,u-1);for(c=u;c<=a;c++){for(o=0,l=u;l<=a;l++)o+=t[l]*n.get(l,c);for(o=o/t[u]/e.get(u,u-1),l=u;l<=a;l++)n.set(l,c,n.get(l,c)+o*t[l])}}}function hY(r,e,t,n,i){let a=r-1,s=0,o=r-1,A=Number.EPSILON,l=0,c=0,u=0,h=0,d=0,f=0,g=0,v=0,p,y,m,w,B,b,E,x,S,C,F,M,T,O,_;for(p=0;p<r;p++)for((p<s||p>o)&&(t[p]=i.get(p,p),e[p]=0),y=Math.max(p-1,0);y<r;y++)c=c+Math.abs(i.get(p,y));for(;a>=s;){for(w=a;w>s&&(f=Math.abs(i.get(w-1,w-1))+Math.abs(i.get(w,w)),f===0&&(f=c),!(Math.abs(i.get(w,w-1))<A*f));)w--;if(w===a)i.set(a,a,i.get(a,a)+l),t[a]=i.get(a,a),e[a]=0,a--,v=0;else if(w===a-1){if(E=i.get(a,a-1)*i.get(a-1,a),u=(i.get(a-1,a-1)-i.get(a,a))/2,h=u*u+E,g=Math.sqrt(Math.abs(h)),i.set(a,a,i.get(a,a)+l),i.set(a-1,a-1,i.get(a-1,a-1)+l),x=i.get(a,a),h>=0){for(g=u>=0?u+g:u-g,t[a-1]=x+g,t[a]=t[a-1],g!==0&&(t[a]=x-E/g),e[a-1]=0,e[a]=0,x=i.get(a,a-1),f=Math.abs(x)+Math.abs(g),u=x/f,h=g/f,d=Math.sqrt(u*u+h*h),u=u/d,h=h/d,y=a-1;y<r;y++)g=i.get(a-1,y),i.set(a-1,y,h*g+u*i.get(a,y)),i.set(a,y,h*i.get(a,y)-u*g);for(p=0;p<=a;p++)g=i.get(p,a-1),i.set(p,a-1,h*g+u*i.get(p,a)),i.set(p,a,h*i.get(p,a)-u*g);for(p=s;p<=o;p++)g=n.get(p,a-1),n.set(p,a-1,h*g+u*n.get(p,a)),n.set(p,a,h*n.get(p,a)-u*g)}else t[a-1]=x+u,t[a]=x+u,e[a-1]=g,e[a]=-g;a=a-2,v=0}else{if(x=i.get(a,a),S=0,E=0,w<a&&(S=i.get(a-1,a-1),E=i.get(a,a-1)*i.get(a-1,a)),v===10){for(l+=x,p=s;p<=a;p++)i.set(p,p,i.get(p,p)-x);f=Math.abs(i.get(a,a-1))+Math.abs(i.get(a-1,a-2)),x=S=.75*f,E=-.4375*f*f}if(v===30&&(f=(S-x)/2,f=f*f+E,f>0)){for(f=Math.sqrt(f),S<x&&(f=-f),f=x-E/((S-x)/2+f),p=s;p<=a;p++)i.set(p,p,i.get(p,p)-f);l+=f,x=S=E=.964}for(v=v+1,B=a-2;B>=w&&(g=i.get(B,B),d=x-g,f=S-g,u=(d*f-E)/i.get(B+1,B)+i.get(B,B+1),h=i.get(B+1,B+1)-g-d-f,d=i.get(B+2,B+1),f=Math.abs(u)+Math.abs(h)+Math.abs(d),u=u/f,h=h/f,d=d/f,!(B===w||Math.abs(i.get(B,B-1))*(Math.abs(h)+Math.abs(d))<A*(Math.abs(u)*(Math.abs(i.get(B-1,B-1))+Math.abs(g)+Math.abs(i.get(B+1,B+1))))));)B--;for(p=B+2;p<=a;p++)i.set(p,p-2,0),p>B+2&&i.set(p,p-3,0);for(m=B;m<=a-1&&(O=m!==a-1,m!==B&&(u=i.get(m,m-1),h=i.get(m+1,m-1),d=O?i.get(m+2,m-1):0,x=Math.abs(u)+Math.abs(h)+Math.abs(d),x!==0&&(u=u/x,h=h/x,d=d/x)),x!==0);m++)if(f=Math.sqrt(u*u+h*h+d*d),u<0&&(f=-f),f!==0){for(m!==B?i.set(m,m-1,-f*x):w!==B&&i.set(m,m-1,-i.get(m,m-1)),u=u+f,x=u/f,S=h/f,g=d/f,h=h/u,d=d/u,y=m;y<r;y++)u=i.get(m,y)+h*i.get(m+1,y),O&&(u=u+d*i.get(m+2,y),i.set(m+2,y,i.get(m+2,y)-u*g)),i.set(m,y,i.get(m,y)-u*x),i.set(m+1,y,i.get(m+1,y)-u*S);for(p=0;p<=Math.min(a,m+3);p++)u=x*i.get(p,m)+S*i.get(p,m+1),O&&(u=u+g*i.get(p,m+2),i.set(p,m+2,i.get(p,m+2)-u*d)),i.set(p,m,i.get(p,m)-u),i.set(p,m+1,i.get(p,m+1)-u*h);for(p=s;p<=o;p++)u=x*n.get(p,m)+S*n.get(p,m+1),O&&(u=u+g*n.get(p,m+2),n.set(p,m+2,n.get(p,m+2)-u*d)),n.set(p,m,n.get(p,m)-u),n.set(p,m+1,n.get(p,m+1)-u*h)}}}if(c!==0){for(a=r-1;a>=0;a--)if(u=t[a],h=e[a],h===0)for(w=a,i.set(a,a,1),p=a-1;p>=0;p--){for(E=i.get(p,p)-u,d=0,y=w;y<=a;y++)d=d+i.get(p,y)*i.get(y,a);if(e[p]<0)g=E,f=d;else if(w=p,e[p]===0?i.set(p,a,E!==0?-d/E:-d/(A*c)):(x=i.get(p,p+1),S=i.get(p+1,p),h=(t[p]-u)*(t[p]-u)+e[p]*e[p],b=(x*f-g*d)/h,i.set(p,a,b),i.set(p+1,a,Math.abs(x)>Math.abs(g)?(-d-E*b)/x:(-f-S*b)/g)),b=Math.abs(i.get(p,a)),A*b*b>1)for(y=p;y<=a;y++)i.set(y,a,i.get(y,a)/b)}else if(h<0)for(w=a-1,Math.abs(i.get(a,a-1))>Math.abs(i.get(a-1,a))?(i.set(a-1,a-1,h/i.get(a,a-1)),i.set(a-1,a,-(i.get(a,a)-u)/i.get(a,a-1))):(_=su(0,-i.get(a-1,a),i.get(a-1,a-1)-u,h),i.set(a-1,a-1,_[0]),i.set(a-1,a,_[1])),i.set(a,a-1,0),i.set(a,a,1),p=a-2;p>=0;p--){for(C=0,F=0,y=w;y<=a;y++)C=C+i.get(p,y)*i.get(y,a-1),F=F+i.get(p,y)*i.get(y,a);if(E=i.get(p,p)-u,e[p]<0)g=E,d=C,f=F;else if(w=p,e[p]===0?(_=su(-C,-F,E,h),i.set(p,a-1,_[0]),i.set(p,a,_[1])):(x=i.get(p,p+1),S=i.get(p+1,p),M=(t[p]-u)*(t[p]-u)+e[p]*e[p]-h*h,T=(t[p]-u)*2*h,M===0&&T===0&&(M=A*c*(Math.abs(E)+Math.abs(h)+Math.abs(x)+Math.abs(S)+Math.abs(g))),_=su(x*d-g*C+h*F,x*f-g*F-h*C,M,T),i.set(p,a-1,_[0]),i.set(p,a,_[1]),Math.abs(x)>Math.abs(g)+Math.abs(h)?(i.set(p+1,a-1,(-C-E*i.get(p,a-1)+h*i.get(p,a))/x),i.set(p+1,a,(-F-E*i.get(p,a)-h*i.get(p,a-1))/x)):(_=su(-d-S*i.get(p,a-1),-f-S*i.get(p,a),g,h),i.set(p+1,a-1,_[0]),i.set(p+1,a,_[1]))),b=Math.max(Math.abs(i.get(p,a-1)),Math.abs(i.get(p,a))),A*b*b>1)for(y=p;y<=a;y++)i.set(y,a-1,i.get(y,a-1)/b),i.set(y,a,i.get(y,a)/b)}for(p=0;p<r;p++)if(p<s||p>o)for(y=p;y<r;y++)n.set(p,y,i.get(p,y));for(y=r-1;y>=s;y--)for(p=s;p<=o;p++){for(g=0,m=s;m<=Math.min(y,o);m++)g=g+n.get(p,m)*i.get(m,y);n.set(p,y,g)}}}function su(r,e,t,n){let i,a;return Math.abs(t)>Math.abs(n)?(i=n/t,a=t+i*n,[(r+i*e)/a,(e-i*r)/a]):(i=t/n,a=n+i*t,[(i*r+e)/a,(i*e-r)/a])}class aQ{constructor(e){if(e=cr.checkMatrix(e),!e.isSymmetric())throw new Error("Matrix is not symmetric");let t=e,n=t.rows,i=new J(n,n),a=!0,s,o,A;for(o=0;o<n;o++){let l=0;for(A=0;A<o;A++){let c=0;for(s=0;s<A;s++)c+=i.get(A,s)*i.get(o,s);c=(t.get(o,A)-c)/i.get(A,A),i.set(o,A,c),l=l+c*c}for(l=t.get(o,o)-l,a&&(a=l>0),i.set(o,o,Math.sqrt(Math.max(l,0))),A=o+1;A<n;A++)i.set(o,A,0)}this.L=i,this.positiveDefinite=a}isPositiveDefinite(){return this.positiveDefinite}solve(e){e=cr.checkMatrix(e);let t=this.L,n=t.rows;if(e.rows!==n)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let i=e.columns,a=e.clone(),s,o,A;for(A=0;A<n;A++)for(o=0;o<i;o++){for(s=0;s<A;s++)a.set(A,o,a.get(A,o)-a.get(s,o)*t.get(A,s));a.set(A,o,a.get(A,o)/t.get(A,A))}for(A=n-1;A>=0;A--)for(o=0;o<i;o++){for(s=A+1;s<n;s++)a.set(A,o,a.get(A,o)-a.get(s,o)*t.get(s,A));a.set(A,o,a.get(A,o)/t.get(A,A))}return a}get lowerTriangularMatrix(){return this.L}}class sQ{constructor(e,t={}){e=cr.checkMatrix(e);let{Y:n}=t;const{scaleScores:i=!1,maxIterations:a=1e3,terminationCriteria:s=1e-10}=t;let o;if(n){if(Gn.isAnyArray(n)&&typeof n[0]=="number"?n=J.columnVector(n):n=cr.checkMatrix(n),n.rows!==e.rows)throw new Error("Y should have the same number of rows as X");o=n.getColumnVector(0)}else o=e.getColumnVector(0);let A=1,l,c,u,h;for(let d=0;d<a&&A>s;d++)u=e.transpose().mmul(o).div(o.transpose().mmul(o).get(0,0)),u=u.div(u.norm()),l=e.mmul(u).div(u.transpose().mmul(u).get(0,0)),d>0&&(A=l.clone().sub(h).pow(2).sum()),h=l.clone(),n?(c=n.transpose().mmul(l).div(l.transpose().mmul(l).get(0,0)),c=c.div(c.norm()),o=n.mmul(c).div(c.transpose().mmul(c).get(0,0))):o=l;if(n){let d=e.transpose().mmul(l).div(l.transpose().mmul(l).get(0,0));d=d.div(d.norm());let f=e.clone().sub(l.clone().mmul(d.transpose())),g=o.transpose().mmul(l).div(l.transpose().mmul(l).get(0,0)),v=n.clone().sub(l.clone().mulS(g.get(0,0)).mmul(c.transpose()));this.t=l,this.p=d.transpose(),this.w=u.transpose(),this.q=c,this.u=o,this.s=l.transpose().mmul(l),this.xResidual=f,this.yResidual=v,this.betas=g}else this.w=u.transpose(),this.s=l.transpose().mmul(l).sqrt(),i?this.t=l.clone().div(this.s.get(0,0)):this.t=l,this.xResidual=e.sub(l.mmul(u.transpose()))}}Oe.AbstractMatrix=Ee;Oe.CHO=aQ;Oe.CholeskyDecomposition=aQ;Oe.DistanceMatrix=Md;Oe.EVD=iQ;Oe.EigenvalueDecomposition=iQ;Oe.LU=Od;Oe.LuDecomposition=Od;var oQ=Oe.Matrix=J;Oe.MatrixColumnSelectionView=W7;Oe.MatrixColumnView=$7;Oe.MatrixFlipColumnView=q7;Oe.MatrixFlipRowView=Y7;Oe.MatrixRowSelectionView=Z7;Oe.MatrixRowView=X7;Oe.MatrixSelectionView=Iu;Oe.MatrixSubView=J7;Oe.MatrixTransposeView=eY;Oe.NIPALS=sQ;Oe.Nipals=sQ;Oe.QR=CB;Oe.QrDecomposition=CB;Oe.SVD=Ko;var dY=Oe.SingularValueDecomposition=Ko;Oe.SymmetricMatrix=ms;Oe.WrapperMatrix1D=nQ;Oe.WrapperMatrix2D=cr;Oe.correlation=AY;Oe.covariance=oY;var vC=Oe.default=J;Oe.determinant=_u;Oe.inverse=nY;Oe.linearDependencies=aY;Oe.pseudoInverse=sY;Oe.solve=rQ;Oe.wrap=tY;const Ba=oQ,AQ=dY;vC.Matrix&&vC.Matrix;const fY={center:[0,0],linkDistance:50};class lQ{constructor(e={}){this.options=e,this.id="mds",this.options=Object.assign(Object.assign({},fY),e)}execute(e,t){return Ce(this,void 0,void 0,function*(){return this.genericMDSLayout(!1,e,t)})}assign(e,t){return Ce(this,void 0,void 0,function*(){yield this.genericMDSLayout(!0,e,t)})}genericMDSLayout(e,t,n){return Ce(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),n),{center:a=[0,0],linkDistance:s=50}=i,o=t.getAllNodes(),A=t.getAllEdges();if(!(o!=null&&o.length)||o.length===1)return Ps(t,e,a);const l=qL({nodes:o,edges:A}),c=WL(l);gY(c);const u=vq(c,s),h=vY(u),d=[];return h.forEach((g,v)=>{const p=ar(o[v]);p.data.x=g[0]+a[0],p.data.y=g[1]+a[1],d.push(p)}),e&&d.forEach(g=>t.mergeNodeData(g.id,{x:g.data.x,y:g.data.y})),{nodes:d,edges:A}})}}const gY=r=>{let e=-999999;r.forEach(t=>{t.forEach(n=>{n!==1/0&&e<n&&(e=n)})}),r.forEach((t,n)=>{t.forEach((i,a)=>{i===1/0&&(r[n][a]=e)})})},vY=r=>{const t=Ba.mul(Ba.pow(r,2),-.5),n=t.mean("row"),i=t.mean("column"),a=t.mean();t.add(a).subRowVector(n).subColumnVector(i);const s=new AQ(t),o=Ba.sqrt(s.diagonalMatrix).diagonal();return s.leftSingularVectors.toJSON().map(A=>Ba.mul([A],[o]).toJSON()[0].splice(0,2))};function iw(r){return!!r.tick&&!!r.stop}const pY={gForce:!0,force2:!0,d3force:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0},yY={center:[0,0],comboPadding:10,treeKey:"combo"};class mY{constructor(e={}){this.options=e,this.id="comboCombined",this.options=Object.assign(Object.assign({},yY),e)}execute(e,t){return Ce(this,void 0,void 0,function*(){return this.genericComboCombinedLayout(!1,e,t)})}assign(e,t){return Ce(this,void 0,void 0,function*(){yield this.genericComboCombinedLayout(!0,e,t)})}genericComboCombinedLayout(e,t,n){return Ce(this,void 0,void 0,function*(){const i=this.initVals(Object.assign(Object.assign({},this.options),n)),{center:a,treeKey:s,outerLayout:o}=i,A=t.getAllNodes().filter(x=>!x.data._isCombo),l=t.getAllNodes().filter(x=>x.data._isCombo),c=t.getAllEdges(),u=A==null?void 0:A.length;if(!u||u===1)return Ps(t,e,a);const h=[],d=new Map;A.forEach(x=>{d.set(x.id,x)});const f=new Map;l.forEach(x=>{f.set(x.id,x)});const g=new Map,v=this.getInnerGraphs(t,s,d,f,c,i,g);yield Promise.all(v);const p=new Map,y=[],m=new Map;let w=!0;t.getRoots(s).forEach(x=>{const S=g.get(x.id),C=f.get(x.id)||d.get(x.id),F={id:x.id,data:Object.assign(Object.assign({},x.data),{x:S.data.x||C.data.x,y:S.data.y||C.data.y,fx:S.data.fx||C.data.fx,fy:S.data.fy||C.data.fy,mass:S.data.mass||C.data.mass,size:S.data.size})};y.push(F),p.set(x.id,!0),!isNaN(F.data.x)&&F.data.x!==0&&!isNaN(F.data.y)&&F.data.y!==0?w=!1:(F.data.x=Math.random()*100,F.data.y=Math.random()*100),J1(t,[x],M=>{M.id!==x.id&&m.set(M.id,x.id)},"TB",s)});const B=[];c.forEach(x=>{const S=m.get(x.source)||x.source,C=m.get(x.target)||x.target;S!==C&&p.has(S)&&p.has(C)&&B.push({id:x.id,source:S,target:C,data:{}})});let b;if(y!=null&&y.length){if(y.length===1)y[0].data.x=a[0],y[0].data.y=a[1];else{const x=new Wt({nodes:y,edges:B}),S=o||new JL;w&&pY[S.id]&&(yield(y.length<100?new lQ:new tw).assign(x));const C=Object.assign({center:a,kg:5,preventOverlap:!0,animate:!1},S.id==="force"?{gravity:1,factor:4,linkDistance:(F,M,T)=>{const O=Math.max(...M.data.size)||32,_=Math.max(...T.data.size)||32;return O/2+_/2+200}}:{});b=yield pC(S,x,C)}g.forEach(x=>{var S;const C=b.nodes.find(T=>T.id===x.id);if(C){const{x:T,y:O}=C.data;x.data.visited=!0,x.data.x=T,x.data.y=O,h.push({id:x.id,data:{x:T,y:O}})}const{x:F,y:M}=x.data;(S=x.data.nodes)===null||S===void 0||S.forEach(T=>{h.push({id:T.id,data:{x:T.data.x+F,y:T.data.y+M}})})}),g.forEach(({data:x})=>{const{x:S,y:C,visited:F,nodes:M}=x;M==null||M.forEach(T=>{if(!F){const O=h.find(_=>_.id===T.id);O.data.x+=S||0,O.data.y+=C||0}})})}return e&&h.forEach(x=>{t.mergeNodeData(x.id,{x:x.data.x,y:x.data.y})}),{nodes:h,edges:c}})}initVals(e){const t=Object.assign({},e),{nodeSize:n,spacing:i,comboPadding:a}=e;let s,o;if(Z(i)?o=()=>i:ie(i)?o=i:o=()=>0,t.spacing=o,!n)s=l=>{const c=o(l);return l.size?Ui(l.size)?((l.size[0]>l.size[1]?l.size[0]:l.size[1])+c)/2:Ot(l.size)?((l.size.width>l.size.height?l.size.width:l.size.height)+c)/2:(l.size+c)/2:32+c/2};else if(ie(n))s=l=>{const c=n(l),u=o(l);return Ui(l.size)?((l.size[0]>l.size[1]?l.size[0]:l.size[1])+u)/2:((c||32)+u)/2};else if(Ui(n)){const c=(n[0]>n[1]?n[0]:n[1])/2;s=u=>c+o(u)/2}else{const l=n/2;s=c=>l+o(c)/2}t.nodeSize=s;let A;return Z(a)?A=()=>a:Ui(a)?A=()=>Math.max.apply(null,a):ie(a)?A=a:A=()=>0,t.comboPadding=A,t}getInnerGraphs(e,t,n,i,a,s,o){const{nodeSize:A,comboPadding:l,spacing:c,innerLayout:u}=s,h=u||new tw({}),d={center:[0,0],preventOverlap:!0,nodeSpacing:c},f=[],g=v=>{let p=(l==null?void 0:l(v))||10;return Ui(p)&&(p=Math.max(...p)),{size:p?[p*2,p*2]:[30,30],padding:p}};return e.getRoots(t).forEach(v=>{o.set(v.id,{id:v.id,data:{nodes:[],size:g(v).size}});let p=Promise.resolve();J1(e,[v],y=>{var m;if(!y.data._isCombo)return;const{size:w,padding:B}=g(y);if(!(!((m=e.getChildren(y.id,t))===null||m===void 0)&&m.length))o.set(y.id,{id:y.id,data:Object.assign(Object.assign({},y.data),{size:w})});else{const b=o.get(y.id);o.set(y.id,{id:y.id,data:Object.assign({nodes:[]},b==null?void 0:b.data)});const E=new Map,x=e.getChildren(y.id,t).map(F=>{if(F.data._isCombo)return o.has(F.id)||o.set(F.id,{id:F.id,data:Object.assign({},F.data)}),E.set(F.id,!0),o.get(F.id);const M=n.get(F.id)||i.get(F.id);return E.set(F.id,!0),{id:F.id,data:Object.assign(Object.assign({},M.data),F.data)}}),S={nodes:x,edges:a.filter(F=>E.has(F.source)&&E.has(F.target))};let C=1/0;x.forEach(F=>{var M;let{size:T}=F.data;T||(T=((M=o.get(F.id))===null||M===void 0?void 0:M.data.size)||(A==null?void 0:A(F))||[30,30]),Z(T)&&(T=[T,T]);const[O,_]=T;C>O&&(C=O),C>_&&(C=_),F.data.size=T}),p=p.then(()=>Ce(this,void 0,void 0,function*(){const F=new Wt(S);yield pC(h,F,d,!0);const{minX:M,minY:T,maxX:O,maxY:_}=pq(x),Q={x:(O+M)/2,y:(_+T)/2};S.nodes.forEach(k=>{k.data.x-=Q.x,k.data.y-=Q.y});const L=[Math.max(O-M,C)+B*2,Math.max(_-T,C)+B*2];o.get(y.id).data.size=L,o.get(y.id).data.nodes=x}))}return!0},"BT",t),f.push(p)}),f}}function pC(r,e,t,n){var i;return Ce(this,void 0,void 0,function*(){return iw(r)?(r.execute(e,t),r.stop(),r.tick((i=t.iterations)!==null&&i!==void 0?i:300)):n?yield r.assign(e,t):yield r.execute(e,t)})}function wY(r,e){var t,n=1;r==null&&(r=0),e==null&&(e=0);function i(){var a,s=t.length,o,A=0,l=0;for(a=0;a<s;++a)o=t[a],A+=o.x,l+=o.y;for(A=(A/s-r)*n,l=(l/s-e)*n,a=0;a<s;++a)o=t[a],o.x-=A,o.y-=l}return i.initialize=function(a){t=a},i.x=function(a){return arguments.length?(r=+a,i):r},i.y=function(a){return arguments.length?(e=+a,i):e},i.strength=function(a){return arguments.length?(n=+a,i):n},i}function jt(r){return function(){return r}}function ba(r){return(r()-.5)*1e-6}function BY(r){return r.x+r.vx}function bY(r){return r.y+r.vy}function EY(r){var e,t,n,i=1,a=1;typeof r!="function"&&(r=jt(r==null?1:+r));function s(){for(var l,c=e.length,u,h,d,f,g,v,p=0;p<a;++p)for(u=Fd(e,BY,bY).visitAfter(o),l=0;l<c;++l)h=e[l],g=t[h.index],v=g*g,d=h.x+h.vx,f=h.y+h.vy,u.visit(y);function y(m,w,B,b,E){var x=m.data,S=m.r,C=g+S;if(x){if(x.index>h.index){var F=d-x.x-x.vx,M=f-x.y-x.vy,T=F*F+M*M;T<C*C&&(F===0&&(F=ba(n),T+=F*F),M===0&&(M=ba(n),T+=M*M),T=(C-(T=Math.sqrt(T)))/T*i,h.vx+=(F*=T)*(C=(S*=S)/(v+S)),h.vy+=(M*=T)*C,x.vx-=F*(C=1-C),x.vy-=M*C)}return}return w>d+C||b<d-C||B>f+C||E<f-C}}function o(l){if(l.data)return l.r=t[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function A(){if(e){var l,c=e.length,u;for(t=new Array(c),l=0;l<c;++l)u=e[l],t[u.index]=+r(u,l,e)}}return s.initialize=function(l,c){e=l,n=c,A()},s.iterations=function(l){return arguments.length?(a=+l,s):a},s.strength=function(l){return arguments.length?(i=+l,s):i},s.radius=function(l){return arguments.length?(r=typeof l=="function"?l:jt(+l),A(),s):r},s}function xY(r){return r.index}function yC(r,e){var t=r.get(e);if(!t)throw new Error("node not found: "+e);return t}function CY(r){var e=xY,t=u,n,i=jt(30),a,s,o,A,l,c=1;r==null&&(r=[]);function u(v){return 1/Math.min(o[v.source.index],o[v.target.index])}function h(v){for(var p=0,y=r.length;p<c;++p)for(var m=0,w,B,b,E,x,S,C;m<y;++m)w=r[m],B=w.source,b=w.target,E=b.x+b.vx-B.x-B.vx||ba(l),x=b.y+b.vy-B.y-B.vy||ba(l),S=Math.sqrt(E*E+x*x),S=(S-a[m])/S*v*n[m],E*=S,x*=S,b.vx-=E*(C=A[m]),b.vy-=x*C,B.vx+=E*(C=1-C),B.vy+=x*C}function d(){if(s){var v,p=s.length,y=r.length,m=new Map(s.map((B,b)=>[e(B,b,s),B])),w;for(v=0,o=new Array(p);v<y;++v)w=r[v],w.index=v,typeof w.source!="object"&&(w.source=yC(m,w.source)),typeof w.target!="object"&&(w.target=yC(m,w.target)),o[w.source.index]=(o[w.source.index]||0)+1,o[w.target.index]=(o[w.target.index]||0)+1;for(v=0,A=new Array(y);v<y;++v)w=r[v],A[v]=o[w.source.index]/(o[w.source.index]+o[w.target.index]);n=new Array(y),f(),a=new Array(y),g()}}function f(){if(s)for(var v=0,p=r.length;v<p;++v)n[v]=+t(r[v],v,r)}function g(){if(s)for(var v=0,p=r.length;v<p;++v)a[v]=+i(r[v],v,r)}return h.initialize=function(v,p){s=v,l=p,d()},h.links=function(v){return arguments.length?(r=v,d(),h):r},h.id=function(v){return arguments.length?(e=v,h):e},h.iterations=function(v){return arguments.length?(c=+v,h):c},h.strength=function(v){return arguments.length?(t=typeof v=="function"?v:jt(+v),f(),h):t},h.distance=function(v){return arguments.length?(i=typeof v=="function"?v:jt(+v),g(),h):i},h}var SY={value:()=>{}};function cQ(){for(var r=0,e=arguments.length,t={},n;r<e;++r){if(!(n=arguments[r]+"")||n in t||/[\s.]/.test(n))throw new Error("illegal type: "+n);t[n]=[]}return new ku(t)}function ku(r){this._=r}function FY(r,e){return r.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}ku.prototype=cQ.prototype={constructor:ku,on:function(r,e){var t=this._,n=FY(r+"",t),i,a=-1,s=n.length;if(arguments.length<2){for(;++a<s;)if((i=(r=n[a]).type)&&(i=TY(t[i],r.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<s;)if(i=(r=n[a]).type)t[i]=mC(t[i],r.name,e);else if(e==null)for(i in t)t[i]=mC(t[i],r.name,null);return this},copy:function(){var r={},e=this._;for(var t in e)r[t]=e[t].slice();return new ku(r)},call:function(r,e){if((i=arguments.length-2)>0)for(var t=new Array(i),n=0,i,a;n<i;++n)t[n]=arguments[n+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(a=this._[r],n=0,i=a.length;n<i;++n)a[n].value.apply(e,t)},apply:function(r,e,t){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var n=this._[r],i=0,a=n.length;i<a;++i)n[i].value.apply(e,t)}};function TY(r,e){for(var t=0,n=r.length,i;t<n;++t)if((i=r[t]).name===e)return i.value}function mC(r,e,t){for(var n=0,i=r.length;n<i;++n)if(r[n].name===e){r[n]=SY,r=r.slice(0,n).concat(r.slice(n+1));break}return t!=null&&r.push({name:e,value:t}),r}var Uo=0,FA=0,dA=0,uQ=1e3,Eh,TA,xh=0,Is=0,Id=0,gl=typeof performance=="object"&&performance.now?performance:Date,hQ=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function dQ(){return Is||(hQ(MY),Is=gl.now()+Id)}function MY(){Is=0}function aw(){this._call=this._time=this._next=null}aw.prototype=fQ.prototype={constructor:aw,restart:function(r,e,t){if(typeof r!="function")throw new TypeError("callback is not a function");t=(t==null?dQ():+t)+(e==null?0:+e),!this._next&&TA!==this&&(TA?TA._next=this:Eh=this,TA=this),this._call=r,this._time=t,sw()},stop:function(){this._call&&(this._call=null,this._time=1/0,sw())}};function fQ(r,e,t){var n=new aw;return n.restart(r,e,t),n}function OY(){dQ(),++Uo;for(var r=Eh,e;r;)(e=Is-r._time)>=0&&r._call.call(void 0,e),r=r._next;--Uo}function wC(){Is=(xh=gl.now())+Id,Uo=FA=0;try{OY()}finally{Uo=0,_Y(),Is=0}}function IY(){var r=gl.now(),e=r-xh;e>uQ&&(Id-=e,xh=r)}function _Y(){for(var r,e=Eh,t,n=1/0;e;)e._call?(n>e._time&&(n=e._time),r=e,e=e._next):(t=e._next,e._next=null,e=r?r._next=t:Eh=t);TA=r,sw(n)}function sw(r){if(!Uo){FA&&(FA=clearTimeout(FA));var e=r-Is;e>24?(r<1/0&&(FA=setTimeout(wC,r-gl.now()-Id)),dA&&(dA=clearInterval(dA))):(dA||(xh=gl.now(),dA=setInterval(IY,uQ)),Uo=1,hQ(wC))}}const kY=1664525,LY=1013904223,BC=4294967296;function QY(){let r=1;return()=>(r=(kY*r+LY)%BC)/BC}function NY(r){return r.x}function UY(r){return r.y}var PY=10,RY=Math.PI*(3-Math.sqrt(5));function DY(r){var e,t=1,n=.001,i=1-Math.pow(n,1/300),a=0,s=.6,o=new Map,A=fQ(u),l=cQ("tick","end"),c=QY();r==null&&(r=[]);function u(){h(),l.call("tick",e),t<n&&(A.stop(),l.call("end",e))}function h(g){var v,p=r.length,y;g===void 0&&(g=1);for(var m=0;m<g;++m)for(t+=(a-t)*i,o.forEach(function(w){w(t)}),v=0;v<p;++v)y=r[v],y.fx==null?y.x+=y.vx*=s:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=s:(y.y=y.fy,y.vy=0);return e}function d(){for(var g=0,v=r.length,p;g<v;++g){if(p=r[g],p.index=g,p.fx!=null&&(p.x=p.fx),p.fy!=null&&(p.y=p.fy),isNaN(p.x)||isNaN(p.y)){var y=PY*Math.sqrt(.5+g),m=g*RY;p.x=y*Math.cos(m),p.y=y*Math.sin(m)}(isNaN(p.vx)||isNaN(p.vy))&&(p.vx=p.vy=0)}}function f(g){return g.initialize&&g.initialize(r,c),g}return d(),e={tick:h,restart:function(){return A.restart(u),e},stop:function(){return A.stop(),e},nodes:function(g){return arguments.length?(r=g,d(),o.forEach(f),e):r},alpha:function(g){return arguments.length?(t=+g,e):t},alphaMin:function(g){return arguments.length?(n=+g,e):n},alphaDecay:function(g){return arguments.length?(i=+g,e):+i},alphaTarget:function(g){return arguments.length?(a=+g,e):a},velocityDecay:function(g){return arguments.length?(s=1-g,e):1-s},randomSource:function(g){return arguments.length?(c=g,o.forEach(f),e):c},force:function(g,v){return arguments.length>1?(v==null?o.delete(g):o.set(g,f(v)),e):o.get(g)},find:function(g,v,p){var y=0,m=r.length,w,B,b,E,x;for(p==null?p=1/0:p*=p,y=0;y<m;++y)E=r[y],w=g-E.x,B=v-E.y,b=w*w+B*B,b<p&&(x=E,p=b);return x},on:function(g,v){return arguments.length>1?(l.on(g,v),e):l.on(g)}}}function HY(){var r,e,t,n,i=jt(-30),a,s=1,o=1/0,A=.81;function l(d){var f,g=r.length,v=Fd(r,NY,UY).visitAfter(u);for(n=d,f=0;f<g;++f)e=r[f],v.visit(h)}function c(){if(r){var d,f=r.length,g;for(a=new Array(f),d=0;d<f;++d)g=r[d],a[g.index]=+i(g,d,r)}}function u(d){var f=0,g,v,p=0,y,m,w;if(d.length){for(y=m=w=0;w<4;++w)(g=d[w])&&(v=Math.abs(g.value))&&(f+=g.value,p+=v,y+=v*g.x,m+=v*g.y);d.x=y/p,d.y=m/p}else{g=d,g.x=g.data.x,g.y=g.data.y;do f+=a[g.data.index];while(g=g.next)}d.value=f}function h(d,f,g,v){if(!d.value)return!0;var p=d.x-e.x,y=d.y-e.y,m=v-f,w=p*p+y*y;if(m*m/A<w)return w<o&&(p===0&&(p=ba(t),w+=p*p),y===0&&(y=ba(t),w+=y*y),w<s&&(w=Math.sqrt(s*w)),e.vx+=p*d.value*n/w,e.vy+=y*d.value*n/w),!0;if(d.length||w>=o)return;(d.data!==e||d.next)&&(p===0&&(p=ba(t),w+=p*p),y===0&&(y=ba(t),w+=y*y),w<s&&(w=Math.sqrt(s*w)));do d.data!==e&&(m=a[d.data.index]*n/w,e.vx+=p*m,e.vy+=y*m);while(d=d.next)}return l.initialize=function(d,f){r=d,t=f,c()},l.strength=function(d){return arguments.length?(i=typeof d=="function"?d:jt(+d),c(),l):i},l.distanceMin=function(d){return arguments.length?(s=d*d,l):Math.sqrt(s)},l.distanceMax=function(d){return arguments.length?(o=d*d,l):Math.sqrt(o)},l.theta=function(d){return arguments.length?(A=d*d,l):Math.sqrt(A)},l}function GY(r,e,t){var n,i=jt(.1),a,s;typeof r!="function"&&(r=jt(+r)),e==null&&(e=0),t==null&&(t=0);function o(l){for(var c=0,u=n.length;c<u;++c){var h=n[c],d=h.x-e||1e-6,f=h.y-t||1e-6,g=Math.sqrt(d*d+f*f),v=(s[c]-g)*a[c]*l/g;h.vx+=d*v,h.vy+=f*v}}function A(){if(n){var l,c=n.length;for(a=new Array(c),s=new Array(c),l=0;l<c;++l)s[l]=+r(n[l],l,n),a[l]=isNaN(s[l])?0:+i(n[l],l,n)}}return o.initialize=function(l){n=l,A()},o.strength=function(l){return arguments.length?(i=typeof l=="function"?l:jt(+l),A(),o):i},o.radius=function(l){return arguments.length?(r=typeof l=="function"?l:jt(+l),A(),o):r},o.x=function(l){return arguments.length?(e=+l,o):e},o.y=function(l){return arguments.length?(t=+l,o):t},o}function KY(r){var e=jt(.1),t,n,i;typeof r!="function"&&(r=jt(r==null?0:+r));function a(o){for(var A=0,l=t.length,c;A<l;++A)c=t[A],c.vx+=(i[A]-c.x)*n[A]*o}function s(){if(t){var o,A=t.length;for(n=new Array(A),i=new Array(A),o=0;o<A;++o)n[o]=isNaN(i[o]=+r(t[o],o,t))?0:+e(t[o],o,t)}}return a.initialize=function(o){t=o,s()},a.strength=function(o){return arguments.length?(e=typeof o=="function"?o:jt(+o),s(),a):e},a.x=function(o){return arguments.length?(r=typeof o=="function"?o:jt(+o),s(),a):r},a}function zY(r){var e=jt(.1),t,n,i;typeof r!="function"&&(r=jt(r==null?0:+r));function a(o){for(var A=0,l=t.length,c;A<l;++A)c=t[A],c.vy+=(i[A]-c.y)*n[A]*o}function s(){if(t){var o,A=t.length;for(n=new Array(A),i=new Array(A),o=0;o<A;++o)n[o]=isNaN(i[o]=+r(t[o],o,t))?0:+e(t[o],o,t)}}return a.initialize=function(o){t=o,s()},a.strength=function(o){return arguments.length?(e=typeof o=="function"?o:jt(+o),s(),a):e},a.y=function(o){return arguments.length?(r=typeof o=="function"?o:jt(+o),s(),a):r},a}class VY{constructor(e){this.id="d3-force",this.config={inputNodeAttrs:["x","y","vx","vy","fx","fy"],outputNodeAttrs:["x","y","vx","vy"],simulationAttrs:["alpha","alphaMin","alphaDecay","alphaTarget","velocityDecay","randomSource"]},this.forceMap={link:CY,manyBody:HY,center:wY,collide:EY,radial:GY,x:KY,y:zY},this.options={link:{id:t=>t.id},manyBody:{},center:{x:0,y:0}},this.context={options:{},assign:!1,nodes:[],edges:[]},on(this.options,e),this.options.forceSimulation&&(this.simulation=this.options.forceSimulation)}execute(e,t){return Ce(this,void 0,void 0,function*(){return this.genericLayout(!1,e,t)})}assign(e,t){return Ce(this,void 0,void 0,function*(){yield this.genericLayout(!0,e,t)})}stop(){this.simulation.stop()}tick(e){return this.simulation.tick(e),this.getResult()}restart(){this.simulation.restart()}setFixedPosition(e,t){const n=this.context.nodes.find(i=>i.id===e);n&&t.forEach((i,a)=>{if(typeof i=="number"||i===null){const s=["fx","fy","fz"][a];n[s]=i}})}getOptions(e){var t,n;const i=on({},this.options,e);return i.collide&&((t=i.collide)===null||t===void 0?void 0:t.radius)===void 0&&(i.collide=i.collide||{},i.collide.radius=(n=i.nodeSize)!==null&&n!==void 0?n:10),i.iterations===void 0&&(i.link&&i.link.iterations===void 0&&(i.iterations=i.link.iterations),i.collide&&i.collide.iterations===void 0&&(i.iterations=i.collide.iterations)),this.context.options=i,i}genericLayout(e,t,n){var i;return Ce(this,void 0,void 0,function*(){const a=this.getOptions(n),s=t.getAllNodes().map(({id:c,data:u})=>Object.assign(Object.assign({id:c},u),Es(u.data,this.config.inputNodeAttrs))),o=t.getAllEdges().map(c=>Object.assign({},c));Object.assign(this.context,{assign:e,nodes:s,edges:o,graph:t});const A=new Promise(c=>{this.resolver=c}),l=this.setSimulation(a);return l.nodes(s),(i=l.force("link"))===null||i===void 0||i.links(o),A})}getResult(){const{assign:e,nodes:t,edges:n,graph:i}=this.context,a=t.map(o=>({id:o.id,data:Object.assign(Object.assign({},o.data),Es(o,this.config.outputNodeAttrs))})),s=n.map(({id:o,source:A,target:l,data:c})=>({id:o,source:typeof A=="object"?A.id:A,target:typeof l=="object"?l.id:l,data:c}));return e&&a.forEach(o=>i.mergeNodeData(o.id,o.data)),{nodes:a,edges:s}}initSimulation(){return DY()}setSimulation(e){const t=this.simulation||this.options.forceSimulation||this.initSimulation();return this.simulation||(this.simulation=t.on("tick",()=>{var n;return(n=e.onTick)===null||n===void 0?void 0:n.call(e,this.getResult())}).on("end",()=>{var n;return(n=this.resolver)===null||n===void 0?void 0:n.call(this,this.getResult())})),bC(t,this.config.simulationAttrs.map(n=>[n,e[n]])),Object.entries(this.forceMap).forEach(([n,i])=>{const a=n;if(e[n]){let s=t.force(a);s||(s=i(),t.force(a,s)),bC(s,Object.entries(e[a]))}else t.force(a,null)}),t}}const bC=(r,e)=>e.reduce((t,[n,i])=>!t[n]||i===void 0?t:t[n].call(r,i),r);function SB(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Rg,EC;function jY(){if(EC)return Rg;EC=1;function r(){this.__data__=[],this.size=0}return Rg=r,Rg}var Dg,xC;function zo(){if(xC)return Dg;xC=1;function r(e,t){return e===t||e!==e&&t!==t}return Dg=r,Dg}var Hg,CC;function _d(){if(CC)return Hg;CC=1;var r=zo();function e(t,n){for(var i=t.length;i--;)if(r(t[i][0],n))return i;return-1}return Hg=e,Hg}var Gg,SC;function $Y(){if(SC)return Gg;SC=1;var r=_d(),e=Array.prototype,t=e.splice;function n(i){var a=this.__data__,s=r(a,i);if(s<0)return!1;var o=a.length-1;return s==o?a.pop():t.call(a,s,1),--this.size,!0}return Gg=n,Gg}var Kg,FC;function WY(){if(FC)return Kg;FC=1;var r=_d();function e(t){var n=this.__data__,i=r(n,t);return i<0?void 0:n[i][1]}return Kg=e,Kg}var zg,TC;function qY(){if(TC)return zg;TC=1;var r=_d();function e(t){return r(this.__data__,t)>-1}return zg=e,zg}var Vg,MC;function YY(){if(MC)return Vg;MC=1;var r=_d();function e(t,n){var i=this.__data__,a=r(i,t);return a<0?(++this.size,i.push([t,n])):i[a][1]=n,this}return Vg=e,Vg}var jg,OC;function kd(){if(OC)return jg;OC=1;var r=jY(),e=$Y(),t=WY(),n=qY(),i=YY();function a(s){var o=-1,A=s==null?0:s.length;for(this.clear();++o<A;){var l=s[o];this.set(l[0],l[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=n,a.prototype.set=i,jg=a,jg}var $g,IC;function XY(){if(IC)return $g;IC=1;var r=kd();function e(){this.__data__=new r,this.size=0}return $g=e,$g}var Wg,_C;function ZY(){if(_C)return Wg;_C=1;function r(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}return Wg=r,Wg}var qg,kC;function JY(){if(kC)return qg;kC=1;function r(e){return this.__data__.get(e)}return qg=r,qg}var Yg,LC;function eX(){if(LC)return Yg;LC=1;function r(e){return this.__data__.has(e)}return Yg=r,Yg}var Xg,QC;function gQ(){if(QC)return Xg;QC=1;var r=typeof $l=="object"&&$l&&$l.Object===Object&&$l;return Xg=r,Xg}var Zg,NC;function qr(){if(NC)return Zg;NC=1;var r=gQ(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return Zg=t,Zg}var Jg,UC;function Vo(){if(UC)return Jg;UC=1;var r=qr(),e=r.Symbol;return Jg=e,Jg}var ev,PC;function tX(){if(PC)return ev;PC=1;var r=Vo(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,i=r?r.toStringTag:void 0;function a(s){var o=t.call(s,i),A=s[i];try{s[i]=void 0;var l=!0}catch{}var c=n.call(s);return l&&(o?s[i]=A:delete s[i]),c}return ev=a,ev}var tv,RC;function nX(){if(RC)return tv;RC=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return tv=t,tv}var nv,DC;function Rs(){if(DC)return nv;DC=1;var r=Vo(),e=tX(),t=nX(),n="[object Null]",i="[object Undefined]",a=r?r.toStringTag:void 0;function s(o){return o==null?o===void 0?i:n:a&&a in Object(o)?e(o):t(o)}return nv=s,nv}var rv,HC;function Fr(){if(HC)return rv;HC=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return rv=r,rv}var iv,GC;function Pl(){if(GC)return iv;GC=1;var r=Rs(),e=Fr(),t="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(o){if(!e(o))return!1;var A=r(o);return A==n||A==i||A==t||A==a}return iv=s,iv}var av,KC;function rX(){if(KC)return av;KC=1;var r=qr(),e=r["__core-js_shared__"];return av=e,av}var sv,zC;function iX(){if(zC)return sv;zC=1;var r=rX(),e=function(){var n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function t(n){return!!e&&e in n}return sv=t,sv}var ov,VC;function vQ(){if(VC)return ov;VC=1;var r=Function.prototype,e=r.toString;function t(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return ov=t,ov}var Av,jC;function aX(){if(jC)return Av;jC=1;var r=Pl(),e=iX(),t=Fr(),n=vQ(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,A=s.toString,l=o.hasOwnProperty,c=RegExp("^"+A.call(l).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function u(h){if(!t(h)||e(h))return!1;var d=r(h)?c:a;return d.test(n(h))}return Av=u,Av}var lv,$C;function sX(){if($C)return lv;$C=1;function r(e,t){return e==null?void 0:e[t]}return lv=r,lv}var cv,WC;function Ds(){if(WC)return cv;WC=1;var r=aX(),e=sX();function t(n,i){var a=e(n,i);return r(a)?a:void 0}return cv=t,cv}var uv,qC;function FB(){if(qC)return uv;qC=1;var r=Ds(),e=qr(),t=r(e,"Map");return uv=t,uv}var hv,YC;function Ld(){if(YC)return hv;YC=1;var r=Ds(),e=r(Object,"create");return hv=e,hv}var dv,XC;function oX(){if(XC)return dv;XC=1;var r=Ld();function e(){this.__data__=r?r(null):{},this.size=0}return dv=e,dv}var fv,ZC;function AX(){if(ZC)return fv;ZC=1;function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return fv=r,fv}var gv,JC;function lX(){if(JC)return gv;JC=1;var r=Ld(),e="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function i(a){var s=this.__data__;if(r){var o=s[a];return o===e?void 0:o}return n.call(s,a)?s[a]:void 0}return gv=i,gv}var vv,e2;function cX(){if(e2)return vv;e2=1;var r=Ld(),e=Object.prototype,t=e.hasOwnProperty;function n(i){var a=this.__data__;return r?a[i]!==void 0:t.call(a,i)}return vv=n,vv}var pv,t2;function uX(){if(t2)return pv;t2=1;var r=Ld(),e="__lodash_hash_undefined__";function t(n,i){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=r&&i===void 0?e:i,this}return pv=t,pv}var yv,n2;function hX(){if(n2)return yv;n2=1;var r=oX(),e=AX(),t=lX(),n=cX(),i=uX();function a(s){var o=-1,A=s==null?0:s.length;for(this.clear();++o<A;){var l=s[o];this.set(l[0],l[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=n,a.prototype.set=i,yv=a,yv}var mv,r2;function dX(){if(r2)return mv;r2=1;var r=hX(),e=kd(),t=FB();function n(){this.size=0,this.__data__={hash:new r,map:new(t||e),string:new r}}return mv=n,mv}var wv,i2;function fX(){if(i2)return wv;i2=1;function r(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return wv=r,wv}var Bv,a2;function Qd(){if(a2)return Bv;a2=1;var r=fX();function e(t,n){var i=t.__data__;return r(n)?i[typeof n=="string"?"string":"hash"]:i.map}return Bv=e,Bv}var bv,s2;function gX(){if(s2)return bv;s2=1;var r=Qd();function e(t){var n=r(this,t).delete(t);return this.size-=n?1:0,n}return bv=e,bv}var Ev,o2;function vX(){if(o2)return Ev;o2=1;var r=Qd();function e(t){return r(this,t).get(t)}return Ev=e,Ev}var xv,A2;function pX(){if(A2)return xv;A2=1;var r=Qd();function e(t){return r(this,t).has(t)}return xv=e,xv}var Cv,l2;function yX(){if(l2)return Cv;l2=1;var r=Qd();function e(t,n){var i=r(this,t),a=i.size;return i.set(t,n),this.size+=i.size==a?0:1,this}return Cv=e,Cv}var Sv,c2;function TB(){if(c2)return Sv;c2=1;var r=dX(),e=gX(),t=vX(),n=pX(),i=yX();function a(s){var o=-1,A=s==null?0:s.length;for(this.clear();++o<A;){var l=s[o];this.set(l[0],l[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=n,a.prototype.set=i,Sv=a,Sv}var Fv,u2;function mX(){if(u2)return Fv;u2=1;var r=kd(),e=FB(),t=TB(),n=200;function i(a,s){var o=this.__data__;if(o instanceof r){var A=o.__data__;if(!e||A.length<n-1)return A.push([a,s]),this.size=++o.size,this;o=this.__data__=new t(A)}return o.set(a,s),this.size=o.size,this}return Fv=i,Fv}var Tv,h2;function Nd(){if(h2)return Tv;h2=1;var r=kd(),e=XY(),t=ZY(),n=JY(),i=eX(),a=mX();function s(o){var A=this.__data__=new r(o);this.size=A.size}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=i,s.prototype.set=a,Tv=s,Tv}var Mv,d2;function MB(){if(d2)return Mv;d2=1;function r(e,t){for(var n=-1,i=e==null?0:e.length;++n<i&&t(e[n],n,e)!==!1;);return e}return Mv=r,Mv}var Ov,f2;function pQ(){if(f2)return Ov;f2=1;var r=Ds(),e=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch{}}();return Ov=e,Ov}var Iv,g2;function Ud(){if(g2)return Iv;g2=1;var r=pQ();function e(t,n,i){n=="__proto__"&&r?r(t,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[n]=i}return Iv=e,Iv}var _v,v2;function Pd(){if(v2)return _v;v2=1;var r=Ud(),e=zo(),t=Object.prototype,n=t.hasOwnProperty;function i(a,s,o){var A=a[s];(!(n.call(a,s)&&e(A,o))||o===void 0&&!(s in a))&&r(a,s,o)}return _v=i,_v}var kv,p2;function Rl(){if(p2)return kv;p2=1;var r=Pd(),e=Ud();function t(n,i,a,s){var o=!a;a||(a={});for(var A=-1,l=i.length;++A<l;){var c=i[A],u=s?s(a[c],n[c],c,a,n):void 0;u===void 0&&(u=n[c]),o?e(a,c,u):r(a,c,u)}return a}return kv=t,kv}var Lv,y2;function wX(){if(y2)return Lv;y2=1;function r(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}return Lv=r,Lv}var Qv,m2;function Si(){if(m2)return Qv;m2=1;function r(e){return e!=null&&typeof e=="object"}return Qv=r,Qv}var Nv,w2;function BX(){if(w2)return Nv;w2=1;var r=Rs(),e=Si(),t="[object Arguments]";function n(i){return e(i)&&r(i)==t}return Nv=n,Nv}var Uv,B2;function Dl(){if(B2)return Uv;B2=1;var r=BX(),e=Si(),t=Object.prototype,n=t.hasOwnProperty,i=t.propertyIsEnumerable,a=r(function(){return arguments}())?r:function(s){return e(s)&&n.call(s,"callee")&&!i.call(s,"callee")};return Uv=a,Uv}var Pv,b2;function Dt(){if(b2)return Pv;b2=1;var r=Array.isArray;return Pv=r,Pv}var MA={exports:{}},Rv,E2;function bX(){if(E2)return Rv;E2=1;function r(){return!1}return Rv=r,Rv}MA.exports;var x2;function jo(){return x2||(x2=1,function(r,e){var t=qr(),n=bX(),i=e&&!e.nodeType&&e,a=i&&!0&&r&&!r.nodeType&&r,s=a&&a.exports===i,o=s?t.Buffer:void 0,A=o?o.isBuffer:void 0,l=A||n;r.exports=l}(MA,MA.exports)),MA.exports}var Dv,C2;function Rd(){if(C2)return Dv;C2=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(n,i){var a=typeof n;return i=i??r,!!i&&(a=="number"||a!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return Dv=t,Dv}var Hv,S2;function OB(){if(S2)return Hv;S2=1;var r=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=r}return Hv=e,Hv}var Gv,F2;function EX(){if(F2)return Gv;F2=1;var r=Rs(),e=OB(),t=Si(),n="[object Arguments]",i="[object Array]",a="[object Boolean]",s="[object Date]",o="[object Error]",A="[object Function]",l="[object Map]",c="[object Number]",u="[object Object]",h="[object RegExp]",d="[object Set]",f="[object String]",g="[object WeakMap]",v="[object ArrayBuffer]",p="[object DataView]",y="[object Float32Array]",m="[object Float64Array]",w="[object Int8Array]",B="[object Int16Array]",b="[object Int32Array]",E="[object Uint8Array]",x="[object Uint8ClampedArray]",S="[object Uint16Array]",C="[object Uint32Array]",F={};F[y]=F[m]=F[w]=F[B]=F[b]=F[E]=F[x]=F[S]=F[C]=!0,F[n]=F[i]=F[v]=F[a]=F[p]=F[s]=F[o]=F[A]=F[l]=F[c]=F[u]=F[h]=F[d]=F[f]=F[g]=!1;function M(T){return t(T)&&e(T.length)&&!!F[r(T)]}return Gv=M,Gv}var Kv,T2;function Dd(){if(T2)return Kv;T2=1;function r(e){return function(t){return e(t)}}return Kv=r,Kv}var OA={exports:{}};OA.exports;var M2;function IB(){return M2||(M2=1,function(r,e){var t=gQ(),n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,a=i&&i.exports===n,s=a&&t.process,o=function(){try{var A=i&&i.require&&i.require("util").types;return A||s&&s.binding&&s.binding("util")}catch{}}();r.exports=o}(OA,OA.exports)),OA.exports}var zv,O2;function Hl(){if(O2)return zv;O2=1;var r=EX(),e=Dd(),t=IB(),n=t&&t.isTypedArray,i=n?e(n):r;return zv=i,zv}var Vv,I2;function yQ(){if(I2)return Vv;I2=1;var r=wX(),e=Dl(),t=Dt(),n=jo(),i=Rd(),a=Hl(),s=Object.prototype,o=s.hasOwnProperty;function A(l,c){var u=t(l),h=!u&&e(l),d=!u&&!h&&n(l),f=!u&&!h&&!d&&a(l),g=u||h||d||f,v=g?r(l.length,String):[],p=v.length;for(var y in l)(c||o.call(l,y))&&!(g&&(y=="length"||d&&(y=="offset"||y=="parent")||f&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||i(y,p)))&&v.push(y);return v}return Vv=A,Vv}var jv,_2;function Hd(){if(_2)return jv;_2=1;var r=Object.prototype;function e(t){var n=t&&t.constructor,i=typeof n=="function"&&n.prototype||r;return t===i}return jv=e,jv}var $v,k2;function mQ(){if(k2)return $v;k2=1;function r(e,t){return function(n){return e(t(n))}}return $v=r,$v}var Wv,L2;function xX(){if(L2)return Wv;L2=1;var r=mQ(),e=r(Object.keys,Object);return Wv=e,Wv}var qv,Q2;function _B(){if(Q2)return qv;Q2=1;var r=Hd(),e=xX(),t=Object.prototype,n=t.hasOwnProperty;function i(a){if(!r(a))return e(a);var s=[];for(var o in Object(a))n.call(a,o)&&o!="constructor"&&s.push(o);return s}return qv=i,qv}var Yv,N2;function Xi(){if(N2)return Yv;N2=1;var r=Pl(),e=OB();function t(n){return n!=null&&e(n.length)&&!r(n)}return Yv=t,Yv}var Xv,U2;function Ka(){if(U2)return Xv;U2=1;var r=yQ(),e=_B(),t=Xi();function n(i){return t(i)?r(i):e(i)}return Xv=n,Xv}var Zv,P2;function CX(){if(P2)return Zv;P2=1;var r=Rl(),e=Ka();function t(n,i){return n&&r(i,e(i),n)}return Zv=t,Zv}var Jv,R2;function SX(){if(R2)return Jv;R2=1;function r(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}return Jv=r,Jv}var ep,D2;function FX(){if(D2)return ep;D2=1;var r=Fr(),e=Hd(),t=SX(),n=Object.prototype,i=n.hasOwnProperty;function a(s){if(!r(s))return t(s);var o=e(s),A=[];for(var l in s)l=="constructor"&&(o||!i.call(s,l))||A.push(l);return A}return ep=a,ep}var tp,H2;function Hs(){if(H2)return tp;H2=1;var r=yQ(),e=FX(),t=Xi();function n(i){return t(i)?r(i,!0):e(i)}return tp=n,tp}var np,G2;function TX(){if(G2)return np;G2=1;var r=Rl(),e=Hs();function t(n,i){return n&&r(i,e(i),n)}return np=t,np}var IA={exports:{}};IA.exports;var K2;function wQ(){return K2||(K2=1,function(r,e){var t=qr(),n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,a=i&&i.exports===n,s=a?t.Buffer:void 0,o=s?s.allocUnsafe:void 0;function A(l,c){if(c)return l.slice();var u=l.length,h=o?o(u):new l.constructor(u);return l.copy(h),h}r.exports=A}(IA,IA.exports)),IA.exports}var rp,z2;function BQ(){if(z2)return rp;z2=1;function r(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}return rp=r,rp}var ip,V2;function bQ(){if(V2)return ip;V2=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,a=0,s=[];++n<i;){var o=e[n];t(o,n,e)&&(s[a++]=o)}return s}return ip=r,ip}var ap,j2;function EQ(){if(j2)return ap;j2=1;function r(){return[]}return ap=r,ap}var sp,$2;function kB(){if($2)return sp;$2=1;var r=bQ(),e=EQ(),t=Object.prototype,n=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(s){return s==null?[]:(s=Object(s),r(i(s),function(o){return n.call(s,o)}))}:e;return sp=a,sp}var op,W2;function MX(){if(W2)return op;W2=1;var r=Rl(),e=kB();function t(n,i){return r(n,e(n),i)}return op=t,op}var Ap,q2;function LB(){if(q2)return Ap;q2=1;function r(e,t){for(var n=-1,i=t.length,a=e.length;++n<i;)e[a+n]=t[n];return e}return Ap=r,Ap}var lp,Y2;function Gd(){if(Y2)return lp;Y2=1;var r=mQ(),e=r(Object.getPrototypeOf,Object);return lp=e,lp}var cp,X2;function xQ(){if(X2)return cp;X2=1;var r=LB(),e=Gd(),t=kB(),n=EQ(),i=Object.getOwnPropertySymbols,a=i?function(s){for(var o=[];s;)r(o,t(s)),s=e(s);return o}:n;return cp=a,cp}var up,Z2;function OX(){if(Z2)return up;Z2=1;var r=Rl(),e=xQ();function t(n,i){return r(n,e(n),i)}return up=t,up}var hp,J2;function CQ(){if(J2)return hp;J2=1;var r=LB(),e=Dt();function t(n,i,a){var s=i(n);return e(n)?s:r(s,a(n))}return hp=t,hp}var dp,eS;function SQ(){if(eS)return dp;eS=1;var r=CQ(),e=kB(),t=Ka();function n(i){return r(i,t,e)}return dp=n,dp}var fp,tS;function IX(){if(tS)return fp;tS=1;var r=CQ(),e=xQ(),t=Hs();function n(i){return r(i,t,e)}return fp=n,fp}var gp,nS;function _X(){if(nS)return gp;nS=1;var r=Ds(),e=qr(),t=r(e,"DataView");return gp=t,gp}var vp,rS;function kX(){if(rS)return vp;rS=1;var r=Ds(),e=qr(),t=r(e,"Promise");return vp=t,vp}var pp,iS;function FQ(){if(iS)return pp;iS=1;var r=Ds(),e=qr(),t=r(e,"Set");return pp=t,pp}var yp,aS;function LX(){if(aS)return yp;aS=1;var r=Ds(),e=qr(),t=r(e,"WeakMap");return yp=t,yp}var mp,sS;function $o(){if(sS)return mp;sS=1;var r=_X(),e=FB(),t=kX(),n=FQ(),i=LX(),a=Rs(),s=vQ(),o="[object Map]",A="[object Object]",l="[object Promise]",c="[object Set]",u="[object WeakMap]",h="[object DataView]",d=s(r),f=s(e),g=s(t),v=s(n),p=s(i),y=a;return(r&&y(new r(new ArrayBuffer(1)))!=h||e&&y(new e)!=o||t&&y(t.resolve())!=l||n&&y(new n)!=c||i&&y(new i)!=u)&&(y=function(m){var w=a(m),B=w==A?m.constructor:void 0,b=B?s(B):"";if(b)switch(b){case d:return h;case f:return o;case g:return l;case v:return c;case p:return u}return w}),mp=y,mp}var wp,oS;function QX(){if(oS)return wp;oS=1;var r=Object.prototype,e=r.hasOwnProperty;function t(n){var i=n.length,a=new n.constructor(i);return i&&typeof n[0]=="string"&&e.call(n,"index")&&(a.index=n.index,a.input=n.input),a}return wp=t,wp}var Bp,AS;function TQ(){if(AS)return Bp;AS=1;var r=qr(),e=r.Uint8Array;return Bp=e,Bp}var bp,lS;function QB(){if(lS)return bp;lS=1;var r=TQ();function e(t){var n=new t.constructor(t.byteLength);return new r(n).set(new r(t)),n}return bp=e,bp}var Ep,cS;function NX(){if(cS)return Ep;cS=1;var r=QB();function e(t,n){var i=n?r(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}return Ep=e,Ep}var xp,uS;function UX(){if(uS)return xp;uS=1;var r=/\w*$/;function e(t){var n=new t.constructor(t.source,r.exec(t));return n.lastIndex=t.lastIndex,n}return xp=e,xp}var Cp,hS;function PX(){if(hS)return Cp;hS=1;var r=Vo(),e=r?r.prototype:void 0,t=e?e.valueOf:void 0;function n(i){return t?Object(t.call(i)):{}}return Cp=n,Cp}var Sp,dS;function MQ(){if(dS)return Sp;dS=1;var r=QB();function e(t,n){var i=n?r(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}return Sp=e,Sp}var Fp,fS;function RX(){if(fS)return Fp;fS=1;var r=QB(),e=NX(),t=UX(),n=PX(),i=MQ(),a="[object Boolean]",s="[object Date]",o="[object Map]",A="[object Number]",l="[object RegExp]",c="[object Set]",u="[object String]",h="[object Symbol]",d="[object ArrayBuffer]",f="[object DataView]",g="[object Float32Array]",v="[object Float64Array]",p="[object Int8Array]",y="[object Int16Array]",m="[object Int32Array]",w="[object Uint8Array]",B="[object Uint8ClampedArray]",b="[object Uint16Array]",E="[object Uint32Array]";function x(S,C,F){var M=S.constructor;switch(C){case d:return r(S);case a:case s:return new M(+S);case f:return e(S,F);case g:case v:case p:case y:case m:case w:case B:case b:case E:return i(S,F);case o:return new M;case A:case u:return new M(S);case l:return t(S);case c:return new M;case h:return n(S)}}return Fp=x,Fp}var Tp,gS;function OQ(){if(gS)return Tp;gS=1;var r=Fr(),e=Object.create,t=function(){function n(){}return function(i){if(!r(i))return{};if(e)return e(i);n.prototype=i;var a=new n;return n.prototype=void 0,a}}();return Tp=t,Tp}var Mp,vS;function IQ(){if(vS)return Mp;vS=1;var r=OQ(),e=Gd(),t=Hd();function n(i){return typeof i.constructor=="function"&&!t(i)?r(e(i)):{}}return Mp=n,Mp}var Op,pS;function DX(){if(pS)return Op;pS=1;var r=$o(),e=Si(),t="[object Map]";function n(i){return e(i)&&r(i)==t}return Op=n,Op}var Ip,yS;function HX(){if(yS)return Ip;yS=1;var r=DX(),e=Dd(),t=IB(),n=t&&t.isMap,i=n?e(n):r;return Ip=i,Ip}var _p,mS;function GX(){if(mS)return _p;mS=1;var r=$o(),e=Si(),t="[object Set]";function n(i){return e(i)&&r(i)==t}return _p=n,_p}var kp,wS;function KX(){if(wS)return kp;wS=1;var r=GX(),e=Dd(),t=IB(),n=t&&t.isSet,i=n?e(n):r;return kp=i,kp}var Lp,BS;function _Q(){if(BS)return Lp;BS=1;var r=Nd(),e=MB(),t=Pd(),n=CX(),i=TX(),a=wQ(),s=BQ(),o=MX(),A=OX(),l=SQ(),c=IX(),u=$o(),h=QX(),d=RX(),f=IQ(),g=Dt(),v=jo(),p=HX(),y=Fr(),m=KX(),w=Ka(),B=Hs(),b=1,E=2,x=4,S="[object Arguments]",C="[object Array]",F="[object Boolean]",M="[object Date]",T="[object Error]",O="[object Function]",_="[object GeneratorFunction]",Q="[object Map]",L="[object Number]",k="[object Object]",U="[object RegExp]",D="[object Set]",j="[object String]",X="[object Symbol]",W="[object WeakMap]",Y="[object ArrayBuffer]",se="[object DataView]",te="[object Float32Array]",ne="[object Float64Array]",Le="[object Int8Array]",ke="[object Int16Array]",Ue="[object Int32Array]",ct="[object Uint8Array]",Pe="[object Uint8ClampedArray]",xt="[object Uint16Array]",In="[object Uint32Array]",fe={};fe[S]=fe[C]=fe[Y]=fe[se]=fe[F]=fe[M]=fe[te]=fe[ne]=fe[Le]=fe[ke]=fe[Ue]=fe[Q]=fe[L]=fe[k]=fe[U]=fe[D]=fe[j]=fe[X]=fe[ct]=fe[Pe]=fe[xt]=fe[In]=!0,fe[T]=fe[O]=fe[W]=!1;function We(Qe,Mr,qn,Va,Jr,Yn){var mt,ei=Mr&b,_n=Mr&E,Or=Mr&x;if(qn&&(mt=Jr?qn(Qe,Va,Jr,Yn):qn(Qe)),mt!==void 0)return mt;if(!y(Qe))return Qe;var ti=g(Qe);if(ti){if(mt=h(Qe),!ei)return s(Qe,mt)}else{var kn=u(Qe),Ht=kn==O||kn==_;if(v(Qe))return a(Qe,ei);if(kn==k||kn==S||Ht&&!Jr){if(mt=_n||Ht?{}:f(Qe),!ei)return _n?A(Qe,i(mt,Qe)):o(Qe,n(mt,Qe))}else{if(!fe[kn])return Jr?Qe:{};mt=d(Qe,kn,ei)}}Yn||(Yn=new r);var Gt=Yn.get(Qe);if(Gt)return Gt;Yn.set(Qe,mt),m(Qe)?Qe.forEach(function(Ir){mt.add(We(Ir,Mr,qn,Ir,Qe,Yn))}):p(Qe)&&Qe.forEach(function(Ir,Fi){mt.set(Fi,We(Ir,Mr,qn,Fi,Qe,Yn))});var _f=Or?_n?c:l:_n?B:w,Jo=ti?void 0:_f(Qe);return e(Jo||Qe,function(Ir,Fi){Jo&&(Fi=Ir,Ir=Qe[Fi]),t(mt,Fi,We(Ir,Mr,qn,Fi,Qe,Yn))}),mt}return Lp=We,Lp}var Qp,bS;function zX(){if(bS)return Qp;bS=1;var r=_Q(),e=4;function t(n){return r(n,e)}return Qp=t,Qp}var Np,ES;function NB(){if(ES)return Np;ES=1;function r(e){return function(){return e}}return Np=r,Np}var Up,xS;function VX(){if(xS)return Up;xS=1;function r(e){return function(t,n,i){for(var a=-1,s=Object(t),o=i(t),A=o.length;A--;){var l=o[e?A:++a];if(n(s[l],l,s)===!1)break}return t}}return Up=r,Up}var Pp,CS;function UB(){if(CS)return Pp;CS=1;var r=VX(),e=r();return Pp=e,Pp}var Rp,SS;function PB(){if(SS)return Rp;SS=1;var r=UB(),e=Ka();function t(n,i){return n&&r(n,i,e)}return Rp=t,Rp}var Dp,FS;function jX(){if(FS)return Dp;FS=1;var r=Xi();function e(t,n){return function(i,a){if(i==null)return i;if(!r(i))return t(i,a);for(var s=i.length,o=n?s:-1,A=Object(i);(n?o--:++o<s)&&a(A[o],o,A)!==!1;);return i}}return Dp=e,Dp}var Hp,TS;function Kd(){if(TS)return Hp;TS=1;var r=PB(),e=jX(),t=e(r);return Hp=t,Hp}var Gp,MS;function Gs(){if(MS)return Gp;MS=1;function r(e){return e}return Gp=r,Gp}var Kp,OS;function kQ(){if(OS)return Kp;OS=1;var r=Gs();function e(t){return typeof t=="function"?t:r}return Kp=e,Kp}var zp,IS;function LQ(){if(IS)return zp;IS=1;var r=MB(),e=Kd(),t=kQ(),n=Dt();function i(a,s){var o=n(a)?r:e;return o(a,t(s))}return zp=i,zp}var Vp,_S;function QQ(){return _S||(_S=1,Vp=LQ()),Vp}var jp,kS;function $X(){if(kS)return jp;kS=1;var r=Kd();function e(t,n){var i=[];return r(t,function(a,s,o){n(a,s,o)&&i.push(a)}),i}return jp=e,jp}var $p,LS;function WX(){if(LS)return $p;LS=1;var r="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,r),this}return $p=e,$p}var Wp,QS;function qX(){if(QS)return Wp;QS=1;function r(e){return this.__data__.has(e)}return Wp=r,Wp}var qp,NS;function NQ(){if(NS)return qp;NS=1;var r=TB(),e=WX(),t=qX();function n(i){var a=-1,s=i==null?0:i.length;for(this.__data__=new r;++a<s;)this.add(i[a])}return n.prototype.add=n.prototype.push=e,n.prototype.has=t,qp=n,qp}var Yp,US;function YX(){if(US)return Yp;US=1;function r(e,t){for(var n=-1,i=e==null?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}return Yp=r,Yp}var Xp,PS;function UQ(){if(PS)return Xp;PS=1;function r(e,t){return e.has(t)}return Xp=r,Xp}var Zp,RS;function PQ(){if(RS)return Zp;RS=1;var r=NQ(),e=YX(),t=UQ(),n=1,i=2;function a(s,o,A,l,c,u){var h=A&n,d=s.length,f=o.length;if(d!=f&&!(h&&f>d))return!1;var g=u.get(s),v=u.get(o);if(g&&v)return g==o&&v==s;var p=-1,y=!0,m=A&i?new r:void 0;for(u.set(s,o),u.set(o,s);++p<d;){var w=s[p],B=o[p];if(l)var b=h?l(B,w,p,o,s,u):l(w,B,p,s,o,u);if(b!==void 0){if(b)continue;y=!1;break}if(m){if(!e(o,function(E,x){if(!t(m,x)&&(w===E||c(w,E,A,l,u)))return m.push(x)})){y=!1;break}}else if(!(w===B||c(w,B,A,l,u))){y=!1;break}}return u.delete(s),u.delete(o),y}return Zp=a,Zp}var Jp,DS;function XX(){if(DS)return Jp;DS=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i,a){n[++t]=[a,i]}),n}return Jp=r,Jp}var e0,HS;function RB(){if(HS)return e0;HS=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i){n[++t]=i}),n}return e0=r,e0}var t0,GS;function ZX(){if(GS)return t0;GS=1;var r=Vo(),e=TQ(),t=zo(),n=PQ(),i=XX(),a=RB(),s=1,o=2,A="[object Boolean]",l="[object Date]",c="[object Error]",u="[object Map]",h="[object Number]",d="[object RegExp]",f="[object Set]",g="[object String]",v="[object Symbol]",p="[object ArrayBuffer]",y="[object DataView]",m=r?r.prototype:void 0,w=m?m.valueOf:void 0;function B(b,E,x,S,C,F,M){switch(x){case y:if(b.byteLength!=E.byteLength||b.byteOffset!=E.byteOffset)return!1;b=b.buffer,E=E.buffer;case p:return!(b.byteLength!=E.byteLength||!F(new e(b),new e(E)));case A:case l:case h:return t(+b,+E);case c:return b.name==E.name&&b.message==E.message;case d:case g:return b==E+"";case u:var T=i;case f:var O=S&s;if(T||(T=a),b.size!=E.size&&!O)return!1;var _=M.get(b);if(_)return _==E;S|=o,M.set(b,E);var Q=n(T(b),T(E),S,C,F,M);return M.delete(b),Q;case v:if(w)return w.call(b)==w.call(E)}return!1}return t0=B,t0}var n0,KS;function JX(){if(KS)return n0;KS=1;var r=SQ(),e=1,t=Object.prototype,n=t.hasOwnProperty;function i(a,s,o,A,l,c){var u=o&e,h=r(a),d=h.length,f=r(s),g=f.length;if(d!=g&&!u)return!1;for(var v=d;v--;){var p=h[v];if(!(u?p in s:n.call(s,p)))return!1}var y=c.get(a),m=c.get(s);if(y&&m)return y==s&&m==a;var w=!0;c.set(a,s),c.set(s,a);for(var B=u;++v<d;){p=h[v];var b=a[p],E=s[p];if(A)var x=u?A(E,b,p,s,a,c):A(b,E,p,a,s,c);if(!(x===void 0?b===E||l(b,E,o,A,c):x)){w=!1;break}B||(B=p=="constructor")}if(w&&!B){var S=a.constructor,C=s.constructor;S!=C&&"constructor"in a&&"constructor"in s&&!(typeof S=="function"&&S instanceof S&&typeof C=="function"&&C instanceof C)&&(w=!1)}return c.delete(a),c.delete(s),w}return n0=i,n0}var r0,zS;function eZ(){if(zS)return r0;zS=1;var r=Nd(),e=PQ(),t=ZX(),n=JX(),i=$o(),a=Dt(),s=jo(),o=Hl(),A=1,l="[object Arguments]",c="[object Array]",u="[object Object]",h=Object.prototype,d=h.hasOwnProperty;function f(g,v,p,y,m,w){var B=a(g),b=a(v),E=B?c:i(g),x=b?c:i(v);E=E==l?u:E,x=x==l?u:x;var S=E==u,C=x==u,F=E==x;if(F&&s(g)){if(!s(v))return!1;B=!0,S=!1}if(F&&!S)return w||(w=new r),B||o(g)?e(g,v,p,y,m,w):t(g,v,E,p,y,m,w);if(!(p&A)){var M=S&&d.call(g,"__wrapped__"),T=C&&d.call(v,"__wrapped__");if(M||T){var O=M?g.value():g,_=T?v.value():v;return w||(w=new r),m(O,_,p,y,w)}}return F?(w||(w=new r),n(g,v,p,y,m,w)):!1}return r0=f,r0}var i0,VS;function RQ(){if(VS)return i0;VS=1;var r=eZ(),e=Si();function t(n,i,a,s,o){return n===i?!0:n==null||i==null||!e(n)&&!e(i)?n!==n&&i!==i:r(n,i,a,s,t,o)}return i0=t,i0}var a0,jS;function tZ(){if(jS)return a0;jS=1;var r=Nd(),e=RQ(),t=1,n=2;function i(a,s,o,A){var l=o.length,c=l,u=!A;if(a==null)return!c;for(a=Object(a);l--;){var h=o[l];if(u&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++l<c;){h=o[l];var d=h[0],f=a[d],g=h[1];if(u&&h[2]){if(f===void 0&&!(d in a))return!1}else{var v=new r;if(A)var p=A(f,g,d,a,s,v);if(!(p===void 0?e(g,f,t|n,A,v):p))return!1}}return!0}return a0=i,a0}var s0,$S;function DQ(){if($S)return s0;$S=1;var r=Fr();function e(t){return t===t&&!r(t)}return s0=e,s0}var o0,WS;function nZ(){if(WS)return o0;WS=1;var r=DQ(),e=Ka();function t(n){for(var i=e(n),a=i.length;a--;){var s=i[a],o=n[s];i[a]=[s,o,r(o)]}return i}return o0=t,o0}var A0,qS;function HQ(){if(qS)return A0;qS=1;function r(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}return A0=r,A0}var l0,YS;function rZ(){if(YS)return l0;YS=1;var r=tZ(),e=nZ(),t=HQ();function n(i){var a=e(i);return a.length==1&&a[0][2]?t(a[0][0],a[0][1]):function(s){return s===i||r(s,i,a)}}return l0=n,l0}var c0,XS;function Wo(){if(XS)return c0;XS=1;var r=Rs(),e=Si(),t="[object Symbol]";function n(i){return typeof i=="symbol"||e(i)&&r(i)==t}return c0=n,c0}var u0,ZS;function DB(){if(ZS)return u0;ZS=1;var r=Dt(),e=Wo(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,s){if(r(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||e(a)?!0:n.test(a)||!t.test(a)||s!=null&&a in Object(s)}return u0=i,u0}var h0,JS;function iZ(){if(JS)return h0;JS=1;var r=TB(),e="Expected a function";function t(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var s=arguments,o=i?i.apply(this,s):s[0],A=a.cache;if(A.has(o))return A.get(o);var l=n.apply(this,s);return a.cache=A.set(o,l)||A,l};return a.cache=new(t.Cache||r),a}return t.Cache=r,h0=t,h0}var d0,eF;function aZ(){if(eF)return d0;eF=1;var r=iZ(),e=500;function t(n){var i=r(n,function(s){return a.size===e&&a.clear(),s}),a=i.cache;return i}return d0=t,d0}var f0,tF;function sZ(){if(tF)return f0;tF=1;var r=aZ(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,n=r(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(s,o,A,l){a.push(A?l.replace(t,"$1"):o||s)}),a});return f0=n,f0}var g0,nF;function zd(){if(nF)return g0;nF=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,a=Array(i);++n<i;)a[n]=t(e[n],n,e);return a}return g0=r,g0}var v0,rF;function oZ(){if(rF)return v0;rF=1;var r=Vo(),e=zd(),t=Dt(),n=Wo(),i=r?r.prototype:void 0,a=i?i.toString:void 0;function s(o){if(typeof o=="string")return o;if(t(o))return e(o,s)+"";if(n(o))return a?a.call(o):"";var A=o+"";return A=="0"&&1/o==-1/0?"-0":A}return v0=s,v0}var p0,iF;function GQ(){if(iF)return p0;iF=1;var r=oZ();function e(t){return t==null?"":r(t)}return p0=e,p0}var y0,aF;function Vd(){if(aF)return y0;aF=1;var r=Dt(),e=DB(),t=sZ(),n=GQ();function i(a,s){return r(a)?a:e(a,s)?[a]:t(n(a))}return y0=i,y0}var m0,sF;function Gl(){if(sF)return m0;sF=1;var r=Wo();function e(t){if(typeof t=="string"||r(t))return t;var n=t+"";return n=="0"&&1/t==-1/0?"-0":n}return m0=e,m0}var w0,oF;function jd(){if(oF)return w0;oF=1;var r=Vd(),e=Gl();function t(n,i){i=r(i,n);for(var a=0,s=i.length;n!=null&&a<s;)n=n[e(i[a++])];return a&&a==s?n:void 0}return w0=t,w0}var B0,AF;function AZ(){if(AF)return B0;AF=1;var r=jd();function e(t,n,i){var a=t==null?void 0:r(t,n);return a===void 0?i:a}return B0=e,B0}var b0,lF;function lZ(){if(lF)return b0;lF=1;function r(e,t){return e!=null&&t in Object(e)}return b0=r,b0}var E0,cF;function KQ(){if(cF)return E0;cF=1;var r=Vd(),e=Dl(),t=Dt(),n=Rd(),i=OB(),a=Gl();function s(o,A,l){A=r(A,o);for(var c=-1,u=A.length,h=!1;++c<u;){var d=a(A[c]);if(!(h=o!=null&&l(o,d)))break;o=o[d]}return h||++c!=u?h:(u=o==null?0:o.length,!!u&&i(u)&&n(d,u)&&(t(o)||e(o)))}return E0=s,E0}var x0,uF;function zQ(){if(uF)return x0;uF=1;var r=lZ(),e=KQ();function t(n,i){return n!=null&&e(n,i,r)}return x0=t,x0}var C0,hF;function cZ(){if(hF)return C0;hF=1;var r=RQ(),e=AZ(),t=zQ(),n=DB(),i=DQ(),a=HQ(),s=Gl(),o=1,A=2;function l(c,u){return n(c)&&i(u)?a(s(c),u):function(h){var d=e(h,c);return d===void 0&&d===u?t(h,c):r(u,d,o|A)}}return C0=l,C0}var S0,dF;function VQ(){if(dF)return S0;dF=1;function r(e){return function(t){return t==null?void 0:t[e]}}return S0=r,S0}var F0,fF;function uZ(){if(fF)return F0;fF=1;var r=jd();function e(t){return function(n){return r(n,t)}}return F0=e,F0}var T0,gF;function hZ(){if(gF)return T0;gF=1;var r=VQ(),e=uZ(),t=DB(),n=Gl();function i(a){return t(a)?r(n(a)):e(a)}return T0=i,T0}var M0,vF;function Zi(){if(vF)return M0;vF=1;var r=rZ(),e=cZ(),t=Gs(),n=Dt(),i=hZ();function a(s){return typeof s=="function"?s:s==null?t:typeof s=="object"?n(s)?e(s[0],s[1]):r(s):i(s)}return M0=a,M0}var O0,pF;function jQ(){if(pF)return O0;pF=1;var r=bQ(),e=$X(),t=Zi(),n=Dt();function i(a,s){var o=n(a)?r:e;return o(a,t(s,3))}return O0=i,O0}var I0,yF;function dZ(){if(yF)return I0;yF=1;var r=Object.prototype,e=r.hasOwnProperty;function t(n,i){return n!=null&&e.call(n,i)}return I0=t,I0}var _0,mF;function $Q(){if(mF)return _0;mF=1;var r=dZ(),e=KQ();function t(n,i){return n!=null&&e(n,i,r)}return _0=t,_0}var k0,wF;function fZ(){if(wF)return k0;wF=1;var r=_B(),e=$o(),t=Dl(),n=Dt(),i=Xi(),a=jo(),s=Hd(),o=Hl(),A="[object Map]",l="[object Set]",c=Object.prototype,u=c.hasOwnProperty;function h(d){if(d==null)return!0;if(i(d)&&(n(d)||typeof d=="string"||typeof d.splice=="function"||a(d)||o(d)||t(d)))return!d.length;var f=e(d);if(f==A||f==l)return!d.size;if(s(d))return!r(d).length;for(var g in d)if(u.call(d,g))return!1;return!0}return k0=h,k0}var L0,BF;function WQ(){if(BF)return L0;BF=1;function r(e){return e===void 0}return L0=r,L0}var Q0,bF;function qQ(){if(bF)return Q0;bF=1;var r=Kd(),e=Xi();function t(n,i){var a=-1,s=e(n)?Array(n.length):[];return r(n,function(o,A,l){s[++a]=i(o,A,l)}),s}return Q0=t,Q0}var N0,EF;function YQ(){if(EF)return N0;EF=1;var r=zd(),e=Zi(),t=qQ(),n=Dt();function i(a,s){var o=n(a)?r:t;return o(a,e(s,3))}return N0=i,N0}var U0,xF;function gZ(){if(xF)return U0;xF=1;function r(e,t,n,i){var a=-1,s=e==null?0:e.length;for(i&&s&&(n=e[++a]);++a<s;)n=t(n,e[a],a,e);return n}return U0=r,U0}var P0,CF;function vZ(){if(CF)return P0;CF=1;function r(e,t,n,i,a){return a(e,function(s,o,A){n=i?(i=!1,s):t(n,s,o,A)}),n}return P0=r,P0}var R0,SF;function XQ(){if(SF)return R0;SF=1;var r=gZ(),e=Kd(),t=Zi(),n=vZ(),i=Dt();function a(s,o,A){var l=i(s)?r:n,c=arguments.length<3;return l(s,t(o,4),A,c,e)}return R0=a,R0}var D0,FF;function pZ(){if(FF)return D0;FF=1;var r=Rs(),e=Dt(),t=Si(),n="[object String]";function i(a){return typeof a=="string"||!e(a)&&t(a)&&r(a)==n}return D0=i,D0}var H0,TF;function yZ(){if(TF)return H0;TF=1;var r=VQ(),e=r("length");return H0=e,H0}var G0,MF;function mZ(){if(MF)return G0;MF=1;var r="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+t+n,a="\\ufe0e\\ufe0f",s="\\u200d",o=RegExp("["+s+r+i+a+"]");function A(l){return o.test(l)}return G0=A,G0}var K0,OF;function wZ(){if(OF)return K0;OF=1;var r="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+t+n,a="\\ufe0e\\ufe0f",s="["+r+"]",o="["+i+"]",A="\\ud83c[\\udffb-\\udfff]",l="(?:"+o+"|"+A+")",c="[^"+r+"]",u="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",d="\\u200d",f=l+"?",g="["+a+"]?",v="(?:"+d+"(?:"+[c,u,h].join("|")+")"+g+f+")*",p=g+f+v,y="(?:"+[c+o+"?",o,u,h,s].join("|")+")",m=RegExp(A+"(?="+A+")|"+y+p,"g");function w(B){for(var b=m.lastIndex=0;m.test(B);)++b;return b}return K0=w,K0}var z0,IF;function BZ(){if(IF)return z0;IF=1;var r=yZ(),e=mZ(),t=wZ();function n(i){return e(i)?t(i):r(i)}return z0=n,z0}var V0,_F;function bZ(){if(_F)return V0;_F=1;var r=_B(),e=$o(),t=Xi(),n=pZ(),i=BZ(),a="[object Map]",s="[object Set]";function o(A){if(A==null)return 0;if(t(A))return n(A)?i(A):A.length;var l=e(A);return l==a||l==s?A.size:r(A).length}return V0=o,V0}var j0,kF;function EZ(){if(kF)return j0;kF=1;var r=MB(),e=OQ(),t=PB(),n=Zi(),i=Gd(),a=Dt(),s=jo(),o=Pl(),A=Fr(),l=Hl();function c(u,h,d){var f=a(u),g=f||s(u)||l(u);if(h=n(h,4),d==null){var v=u&&u.constructor;g?d=f?new v:[]:A(u)?d=o(v)?e(i(u)):{}:d={}}return(g?r:t)(u,function(p,y,m){return h(d,p,y,m)}),d}return j0=c,j0}var $0,LF;function xZ(){if(LF)return $0;LF=1;var r=Vo(),e=Dl(),t=Dt(),n=r?r.isConcatSpreadable:void 0;function i(a){return t(a)||e(a)||!!(n&&a&&a[n])}return $0=i,$0}var W0,QF;function HB(){if(QF)return W0;QF=1;var r=LB(),e=xZ();function t(n,i,a,s,o){var A=-1,l=n.length;for(a||(a=e),o||(o=[]);++A<l;){var c=n[A];i>0&&a(c)?i>1?t(c,i-1,a,s,o):r(o,c):s||(o[o.length]=c)}return o}return W0=t,W0}var q0,NF;function CZ(){if(NF)return q0;NF=1;function r(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}return q0=r,q0}var Y0,UF;function ZQ(){if(UF)return Y0;UF=1;var r=CZ(),e=Math.max;function t(n,i,a){return i=e(i===void 0?n.length-1:i,0),function(){for(var s=arguments,o=-1,A=e(s.length-i,0),l=Array(A);++o<A;)l[o]=s[i+o];o=-1;for(var c=Array(i+1);++o<i;)c[o]=s[o];return c[i]=a(l),r(n,this,c)}}return Y0=t,Y0}var X0,PF;function SZ(){if(PF)return X0;PF=1;var r=NB(),e=pQ(),t=Gs(),n=e?function(i,a){return e(i,"toString",{configurable:!0,enumerable:!1,value:r(a),writable:!0})}:t;return X0=n,X0}var Z0,RF;function FZ(){if(RF)return Z0;RF=1;var r=800,e=16,t=Date.now;function n(i){var a=0,s=0;return function(){var o=t(),A=e-(o-s);if(s=o,A>0){if(++a>=r)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return Z0=n,Z0}var J0,DF;function JQ(){if(DF)return J0;DF=1;var r=SZ(),e=FZ(),t=e(r);return J0=t,J0}var ey,HF;function $d(){if(HF)return ey;HF=1;var r=Gs(),e=ZQ(),t=JQ();function n(i,a){return t(e(i,a,r),i+"")}return ey=n,ey}var ty,GF;function eN(){if(GF)return ty;GF=1;function r(e,t,n,i){for(var a=e.length,s=n+(i?1:-1);i?s--:++s<a;)if(t(e[s],s,e))return s;return-1}return ty=r,ty}var ny,KF;function TZ(){if(KF)return ny;KF=1;function r(e){return e!==e}return ny=r,ny}var ry,zF;function MZ(){if(zF)return ry;zF=1;function r(e,t,n){for(var i=n-1,a=e.length;++i<a;)if(e[i]===t)return i;return-1}return ry=r,ry}var iy,VF;function OZ(){if(VF)return iy;VF=1;var r=eN(),e=TZ(),t=MZ();function n(i,a,s){return a===a?t(i,a,s):r(i,e,s)}return iy=n,iy}var ay,jF;function IZ(){if(jF)return ay;jF=1;var r=OZ();function e(t,n){var i=t==null?0:t.length;return!!i&&r(t,n,0)>-1}return ay=e,ay}var sy,$F;function _Z(){if($F)return sy;$F=1;function r(e,t,n){for(var i=-1,a=e==null?0:e.length;++i<a;)if(n(t,e[i]))return!0;return!1}return sy=r,sy}var oy,WF;function kZ(){if(WF)return oy;WF=1;function r(){}return oy=r,oy}var Ay,qF;function LZ(){if(qF)return Ay;qF=1;var r=FQ(),e=kZ(),t=RB(),n=1/0,i=r&&1/t(new r([,-0]))[1]==n?function(a){return new r(a)}:e;return Ay=i,Ay}var ly,YF;function QZ(){if(YF)return ly;YF=1;var r=NQ(),e=IZ(),t=_Z(),n=UQ(),i=LZ(),a=RB(),s=200;function o(A,l,c){var u=-1,h=e,d=A.length,f=!0,g=[],v=g;if(c)f=!1,h=t;else if(d>=s){var p=l?null:i(A);if(p)return a(p);f=!1,h=n,v=new r}else v=l?[]:g;e:for(;++u<d;){var y=A[u],m=l?l(y):y;if(y=c||y!==0?y:0,f&&m===m){for(var w=v.length;w--;)if(v[w]===m)continue e;l&&v.push(m),g.push(y)}else h(v,m,c)||(v!==g&&v.push(m),g.push(y))}return g}return ly=o,ly}var cy,XF;function tN(){if(XF)return cy;XF=1;var r=Xi(),e=Si();function t(n){return e(n)&&r(n)}return cy=t,cy}var uy,ZF;function NZ(){if(ZF)return uy;ZF=1;var r=HB(),e=$d(),t=QZ(),n=tN(),i=e(function(a){return t(r(a,1,n,!0))});return uy=i,uy}var hy,JF;function UZ(){if(JF)return hy;JF=1;var r=zd();function e(t,n){return r(n,function(i){return t[i]})}return hy=e,hy}var dy,eT;function nN(){if(eT)return dy;eT=1;var r=UZ(),e=Ka();function t(n){return n==null?[]:r(n,e(n))}return dy=t,dy}var fy,tT;function Tr(){if(tT)return fy;tT=1;var r;if(typeof SB=="function")try{r={clone:zX(),constant:NB(),each:QQ(),filter:jQ(),has:$Q(),isArray:Dt(),isEmpty:fZ(),isFunction:Pl(),isUndefined:WQ(),keys:Ka(),map:YQ(),reduce:XQ(),size:bZ(),transform:EZ(),union:NZ(),values:nN()}}catch{}return r||(r=window._),fy=r,fy}var gy,nT;function GB(){if(nT)return gy;nT=1;var r=Tr();gy=i;var e="\0",t="\0",n="";function i(c){this._isDirected=r.has(c,"directed")?c.directed:!0,this._isMultigraph=r.has(c,"multigraph")?c.multigraph:!1,this._isCompound=r.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[t]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(c){return this._label=c,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(c){return r.isFunction(c)||(c=r.constant(c)),this._defaultNodeLabelFn=c,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return r.keys(this._nodes)},i.prototype.sources=function(){var c=this;return r.filter(this.nodes(),function(u){return r.isEmpty(c._in[u])})},i.prototype.sinks=function(){var c=this;return r.filter(this.nodes(),function(u){return r.isEmpty(c._out[u])})},i.prototype.setNodes=function(c,u){var h=arguments,d=this;return r.each(c,function(f){h.length>1?d.setNode(f,u):d.setNode(f)}),this},i.prototype.setNode=function(c,u){return r.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=u),this):(this._nodes[c]=arguments.length>1?u:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=t,this._children[c]={},this._children[t][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},i.prototype.node=function(c){return this._nodes[c]},i.prototype.hasNode=function(c){return r.has(this._nodes,c)},i.prototype.removeNode=function(c){var u=this;if(r.has(this._nodes,c)){var h=function(d){u.removeEdge(u._edgeObjs[d])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],r.each(this.children(c),function(d){u.setParent(d)}),delete this._children[c]),r.each(r.keys(this._in[c]),h),delete this._in[c],delete this._preds[c],r.each(r.keys(this._out[c]),h),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},i.prototype.setParent=function(c,u){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r.isUndefined(u))u=t;else{u+="";for(var h=u;!r.isUndefined(h);h=this.parent(h))if(h===c)throw new Error("Setting "+u+" as parent of "+c+" would create a cycle");this.setNode(u)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=u,this._children[u][c]=!0,this},i.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},i.prototype.parent=function(c){if(this._isCompound){var u=this._parent[c];if(u!==t)return u}},i.prototype.children=function(c){if(r.isUndefined(c)&&(c=t),this._isCompound){var u=this._children[c];if(u)return r.keys(u)}else{if(c===t)return this.nodes();if(this.hasNode(c))return[]}},i.prototype.predecessors=function(c){var u=this._preds[c];if(u)return r.keys(u)},i.prototype.successors=function(c){var u=this._sucs[c];if(u)return r.keys(u)},i.prototype.neighbors=function(c){var u=this.predecessors(c);if(u)return r.union(u,this.successors(c))},i.prototype.isLeaf=function(c){var u;return this.isDirected()?u=this.successors(c):u=this.neighbors(c),u.length===0},i.prototype.filterNodes=function(c){var u=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});u.setGraph(this.graph());var h=this;r.each(this._nodes,function(g,v){c(v)&&u.setNode(v,g)}),r.each(this._edgeObjs,function(g){u.hasNode(g.v)&&u.hasNode(g.w)&&u.setEdge(g,h.edge(g))});var d={};function f(g){var v=h.parent(g);return v===void 0||u.hasNode(v)?(d[g]=v,v):v in d?d[v]:f(v)}return this._isCompound&&r.each(u.nodes(),function(g){u.setParent(g,f(g))}),u},i.prototype.setDefaultEdgeLabel=function(c){return r.isFunction(c)||(c=r.constant(c)),this._defaultEdgeLabelFn=c,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return r.values(this._edgeObjs)},i.prototype.setPath=function(c,u){var h=this,d=arguments;return r.reduce(c,function(f,g){return d.length>1?h.setEdge(f,g,u):h.setEdge(f,g),g}),this},i.prototype.setEdge=function(){var c,u,h,d,f=!1,g=arguments[0];typeof g=="object"&&g!==null&&"v"in g?(c=g.v,u=g.w,h=g.name,arguments.length===2&&(d=arguments[1],f=!0)):(c=g,u=arguments[1],h=arguments[3],arguments.length>2&&(d=arguments[2],f=!0)),c=""+c,u=""+u,r.isUndefined(h)||(h=""+h);var v=o(this._isDirected,c,u,h);if(r.has(this._edgeLabels,v))return f&&(this._edgeLabels[v]=d),this;if(!r.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(u),this._edgeLabels[v]=f?d:this._defaultEdgeLabelFn(c,u,h);var p=A(this._isDirected,c,u,h);return c=p.v,u=p.w,Object.freeze(p),this._edgeObjs[v]=p,a(this._preds[u],c),a(this._sucs[c],u),this._in[u][v]=p,this._out[c][v]=p,this._edgeCount++,this},i.prototype.edge=function(c,u,h){var d=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,c,u,h);return this._edgeLabels[d]},i.prototype.hasEdge=function(c,u,h){var d=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,c,u,h);return r.has(this._edgeLabels,d)},i.prototype.removeEdge=function(c,u,h){var d=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,c,u,h),f=this._edgeObjs[d];return f&&(c=f.v,u=f.w,delete this._edgeLabels[d],delete this._edgeObjs[d],s(this._preds[u],c),s(this._sucs[c],u),delete this._in[u][d],delete this._out[c][d],this._edgeCount--),this},i.prototype.inEdges=function(c,u){var h=this._in[c];if(h){var d=r.values(h);return u?r.filter(d,function(f){return f.v===u}):d}},i.prototype.outEdges=function(c,u){var h=this._out[c];if(h){var d=r.values(h);return u?r.filter(d,function(f){return f.w===u}):d}},i.prototype.nodeEdges=function(c,u){var h=this.inEdges(c,u);if(h)return h.concat(this.outEdges(c,u))};function a(c,u){c[u]?c[u]++:c[u]=1}function s(c,u){--c[u]||delete c[u]}function o(c,u,h,d){var f=""+u,g=""+h;if(!c&&f>g){var v=f;f=g,g=v}return f+n+g+n+(r.isUndefined(d)?e:d)}function A(c,u,h,d){var f=""+u,g=""+h;if(!c&&f>g){var v=f;f=g,g=v}var p={v:f,w:g};return d&&(p.name=d),p}function l(c,u){return o(c,u.v,u.w,u.name)}return gy}var vy,rT;function PZ(){return rT||(rT=1,vy="2.1.8"),vy}var py,iT;function RZ(){return iT||(iT=1,py={Graph:GB(),version:PZ()}),py}var yy,aT;function DZ(){if(aT)return yy;aT=1;var r=Tr(),e=GB();yy={write:t,read:a};function t(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:n(s),edges:i(s)};return r.isUndefined(s.graph())||(o.value=r.clone(s.graph())),o}function n(s){return r.map(s.nodes(),function(o){var A=s.node(o),l=s.parent(o),c={v:o};return r.isUndefined(A)||(c.value=A),r.isUndefined(l)||(c.parent=l),c})}function i(s){return r.map(s.edges(),function(o){var A=s.edge(o),l={v:o.v,w:o.w};return r.isUndefined(o.name)||(l.name=o.name),r.isUndefined(A)||(l.value=A),l})}function a(s){var o=new e(s.options).setGraph(s.value);return r.each(s.nodes,function(A){o.setNode(A.v,A.value),A.parent&&o.setParent(A.v,A.parent)}),r.each(s.edges,function(A){o.setEdge({v:A.v,w:A.w,name:A.name},A.value)}),o}return yy}var my,sT;function HZ(){if(sT)return my;sT=1;var r=Tr();my=e;function e(t){var n={},i=[],a;function s(o){r.has(n,o)||(n[o]=!0,a.push(o),r.each(t.successors(o),s),r.each(t.predecessors(o),s))}return r.each(t.nodes(),function(o){a=[],s(o),a.length&&i.push(a)}),i}return my}var wy,oT;function rN(){if(oT)return wy;oT=1;var r=Tr();wy=e;function e(){this._arr=[],this._keyIndices={}}return e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(t){return t.key})},e.prototype.has=function(t){return r.has(this._keyIndices,t)},e.prototype.priority=function(t){var n=this._keyIndices[t];if(n!==void 0)return this._arr[n].priority},e.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(t,n){var i=this._keyIndices;if(t=String(t),!r.has(i,t)){var a=this._arr,s=a.length;return i[t]=s,a.push({key:t,priority:n}),this._decrease(s),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},e.prototype.decrease=function(t,n){var i=this._keyIndices[t];if(n>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[i].priority+" New: "+n);this._arr[i].priority=n,this._decrease(i)},e.prototype._heapify=function(t){var n=this._arr,i=2*t,a=i+1,s=t;i<n.length&&(s=n[i].priority<n[s].priority?i:s,a<n.length&&(s=n[a].priority<n[s].priority?a:s),s!==t&&(this._swap(t,s),this._heapify(s)))},e.prototype._decrease=function(t){for(var n=this._arr,i=n[t].priority,a;t!==0&&(a=t>>1,!(n[a].priority<i));)this._swap(t,a),t=a},e.prototype._swap=function(t,n){var i=this._arr,a=this._keyIndices,s=i[t],o=i[n];i[t]=o,i[n]=s,a[o.key]=t,a[s.key]=n},wy}var By,AT;function iN(){if(AT)return By;AT=1;var r=Tr(),e=rN();By=n;var t=r.constant(1);function n(a,s,o,A){return i(a,String(s),o||t,A||function(l){return a.outEdges(l)})}function i(a,s,o,A){var l={},c=new e,u,h,d=function(f){var g=f.v!==u?f.v:f.w,v=l[g],p=o(f),y=h.distance+p;if(p<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+f+" Weight: "+p);y<v.distance&&(v.distance=y,v.predecessor=u,c.decrease(g,y))};for(a.nodes().forEach(function(f){var g=f===s?0:Number.POSITIVE_INFINITY;l[f]={distance:g},c.add(f,g)});c.size()>0&&(u=c.removeMin(),h=l[u],h.distance!==Number.POSITIVE_INFINITY);)A(u).forEach(d);return l}return By}var by,lT;function GZ(){if(lT)return by;lT=1;var r=iN(),e=Tr();by=t;function t(n,i,a){return e.transform(n.nodes(),function(s,o){s[o]=r(n,o,i,a)},{})}return by}var Ey,cT;function aN(){if(cT)return Ey;cT=1;var r=Tr();Ey=e;function e(t){var n=0,i=[],a={},s=[];function o(A){var l=a[A]={onStack:!0,lowlink:n,index:n++};if(i.push(A),t.successors(A).forEach(function(h){r.has(a,h)?a[h].onStack&&(l.lowlink=Math.min(l.lowlink,a[h].index)):(o(h),l.lowlink=Math.min(l.lowlink,a[h].lowlink))}),l.lowlink===l.index){var c=[],u;do u=i.pop(),a[u].onStack=!1,c.push(u);while(A!==u);s.push(c)}}return t.nodes().forEach(function(A){r.has(a,A)||o(A)}),s}return Ey}var xy,uT;function KZ(){if(uT)return xy;uT=1;var r=Tr(),e=aN();xy=t;function t(n){return r.filter(e(n),function(i){return i.length>1||i.length===1&&n.hasEdge(i[0],i[0])})}return xy}var Cy,hT;function zZ(){if(hT)return Cy;hT=1;var r=Tr();Cy=t;var e=r.constant(1);function t(i,a,s){return n(i,a||e,s||function(o){return i.outEdges(o)})}function n(i,a,s){var o={},A=i.nodes();return A.forEach(function(l){o[l]={},o[l][l]={distance:0},A.forEach(function(c){l!==c&&(o[l][c]={distance:Number.POSITIVE_INFINITY})}),s(l).forEach(function(c){var u=c.v===l?c.w:c.v,h=a(c);o[l][u]={distance:h,predecessor:l}})}),A.forEach(function(l){var c=o[l];A.forEach(function(u){var h=o[u];A.forEach(function(d){var f=h[l],g=c[d],v=h[d],p=f.distance+g.distance;p<v.distance&&(v.distance=p,v.predecessor=g.predecessor)})})}),o}return Cy}var Sy,dT;function sN(){if(dT)return Sy;dT=1;var r=Tr();Sy=e,e.CycleException=t;function e(n){var i={},a={},s=[];function o(A){if(r.has(a,A))throw new t;r.has(i,A)||(a[A]=!0,i[A]=!0,r.each(n.predecessors(A),o),delete a[A],s.push(A))}if(r.each(n.sinks(),o),r.size(i)!==n.nodeCount())throw new t;return s}function t(){}return t.prototype=new Error,Sy}var Fy,fT;function VZ(){if(fT)return Fy;fT=1;var r=sN();Fy=e;function e(t){try{r(t)}catch(n){if(n instanceof r.CycleException)return!1;throw n}return!0}return Fy}var Ty,gT;function oN(){if(gT)return Ty;gT=1;var r=Tr();Ty=e;function e(n,i,a){r.isArray(i)||(i=[i]);var s=(n.isDirected()?n.successors:n.neighbors).bind(n),o=[],A={};return r.each(i,function(l){if(!n.hasNode(l))throw new Error("Graph does not have node: "+l);t(n,l,a==="post",A,s,o)}),o}function t(n,i,a,s,o,A){r.has(s,i)||(s[i]=!0,a||A.push(i),r.each(o(i),function(l){t(n,l,a,s,o,A)}),a&&A.push(i))}return Ty}var My,vT;function jZ(){if(vT)return My;vT=1;var r=oN();My=e;function e(t,n){return r(t,n,"post")}return My}var Oy,pT;function $Z(){if(pT)return Oy;pT=1;var r=oN();Oy=e;function e(t,n){return r(t,n,"pre")}return Oy}var Iy,yT;function WZ(){if(yT)return Iy;yT=1;var r=Tr(),e=GB(),t=rN();Iy=n;function n(i,a){var s=new e,o={},A=new t,l;function c(h){var d=h.v===l?h.w:h.v,f=A.priority(d);if(f!==void 0){var g=a(h);g<f&&(o[d]=l,A.decrease(d,g))}}if(i.nodeCount()===0)return s;r.each(i.nodes(),function(h){A.add(h,Number.POSITIVE_INFINITY),s.setNode(h)}),A.decrease(i.nodes()[0],0);for(var u=!1;A.size()>0;){if(l=A.removeMin(),r.has(o,l))s.setEdge(l,o[l]);else{if(u)throw new Error("Input graph is not connected: "+i);u=!0}i.nodeEdges(l).forEach(c)}return s}return Iy}var _y,mT;function qZ(){return mT||(mT=1,_y={components:HZ(),dijkstra:iN(),dijkstraAll:GZ(),findCycles:KZ(),floydWarshall:zZ(),isAcyclic:VZ(),postorder:jZ(),preorder:$Z(),prim:WZ(),tarjan:aN(),topsort:sN()}),_y}var ky,wT;function YZ(){if(wT)return ky;wT=1;var r=RZ();return ky={Graph:r.Graph,json:DZ(),alg:qZ(),version:r.version},ky}var Ch;if(typeof SB=="function")try{Ch=YZ()}catch{}Ch||(Ch=window.graphlib);var Yr=Ch,Ly,BT;function XZ(){if(BT)return Ly;BT=1;var r=_Q(),e=1,t=4;function n(i){return r(i,e|t)}return Ly=n,Ly}var Qy,bT;function Wd(){if(bT)return Qy;bT=1;var r=zo(),e=Xi(),t=Rd(),n=Fr();function i(a,s,o){if(!n(o))return!1;var A=typeof s;return(A=="number"?e(o)&&t(s,o.length):A=="string"&&s in o)?r(o[s],a):!1}return Qy=i,Qy}var Ny,ET;function ZZ(){if(ET)return Ny;ET=1;var r=$d(),e=zo(),t=Wd(),n=Hs(),i=Object.prototype,a=i.hasOwnProperty,s=r(function(o,A){o=Object(o);var l=-1,c=A.length,u=c>2?A[2]:void 0;for(u&&t(A[0],A[1],u)&&(c=1);++l<c;)for(var h=A[l],d=n(h),f=-1,g=d.length;++f<g;){var v=d[f],p=o[v];(p===void 0||e(p,i[v])&&!a.call(o,v))&&(o[v]=h[v])}return o});return Ny=s,Ny}var Uy,xT;function JZ(){if(xT)return Uy;xT=1;var r=Zi(),e=Xi(),t=Ka();function n(i){return function(a,s,o){var A=Object(a);if(!e(a)){var l=r(s,3);a=t(a),s=function(u){return l(A[u],u,A)}}var c=i(a,s,o);return c>-1?A[l?a[c]:c]:void 0}}return Uy=n,Uy}var Py,CT;function eJ(){if(CT)return Py;CT=1;var r=/\s/;function e(t){for(var n=t.length;n--&&r.test(t.charAt(n)););return n}return Py=e,Py}var Ry,ST;function tJ(){if(ST)return Ry;ST=1;var r=eJ(),e=/^\s+/;function t(n){return n&&n.slice(0,r(n)+1).replace(e,"")}return Ry=t,Ry}var Dy,FT;function nJ(){if(FT)return Dy;FT=1;var r=tJ(),e=Fr(),t=Wo(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function A(l){if(typeof l=="number")return l;if(t(l))return n;if(e(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=e(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=r(l);var u=a.test(l);return u||s.test(l)?o(l.slice(2),u?2:8):i.test(l)?n:+l}return Dy=A,Dy}var Hy,TT;function AN(){if(TT)return Hy;TT=1;var r=nJ(),e=1/0,t=17976931348623157e292;function n(i){if(!i)return i===0?i:0;if(i=r(i),i===e||i===-e){var a=i<0?-1:1;return a*t}return i===i?i:0}return Hy=n,Hy}var Gy,MT;function rJ(){if(MT)return Gy;MT=1;var r=AN();function e(t){var n=r(t),i=n%1;return n===n?i?n-i:n:0}return Gy=e,Gy}var Ky,OT;function iJ(){if(OT)return Ky;OT=1;var r=eN(),e=Zi(),t=rJ(),n=Math.max;function i(a,s,o){var A=a==null?0:a.length;if(!A)return-1;var l=o==null?0:t(o);return l<0&&(l=n(A+l,0)),r(a,e(s,3),l)}return Ky=i,Ky}var zy,IT;function aJ(){if(IT)return zy;IT=1;var r=JZ(),e=iJ(),t=r(e);return zy=t,zy}var Vy,_T;function lN(){if(_T)return Vy;_T=1;var r=HB();function e(t){var n=t==null?0:t.length;return n?r(t,1):[]}return Vy=e,Vy}var jy,kT;function sJ(){if(kT)return jy;kT=1;var r=UB(),e=kQ(),t=Hs();function n(i,a){return i==null?i:r(i,e(a),t)}return jy=n,jy}var $y,LT;function oJ(){if(LT)return $y;LT=1;function r(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}return $y=r,$y}var Wy,QT;function AJ(){if(QT)return Wy;QT=1;var r=Ud(),e=PB(),t=Zi();function n(i,a){var s={};return a=t(a,3),e(i,function(o,A,l){r(s,A,a(o,A,l))}),s}return Wy=n,Wy}var qy,NT;function KB(){if(NT)return qy;NT=1;var r=Wo();function e(t,n,i){for(var a=-1,s=t.length;++a<s;){var o=t[a],A=n(o);if(A!=null&&(l===void 0?A===A&&!r(A):i(A,l)))var l=A,c=o}return c}return qy=e,qy}var Yy,UT;function lJ(){if(UT)return Yy;UT=1;function r(e,t){return e>t}return Yy=r,Yy}var Xy,PT;function cJ(){if(PT)return Xy;PT=1;var r=KB(),e=lJ(),t=Gs();function n(i){return i&&i.length?r(i,t,e):void 0}return Xy=n,Xy}var Zy,RT;function cN(){if(RT)return Zy;RT=1;var r=Ud(),e=zo();function t(n,i,a){(a!==void 0&&!e(n[i],a)||a===void 0&&!(i in n))&&r(n,i,a)}return Zy=t,Zy}var Jy,DT;function uJ(){if(DT)return Jy;DT=1;var r=Rs(),e=Gd(),t=Si(),n="[object Object]",i=Function.prototype,a=Object.prototype,s=i.toString,o=a.hasOwnProperty,A=s.call(Object);function l(c){if(!t(c)||r(c)!=n)return!1;var u=e(c);if(u===null)return!0;var h=o.call(u,"constructor")&&u.constructor;return typeof h=="function"&&h instanceof h&&s.call(h)==A}return Jy=l,Jy}var em,HT;function uN(){if(HT)return em;HT=1;function r(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}return em=r,em}var tm,GT;function hJ(){if(GT)return tm;GT=1;var r=Rl(),e=Hs();function t(n){return r(n,e(n))}return tm=t,tm}var nm,KT;function dJ(){if(KT)return nm;KT=1;var r=cN(),e=wQ(),t=MQ(),n=BQ(),i=IQ(),a=Dl(),s=Dt(),o=tN(),A=jo(),l=Pl(),c=Fr(),u=uJ(),h=Hl(),d=uN(),f=hJ();function g(v,p,y,m,w,B,b){var E=d(v,y),x=d(p,y),S=b.get(x);if(S){r(v,y,S);return}var C=B?B(E,x,y+"",v,p,b):void 0,F=C===void 0;if(F){var M=s(x),T=!M&&A(x),O=!M&&!T&&h(x);C=x,M||T||O?s(E)?C=E:o(E)?C=n(E):T?(F=!1,C=e(x,!0)):O?(F=!1,C=t(x,!0)):C=[]:u(x)||a(x)?(C=E,a(E)?C=f(E):(!c(E)||l(E))&&(C=i(x))):F=!1}F&&(b.set(x,C),w(C,x,m,B,b),b.delete(x)),r(v,y,C)}return nm=g,nm}var rm,zT;function fJ(){if(zT)return rm;zT=1;var r=Nd(),e=cN(),t=UB(),n=dJ(),i=Fr(),a=Hs(),s=uN();function o(A,l,c,u,h){A!==l&&t(l,function(d,f){if(h||(h=new r),i(d))n(A,l,f,c,o,u,h);else{var g=u?u(s(A,f),d,f+"",A,l,h):void 0;g===void 0&&(g=d),e(A,f,g)}},a)}return rm=o,rm}var im,VT;function gJ(){if(VT)return im;VT=1;var r=$d(),e=Wd();function t(n){return r(function(i,a){var s=-1,o=a.length,A=o>1?a[o-1]:void 0,l=o>2?a[2]:void 0;for(A=n.length>3&&typeof A=="function"?(o--,A):void 0,l&&e(a[0],a[1],l)&&(A=o<3?void 0:A,o=1),i=Object(i);++s<o;){var c=a[s];c&&n(i,c,s,A)}return i})}return im=t,im}var am,jT;function vJ(){if(jT)return am;jT=1;var r=fJ(),e=gJ(),t=e(function(n,i,a){r(n,i,a)});return am=t,am}var sm,$T;function hN(){if($T)return sm;$T=1;function r(e,t){return e<t}return sm=r,sm}var om,WT;function pJ(){if(WT)return om;WT=1;var r=KB(),e=hN(),t=Gs();function n(i){return i&&i.length?r(i,t,e):void 0}return om=n,om}var Am,qT;function yJ(){if(qT)return Am;qT=1;var r=KB(),e=Zi(),t=hN();function n(i,a){return i&&i.length?r(i,e(a,2),t):void 0}return Am=n,Am}var lm,YT;function mJ(){if(YT)return lm;YT=1;var r=qr(),e=function(){return r.Date.now()};return lm=e,lm}var cm,XT;function wJ(){if(XT)return cm;XT=1;var r=Pd(),e=Vd(),t=Rd(),n=Fr(),i=Gl();function a(s,o,A,l){if(!n(s))return s;o=e(o,s);for(var c=-1,u=o.length,h=u-1,d=s;d!=null&&++c<u;){var f=i(o[c]),g=A;if(f==="__proto__"||f==="constructor"||f==="prototype")return s;if(c!=h){var v=d[f];g=l?l(v,f,d):void 0,g===void 0&&(g=n(v)?v:t(o[c+1])?[]:{})}r(d,f,g),d=d[f]}return s}return cm=a,cm}var um,ZT;function BJ(){if(ZT)return um;ZT=1;var r=jd(),e=wJ(),t=Vd();function n(i,a,s){for(var o=-1,A=a.length,l={};++o<A;){var c=a[o],u=r(i,c);s(u,c)&&e(l,t(c,i),u)}return l}return um=n,um}var hm,JT;function bJ(){if(JT)return hm;JT=1;var r=BJ(),e=zQ();function t(n,i){return r(n,i,function(a,s){return e(n,s)})}return hm=t,hm}var dm,eM;function EJ(){if(eM)return dm;eM=1;var r=lN(),e=ZQ(),t=JQ();function n(i){return t(e(i,void 0,r),i+"")}return dm=n,dm}var fm,tM;function xJ(){if(tM)return fm;tM=1;var r=bJ(),e=EJ(),t=e(function(n,i){return n==null?{}:r(n,i)});return fm=t,fm}var gm,nM;function CJ(){if(nM)return gm;nM=1;var r=Math.ceil,e=Math.max;function t(n,i,a,s){for(var o=-1,A=e(r((i-n)/(a||1)),0),l=Array(A);A--;)l[s?A:++o]=n,n+=a;return l}return gm=t,gm}var vm,rM;function SJ(){if(rM)return vm;rM=1;var r=CJ(),e=Wd(),t=AN();function n(i){return function(a,s,o){return o&&typeof o!="number"&&e(a,s,o)&&(s=o=void 0),a=t(a),s===void 0?(s=a,a=0):s=t(s),o=o===void 0?a<s?1:-1:t(o),r(a,s,o,i)}}return vm=n,vm}var pm,iM;function FJ(){if(iM)return pm;iM=1;var r=SJ(),e=r();return pm=e,pm}var ym,aM;function TJ(){if(aM)return ym;aM=1;function r(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}return ym=r,ym}var mm,sM;function MJ(){if(sM)return mm;sM=1;var r=Wo();function e(t,n){if(t!==n){var i=t!==void 0,a=t===null,s=t===t,o=r(t),A=n!==void 0,l=n===null,c=n===n,u=r(n);if(!l&&!u&&!o&&t>n||o&&A&&c&&!l&&!u||a&&A&&c||!i&&c||!s)return 1;if(!a&&!o&&!u&&t<n||u&&i&&s&&!a&&!o||l&&i&&s||!A&&s||!c)return-1}return 0}return mm=e,mm}var wm,oM;function OJ(){if(oM)return wm;oM=1;var r=MJ();function e(t,n,i){for(var a=-1,s=t.criteria,o=n.criteria,A=s.length,l=i.length;++a<A;){var c=r(s[a],o[a]);if(c){if(a>=l)return c;var u=i[a];return c*(u=="desc"?-1:1)}}return t.index-n.index}return wm=e,wm}var Bm,AM;function IJ(){if(AM)return Bm;AM=1;var r=zd(),e=jd(),t=Zi(),n=qQ(),i=TJ(),a=Dd(),s=OJ(),o=Gs(),A=Dt();function l(c,u,h){u.length?u=r(u,function(g){return A(g)?function(v){return e(v,g.length===1?g[0]:g)}:g}):u=[o];var d=-1;u=r(u,a(t));var f=n(c,function(g,v,p){var y=r(u,function(m){return m(g)});return{criteria:y,index:++d,value:g}});return i(f,function(g,v){return s(g,v,h)})}return Bm=l,Bm}var bm,lM;function _J(){if(lM)return bm;lM=1;var r=HB(),e=IJ(),t=$d(),n=Wd(),i=t(function(a,s){if(a==null)return[];var o=s.length;return o>1&&n(a,s[0],s[1])?s=[]:o>2&&n(s[0],s[1],s[2])&&(s=[s[0]]),e(a,r(s,1),[])});return bm=i,bm}var Em,cM;function kJ(){if(cM)return Em;cM=1;var r=GQ(),e=0;function t(n){var i=++e;return r(n)+i}return Em=t,Em}var xm,uM;function LJ(){if(uM)return xm;uM=1;function r(e,t,n){for(var i=-1,a=e.length,s=t.length,o={};++i<a;){var A=i<s?t[i]:void 0;n(o,e[i],A)}return o}return xm=r,xm}var Cm,hM;function QJ(){if(hM)return Cm;hM=1;var r=Pd(),e=LJ();function t(n,i){return e(n||[],i||[],r)}return Cm=t,Cm}var Sh;if(typeof SB=="function")try{Sh={cloneDeep:XZ(),constant:NB(),defaults:ZZ(),each:QQ(),filter:jQ(),find:aJ(),flatten:lN(),forEach:LQ(),forIn:sJ(),has:$Q(),isUndefined:WQ(),last:oJ(),map:YQ(),mapValues:AJ(),max:cJ(),merge:vJ(),min:pJ(),minBy:yJ(),now:mJ(),pick:xJ(),range:FJ(),reduce:XQ(),sortBy:_J(),uniqueId:kJ(),values:nN(),zipObject:QJ()}}catch{}Sh||(Sh=window._);var dt=Sh,NJ=qd;function qd(){var r={};r._next=r._prev=r,this._sentinel=r}qd.prototype.dequeue=function(){var r=this._sentinel,e=r._prev;if(e!==r)return dN(e),e};qd.prototype.enqueue=function(r){var e=this._sentinel;r._prev&&r._next&&dN(r),r._next=e._next,e._next._prev=r,e._next=r,r._prev=e};qd.prototype.toString=function(){for(var r=[],e=this._sentinel,t=e._prev;t!==e;)r.push(JSON.stringify(t,UJ)),t=t._prev;return"["+r.join(", ")+"]"};function dN(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function UJ(r,e){if(r!=="_next"&&r!=="_prev")return e}var Hi=dt,PJ=Yr.Graph,RJ=NJ,DJ=GJ,HJ=Hi.constant(1);function GJ(r,e){if(r.nodeCount()<=1)return[];var t=zJ(r,e||HJ),n=KJ(t.graph,t.buckets,t.zeroIdx);return Hi.flatten(Hi.map(n,function(i){return r.outEdges(i.v,i.w)}),!0)}function KJ(r,e,t){for(var n=[],i=e[e.length-1],a=e[0],s;r.nodeCount();){for(;s=a.dequeue();)Sm(r,e,t,s);for(;s=i.dequeue();)Sm(r,e,t,s);if(r.nodeCount()){for(var o=e.length-2;o>0;--o)if(s=e[o].dequeue(),s){n=n.concat(Sm(r,e,t,s,!0));break}}}return n}function Sm(r,e,t,n,i){var a=i?[]:void 0;return Hi.forEach(r.inEdges(n.v),function(s){var o=r.edge(s),A=r.node(s.v);i&&a.push({v:s.v,w:s.w}),A.out-=o,ow(e,t,A)}),Hi.forEach(r.outEdges(n.v),function(s){var o=r.edge(s),A=s.w,l=r.node(A);l.in-=o,ow(e,t,l)}),r.removeNode(n.v),a}function zJ(r,e){var t=new PJ,n=0,i=0;Hi.forEach(r.nodes(),function(o){t.setNode(o,{v:o,in:0,out:0})}),Hi.forEach(r.edges(),function(o){var A=t.edge(o.v,o.w)||0,l=e(o),c=A+l;t.setEdge(o.v,o.w,c),i=Math.max(i,t.node(o.v).out+=l),n=Math.max(n,t.node(o.w).in+=l)});var a=Hi.range(i+n+3).map(function(){return new RJ}),s=n+1;return Hi.forEach(t.nodes(),function(o){ow(a,s,t.node(o))}),{graph:t,buckets:a,zeroIdx:s}}function ow(r,e,t){t.out?t.in?r[t.out-t.in+e].enqueue(t):r[r.length-1].enqueue(t):r[0].enqueue(t)}var hs=dt,VJ=DJ,jJ={run:$J,undo:qJ};function $J(r){var e=r.graph().acyclicer==="greedy"?VJ(r,t(r)):WJ(r);hs.forEach(e,function(n){var i=r.edge(n);r.removeEdge(n),i.forwardName=n.name,i.reversed=!0,r.setEdge(n.w,n.v,i,hs.uniqueId("rev"))});function t(n){return function(i){return n.edge(i).weight}}}function WJ(r){var e=[],t={},n={};function i(a){hs.has(n,a)||(n[a]=!0,t[a]=!0,hs.forEach(r.outEdges(a),function(s){hs.has(t,s.w)?e.push(s):i(s.w)}),delete t[a])}return hs.forEach(r.nodes(),i),e}function qJ(r){hs.forEach(r.edges(),function(e){var t=r.edge(e);if(t.reversed){r.removeEdge(e);var n=t.forwardName;delete t.reversed,delete t.forwardName,r.setEdge(e.w,e.v,t,n)}})}var He=dt,fN=Yr.Graph,jn={addDummyNode:gN,simplify:YJ,asNonCompoundGraph:XJ,successorWeights:ZJ,predecessorWeights:JJ,intersectRect:eee,buildLayerMatrix:tee,normalizeRanks:nee,removeEmptyRanks:ree,addBorderNode:iee,maxRank:vN,partition:aee,time:see,notime:oee};function gN(r,e,t,n){var i;do i=He.uniqueId(n);while(r.hasNode(i));return t.dummy=e,r.setNode(i,t),i}function YJ(r){var e=new fN().setGraph(r.graph());return He.forEach(r.nodes(),function(t){e.setNode(t,r.node(t))}),He.forEach(r.edges(),function(t){var n=e.edge(t.v,t.w)||{weight:0,minlen:1},i=r.edge(t);e.setEdge(t.v,t.w,{weight:n.weight+i.weight,minlen:Math.max(n.minlen,i.minlen)})}),e}function XJ(r){var e=new fN({multigraph:r.isMultigraph()}).setGraph(r.graph());return He.forEach(r.nodes(),function(t){r.children(t).length||e.setNode(t,r.node(t))}),He.forEach(r.edges(),function(t){e.setEdge(t,r.edge(t))}),e}function ZJ(r){var e=He.map(r.nodes(),function(t){var n={};return He.forEach(r.outEdges(t),function(i){n[i.w]=(n[i.w]||0)+r.edge(i).weight}),n});return He.zipObject(r.nodes(),e)}function JJ(r){var e=He.map(r.nodes(),function(t){var n={};return He.forEach(r.inEdges(t),function(i){n[i.v]=(n[i.v]||0)+r.edge(i).weight}),n});return He.zipObject(r.nodes(),e)}function eee(r,e){var t=r.x,n=r.y,i=e.x-t,a=e.y-n,s=r.width/2,o=r.height/2;if(!i&&!a)throw new Error("Not possible to find intersection inside of the rectangle");var A,l;return Math.abs(a)*s>Math.abs(i)*o?(a<0&&(o=-o),A=o*i/a,l=o):(i<0&&(s=-s),A=s,l=s*a/i),{x:t+A,y:n+l}}function tee(r){var e=He.map(He.range(vN(r)+1),function(){return[]});return He.forEach(r.nodes(),function(t){var n=r.node(t),i=n.rank;He.isUndefined(i)||(e[i][n.order]=t)}),e}function nee(r){var e=He.min(He.map(r.nodes(),function(t){return r.node(t).rank}));He.forEach(r.nodes(),function(t){var n=r.node(t);He.has(n,"rank")&&(n.rank-=e)})}function ree(r){var e=He.min(He.map(r.nodes(),function(a){return r.node(a).rank})),t=[];He.forEach(r.nodes(),function(a){var s=r.node(a).rank-e;t[s]||(t[s]=[]),t[s].push(a)});var n=0,i=r.graph().nodeRankFactor;He.forEach(t,function(a,s){He.isUndefined(a)&&s%i!==0?--n:n&&He.forEach(a,function(o){r.node(o).rank+=n})})}function iee(r,e,t,n){var i={width:0,height:0};return arguments.length>=4&&(i.rank=t,i.order=n),gN(r,"border",i,e)}function vN(r){return He.max(He.map(r.nodes(),function(e){var t=r.node(e).rank;if(!He.isUndefined(t))return t}))}function aee(r,e){var t={lhs:[],rhs:[]};return He.forEach(r,function(n){e(n)?t.lhs.push(n):t.rhs.push(n)}),t}function see(r,e){var t=He.now();try{return e()}finally{console.log(r+" time: "+(He.now()-t)+"ms")}}function oee(r,e){return e()}var pN=dt,Aee=jn,lee={run:cee,undo:hee};function cee(r){r.graph().dummyChains=[],pN.forEach(r.edges(),function(e){uee(r,e)})}function uee(r,e){var t=e.v,n=r.node(t).rank,i=e.w,a=r.node(i).rank,s=e.name,o=r.edge(e),A=o.labelRank;if(a!==n+1){r.removeEdge(e);var l,c,u;for(u=0,++n;n<a;++u,++n)o.points=[],c={width:0,height:0,edgeLabel:o,edgeObj:e,rank:n},l=Aee.addDummyNode(r,"edge",c,"_d"),n===A&&(c.width=o.width,c.height=o.height,c.dummy="edge-label",c.labelpos=o.labelpos),r.setEdge(t,l,{weight:o.weight},s),u===0&&r.graph().dummyChains.push(l),t=l;r.setEdge(t,i,{weight:o.weight},s)}}function hee(r){pN.forEach(r.graph().dummyChains,function(e){var t=r.node(e),n=t.edgeLabel,i;for(r.setEdge(t.edgeObj,n);t.dummy;)i=r.successors(e)[0],r.removeNode(e),n.points.push({x:t.x,y:t.y}),t.dummy==="edge-label"&&(n.x=t.x,n.y=t.y,n.width=t.width,n.height=t.height),e=i,t=r.node(e)})}var ou=dt,Yd={longestPath:dee,slack:fee};function dee(r){var e={};function t(n){var i=r.node(n);if(ou.has(e,n))return i.rank;e[n]=!0;var a=ou.min(ou.map(r.outEdges(n),function(s){return t(s.w)-r.edge(s).minlen}));return(a===Number.POSITIVE_INFINITY||a===void 0||a===null)&&(a=0),i.rank=a}ou.forEach(r.sources(),t)}function fee(r,e){return r.node(e.w).rank-r.node(e.v).rank-r.edge(e).minlen}var Fh=dt,gee=Yr.Graph,Th=Yd.slack,yN=vee;function vee(r){var e=new gee({directed:!1}),t=r.nodes()[0],n=r.nodeCount();e.setNode(t,{});for(var i,a;pee(e,r)<n;)i=yee(e,r),a=e.hasNode(i.v)?Th(r,i):-Th(r,i),mee(e,r,a);return e}function pee(r,e){function t(n){Fh.forEach(e.nodeEdges(n),function(i){var a=i.v,s=n===a?i.w:a;!r.hasNode(s)&&!Th(e,i)&&(r.setNode(s,{}),r.setEdge(n,s,{}),t(s))})}return Fh.forEach(r.nodes(),t),r.nodeCount()}function yee(r,e){return Fh.minBy(e.edges(),function(t){if(r.hasNode(t.v)!==r.hasNode(t.w))return Th(e,t)})}function mee(r,e,t){Fh.forEach(r.nodes(),function(n){e.node(n).rank+=t})}var $i=dt,wee=yN,Bee=Yd.slack,bee=Yd.longestPath,Eee=Yr.alg.preorder,xee=Yr.alg.postorder,Cee=jn.simplify,See=Ks;Ks.initLowLimValues=VB;Ks.initCutValues=zB;Ks.calcCutValue=mN;Ks.leaveEdge=BN;Ks.enterEdge=bN;Ks.exchangeEdges=EN;function Ks(r){r=Cee(r),bee(r);var e=wee(r);VB(e),zB(e,r);for(var t,n;t=BN(e);)n=bN(e,r,t),EN(e,r,t,n)}function zB(r,e){var t=xee(r,r.nodes());t=t.slice(0,t.length-1),$i.forEach(t,function(n){Fee(r,e,n)})}function Fee(r,e,t){var n=r.node(t),i=n.parent;r.edge(t,i).cutvalue=mN(r,e,t)}function mN(r,e,t){var n=r.node(t),i=n.parent,a=!0,s=e.edge(t,i),o=0;return s||(a=!1,s=e.edge(i,t)),o=s.weight,$i.forEach(e.nodeEdges(t),function(A){var l=A.v===t,c=l?A.w:A.v;if(c!==i){var u=l===a,h=e.edge(A).weight;if(o+=u?h:-h,Mee(r,t,c)){var d=r.edge(t,c).cutvalue;o+=u?-d:d}}}),o}function VB(r,e){arguments.length<2&&(e=r.nodes()[0]),wN(r,{},1,e)}function wN(r,e,t,n,i){var a=t,s=r.node(n);return e[n]=!0,$i.forEach(r.neighbors(n),function(o){$i.has(e,o)||(t=wN(r,e,t,o,n))}),s.low=a,s.lim=t++,i?s.parent=i:delete s.parent,t}function BN(r){return $i.find(r.edges(),function(e){return r.edge(e).cutvalue<0})}function bN(r,e,t){var n=t.v,i=t.w;e.hasEdge(n,i)||(n=t.w,i=t.v);var a=r.node(n),s=r.node(i),o=a,A=!1;a.lim>s.lim&&(o=s,A=!0);var l=$i.filter(e.edges(),function(c){return A===dM(r,r.node(c.v),o)&&A!==dM(r,r.node(c.w),o)});return $i.minBy(l,function(c){return Bee(e,c)})}function EN(r,e,t,n){var i=t.v,a=t.w;r.removeEdge(i,a),r.setEdge(n.v,n.w,{}),VB(r),zB(r,e),Tee(r,e)}function Tee(r,e){var t=$i.find(r.nodes(),function(i){return!e.node(i).parent}),n=Eee(r,t);n=n.slice(1),$i.forEach(n,function(i){var a=r.node(i).parent,s=e.edge(i,a),o=!1;s||(s=e.edge(a,i),o=!0),e.node(i).rank=e.node(a).rank+(o?s.minlen:-s.minlen)})}function Mee(r,e,t){return r.hasEdge(e,t)}function dM(r,e,t){return t.low<=e.lim&&e.lim<=t.lim}var Oee=Yd,xN=Oee.longestPath,Iee=yN,_ee=See,kee=Lee;function Lee(r){switch(r.graph().ranker){case"network-simplex":fM(r);break;case"tight-tree":Nee(r);break;case"longest-path":Qee(r);break;default:fM(r)}}var Qee=xN;function Nee(r){xN(r),Iee(r)}function fM(r){_ee(r)}var Aw=dt,Uee=Pee;function Pee(r){var e=Dee(r);Aw.forEach(r.graph().dummyChains,function(t){for(var n=r.node(t),i=n.edgeObj,a=Ree(r,e,i.v,i.w),s=a.path,o=a.lca,A=0,l=s[A],c=!0;t!==i.w;){if(n=r.node(t),c){for(;(l=s[A])!==o&&r.node(l).maxRank<n.rank;)A++;l===o&&(c=!1)}if(!c){for(;A<s.length-1&&r.node(l=s[A+1]).minRank<=n.rank;)A++;l=s[A]}r.setParent(t,l),t=r.successors(t)[0]}})}function Ree(r,e,t,n){var i=[],a=[],s=Math.min(e[t].low,e[n].low),o=Math.max(e[t].lim,e[n].lim),A,l;A=t;do A=r.parent(A),i.push(A);while(A&&(e[A].low>s||o>e[A].lim));for(l=A,A=n;(A=r.parent(A))!==l;)a.push(A);return{path:i.concat(a.reverse()),lca:l}}function Dee(r){var e={},t=0;function n(i){var a=t;Aw.forEach(r.children(i),n),e[i]={low:a,lim:t++}}return Aw.forEach(r.children(),n),e}var Gi=dt,lw=jn,Hee={run:Gee,cleanup:Vee};function Gee(r){var e=lw.addDummyNode(r,"root",{},"_root"),t=Kee(r),n=Gi.max(Gi.values(t))-1,i=2*n+1;r.graph().nestingRoot=e,Gi.forEach(r.edges(),function(s){r.edge(s).minlen*=i});var a=zee(r)+1;Gi.forEach(r.children(),function(s){CN(r,e,i,a,n,t,s)}),r.graph().nodeRankFactor=i}function CN(r,e,t,n,i,a,s){var o=r.children(s);if(!o.length){s!==e&&r.setEdge(e,s,{weight:0,minlen:t});return}var A=lw.addBorderNode(r,"_bt"),l=lw.addBorderNode(r,"_bb"),c=r.node(s);r.setParent(A,s),c.borderTop=A,r.setParent(l,s),c.borderBottom=l,Gi.forEach(o,function(u){CN(r,e,t,n,i,a,u);var h=r.node(u),d=h.borderTop?h.borderTop:u,f=h.borderBottom?h.borderBottom:u,g=h.borderTop?n:2*n,v=d!==f?1:i-a[s]+1;r.setEdge(A,d,{weight:g,minlen:v,nestingEdge:!0}),r.setEdge(f,l,{weight:g,minlen:v,nestingEdge:!0})}),r.parent(s)||r.setEdge(e,A,{weight:0,minlen:i+a[s]})}function Kee(r){var e={};function t(n,i){var a=r.children(n);a&&a.length&&Gi.forEach(a,function(s){t(s,i+1)}),e[n]=i}return Gi.forEach(r.children(),function(n){t(n,1)}),e}function zee(r){return Gi.reduce(r.edges(),function(e,t){return e+r.edge(t).weight},0)}function Vee(r){var e=r.graph();r.removeNode(e.nestingRoot),delete e.nestingRoot,Gi.forEach(r.edges(),function(t){var n=r.edge(t);n.nestingEdge&&r.removeEdge(t)})}var Fm=dt,jee=jn,$ee=Wee;function Wee(r){function e(t){var n=r.children(t),i=r.node(t);if(n.length&&Fm.forEach(n,e),Fm.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var a=i.minRank,s=i.maxRank+1;a<s;++a)gM(r,"borderLeft","_bl",t,i,a),gM(r,"borderRight","_br",t,i,a)}}Fm.forEach(r.children(),e)}function gM(r,e,t,n,i,a){var s={width:0,height:0,rank:a,borderType:e},o=i[e][a-1],A=jee.addDummyNode(r,"border",s,t);i[e][a]=A,r.setParent(A,n),o&&r.setEdge(o,A,{weight:1})}var di=dt,qee={adjust:Yee,undo:Xee};function Yee(r){var e=r.graph().rankdir.toLowerCase();(e==="lr"||e==="rl")&&SN(r)}function Xee(r){var e=r.graph().rankdir.toLowerCase();(e==="bt"||e==="rl")&&Zee(r),(e==="lr"||e==="rl")&&(Jee(r),SN(r))}function SN(r){di.forEach(r.nodes(),function(e){vM(r.node(e))}),di.forEach(r.edges(),function(e){vM(r.edge(e))})}function vM(r){var e=r.width;r.width=r.height,r.height=e}function Zee(r){di.forEach(r.nodes(),function(e){Tm(r.node(e))}),di.forEach(r.edges(),function(e){var t=r.edge(e);di.forEach(t.points,Tm),di.has(t,"y")&&Tm(t)})}function Tm(r){r.y=-r.y}function Jee(r){di.forEach(r.nodes(),function(e){Mm(r.node(e))}),di.forEach(r.edges(),function(e){var t=r.edge(e);di.forEach(t.points,Mm),di.has(t,"x")&&Mm(t)})}function Mm(r){var e=r.x;r.x=r.y,r.y=e}var Ii=dt,ete=tte;function tte(r){var e={},t=Ii.filter(r.nodes(),function(o){return!r.children(o).length}),n=Ii.max(Ii.map(t,function(o){return r.node(o).rank})),i=Ii.map(Ii.range(n+1),function(){return[]});function a(o){if(!Ii.has(e,o)){e[o]=!0;var A=r.node(o);i[A.rank].push(o),Ii.forEach(r.successors(o),a)}}var s=Ii.sortBy(t,function(o){return r.node(o).rank});return Ii.forEach(s,a),i}var ea=dt,nte=rte;function rte(r,e){for(var t=0,n=1;n<e.length;++n)t+=ite(r,e[n-1],e[n]);return t}function ite(r,e,t){for(var n=ea.zipObject(t,ea.map(t,function(l,c){return c})),i=ea.flatten(ea.map(e,function(l){return ea.sortBy(ea.map(r.outEdges(l),function(c){return{pos:n[c.w],weight:r.edge(c).weight}}),"pos")}),!0),a=1;a<t.length;)a<<=1;var s=2*a-1;a-=1;var o=ea.map(new Array(s),function(){return 0}),A=0;return ea.forEach(i.forEach(function(l){var c=l.pos+a;o[c]+=l.weight;for(var u=0;c>0;)c%2&&(u+=o[c+1]),c=c-1>>1,o[c]+=l.weight;A+=l.weight*u})),A}var pM=dt,ate=ste;function ste(r,e){return pM.map(e,function(t){var n=r.inEdges(t);if(n.length){var i=pM.reduce(n,function(a,s){var o=r.edge(s),A=r.node(s.v);return{sum:a.sum+o.weight*A.order,weight:a.weight+o.weight}},{sum:0,weight:0});return{v:t,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:t}})}var nr=dt,ote=Ate;function Ate(r,e){var t={};nr.forEach(r,function(i,a){var s=t[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:a};nr.isUndefined(i.barycenter)||(s.barycenter=i.barycenter,s.weight=i.weight)}),nr.forEach(e.edges(),function(i){var a=t[i.v],s=t[i.w];!nr.isUndefined(a)&&!nr.isUndefined(s)&&(s.indegree++,a.out.push(t[i.w]))});var n=nr.filter(t,function(i){return!i.indegree});return lte(n)}function lte(r){var e=[];function t(a){return function(s){s.merged||(nr.isUndefined(s.barycenter)||nr.isUndefined(a.barycenter)||s.barycenter>=a.barycenter)&&cte(a,s)}}function n(a){return function(s){s.in.push(a),--s.indegree===0&&r.push(s)}}for(;r.length;){var i=r.pop();e.push(i),nr.forEach(i.in.reverse(),t(i)),nr.forEach(i.out,n(i))}return nr.map(nr.filter(e,function(a){return!a.merged}),function(a){return nr.pick(a,["vs","i","barycenter","weight"])})}function cte(r,e){var t=0,n=0;r.weight&&(t+=r.barycenter*r.weight,n+=r.weight),e.weight&&(t+=e.barycenter*e.weight,n+=e.weight),r.vs=e.vs.concat(r.vs),r.barycenter=t/n,r.weight=n,r.i=Math.min(e.i,r.i),e.merged=!0}var _A=dt,ute=jn,hte=dte;function dte(r,e){var t=ute.partition(r,function(c){return _A.has(c,"barycenter")}),n=t.lhs,i=_A.sortBy(t.rhs,function(c){return-c.i}),a=[],s=0,o=0,A=0;n.sort(fte(!!e)),A=yM(a,i,A),_A.forEach(n,function(c){A+=c.vs.length,a.push(c.vs),s+=c.barycenter*c.weight,o+=c.weight,A=yM(a,i,A)});var l={vs:_A.flatten(a,!0)};return o&&(l.barycenter=s/o,l.weight=o),l}function yM(r,e,t){for(var n;e.length&&(n=_A.last(e)).i<=t;)e.pop(),r.push(n.vs),t++;return t}function fte(r){return function(e,t){return e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:r?t.i-e.i:e.i-t.i}}var ha=dt,gte=ate,vte=ote,pte=hte,yte=FN;function FN(r,e,t,n){var i=r.children(e),a=r.node(e),s=a?a.borderLeft:void 0,o=a?a.borderRight:void 0,A={};s&&(i=ha.filter(i,function(f){return f!==s&&f!==o}));var l=gte(r,i);ha.forEach(l,function(f){if(r.children(f.v).length){var g=FN(r,f.v,t,n);A[f.v]=g,ha.has(g,"barycenter")&&wte(f,g)}});var c=vte(l,t);mte(c,A);var u=pte(c,n);if(s&&(u.vs=ha.flatten([s,u.vs,o],!0),r.predecessors(s).length)){var h=r.node(r.predecessors(s)[0]),d=r.node(r.predecessors(o)[0]);ha.has(u,"barycenter")||(u.barycenter=0,u.weight=0),u.barycenter=(u.barycenter*u.weight+h.order+d.order)/(u.weight+2),u.weight+=2}return u}function mte(r,e){ha.forEach(r,function(t){t.vs=ha.flatten(t.vs.map(function(n){return e[n]?e[n].vs:n}),!0)})}function wte(r,e){ha.isUndefined(r.barycenter)?(r.barycenter=e.barycenter,r.weight=e.weight):(r.barycenter=(r.barycenter*r.weight+e.barycenter*e.weight)/(r.weight+e.weight),r.weight+=e.weight)}var kA=dt,Bte=Yr.Graph,bte=Ete;function Ete(r,e,t){var n=xte(r),i=new Bte({compound:!0}).setGraph({root:n}).setDefaultNodeLabel(function(a){return r.node(a)});return kA.forEach(r.nodes(),function(a){var s=r.node(a),o=r.parent(a);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(i.setNode(a),i.setParent(a,o||n),kA.forEach(r[t](a),function(A){var l=A.v===a?A.w:A.v,c=i.edge(l,a),u=kA.isUndefined(c)?0:c.weight;i.setEdge(l,a,{weight:r.edge(A).weight+u})}),kA.has(s,"minRank")&&i.setNode(a,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))}),i}function xte(r){for(var e;r.hasNode(e=kA.uniqueId("_root")););return e}var Cte=dt,Ste=Fte;function Fte(r,e,t){var n={},i;Cte.forEach(t,function(a){for(var s=r.parent(a),o,A;s;){if(o=r.parent(s),o?(A=n[o],n[o]=s):(A=i,i=s),A&&A!==s){e.setEdge(A,s);return}s=o}})}var Ma=dt,Tte=ete,Mte=nte,Ote=yte,Ite=bte,_te=Ste,kte=Yr.Graph,mM=jn,Lte=Qte;function Qte(r){var e=mM.maxRank(r),t=wM(r,Ma.range(1,e+1),"inEdges"),n=wM(r,Ma.range(e-1,-1,-1),"outEdges"),i=Tte(r);BM(r,i);for(var a=Number.POSITIVE_INFINITY,s,o=0,A=0;A<4;++o,++A){Nte(o%2?t:n,o%4>=2),i=mM.buildLayerMatrix(r);var l=Mte(r,i);l<a&&(A=0,s=Ma.cloneDeep(i),a=l)}BM(r,s)}function wM(r,e,t){return Ma.map(e,function(n){return Ite(r,n,t)})}function Nte(r,e){var t=new kte;Ma.forEach(r,function(n){var i=n.graph().root,a=Ote(n,i,t,e);Ma.forEach(a.vs,function(s,o){n.node(s).order=o}),_te(n,t,a.vs)})}function BM(r,e){Ma.forEach(e,function(t){Ma.forEach(t,function(n,i){r.node(n).order=i})})}var Be=dt,Ute=Yr.Graph,Pte=jn,Rte={positionX:Yte};function Dte(r,e){var t={};function n(i,a){var s=0,o=0,A=i.length,l=Be.last(a);return Be.forEach(a,function(c,u){var h=Gte(r,c),d=h?r.node(h).order:A;(h||c===l)&&(Be.forEach(a.slice(o,u+1),function(f){Be.forEach(r.predecessors(f),function(g){var v=r.node(g),p=v.order;(p<s||d<p)&&!(v.dummy&&r.node(f).dummy)&&TN(t,g,f)})}),o=u+1,s=d)}),a}return Be.reduce(e,n),t}function Hte(r,e){var t={};function n(a,s,o,A,l){var c;Be.forEach(Be.range(s,o),function(u){c=a[u],r.node(c).dummy&&Be.forEach(r.predecessors(c),function(h){var d=r.node(h);d.dummy&&(d.order<A||d.order>l)&&TN(t,h,c)})})}function i(a,s){var o=-1,A,l=0;return Be.forEach(s,function(c,u){if(r.node(c).dummy==="border"){var h=r.predecessors(c);h.length&&(A=r.node(h[0]).order,n(s,l,u,o,A),l=u,o=A)}n(s,l,s.length,A,a.length)}),s}return Be.reduce(e,i),t}function Gte(r,e){if(r.node(e).dummy)return Be.find(r.predecessors(e),function(t){return r.node(t).dummy})}function TN(r,e,t){if(e>t){var n=e;e=t,t=n}var i=r[e];i||(r[e]=i={}),i[t]=!0}function Kte(r,e,t){if(e>t){var n=e;e=t,t=n}return Be.has(r[e],t)}function zte(r,e,t,n){var i={},a={},s={};return Be.forEach(e,function(o){Be.forEach(o,function(A,l){i[A]=A,a[A]=A,s[A]=l})}),Be.forEach(e,function(o){var A=-1;Be.forEach(o,function(l){var c=n(l);if(c.length){c=Be.sortBy(c,function(g){return s[g]});for(var u=(c.length-1)/2,h=Math.floor(u),d=Math.ceil(u);h<=d;++h){var f=c[h];a[l]===l&&A<s[f]&&!Kte(t,l,f)&&(a[f]=l,a[l]=i[l]=i[f],A=s[f])}}})}),{root:i,align:a}}function Vte(r,e,t,n,i){var a={},s=jte(r,e,t,i),o=i?"borderLeft":"borderRight";function A(u,h){for(var d=s.nodes(),f=d.pop(),g={};f;)g[f]?u(f):(g[f]=!0,d.push(f),d=d.concat(h(f))),f=d.pop()}function l(u){a[u]=s.inEdges(u).reduce(function(h,d){return Math.max(h,a[d.v]+s.edge(d))},0)}function c(u){var h=s.outEdges(u).reduce(function(f,g){return Math.min(f,a[g.w]-s.edge(g))},Number.POSITIVE_INFINITY),d=r.node(u);h!==Number.POSITIVE_INFINITY&&d.borderType!==o&&(a[u]=Math.max(a[u],h))}return A(l,s.predecessors.bind(s)),A(c,s.successors.bind(s)),Be.forEach(n,function(u){a[u]=a[t[u]]}),a}function jte(r,e,t,n){var i=new Ute,a=r.graph(),s=Xte(a.nodesep,a.edgesep,n);return Be.forEach(e,function(o){var A;Be.forEach(o,function(l){var c=t[l];if(i.setNode(c),A){var u=t[A],h=i.edge(u,c);i.setEdge(u,c,Math.max(s(r,l,A),h||0))}A=l})}),i}function $te(r,e){return Be.minBy(Be.values(e),function(t){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return Be.forIn(t,function(a,s){var o=Zte(r,s)/2;n=Math.max(a+o,n),i=Math.min(a-o,i)}),n-i})}function Wte(r,e){var t=Be.values(e),n=Be.min(t),i=Be.max(t);Be.forEach(["u","d"],function(a){Be.forEach(["l","r"],function(s){var o=a+s,A=r[o],l;if(A!==e){var c=Be.values(A);l=s==="l"?n-Be.min(c):i-Be.max(c),l&&(r[o]=Be.mapValues(A,function(u){return u+l}))}})})}function qte(r,e){return Be.mapValues(r.ul,function(t,n){if(e)return r[e.toLowerCase()][n];var i=Be.sortBy(Be.map(r,n));return(i[1]+i[2])/2})}function Yte(r){var e=Pte.buildLayerMatrix(r),t=Be.merge(Dte(r,e),Hte(r,e)),n={},i;Be.forEach(["u","d"],function(s){i=s==="u"?e:Be.values(e).reverse(),Be.forEach(["l","r"],function(o){o==="r"&&(i=Be.map(i,function(u){return Be.values(u).reverse()}));var A=(s==="u"?r.predecessors:r.successors).bind(r),l=zte(r,i,t,A),c=Vte(r,i,l.root,l.align,o==="r");o==="r"&&(c=Be.mapValues(c,function(u){return-u})),n[s+o]=c})});var a=$te(r,n);return Wte(n,a),qte(n,r.graph().align)}function Xte(r,e,t){return function(n,i,a){var s=n.node(i),o=n.node(a),A=0,l;if(A+=s.width/2,Be.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":l=-s.width/2;break;case"r":l=s.width/2;break}if(l&&(A+=t?l:-l),l=0,A+=(s.dummy?e:r)/2,A+=(o.dummy?e:r)/2,A+=o.width/2,Be.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":l=o.width/2;break;case"r":l=-o.width/2;break}return l&&(A+=t?l:-l),l=0,A}}function Zte(r,e){return r.node(e).width}var LA=dt,MN=jn,Jte=Rte.positionX,ene=tne;function tne(r){r=MN.asNonCompoundGraph(r),nne(r),LA.forEach(Jte(r),function(e,t){r.node(t).x=e})}function nne(r){var e=MN.buildLayerMatrix(r),t=r.graph().ranksep,n=0;LA.forEach(e,function(i){var a=LA.max(LA.map(i,function(s){return r.node(s).height}));LA.forEach(i,function(s){r.node(s).y=n+a/2}),n+=a+t})}var Te=dt,bM=jJ,EM=lee,rne=kee,ine=jn.normalizeRanks,ane=Uee,sne=jn.removeEmptyRanks,xM=Hee,one=$ee,CM=qee,Ane=Lte,lne=ene,Ua=jn,cne=Yr.Graph,une=hne;function hne(r,e){var t=e&&e.debugTiming?Ua.time:Ua.notime;t("layout",function(){var n=t("  buildLayoutGraph",function(){return Ene(r)});t("  runLayout",function(){dne(n,t)}),t("  updateInputGraph",function(){fne(r,n)})})}function dne(r,e){e("    makeSpaceForEdgeLabels",function(){xne(r)}),e("    removeSelfEdges",function(){kne(r)}),e("    acyclic",function(){bM.run(r)}),e("    nestingGraph.run",function(){xM.run(r)}),e("    rank",function(){rne(Ua.asNonCompoundGraph(r))}),e("    injectEdgeLabelProxies",function(){Cne(r)}),e("    removeEmptyRanks",function(){sne(r)}),e("    nestingGraph.cleanup",function(){xM.cleanup(r)}),e("    normalizeRanks",function(){ine(r)}),e("    assignRankMinMax",function(){Sne(r)}),e("    removeEdgeLabelProxies",function(){Fne(r)}),e("    normalize.run",function(){EM.run(r)}),e("    parentDummyChains",function(){ane(r)}),e("    addBorderSegments",function(){one(r)}),e("    order",function(){Ane(r)}),e("    insertSelfEdges",function(){Lne(r)}),e("    adjustCoordinateSystem",function(){CM.adjust(r)}),e("    position",function(){lne(r)}),e("    positionSelfEdges",function(){Qne(r)}),e("    removeBorderNodes",function(){_ne(r)}),e("    normalize.undo",function(){EM.undo(r)}),e("    fixupEdgeLabelCoords",function(){One(r)}),e("    undoCoordinateSystem",function(){CM.undo(r)}),e("    translateGraph",function(){Tne(r)}),e("    assignNodeIntersects",function(){Mne(r)}),e("    reversePoints",function(){Ine(r)}),e("    acyclic.undo",function(){bM.undo(r)})}function fne(r,e){Te.forEach(r.nodes(),function(t){var n=r.node(t),i=e.node(t);n&&(n.x=i.x,n.y=i.y,e.children(t).length&&(n.width=i.width,n.height=i.height))}),Te.forEach(r.edges(),function(t){var n=r.edge(t),i=e.edge(t);n.points=i.points,Te.has(i,"x")&&(n.x=i.x,n.y=i.y)}),r.graph().width=e.graph().width,r.graph().height=e.graph().height}var gne=["nodesep","edgesep","ranksep","marginx","marginy"],vne={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},pne=["acyclicer","ranker","rankdir","align"],yne=["width","height"],mne={width:0,height:0},wne=["minlen","weight","width","height","labeloffset"],Bne={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},bne=["labelpos"];function Ene(r){var e=new cne({multigraph:!0,compound:!0}),t=Im(r.graph());return e.setGraph(Te.merge({},vne,Om(t,gne),Te.pick(t,pne))),Te.forEach(r.nodes(),function(n){var i=Im(r.node(n));e.setNode(n,Te.defaults(Om(i,yne),mne)),e.setParent(n,r.parent(n))}),Te.forEach(r.edges(),function(n){var i=Im(r.edge(n));e.setEdge(n,Te.merge({},Bne,Om(i,wne),Te.pick(i,bne)))}),e}function xne(r){var e=r.graph();e.ranksep/=2,Te.forEach(r.edges(),function(t){var n=r.edge(t);n.minlen*=2,n.labelpos.toLowerCase()!=="c"&&(e.rankdir==="TB"||e.rankdir==="BT"?n.width+=n.labeloffset:n.height+=n.labeloffset)})}function Cne(r){Te.forEach(r.edges(),function(e){var t=r.edge(e);if(t.width&&t.height){var n=r.node(e.v),i=r.node(e.w),a={rank:(i.rank-n.rank)/2+n.rank,e};Ua.addDummyNode(r,"edge-proxy",a,"_ep")}})}function Sne(r){var e=0;Te.forEach(r.nodes(),function(t){var n=r.node(t);n.borderTop&&(n.minRank=r.node(n.borderTop).rank,n.maxRank=r.node(n.borderBottom).rank,e=Te.max(e,n.maxRank))}),r.graph().maxRank=e}function Fne(r){Te.forEach(r.nodes(),function(e){var t=r.node(e);t.dummy==="edge-proxy"&&(r.edge(t.e).labelRank=t.rank,r.removeNode(e))})}function Tne(r){var e=Number.POSITIVE_INFINITY,t=0,n=Number.POSITIVE_INFINITY,i=0,a=r.graph(),s=a.marginx||0,o=a.marginy||0;function A(l){var c=l.x,u=l.y,h=l.width,d=l.height;e=Math.min(e,c-h/2),t=Math.max(t,c+h/2),n=Math.min(n,u-d/2),i=Math.max(i,u+d/2)}Te.forEach(r.nodes(),function(l){A(r.node(l))}),Te.forEach(r.edges(),function(l){var c=r.edge(l);Te.has(c,"x")&&A(c)}),e-=s,n-=o,Te.forEach(r.nodes(),function(l){var c=r.node(l);c.x-=e,c.y-=n}),Te.forEach(r.edges(),function(l){var c=r.edge(l);Te.forEach(c.points,function(u){u.x-=e,u.y-=n}),Te.has(c,"x")&&(c.x-=e),Te.has(c,"y")&&(c.y-=n)}),a.width=t-e+s,a.height=i-n+o}function Mne(r){Te.forEach(r.edges(),function(e){var t=r.edge(e),n=r.node(e.v),i=r.node(e.w),a,s;t.points?(a=t.points[0],s=t.points[t.points.length-1]):(t.points=[],a=i,s=n),t.points.unshift(Ua.intersectRect(n,a)),t.points.push(Ua.intersectRect(i,s))})}function One(r){Te.forEach(r.edges(),function(e){var t=r.edge(e);if(Te.has(t,"x"))switch((t.labelpos==="l"||t.labelpos==="r")&&(t.width-=t.labeloffset),t.labelpos){case"l":t.x-=t.width/2+t.labeloffset;break;case"r":t.x+=t.width/2+t.labeloffset;break}})}function Ine(r){Te.forEach(r.edges(),function(e){var t=r.edge(e);t.reversed&&t.points.reverse()})}function _ne(r){Te.forEach(r.nodes(),function(e){if(r.children(e).length){var t=r.node(e),n=r.node(t.borderTop),i=r.node(t.borderBottom),a=r.node(Te.last(t.borderLeft)),s=r.node(Te.last(t.borderRight));t.width=Math.abs(s.x-a.x),t.height=Math.abs(i.y-n.y),t.x=a.x+t.width/2,t.y=n.y+t.height/2}}),Te.forEach(r.nodes(),function(e){r.node(e).dummy==="border"&&r.removeNode(e)})}function kne(r){Te.forEach(r.edges(),function(e){if(e.v===e.w){var t=r.node(e.v);t.selfEdges||(t.selfEdges=[]),t.selfEdges.push({e,label:r.edge(e)}),r.removeEdge(e)}})}function Lne(r){var e=Ua.buildLayerMatrix(r);Te.forEach(e,function(t){var n=0;Te.forEach(t,function(i,a){var s=r.node(i);s.order=a+n,Te.forEach(s.selfEdges,function(o){Ua.addDummyNode(r,"selfedge",{width:o.label.width,height:o.label.height,rank:s.rank,order:a+ ++n,e:o.e,label:o.label},"_se")}),delete s.selfEdges})})}function Qne(r){Te.forEach(r.nodes(),function(e){var t=r.node(e);if(t.dummy==="selfedge"){var n=r.node(t.e.v),i=n.x+n.width/2,a=n.y,s=t.x-i,o=n.height/2;r.setEdge(t.e,t.label),r.removeNode(e),t.label.points=[{x:i+2*s/3,y:a-o},{x:i+5*s/6,y:a-o},{x:i+s,y:a},{x:i+5*s/6,y:a+o},{x:i+2*s/3,y:a+o}],t.label.x=t.x,t.label.y=t.y}})}function Om(r,e){return Te.mapValues(Te.pick(r,e),Number)}function Im(r){var e={};return Te.forEach(r,function(t,n){e[n.toLowerCase()]=t}),e}var Au=dt,Nne=jn,Une=Yr.Graph,Pne={debugOrdering:Rne};function Rne(r){var e=Nne.buildLayerMatrix(r),t=new Une({compound:!0,multigraph:!0}).setGraph({});return Au.forEach(r.nodes(),function(n){t.setNode(n,{label:n}),t.setParent(n,"layer"+r.node(n).rank)}),Au.forEach(r.edges(),function(n){t.setEdge(n.v,n.w,{},n.name)}),Au.forEach(e,function(n,i){var a="layer"+i;t.setNode(a,{rank:"same"}),Au.reduce(n,function(s,o){return t.setEdge(s,o,{style:"invis"}),o})}),t}var Dne="0.8.5",ON={graphlib:Yr,layout:une,debug:Pne,util:{time:jn.time,notime:jn.notime},version:Dne};const Hne=Fw(ON);class Xd{constructor(e){this.id="dagre",this.options={},Object.assign(this.options,Xd.defaultOptions,e)}execute(e,t){return Ce(this,void 0,void 0,function*(){return this.genericDagreLayout(!1,e,Object.assign(Object.assign({},this.options),t))})}assign(e,t){return Ce(this,void 0,void 0,function*(){yield this.genericDagreLayout(!0,e,Object.assign(Object.assign({},this.options),t))})}genericDagreLayout(e,t,n){return Ce(this,void 0,void 0,function*(){const{nodeSize:i}=n,a=new ON.graphlib.Graph;a.setGraph(n),a.setDefaultEdgeLabel(()=>({}));const s=t.getAllNodes(),o=t.getAllEdges();[...s,...o].some(({id:l})=>Z(l))&&console.error("Dagre layout only support string id, it will convert number to string."),t.getAllNodes().forEach(l=>{const{id:c}=l,u=Object.assign({},l.data);if(i!==void 0){const[h,d]=Ul(ie(i)?i(l):i);Object.assign(u,{width:h,height:d})}a.setNode(c.toString(),u)}),t.getAllEdges().forEach(({id:l,source:c,target:u})=>{a.setEdge(c.toString(),u.toString(),{id:l})}),Hne.layout(a);const A={nodes:[],edges:[]};return a.nodes().forEach(l=>{const c=a.node(l);A.nodes.push({id:l,data:c}),e&&t.mergeNodeData(l,c)}),a.edges().forEach(l=>{const c=a.edge(l),{id:u}=c,h=lt(c,["id"]),{v:d,w:f}=l;A.edges.push({id:u,source:d,target:f,data:h}),e&&t.mergeEdgeData(u,h)}),A})}}Xd.defaultOptions={};class jB{constructor(e){this.id=e.id||0,this.rx=e.rx,this.ry=e.ry,this.fx=0,this.fy=0,this.mass=e.mass,this.degree=e.degree,this.g=e.g||0}distanceTo(e){const t=this.rx-e.rx,n=this.ry-e.ry;return Math.hypot(t,n)}setPos(e,t){this.rx=e,this.ry=t}resetForce(){this.fx=0,this.fy=0}addForce(e){const t=e.rx-this.rx,n=e.ry-this.ry;let i=Math.hypot(t,n);i=i<1e-4?1e-4:i;const a=this.g*(this.degree+1)*(e.degree+1)/i;this.fx+=a*t/i,this.fy+=a*n/i}in(e){return e.contains(this.rx,this.ry)}add(e){const t=this.mass+e.mass,n=(this.rx*this.mass+e.rx*e.mass)/t,i=(this.ry*this.mass+e.ry*e.mass)/t,a=this.degree+e.degree,s={rx:n,ry:i,mass:t,degree:a};return new jB(s)}}class yo{constructor(e){this.xmid=e.xmid,this.ymid=e.ymid,this.length=e.length,this.massCenter=e.massCenter||[0,0],this.mass=e.mass||1}getLength(){return this.length}contains(e,t){const n=this.length/2;return e<=this.xmid+n&&e>=this.xmid-n&&t<=this.ymid+n&&t>=this.ymid-n}NW(){const e=this.xmid-this.length/4,t=this.ymid+this.length/4,n=this.length/2,i={xmid:e,ymid:t,length:n};return new yo(i)}NE(){const e=this.xmid+this.length/4,t=this.ymid+this.length/4,n=this.length/2,i={xmid:e,ymid:t,length:n};return new yo(i)}SW(){const e=this.xmid-this.length/4,t=this.ymid-this.length/4,n=this.length/2,i={xmid:e,ymid:t,length:n};return new yo(i)}SE(){const e=this.xmid+this.length/4,t=this.ymid-this.length/4,n=this.length/2,i={xmid:e,ymid:t,length:n};return new yo(i)}}class mo{constructor(e){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,e!=null&&(this.quad=e)}insert(e){if(this.body==null){this.body=e;return}this._isExternal()?(this.quad&&(this.NW=new mo(this.quad.NW()),this.NE=new mo(this.quad.NE()),this.SW=new mo(this.quad.SW()),this.SE=new mo(this.quad.SE())),this._putBody(this.body),this._putBody(e),this.body=this.body.add(e)):(this.body=this.body.add(e),this._putBody(e))}_putBody(e){this.quad&&(e.in(this.quad.NW())&&this.NW?this.NW.insert(e):e.in(this.quad.NE())&&this.NE?this.NE.insert(e):e.in(this.quad.SW())&&this.SW?this.SW.insert(e):e.in(this.quad.SE())&&this.SE&&this.SE.insert(e))}_isExternal(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null}updateForce(e){if(!(this.body==null||e===this.body))if(this._isExternal())e.addForce(this.body);else{const t=this.quad?this.quad.getLength():0,n=this.body.distanceTo(e);t/n<this.theta?e.addForce(this.body):(this.NW&&this.NW.updateForce(e),this.NE&&this.NE.updateForce(e),this.SW&&this.SW.updateForce(e),this.SE&&this.SE.updateForce(e))}}}const Gne={center:[0,0],width:300,height:300,kr:5,kg:1,mode:"normal",preventOverlap:!1,dissuadeHubs:!1,maxIteration:0,ks:.1,ksmax:10,tao:.1};class Kne{constructor(e={}){this.options=e,this.id="forceAtlas2",this.options=Object.assign(Object.assign({},Gne),e)}execute(e,t){return Ce(this,void 0,void 0,function*(){return this.genericForceAtlas2Layout(!1,e,t)})}assign(e,t){return Ce(this,void 0,void 0,function*(){yield this.genericForceAtlas2Layout(!0,e,t)})}genericForceAtlas2Layout(e,t,n){return Ce(this,void 0,void 0,function*(){const i=t.getAllEdges(),a=t.getAllNodes(),s=this.formatOptions(n,a.length),{width:o,height:A,prune:l,maxIteration:c,nodeSize:u,center:h}=s;if(!(a!=null&&a.length)||a.length===1)return Ps(t,e,h);const d=a.map(p=>ar(p,[o,A])),f=i.filter(p=>{const{source:y,target:m}=p;return y!==m}),g=new Wt({nodes:d,edges:f}),v=this.getSizes(g,u);if(this.run(g,t,c,v,e,s),l){for(let y=0;y<f.length;y+=1){const{source:m,target:w}=f[y],B=g.getDegree(m),b=g.getDegree(m);if(B<=1){const E=g.getNode(w);g.mergeNodeData(m,{x:E.data.x,y:E.data.y})}else if(b<=1){const E=g.getNode(m);g.mergeNodeData(w,{x:E.data.x,y:E.data.y})}}const p=Object.assign(Object.assign({},s),{prune:!1,barnesHut:!1});this.run(g,t,100,v,e,p)}return{nodes:d,edges:i}})}getSizes(e,t){const n=e.getAllNodes(),i={};for(let a=0;a<n.length;a+=1){const s=n[a];i[s.id]=wB(t,void 0)(s)}return i}formatOptions(e={},t){const n=Object.assign(Object.assign({},this.options),e),{center:i,width:a,height:s,barnesHut:o,prune:A,maxIteration:l,kr:c,kg:u}=n;return n.width=!a&&typeof window<"u"?window.innerWidth:a,n.height=!s&&typeof window<"u"?window.innerHeight:s,n.center=i||[n.width/2,n.height/2],o===void 0&&t>250&&(n.barnesHut=!0),A===void 0&&t>100&&(n.prune=!0),l===0&&!A?(n.maxIteration=250,t<=200&&t>100?n.maxIteration=1e3:t>200&&(n.maxIteration=1200)):l===0&&A&&(n.maxIteration=100,t<=200&&t>100?n.maxIteration=500:t>200&&(n.maxIteration=950)),c||(n.kr=50,t>100&&t<=500?n.kr=20:t>500&&(n.kr=1)),u||(n.kg=20,t>100&&t<=500?n.kg=10:t>500&&(n.kg=1)),n}run(e,t,n,i,a,s){const{kr:o,barnesHut:A,onTick:l}=s,c=e.getAllNodes();let u=0,h=n;const d={},f={},g={};for(let v=0;v<c.length;v+=1){const{data:p,id:y}=c[v];if(d[y]=[0,0],A){const m={id:v,rx:p.x,ry:p.y,mass:1,g:o,degree:e.getDegree(y)};g[y]=new jB(m)}}for(;h>0;)u=this.oneStep(e,{iter:h,preventOverlapIters:50,krPrime:100,sg:u,forces:d,preForces:f,bodies:g,sizes:i},s),h--,l==null||l({nodes:c,edges:t.getAllEdges()});return e}oneStep(e,t,n){const{iter:i,preventOverlapIters:a,krPrime:s,sg:o,preForces:A,bodies:l,sizes:c}=t;let{forces:u}=t;const{preventOverlap:h,barnesHut:d}=n,f=e.getAllNodes();for(let g=0;g<f.length;g+=1){const{id:v}=f[g];A[v]=[...u[v]],u[v]=[0,0]}return u=this.getAttrForces(e,i,a,c,u,n),d&&(h&&i>a||!h)?u=this.getOptRepGraForces(e,u,l,n):u=this.getRepGraForces(e,i,a,u,s,c,n),this.updatePos(e,u,A,o,n)}getAttrForces(e,t,n,i,a,s){const{preventOverlap:o,dissuadeHubs:A,mode:l,prune:c}=s,u=e.getAllEdges();for(let h=0;h<u.length;h+=1){const{source:d,target:f}=u[h],g=e.getNode(d),v=e.getNode(f),p=e.getDegree(d),y=e.getDegree(f);if(c&&(p<=1||y<=1))continue;const m=[v.data.x-g.data.x,v.data.y-g.data.y];let w=Math.hypot(m[0],m[1]);w=w<1e-4?1e-4:w,m[0]=m[0]/w,m[1]=m[1]/w,o&&t<n&&(w=w-i[d]-i[f]);let B=w,b=B;l==="linlog"&&(B=Math.log(1+w),b=B),A&&(B=w/p,b=w/y),o&&t<n&&w<=0?(B=0,b=0):o&&t<n&&w>0&&(B=w,b=w),a[d][0]+=B*m[0],a[f][0]-=b*m[0],a[d][1]+=B*m[1],a[f][1]-=b*m[1]}return a}getOptRepGraForces(e,t,n,i){const{kg:a,center:s,prune:o}=i,A=e.getAllNodes(),l=A.length;let c=9e10,u=-9e10,h=9e10,d=-9e10;for(let y=0;y<l;y+=1){const{id:m,data:w}=A[y];o&&e.getDegree(m)<=1||(n[m].setPos(w.x,w.y),w.x>=u&&(u=w.x),w.x<=c&&(c=w.x),w.y>=d&&(d=w.y),w.y<=h&&(h=w.y))}const f=Math.max(u-c,d-h),g={xmid:(u+c)/2,ymid:(d+h)/2,length:f,massCenter:s,mass:l},v=new yo(g),p=new mo(v);for(let y=0;y<l;y+=1){const{id:m}=A[y];o&&e.getDegree(m)<=1||n[m].in(v)&&p.insert(n[m])}for(let y=0;y<l;y+=1){const{id:m,data:w}=A[y],B=e.getDegree(m);if(o&&B<=1)continue;n[m].resetForce(),p.updateForce(n[m]),t[m][0]-=n[m].fx,t[m][1]-=n[m].fy;const b=[w.x-s[0],w.y-s[1]];let E=Math.hypot(b[0],b[1]);E=E<1e-4?1e-4:E,b[0]=b[0]/E,b[1]=b[1]/E;const x=a*(B+1);t[m][0]-=x*b[0],t[m][1]-=x*b[1]}return t}getRepGraForces(e,t,n,i,a,s,o){const{preventOverlap:A,kr:l,kg:c,center:u,prune:h}=o,d=e.getAllNodes(),f=d.length;for(let g=0;g<f;g+=1){const v=d[g],p=e.getDegree(v.id);for(let B=g+1;B<f;B+=1){const b=d[B],E=e.getDegree(b.id);if(h&&(p<=1||E<=1))continue;const x=[b.data.x-v.data.x,b.data.y-v.data.y];let S=Math.hypot(x[0],x[1]);S=S<1e-4?1e-4:S,x[0]=x[0]/S,x[1]=x[1]/S,A&&t<n&&(S=S-s[v.id]-s[b.id]);let C=l*(p+1)*(E+1)/S;A&&t<n&&S<0?C=a*(p+1)*(E+1):A&&t<n&&S===0?C=0:A&&t<n&&S>0&&(C=l*(p+1)*(E+1)/S),i[v.id][0]-=C*x[0],i[b.id][0]+=C*x[0],i[v.id][1]-=C*x[1],i[b.id][1]+=C*x[1]}const y=[v.data.x-u[0],v.data.y-u[1]],m=Math.hypot(y[0],y[1]);y[0]=y[0]/m,y[1]=y[1]/m;const w=c*(p+1);i[v.id][0]-=w*y[0],i[v.id][1]-=w*y[1]}return i}updatePos(e,t,n,i,a){const{ks:s,tao:o,prune:A,ksmax:l}=a,c=e.getAllNodes(),u=c.length,h=[],d=[];let f=0,g=0,v=i;for(let y=0;y<u;y+=1){const{id:m}=c[y],w=e.getDegree(m);if(A&&w<=1)continue;const B=[t[m][0]-n[m][0],t[m][1]-n[m][1]],b=Math.hypot(B[0],B[1]),E=[t[m][0]+n[m][0],t[m][1]+n[m][1]],x=Math.hypot(E[0],E[1]);h[y]=b,d[y]=x/2,f+=(w+1)*h[y],g+=(w+1)*d[y]}const p=v;v=o*g/f,p!==0&&(v=v>1.5*p?1.5*p:v);for(let y=0;y<u;y+=1){const{id:m,data:w}=c[y],B=e.getDegree(m);if(A&&B<=1||Z(w.fx)&&Z(w.fy))continue;let b=s*v/(1+v*Math.sqrt(h[y])),E=Math.hypot(t[m][0],t[m][1]);E=E<1e-4?1e-4:E;const x=l/E;b=b>x?x:b;const S=b*t[m][0],C=b*t[m][1];e.mergeNodeData(m,{x:w.x+S,y:w.y+C})}return v}}const zne={maxIteration:1e3,gravity:10,speed:5,clustering:!1,clusterGravity:10,width:300,height:300,nodeClusterBy:"cluster"},Vne=800;class jne{constructor(e={}){this.options=e,this.id="fruchterman",this.timeInterval=0,this.running=!1,this.options=Object.assign(Object.assign({},zne),e)}execute(e,t){return Ce(this,void 0,void 0,function*(){return this.genericFruchtermanLayout(!1,e,t)})}assign(e,t){return Ce(this,void 0,void 0,function*(){yield this.genericFruchtermanLayout(!0,e,t)})}stop(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval),this.running=!1}tick(e=this.options.maxIteration||1){if(this.lastResult)return this.lastResult;for(let n=0;n<e;n++)this.runOneStep(this.lastGraph,this.lastClusterMap,this.lastOptions);const t={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&t.nodes.forEach(n=>this.lastGraph.mergeNodeData(n.id,{x:n.data.x,y:n.data.y,z:this.options.dimensions===3?n.data.z:void 0})),t}genericFruchtermanLayout(e,t,n){return Ce(this,void 0,void 0,function*(){if(this.running)return;const i=this.formatOptions(n),{dimensions:a,width:s,height:o,center:A,clustering:l,nodeClusterBy:c,maxIteration:u,onTick:h}=i,d=t.getAllNodes(),f=t.getAllEdges();if(!(d!=null&&d.length)){const m={nodes:[],edges:f};return this.lastResult=m,m}if(d.length===1){e&&t.mergeNodeData(d[0].id,{x:A[0],y:A[1],z:a===3?A[2]:void 0});const m={nodes:[Object.assign(Object.assign({},d[0]),{data:Object.assign(Object.assign({},d[0].data),{x:A[0],y:A[1],z:a===3?A[2]:void 0})})],edges:f};return this.lastResult=m,m}const g=d.map(m=>ar(m,[s,o])),v=new Wt({nodes:g,edges:f}),p={};if(l&&g.forEach(m=>{const w=m.data[c];p[w]||(p[w]={name:w,cx:0,cy:0,count:0})}),this.lastLayoutNodes=g,this.lastLayoutEdges=f,this.lastAssign=e,this.lastGraph=v,this.lastOptions=i,this.lastClusterMap=p,typeof window>"u")return;let y=0;return new Promise(m=>{this.timeInterval=window.setInterval(()=>{if(!this.running){m({nodes:g,edges:f});return}this.runOneStep(v,p,i),e&&g.forEach(({id:w,data:B})=>t.mergeNodeData(w,{x:B.x,y:B.y,z:a===3?B.z:void 0})),h==null||h({nodes:g,edges:f}),y++,y>=u&&(window.clearInterval(this.timeInterval),m({nodes:g,edges:f}))},0),this.running=!0})})}formatOptions(e={}){const t=Object.assign(Object.assign({},this.options),e),{clustering:n,nodeClusterBy:i}=t,{center:a,width:s,height:o}=t;return t.width=!s&&typeof window<"u"?window.innerWidth:s,t.height=!o&&typeof window<"u"?window.innerHeight:o,t.center=a||[t.width/2,t.height/2],t.clustering=n&&!!i,t}runOneStep(e,t,n){const{dimensions:i,height:a,width:s,gravity:o,center:A,speed:l,clustering:c,nodeClusterBy:u,clusterGravity:h}=n,d=a*s,f=Math.sqrt(d)/10,g=e.getAllNodes(),v=d/(g.length+1),p=Math.sqrt(v),y={};if(this.applyCalculate(e,y,p,v),c){for(const w in t)t[w].cx=0,t[w].cy=0,t[w].count=0;g.forEach(w=>{const{data:B}=w,b=t[B[u]];Z(B.x)&&(b.cx+=B.x),Z(B.y)&&(b.cy+=B.y),b.count++});for(const w in t)t[w].cx/=t[w].count,t[w].cy/=t[w].count;const m=h||o;g.forEach((w,B)=>{const{id:b,data:E}=w;if(!Z(E.x)||!Z(E.y))return;const x=t[E[u]],S=Math.sqrt((E.x-x.cx)*(E.x-x.cx)+(E.y-x.cy)*(E.y-x.cy)),C=p*m;y[b].x-=C*(E.x-x.cx)/S,y[b].y-=C*(E.y-x.cy)/S})}g.forEach((m,w)=>{const{id:B,data:b}=m;if(!Z(b.x)||!Z(b.y))return;const E=.01*p*o;y[B].x-=E*(b.x-A[0]),y[B].y-=E*(b.y-A[1]),i===3&&(y[B].z-=E*(b.z-A[2]))}),g.forEach((m,w)=>{const{id:B,data:b}=m;if(Z(b.fx)&&Z(b.fy)){b.x=b.fx,b.y=b.fy,i===3&&(b.z=b.fz);return}if(!Z(b.x)||!Z(b.y))return;const E=Math.sqrt(y[B].x*y[B].x+y[B].y*y[B].y+(i===3?y[B].z*y[B].z:0));if(E>0){const x=Math.min(f*(l/Vne),E);e.mergeNodeData(B,{x:b.x+y[B].x/E*x,y:b.y+y[B].y/E*x,z:i===3?b.z+y[B].z/E*x:void 0})}})}applyCalculate(e,t,n,i){this.calRepulsive(e,t,i),this.calAttractive(e,t,n)}calRepulsive(e,t,n){const i=e.getAllNodes();i.forEach(({data:a,id:s},o)=>{t[s]={x:0,y:0,z:0},i.forEach(({data:A,id:l},c)=>{if(o<=c||!Z(a.x)||!Z(A.x)||!Z(a.y)||!Z(A.y))return;let u=a.x-A.x,h=a.y-A.y,d=this.options.dimensions===3?a.z-A.z:0,f=u*u+h*h+d*d;f===0&&(f=1,u=.01,h=.01,d=.01);const g=n/f,v=u*g,p=h*g,y=d*g;t[s].x+=v,t[s].y+=p,t[l].x-=v,t[l].y-=p,this.options.dimensions===3&&(t[s].z+=y,t[l].z-=y)})})}calAttractive(e,t,n){e.getAllEdges().forEach(a=>{const{source:s,target:o}=a;if(!s||!o||s===o)return;const{data:A}=e.getNode(s),{data:l}=e.getNode(o);if(!Z(l.x)||!Z(A.x)||!Z(l.y)||!Z(A.y))return;const c=l.x-A.x,u=l.y-A.y,h=this.options.dimensions===3?l.z-A.z:0,d=Math.sqrt(c*c+u*u+h*h)/n,f=c*d,g=u*d,v=h*d;t[s].x+=f,t[s].y+=g,t[o].x-=f,t[o].y-=g,this.options.dimensions===3&&(t[s].z+=v,t[o].z-=v)})}}const $ne={begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30,width:300,height:300};class Wne{constructor(e={}){this.options=e,this.id="grid",this.options=Object.assign(Object.assign({},$ne),e)}execute(e,t){return Ce(this,void 0,void 0,function*(){return this.genericGridLayout(!1,e,t)})}assign(e,t){return Ce(this,void 0,void 0,function*(){yield this.genericGridLayout(!0,e,t)})}genericGridLayout(e,t,n){return Ce(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),n),{begin:a=[0,0],condense:s,preventOverlapPadding:o,preventOverlap:A,rows:l,cols:c,nodeSpacing:u,nodeSize:h,width:d,height:f,position:g}=i;let{sortBy:v}=i;const p=t.getAllNodes(),y=t.getAllEdges(),m=p==null?void 0:p.length;if(!m||m===1)return Ps(t,e,a);const w=p.map(_=>ar(_));v!=="id"&&(!_e(v)||w[0].data[v]===void 0)&&(v="degree"),v==="degree"?w.sort((_,Q)=>t.getDegree(Q.id,"both")-t.getDegree(_.id,"both")):v==="id"?w.sort((_,Q)=>Z(Q.id)&&Z(_.id)?Q.id-_.id:`${_.id}`.localeCompare(`${Q.id}`)):w.sort((_,Q)=>Q.data[v]-_.data[v]);const B=!d&&typeof window<"u"?window.innerWidth:d,b=!f&&typeof window<"u"?window.innerHeight:f,E=m,x={rows:l,cols:c};if(l!=null&&c!=null)x.rows=l,x.cols=c;else if(l!=null&&c==null)x.rows=l,x.cols=Math.ceil(E/x.rows);else if(l==null&&c!=null)x.cols=c,x.rows=Math.ceil(E/x.cols);else{const _=Math.sqrt(E*b/B);x.rows=Math.round(_),x.cols=Math.round(B/b*_)}if(x.rows=Math.max(x.rows,1),x.cols=Math.max(x.cols,1),x.cols*x.rows>E){const _=lu(x),Q=cu(x);(_-1)*Q>=E?lu(x,_-1):(Q-1)*_>=E&&cu(x,Q-1)}else for(;x.cols*x.rows<E;){const _=lu(x),Q=cu(x);(Q+1)*_>=E?cu(x,Q+1):lu(x,_+1)}let S=s?0:B/x.cols,C=s?0:b/x.rows;if(A||u){const _=ys(10,u),Q=mB(30,h,!1);w.forEach(L=>{(!L.data.x||!L.data.y)&&(L.data.x=0,L.data.y=0);const k=t.getNode(L.id),[U,D]=Ul(Q(k)||30),j=_!==void 0?_(L):o,X=U+j,W=D+j;S=Math.max(S,X),C=Math.max(C,W)})}const F={},M={row:0,col:0},T={};for(let _=0;_<w.length;_++){const Q=w[_];let L;if(g&&(L=g(t.getNode(Q.id))),L&&(L.row!==void 0||L.col!==void 0)){const k={row:L.row,col:L.col};if(k.col===void 0)for(k.col=0;cw(F,k);)k.col++;else if(k.row===void 0)for(k.row=0;cw(F,k);)k.row++;T[Q.id]=k,IN(F,k)}qne(Q,a,S,C,T,x,M,F)}const O={nodes:w,edges:y};return e&&w.forEach(_=>{t.mergeNodeData(_.id,{x:_.data.x,y:_.data.y})}),O})}}const lu=(r,e)=>{let t;const n=r.rows||5,i=r.cols||5;return e==null?t=Math.min(n,i):Math.min(n,i)===r.rows?r.rows=e:r.cols=e,t},cu=(r,e)=>{let t;const n=r.rows||5,i=r.cols||5;return e==null?t=Math.max(n,i):Math.max(n,i)===r.rows?r.rows=e:r.cols=e,t},cw=(r,e)=>r[`c-${e.row}-${e.col}`]||!1,IN=(r,e)=>r[`c-${e.row}-${e.col}`]=!0,SM=(r,e)=>{const t=r.cols||5;e.col++,e.col>=t&&(e.col=0,e.row++)},qne=(r,e,t,n,i,a,s,o)=>{let A,l;const c=i[r.id];if(c)A=c.col*t+t/2+e[0],l=c.row*n+n/2+e[1];else{for(;cw(o,s);)SM(a,s);A=s.col*t+t/2+e[0],l=s.row*n+n/2+e[1],IN(o,s),SM(a,s)}r.data.x=A,r.data.y=l},Yne=(r,e,t)=>{try{const n=Ba.mul(Ba.pow(e,2),-.5),i=n.mean("row"),a=n.mean("column"),s=n.mean();n.add(s).subRowVector(i).subColumnVector(a);const o=new AQ(n),A=Ba.sqrt(o.diagonalMatrix).diagonal();return o.leftSingularVectors.toJSON().map(l=>Ba.mul([l],[A]).toJSON()[0].splice(0,r))}catch{const i=[];for(let a=0;a<e.length;a++){const s=Math.random()*t,o=Math.random()*t;i.push([s,o])}return i}},Xne=800,Zne={iterations:10,height:10,width:10,speed:100,gravity:10,k:5},Jne=(r,e)=>{const t=Object.assign(Object.assign({},Zne),e),{positions:n,iterations:i,width:a,k:s,speed:o=100,strictRadial:A,focusIdx:l,radii:c=[],nodeSizeFunc:u}=t,h=r.getAllNodes(),d=[],f=a/10;for(let g=0;g<i;g++)n.forEach((v,p)=>{d[p]={x:0,y:0}}),ere(h,n,d,s,c,u),tre(n,d,o,A,l,f,a,c);return n},ere=(r,e,t,n,i,a)=>{e.forEach((s,o)=>{t[o]={x:0,y:0},e.forEach((A,l)=>{if(o===l||i[o]!==i[l])return;let c=s.x-A.x,u=s.y-A.y,h=Math.sqrt(c*c+u*u);if(h===0){h=1;const d=o>l?1:-1;c=.01*d,u=.01*d}if(h<a(r[o])/2+a(r[l])/2){const d=n*n/h;t[o].x+=c/h*d,t[o].y+=u/h*d}})})},tre=(r,e,t,n,i,a,s,o)=>{const A=a||s/10;return n&&e.forEach((l,c)=>{const u=r[c].x-r[i].x,h=r[c].y-r[i].y,d=Math.sqrt(u*u+h*h);let f=h/d,g=-u/d;const v=Math.sqrt(l.x*l.x+l.y*l.y);let p=Math.acos((f*l.x+g*l.y)/v);p>Math.PI/2&&(p-=Math.PI/2,f*=-1,g*=-1);const y=Math.cos(p)*v;l.x=f*y,l.y=g*y}),r.forEach((l,c)=>{if(c===i)return;const u=Math.sqrt(e[c].x*e[c].x+e[c].y*e[c].y);if(u>0&&c!==i){const h=Math.min(A*(t/Xne),u);if(l.x+=e[c].x/u*h,l.y+=e[c].y/u*h,n){let d=l.x-r[i].x,f=l.y-r[i].y;const g=Math.sqrt(d*d+f*f);d=d/g*o[c],f=f/g*o[c],l.x=r[i].x+d,l.y=r[i].y+f}}}),r},nre={maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,strictRadial:!0,maxPreventOverlapIteration:200,sortStrength:10};class rre{constructor(e={}){this.options=e,this.id="radial",this.options=Object.assign(Object.assign({},nre),e)}execute(e,t){return Ce(this,void 0,void 0,function*(){return this.genericRadialLayout(!1,e,t)})}assign(e,t){return Ce(this,void 0,void 0,function*(){yield this.genericRadialLayout(!0,e,t)})}genericRadialLayout(e,t,n){return Ce(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),n),{width:a,height:s,center:o,focusNode:A,unitRadius:l,nodeSize:c,nodeSpacing:u,strictRadial:h,preventOverlap:d,maxPreventOverlapIteration:f,sortBy:g,linkDistance:v=50,sortStrength:p=10,maxIteration:y=1e3}=i,m=t.getAllNodes(),w=t.getAllEdges(),B=!a&&typeof window<"u"?window.innerWidth:a,b=!s&&typeof window<"u"?window.innerHeight:s,E=o||[B/2,b/2];if(!(m!=null&&m.length)||m.length===1)return Ps(t,e,E);let x=m[0];if(_e(A)){for(let ne=0;ne<m.length;ne++)if(m[ne].id===A){x=m[ne];break}}else x=A||m[0];const S=sre(m,x.id),C=qL({nodes:m,edges:w}),F=WL(C),M=Are(F,S);ore(F,S,M+1);const T=F[S];let O=B-E[0]>E[0]?E[0]:B-E[0],_=b-E[1]>E[1]?E[1]:b-E[1];O===0&&(O=B/2),_===0&&(_=b/2);const Q=Math.min(O,_),L=Math.max(...T),k=[],U=l||Q/L;T.forEach((ne,Le)=>{k[Le]=ne*U});const D=ire(m,F,v,k,U,g,p),j=are(D),X=Yne(v,D,v);let W=X.map(([ne,Le])=>({x:(isNaN(ne)?Math.random()*v:ne)-X[S][0],y:(isNaN(Le)?Math.random()*v:Le)-X[S][1]}));this.run(y,W,j,D,k,S);let Y;if(d){Y=wB(c,u);const ne={nodes:m,nodeSizeFunc:Y,positions:W,radii:k,height:b,width:B,strictRadial:!!h,focusIdx:S,iterations:f||200,k:W.length/4.5};W=Jne(t,ne)}const se=[];return W.forEach((ne,Le)=>{const ke=ar(m[Le]);ke.data.x=ne.x+E[0],ke.data.y=ne.y+E[1],se.push(ke)}),e&&se.forEach(ne=>t.mergeNodeData(ne.id,{x:ne.data.x,y:ne.data.y})),{nodes:se,edges:w}})}run(e,t,n,i,a,s){for(let o=0;o<=e;o++){const A=o/e;this.oneIteration(A,t,a,i,n,s)}}oneIteration(e,t,n,i,a,s){const o=1-e;t.forEach((A,l)=>{const c=oC(A,{x:0,y:0}),u=c===0?0:1/c;if(l===s)return;let h=0,d=0,f=0;t.forEach((v,p)=>{if(l===p)return;const y=oC(A,v),m=y===0?0:1/y,w=i[p][l];f+=a[l][p],h+=a[l][p]*(v.x+w*(A.x-v.x)*m),d+=a[l][p]*(v.y+w*(A.y-v.y)*m)});const g=n[l]===0?0:1/n[l];f*=o,f+=e*g*g,h*=o,h+=e*g*A.x*u,A.x=h/f,d*=o,d+=e*g*A.y*u,A.y=d/f})}}const ire=(r,e,t,n,i,a,s)=>{if(!r)return[];const o=[];if(e){const A={};e.forEach((l,c)=>{const u=[];l.forEach((h,d)=>{var f,g;if(c===d)u.push(0);else if(n[c]===n[d])if(a==="data")u.push(h*(Math.abs(c-d)*s)/(n[c]/i));else if(a){let v,p;if(A[r[c].id])v=A[r[c].id];else{const y=(a==="id"?r[c].id:(f=r[c].data)===null||f===void 0?void 0:f[a])||0;_e(y)?v=y.charCodeAt(0):v=y,A[r[c].id]=v}if(A[r[d].id])p=A[r[d].id];else{const y=(a==="id"?r[d].id:(g=r[d].data)===null||g===void 0?void 0:g[a])||0;_e(y)?p=y.charCodeAt(0):p=y,A[r[d].id]=p}u.push(h*(Math.abs(v-p)*s)/(n[c]/i))}else u.push(h*t/(n[c]/i));else{const v=(t+i)/2;u.push(h*v)}}),o.push(u)})}return o},are=r=>{const e=r.length,t=r[0].length,n=[];for(let i=0;i<e;i++){const a=[];for(let s=0;s<t;s++)r[i][s]!==0?a.push(1/(r[i][s]*r[i][s])):a.push(0);n.push(a)}return n},sre=(r,e)=>{let t=-1;return r.forEach((n,i)=>{n.id===e&&(t=i)}),Math.max(t,0)},ore=(r,e,t)=>{const n=r.length;for(let i=0;i<n;i++)if(r[e][i]===1/0){r[e][i]=t,r[i][e]=t;for(let a=0;a<n;a++)r[i][a]!==1/0&&r[e][a]===1/0&&(r[e][a]=t+r[i][a],r[a][e]=t+r[i][a])}for(let i=0;i<n;i++)if(i!==e){for(let a=0;a<n;a++)if(r[i][a]===1/0){let s=Math.abs(r[e][i]-r[e][a]);s=s===0?1:s,r[i][a]=s}}},Are=(r,e)=>{let t=0;for(let n=0;n<r[e].length;n++)r[e][n]!==1/0&&(t=r[e][n]>t?r[e][n]:t);return t},lre={center:[0,0],width:300,height:300};class cre{constructor(e={}){this.options=e,this.id="random",this.options=Object.assign(Object.assign({},lre),e)}execute(e,t){return Ce(this,void 0,void 0,function*(){return this.genericRandomLayout(!1,e,t)})}assign(e,t){return Ce(this,void 0,void 0,function*(){yield this.genericRandomLayout(!0,e,t)})}genericRandomLayout(e,t,n){return Ce(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),n),{center:a,width:s,height:o}=i,A=t.getAllNodes(),l=.9,c=!s&&typeof window<"u"?window.innerWidth:s,u=!o&&typeof window<"u"?window.innerHeight:o,h=a||[c/2,u/2],d=[];return A&&A.forEach(g=>{d.push({id:g.id,data:{x:(Math.random()-.5)*l*c+h[0],y:(Math.random()-.5)*l*u+h[1]}})}),e&&d.forEach(g=>t.mergeNodeData(g.id,{x:g.data.x,y:g.data.y})),{nodes:d,edges:t.getAllEdges()}})}}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _N=Symbol("Comlink.proxy"),ure=Symbol("Comlink.endpoint"),kN=Symbol("Comlink.releaseProxy"),_m=Symbol("Comlink.finalizer"),Lu=Symbol("Comlink.thrown"),LN=r=>typeof r=="object"&&r!==null||typeof r=="function",hre={canHandle:r=>LN(r)&&r[_N],serialize(r){const{port1:e,port2:t}=new MessageChannel;return NN(r,e),[t,[t]]},deserialize(r){return r.start(),PN(r)}},dre={canHandle:r=>LN(r)&&Lu in r,serialize({value:r}){let e;return r instanceof Error?e={isError:!0,value:{message:r.message,name:r.name,stack:r.stack}}:e={isError:!1,value:r},[e,[]]},deserialize(r){throw r.isError?Object.assign(new Error(r.value.message),r.value):r.value}},QN=new Map([["proxy",hre],["throw",dre]]);function fre(r,e){for(const t of r)if(e===t||t==="*"||t instanceof RegExp&&t.test(e))return!0;return!1}function NN(r,e=globalThis,t=["*"]){e.addEventListener("message",function n(i){if(!i||!i.data)return;if(!fre(t,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}const{id:a,type:s,path:o}=Object.assign({path:[]},i.data),A=(i.data.argumentList||[]).map(as);let l;try{const c=o.slice(0,-1).reduce((h,d)=>h[d],r),u=o.reduce((h,d)=>h[d],r);switch(s){case"GET":l=u;break;case"SET":c[o.slice(-1)[0]]=as(i.data.value),l=!0;break;case"APPLY":l=u.apply(c,A);break;case"CONSTRUCT":{const h=new u(...A);l=wre(h)}break;case"ENDPOINT":{const{port1:h,port2:d}=new MessageChannel;NN(r,d),l=mre(h,[h])}break;case"RELEASE":l=void 0;break;default:return}}catch(c){l={value:c,[Lu]:0}}Promise.resolve(l).catch(c=>({value:c,[Lu]:0})).then(c=>{const[u,h]=Ih(c);e.postMessage(Object.assign(Object.assign({},u),{id:a}),h),s==="RELEASE"&&(e.removeEventListener("message",n),UN(e),_m in r&&typeof r[_m]=="function"&&r[_m]())}).catch(c=>{const[u,h]=Ih({value:new TypeError("Unserializable return value"),[Lu]:0});e.postMessage(Object.assign(Object.assign({},u),{id:a}),h)})}),e.start&&e.start()}function gre(r){return r.constructor.name==="MessagePort"}function UN(r){gre(r)&&r.close()}function PN(r,e){const t=new Map;return r.addEventListener("message",function(i){const{data:a}=i;if(!a||!a.id)return;const s=t.get(a.id);if(s)try{s(a)}finally{t.delete(a.id)}}),uw(r,t,[],e)}function uu(r){if(r)throw new Error("Proxy has been released and is not useable")}function RN(r){return go(r,new Map,{type:"RELEASE"}).then(()=>{UN(r)})}const Mh=new WeakMap,Oh="FinalizationRegistry"in globalThis&&new FinalizationRegistry(r=>{const e=(Mh.get(r)||0)-1;Mh.set(r,e),e===0&&RN(r)});function vre(r,e){const t=(Mh.get(e)||0)+1;Mh.set(e,t),Oh&&Oh.register(r,e,r)}function pre(r){Oh&&Oh.unregister(r)}function uw(r,e,t=[],n=function(){}){let i=!1;const a=new Proxy(n,{get(s,o){if(uu(i),o===kN)return()=>{pre(a),RN(r),e.clear(),i=!0};if(o==="then"){if(t.length===0)return{then:()=>a};const A=go(r,e,{type:"GET",path:t.map(l=>l.toString())}).then(as);return A.then.bind(A)}return uw(r,e,[...t,o])},set(s,o,A){uu(i);const[l,c]=Ih(A);return go(r,e,{type:"SET",path:[...t,o].map(u=>u.toString()),value:l},c).then(as)},apply(s,o,A){uu(i);const l=t[t.length-1];if(l===ure)return go(r,e,{type:"ENDPOINT"}).then(as);if(l==="bind")return uw(r,e,t.slice(0,-1));const[c,u]=FM(A);return go(r,e,{type:"APPLY",path:t.map(h=>h.toString()),argumentList:c},u).then(as)},construct(s,o){uu(i);const[A,l]=FM(o);return go(r,e,{type:"CONSTRUCT",path:t.map(c=>c.toString()),argumentList:A},l).then(as)}});return vre(a,r),a}function yre(r){return Array.prototype.concat.apply([],r)}function FM(r){const e=r.map(Ih);return[e.map(t=>t[0]),yre(e.map(t=>t[1]))]}const DN=new WeakMap;function mre(r,e){return DN.set(r,e),r}function wre(r){return Object.assign(r,{[_N]:!0})}function Ih(r){for(const[e,t]of QN)if(t.canHandle(r)){const[n,i]=t.serialize(r);return[{type:"HANDLER",name:e,value:n},i]}return[{type:"RAW",value:r},DN.get(r)||[]]}function as(r){switch(r.type){case"HANDLER":return QN.get(r.name).deserialize(r.value);case"RAW":return r.value}}function go(r,e,t,n){return new Promise(i=>{const a=Bre();e.set(a,i),r.start&&r.start(),r.postMessage(Object.assign({id:a},t),n)})}function Bre(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}class bre extends yd{constructor(e,t,n){super(),this.graph=e,this.layout=t,this.options=n,this.spawnWorker()}spawnWorker(){this.proxy=PN(new Worker(new URL("/assets/worker-DNPIT6vh.js",import.meta.url),{type:"module"})),this.running&&(this.running=!1,this.execute())}execute(){var e;return Ce(this,void 0,void 0,function*(){if(this.running)return this;this.running=!0;const t=this.layout.options,{onTick:n}=t,i=lt(t,["onTick"]),a={};Object.keys(i).forEach(l=>{ie(i[l])||(a[l]=i[l])});const s={layout:{id:this.layout.id,options:a,iterations:(e=this.options)===null||e===void 0?void 0:e.iterations},nodes:this.graph.getAllNodes(),edges:this.graph.getAllEdges()},o=new Float32Array([0]),[A]=yield this.proxy.calculateLayout(s,[o]);return A})}stop(){return this.running=!1,this.proxy.stopLayout(),this}kill(){this.proxy[kN]()}isRunning(){return this.running}}var Ere=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class Zd extends md{constructor(){super(...arguments),this.id="fishbone"}getRoot(){const e=this.context.model.getRootsData();if(!(Ai(e)||e.length>2))return e[0]}formatSize(e){const t=typeof e=="function"?e:()=>e;return n=>Ar(t(n))}doLayout(e,t){const{hGap:n,getRibSep:i,vGap:a,nodeSize:s,height:o}=t,{model:A}=this.context,l=this.formatSize(s);let c=l(e)[0]+i(e);const u=(m,w=0)=>{var B;return w+=n*((m.children||[]).length+1),(B=m.children)===null||B===void 0||B.forEach(b=>{var E;(E=A.getNodeLikeDatum(b).children)===null||E===void 0||E.forEach(S=>{const C=A.getNodeLikeDatum(S);w=u(C,w)})}),w},h=m=>{if(m.depth===1)return c;const w=A.getParentData(m.id,"tree");if(no(m)){const B=A.getParentData(w.id,"tree"),b=g(m)-g(B);return h(w)+b*n/a}else{const B=(w.children||[]).indexOf(m.id),b=A.getNodeData((w.children||[]).slice(B));return d(w)-b.reduce((E,x)=>E+u(x),0)-l(w)[0]/2}},d=e1(m=>{if(km(m))return l(m)[0]/2;const w=A.getParentData(m.id,"tree");if(no(m))return h(m)+u(m)+l(m)[0]/2;{const B=g(m)-g(w),b=n/a;return h(m)+B*b}},m=>m.id),f=m=>g(A.getParentData(m,"tree")),g=e1(m=>{if(km(m))return o/2;if(no(m)){const w=A.getParentData(m.id,"tree"),B=w.children.indexOf(m.id);if(B===0)return f(w.id)+a;const b=A.getNodeLikeDatum(w.children[B-1]);if(Ai(b.children))return g(b)+a;const E=A.getDescendantsData(b.id);return Math.max(...E.map(x=>no(x)?f(x.id):g(x)))+a}else{if(Ai(m.children))return f(m.id)+a;const w=A.getNodeLikeDatum(m.children.slice(-1)[0]);if(Ai(w.children))return g(w)+a;const B=A.getDescendantsData(m.id).slice(-1)[0];return(no(B)?f(B.id):g(B))+a}},m=>m.id);let v=0;const p={nodes:[],edges:[]},y=m=>{var w;(w=m.children)===null||w===void 0||w.forEach(S=>y(A.getNodeLikeDatum(S)));const B=g(m),b=d(m);if(p.nodes.push({id:m.id,x:b,y:B}),km(m))return;const E=A.getRelatedEdgesData(m.id,"in")[0],x=[h(m),no(m)?B:f(m.id)];p.edges.push({id:N(E),controlPoints:[x],relatedNodeId:m.id}),v=Math.max(v,b+i(m)),m.depth===1&&(c=v)};return y(e),p}placeAlterative(e,t){const n=(t.children||[]).filter((o,A)=>A%2!==0);if(n.length===0)return e;const{model:i}=this.context,a=e.nodes.find(o=>o.id===t.id).y,s=o=>{const A=i.getAncestorsData(o,"tree");if(Ai(A))return!1;const l=A.length===1?o:A[A.length-2].id;return n.includes(l)};e.nodes.forEach(o=>{s(o.id)&&(o.y=2*a-o.y)}),e.edges.forEach(o=>{s(o.relatedNodeId)&&(o.controlPoints=o.controlPoints.map(A=>[A[0],2*a-A[1]]))})}rightToLeft(e,t){return e.nodes.forEach(n=>n.x=t.width-n.x),e.edges.forEach(n=>{n.controlPoints=n.controlPoints.map(i=>[t.width-i[0],i[1]])}),e}execute(e,t){return Ere(this,void 0,void 0,function*(){const n=Object.assign(Object.assign(Object.assign({},Zd.defaultOptions),this.options),t),{direction:i,nodeSize:a}=n,s=this.getRoot();if(!s)return e;const o=this.formatSize(a);n.vGap||(n.vGap=Math.max(...(e.nodes||[]).map(h=>o(h)[1]))),n.hGap||(n.hGap=Math.max(...(e.nodes||[]).map(h=>o(h)[0])));let A=this.doLayout(s,n);this.placeAlterative(A,s),i==="RL"&&(A=this.rightToLeft(A,n));const{model:l}=this.context,c=[],u=[];return A.nodes.forEach(h=>{const{id:d,x:f,y:g}=h,v=l.getNodeLikeDatum(d);c.push(TM(v,{x:f,y:g}))}),A.edges.forEach(h=>{const{id:d,controlPoints:f}=h,g=l.getEdgeDatum(d);u.push(TM(g,{controlPoints:f}))}),{nodes:c,edges:u}})}}Zd.defaultOptions={direction:"RL",getRibSep:()=>60};const TM=(r,e)=>Object.assign(Object.assign({},r),{style:Object.assign(Object.assign({},r.style||{}),e)}),km=r=>r.depth===0,no=r=>(r.depth||(r.depth=0))%2===0;var xre=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class Jd extends md{constructor(){super(...arguments),this.id="snake"}formatSize(e,t){const n=typeof t=="function"?t:()=>t;return e.reduce((i,a)=>{const[s,o]=Ar(n(a))||[0,0];return[Math.max(i[0],s),Math.max(i[1],o)]},[0,0])}validate(e){const{nodes:t=[],edges:n=[]}=e,i={},a={},s={};t.forEach(h=>{i[h.id]=0,a[h.id]=0,s[h.id]=[]}),n.forEach(h=>{i[h.target]++,a[h.source]++,s[h.source].push(h.target)});const o=new Set,A=h=>{o.has(h)||(o.add(h),s[h].forEach(A))};if(A(t[0].id),o.size!==t.length)return!1;const l=t.filter(h=>i[h.id]===0),c=t.filter(h=>a[h.id]===0);return!(l.length!==1||c.length!==1||t.filter(h=>i[h.id]===1&&a[h.id]===1).length!==t.length-2)}execute(e,t){return xre(this,void 0,void 0,function*(){var n;if(!this.validate(e))return e;const{nodeSize:i,padding:a,sortBy:s,cols:o,colGap:A,rowGap:l,clockwise:c,width:u,height:h}=Object.assign({},Jd.defaultOptions,this.options,t),[d,f,g,v]=Sr(a),p=this.formatSize(e.nodes||[],i),y=Math.ceil((e.nodes||[]).length/o);let m=A||(u-v-f-o*p[0])/(o-1),w=l||(h-d-g-y*p[1])/(y-1);return(w===1/0||w<0)&&(w=0),(m===1/0||m<0)&&(m=0),{nodes:((s?(n=e.nodes)===null||n===void 0?void 0:n.sort(s):Cre(e))||[]).map((E,x)=>{const S=Math.floor(x/o),C=x%o,F=c?S%2===0?C:o-1-C:S%2===0?o-1-C:C,M=v+F*(p[0]+m)+p[0]/2,T=d+S*(p[1]+w)+p[1]/2;return{id:E.id,style:{x:M,y:T}}})}})}}Jd.defaultOptions={padding:0,cols:5,clockwise:!0};function Cre(r){const{nodes:e=[],edges:t=[]}=r,n={},i={};e.forEach(o=>{n[o.id]=0,i[o.id]=[]}),t.forEach(o=>{n[o.target]++,i[o.source].push(o.target)});const a=[],s=[];for(e.forEach(o=>{n[o.id]===0&&a.push(o.id)});a.length>0;){const o=a.shift(),A=e.find(l=>l.id===o);s.push(A),i[o].forEach(l=>{n[l]--,n[l]===0&&a.push(l)})}return s}const Sre=["rgb(158, 1, 66)","rgb(213, 62, 79)","rgb(244, 109, 67)","rgb(253, 174, 97)","rgb(254, 224, 139)","rgb(255, 255, 191)","rgb(230, 245, 152)","rgb(171, 221, 164)","rgb(102, 194, 165)","rgb(50, 136, 189)","rgb(94, 79, 162)"],Fre=["rgb(78, 121, 167)","rgb(242, 142, 44)","rgb(225, 87, 89)","rgb(118, 183, 178)","rgb(89, 161, 79)","rgb(237, 201, 73)","rgb(175, 122, 161)","rgb(255, 157, 167)","rgb(156, 117, 95)","rgb(186, 176, 171)"],Tre=["rgb(255, 245, 235)","rgb(254, 230, 206)","rgb(253, 208, 162)","rgb(253, 174, 107)","rgb(253, 141, 60)","rgb(241, 105, 19)","rgb(217, 72, 1)","rgb(166, 54, 3)","rgb(127, 39, 4)"],Mre=["rgb(247, 252, 245)","rgb(229, 245, 224)","rgb(199, 233, 192)","rgb(161, 217, 155)","rgb(116, 196, 118)","rgb(65, 171, 93)","rgb(35, 139, 69)","rgb(0, 109, 44)","rgb(0, 68, 27)"],Ore=["rgb(247, 251, 255)","rgb(222, 235, 247)","rgb(198, 219, 239)","rgb(158, 202, 225)","rgb(107, 174, 214)","rgb(66, 146, 198)","rgb(33, 113, 181)","rgb(8, 81, 156)","rgb(8, 48, 107)"];class en extends aB{}function qo(r,e=!0,t){const n=document.createElement("div");return n.setAttribute("class",`g6-${r}`),Object.assign(n.style,{position:"absolute",display:"block"}),e&&Object.assign(n.style,{position:"unset",gridArea:"1 / 1 / 2 / 2",inset:"0px",height:"100%",width:"100%",overflow:"hidden",pointerEvents:"none"}),t&&Object.assign(n.style,t),n}function hw(r,e="div",t={},n="",i=document.body){const a=document.getElementById(r);a&&a.remove();const s=document.createElement(e);return s.innerHTML=n,s.id=r,Object.assign(s.style,t),i.appendChild(s),s}var Ire=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class ef extends en{constructor(e,t){super(e,Object.assign({},ef.defaultOptions,t)),this.$element=qo("background"),this.context.canvas.getContainer().prepend(this.$element),this.update(t)}update(e){const t=Object.create(null,{update:{get:()=>super.update}});return Ire(this,void 0,void 0,function*(){t.update.call(this,e),Object.assign(this.$element.style,Iw(this.options,["key","type"]))})}destroy(){super.destroy(),this.$element.remove()}}ef.defaultOptions={transition:"background 0.5s",backgroundSize:"cover",zIndex:"-1"};function $B(r,e,t,n,i,a){const s=r,o=e,A=t-s,l=n-o;let c=i-s,u=a-o,h=c*A+u*l,d=0;h<=0?d=0:(c=A-c,u=l-u,h=c*A+u*l,h<=0?d=0:d=h*h/(A*A+l*l));const f=c*c+u*u-d;return f<0?0:f}function Ea(r,e,t,n){return(r-t)*(r-t)+(e-n)*(e-n)}function MM(r,e,t,n,i){return Ea(r,e,t,n)<i*i}function _re(r){if(!Number.isFinite(r))return t=>t;if(r===0)return Math.round;const e=Math.pow(10,r);return t=>Math.round(t*e)/e}function HN(r){const e=Math.min(r.x1,r.x2),t=Math.max(r.x1,r.x2),n=Math.min(r.y1,r.y2),i=Math.max(r.y1,r.y2);return{x:e,y:n,x2:t,y2:i,width:t-e,height:i-n}}class Zt{constructor(e,t,n,i){this.x1=e,this.y1=t,this.x2=n,this.y2=i}equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2}draw(e){e.moveTo(this.x1,this.y1),e.lineTo(this.x2,this.y2)}toString(){return`Line(from=(${this.x1},${this.y1}),to=(${this.x2},${this.y2}))`}static from(e){return new Zt(e.x1,e.y1,e.x2,e.y2)}cuts(e,t){if(this.y1===this.y2||t<this.y1&&t<=this.y2||t>this.y1&&t>=this.y2||e>this.x1&&e>=this.x2)return!1;if(e<this.x1&&e<=this.x2)return!0;const n=this.x1+(t-this.y1)*(this.x2-this.x1)/(this.y2-this.y1);return e<=n}distSquare(e,t){return $B(this.x1,this.y1,this.x2,this.y2,e,t)}ptClose(e,t,n){if(this.x1<this.x2){if(e<this.x1-n||e>this.x2+n)return!1}else if(e<this.x2-n||e>this.x1+n)return!1;if(this.y1<this.y2){if(t<this.y1-n||t>this.y2+n)return!1}else if(t<this.y2-n||t>this.y1+n)return!1;return!0}}var wt;(function(r){r[r.POINT=1]="POINT",r[r.PARALLEL=2]="PARALLEL",r[r.COINCIDENT=3]="COINCIDENT",r[r.NONE=4]="NONE"})(wt||(wt={}));class Lm{constructor(e,t=0,n=0){this.state=e,this.x=t,this.y=n}}function hu(r,e){const t=(e.x2-e.x1)*(r.y1-e.y1)-(e.y2-e.y1)*(r.x1-e.x1),n=(r.x2-r.x1)*(r.y1-e.y1)-(r.y2-r.y1)*(r.x1-e.x1),i=(e.y2-e.y1)*(r.x2-r.x1)-(e.x2-e.x1)*(r.y2-r.y1);if(i){const a=t/i,s=n/i;return 0<=a&&a<=1&&0<=s&&s<=1?new Lm(wt.POINT,r.x1+a*(r.x2-r.x1),r.y1+a*(r.y2-r.y1)):new Lm(wt.NONE)}return new Lm(t===0||n===0?wt.COINCIDENT:wt.PARALLEL)}function GN(r,e){const t=(e.x2-e.x1)*(r.y1-e.y1)-(e.y2-e.y1)*(r.x1-e.x1),n=(r.x2-r.x1)*(r.y1-e.y1)-(r.y2-r.y1)*(r.x1-e.x1),i=(e.y2-e.y1)*(r.x2-r.x1)-(e.x2-e.x1)*(r.y2-r.y1);if(i){const a=t/i,s=n/i;if(0<=a&&a<=1&&0<=s&&s<=1)return a}return Number.POSITIVE_INFINITY}function kre(r,e){function t(i,a,s,o){let A=GN(e,new Zt(i,a,s,o));return A=Math.abs(A-.5),A>=0&&A<=1?1:0}let n=t(r.x,r.y,r.x2,r.y);return n+=t(r.x,r.y,r.x,r.y2),n>1||(n+=t(r.x,r.y2,r.x2,r.y2),n>1)?!0:(n+=t(r.x2,r.y,r.x2,r.y2),n>0)}var Bt;(function(r){r[r.LEFT=0]="LEFT",r[r.TOP=1]="TOP",r[r.RIGHT=2]="RIGHT",r[r.BOTTOM=3]="BOTTOM"})(Bt||(Bt={}));function Qu(r,e,t){const n=new Set;return r.width<=0?(n.add(Bt.LEFT),n.add(Bt.RIGHT)):e<r.x?n.add(Bt.LEFT):e>r.x+r.width&&n.add(Bt.RIGHT),r.height<=0?(n.add(Bt.TOP),n.add(Bt.BOTTOM)):t<r.y?n.add(Bt.TOP):t>r.y+r.height&&n.add(Bt.BOTTOM),n}function KN(r,e){let t=e.x1,n=e.y1;const i=e.x2,a=e.y2,s=Array.from(Qu(r,i,a));if(s.length===0)return!0;let o=Qu(r,t,n);for(;o.size!==0;){for(const A of s)if(o.has(A))return!1;if(o.has(Bt.RIGHT)||o.has(Bt.LEFT)){let A=r.x;o.has(Bt.RIGHT)&&(A+=r.width),n=n+(A-t)*(a-n)/(i-t),t=A}else{let A=r.y;o.has(Bt.BOTTOM)&&(A+=r.height),t=t+(A-n)*(i-t)/(a-n),n=A}o=Qu(r,t,n)}return!0}function Lre(r,e){let t=Number.POSITIVE_INFINITY,n=0;function i(a,s,o,A){let l=GN(e,new Zt(a,s,o,A));l=Math.abs(l-.5),l>=0&&l<=1&&(n++,l<t&&(t=l))}return i(r.x,r.y,r.x2,r.y),i(r.x,r.y,r.x,r.y2),n>1||(i(r.x,r.y2,r.x2,r.y2),n>1)?t:(i(r.x2,r.y,r.x2,r.y2),n===0?-1:t)}function Qre(r,e){let t=0;const n=hu(r,new Zt(e.x,e.y,e.x2,e.y));t+=n.state===wt.POINT?1:0;const i=hu(r,new Zt(e.x,e.y,e.x,e.y2));t+=i.state===wt.POINT?1:0;const a=hu(r,new Zt(e.x,e.y2,e.x2,e.y2));t+=a.state===wt.POINT?1:0;const s=hu(r,new Zt(e.x2,e.y,e.x2,e.y2));return t+=s.state===wt.POINT?1:0,{top:n,left:i,bottom:a,right:s,count:t}}class vn{constructor(e,t,n,i){this.x=e,this.y=t,this.width=n,this.height=i}get x2(){return this.x+this.width}get y2(){return this.y+this.height}get cx(){return this.x+this.width/2}get cy(){return this.y+this.height/2}get radius(){return Math.max(this.width,this.height)/2}static from(e){return new vn(e.x,e.y,e.width,e.height)}equals(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}clone(){return new vn(this.x,this.y,this.width,this.height)}add(e){const t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),i=Math.max(this.x2,e.x+e.width),a=Math.max(this.y2,e.y+e.height);this.x=t,this.y=n,this.width=i-t,this.height=a-n}addPoint(e){const t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),i=Math.max(this.x2,e.x),a=Math.max(this.y2,e.y);this.x=t,this.y=n,this.width=i-t,this.height=a-n}toString(){return`Rectangle[x=${this.x}, y=${this.y}, w=${this.width}, h=${this.height}]`}draw(e){e.rect(this.x,this.y,this.width,this.height)}containsPt(e,t){return e>=this.x&&e<=this.x2&&t>=this.y&&t<=this.y2}get area(){return this.width*this.height}intersects(e){return this.area<=0||e.width<=0||e.height<=0?!1:e.x+e.width>this.x&&e.y+e.height>this.y&&e.x<this.x2&&e.y<this.y2}distSquare(e,t){if(this.containsPt(e,t))return 0;const n=Qu(this,e,t);return n.has(Bt.TOP)?n.has(Bt.LEFT)?Ea(e,t,this.x,this.y):n.has(Bt.RIGHT)?Ea(e,t,this.x2,this.y):(this.y-t)*(this.y-t):n.has(Bt.BOTTOM)?n.has(Bt.LEFT)?Ea(e,t,this.x,this.y2):n.has(Bt.RIGHT)?Ea(e,t,this.x2,this.y2):(t-this.y2)*(t-this.y2):n.has(Bt.LEFT)?(this.x-e)*(this.x-e):n.has(Bt.RIGHT)?(e-this.x2)*(e-this.x2):0}}function Nre(r){if(r.length===0)return null;const e=r[0],t=new vn(e.x,e.y,0,0);for(const n of r)t.addPoint(n);return t}class _h{constructor(e,t,n){this.cx=e,this.cy=t,this.radius=n}get x(){return this.cx-this.radius}get x2(){return this.cx+this.radius}get width(){return this.radius*2}get y(){return this.cy-this.radius}get y2(){return this.cy+this.radius}get height(){return this.radius*2}static from(e){return new _h(e.cx,e.cy,e.radius)}containsPt(e,t){return Ea(this.cx,this.cy,e,t)<this.radius*this.radius}distSquare(e,t){const n=Ea(this.cx,this.cy,e,t);if(n<this.radius*this.radius)return 0;const i=Math.sqrt(n)-this.radius;return i*i}draw(e){e.ellipse(this.cx,this.cy,this.radius,this.radius,0,0,Math.PI*2)}}class ws{constructor(e,t=0,n=0,i=0,a=0,s=10,o=10,A=new Float32Array(Math.max(0,s*o)).fill(0)){this.pixelGroup=e,this.i=t,this.j=n,this.pixelX=i,this.pixelY=a,this.width=s,this.height=o,this.area=A}createSub(e,t){return new ws(this.pixelGroup,e.x,e.y,t.x,t.y,e.width,e.height)}static fromPixelRegion(e,t){return new ws(t,0,0,e.x,e.y,Math.ceil(e.width/t),Math.ceil(e.height/t))}copy(e,t){return new ws(this.pixelGroup,this.scaleX(t.x),this.scaleY(t.y),t.x,t.y,e.width,e.height,e.area)}boundX(e){return e<this.i?this.i:e>=this.width?this.width-1:e}boundY(e){return e<this.j?this.j:e>=this.height?this.height-1:e}scaleX(e){return this.boundX(Math.floor((e-this.pixelX)/this.pixelGroup))}scaleY(e){return this.boundY(Math.floor((e-this.pixelY)/this.pixelGroup))}scale(e){const t=this.scaleX(e.x),n=this.scaleY(e.y),i=this.boundX(Math.ceil((e.x+e.width-this.pixelX)/this.pixelGroup)),a=this.boundY(Math.ceil((e.y+e.height-this.pixelY)/this.pixelGroup)),s=i-t,o=a-n;return new vn(t,n,s,o)}invertScaleX(e){return Math.round(e*this.pixelGroup+this.pixelX)}invertScaleY(e){return Math.round(e*this.pixelGroup+this.pixelY)}addPadding(e,t){const n=Math.ceil(t/this.pixelGroup),i=this.boundX(e.x-n),a=this.boundY(e.y-n),s=this.boundX(e.x2+n),o=this.boundY(e.y2+n),A=s-i,l=o-a;return new vn(i,a,A,l)}get(e,t){return e<0||t<0||e>=this.width||t>=this.height?Number.NaN:this.area[e+t*this.width]}inc(e,t,n){e<0||t<0||e>=this.width||t>=this.height||(this.area[e+t*this.width]+=n)}set(e,t,n){e<0||t<0||e>=this.width||t>=this.height||(this.area[e+t*this.width]=n)}incArea(e,t){if(e.width<=0||e.height<=0||t===0)return;const n=this.width,i=e.width,a=Math.max(0,e.i),s=Math.max(0,e.j),o=Math.min(e.i+e.width,n),A=Math.min(e.j+e.height,this.height);if(!(A<=0||o<=0||a>=n||A>=this.height))for(let l=s;l<A;l++){const c=(l-e.j)*i,u=l*n;for(let h=a;h<o;h++){const d=e.area[h-e.i+c];d!==0&&(this.area[h+u]+=t*d)}}}fill(e){this.area.fill(e)}fillArea(e,t){const n=e.x+e.y*this.width;for(let i=0;i<e.height;i++){const a=n+i*this.width;this.area.fill(t,a,a+e.width)}}fillHorizontalLine(e,t,n,i){const a=e+t*this.width;this.area.fill(i,a,a+n)}fillVerticalLine(e,t,n,i){const a=e+t*this.width;for(let s=0;s<n;s++)this.area[a+s*this.width]=i}clear(){this.area.fill(0)}toString(){let e="";for(let t=0;t<this.height;t++){const n=t*this.width;for(let i=0;i<this.width;i++){const a=this.area[n+i];e+=a.toFixed(1).padStart(6),e+=" "}e+=`
`}return e}draw(e,t=!0){if(this.width<=0||this.height<=0)return;e.save(),t&&e.translate(this.pixelX,this.pixelY);const n=this.area.reduce((s,o)=>Math.min(s,o),Number.POSITIVE_INFINITY),i=this.area.reduce((s,o)=>Math.max(s,o),Number.NEGATIVE_INFINITY),a=s=>(s-n)/(i-n);e.scale(this.pixelGroup,this.pixelGroup);for(let s=0;s<this.width;s++)for(let o=0;o<this.height;o++){const A=this.area[s+o*this.width];e.fillStyle=`rgba(0, 0, 0, ${a(A)})`,e.fillRect(s,o,1,1)}e.restore()}drawThreshold(e,t,n=!0){if(!(this.width<=0||this.height<=0)){e.save(),n&&e.translate(this.pixelX,this.pixelY),e.scale(this.pixelGroup,this.pixelGroup);for(let i=0;i<this.width;i++)for(let a=0;a<this.height;a++){const s=this.area[i+a*this.width];e.fillStyle=s>t?"black":"white",e.fillRect(i,a,1,1)}e.restore()}}}function zN(r,e){const t=n=>({x:n.x-e,y:n.y-e,width:n.width+2*e,height:n.height+2*e});return Array.isArray(r)?r.map(t):t(r)}function OM(r,e,t){return VN(Object.assign(HN(r),{distSquare:(n,i)=>$B(r.x1,r.y1,r.x2,r.y2,n,i)}),e,t)}function VN(r,e,t){const n=zN(r,t),i=e.scale(n),a=e.createSub(i,n);return Ure(a,e,t,(s,o)=>r.distSquare(s,o)),a}function Ure(r,e,t,n){const i=t*t;for(let a=0;a<r.height;a++)for(let s=0;s<r.width;s++){const o=e.invertScaleX(r.i+s),A=e.invertScaleY(r.j+a),l=n(o,A);if(l===0){r.set(s,a,i);continue}if(l<i){const c=t-Math.sqrt(l);r.set(s,a,c*c)}}return r}function Pre(r,e,t){const n=e.scale(r),i=e.addPadding(n,t),a=e.createSub(i,{x:r.x-t,y:r.y-t}),s=n.x-i.x,o=n.y-i.y,A=i.x2-n.x2,l=i.y2-n.y2,c=i.width-s-A,u=i.height-o-l,h=t*t;a.fillArea({x:s,y:o,width:c+1,height:u+1},h);const d=[0],f=Math.max(o,s,A,l);{const y=e.invertScaleX(n.x+n.width/2);for(let m=1;m<f;m++){const w=e.invertScaleY(n.y-m),B=r.distSquare(y,w);if(B<h){const b=t-Math.sqrt(B);d.push(b*b)}else break}}const g=[],v=Math.max(s,A),p=Math.max(o,A);for(let y=1;y<v;y++){const m=e.invertScaleX(n.x-y),w=[];for(let B=1;B<p;B++){const b=e.invertScaleY(n.y-B),E=r.distSquare(m,b);if(E<h){const x=t-Math.sqrt(E);w.push(x*x)}else w.push(0)}g.push(w)}for(let y=1;y<Math.min(o,d.length);y++){const m=d[y];a.fillHorizontalLine(s,o-y,c+1,m)}for(let y=1;y<Math.min(l,d.length);y++){const m=d[y];a.fillHorizontalLine(s,o+u+y,c+1,m)}for(let y=1;y<Math.min(s,d.length);y++){const m=d[y];a.fillVerticalLine(s-y,o,u+1,m)}for(let y=1;y<Math.min(l,d.length);y++){const m=d[y];a.fillVerticalLine(s+c+y,o,u+1,m)}for(let y=1;y<s;y++){const m=g[y-1],w=s-y;for(let B=1;B<o;B++)a.set(w,o-B,m[B-1]);for(let B=1;B<l;B++)a.set(w,o+u+B,m[B-1])}for(let y=1;y<A;y++){const m=g[y-1],w=s+c+y;for(let B=1;B<o;B++)a.set(w,o-B,m[B-1]);for(let B=1;B<l;B++)a.set(w,o+u+B,m[B-1])}return a}function at(r,e){return{x:r,y:e}}function Rre(r,e,t,n){if(r.length===0)return[];const i=zre(r);return i.map((a,s)=>{const o=i.slice(0,s);return Dre(e,a,o,t,n)}).flat()}function Dre(r,e,t,n,i){const a=at(e.cx,e.cy),s=Kre(a,t,r);if(s==null)return[];const o=new Zt(a.x,a.y,s.cx,s.cy),A=Hre(o,r,n,i);return Gre(A,r)}function Hre(r,e,t,n){const i=[],a=[];a.push(r);let s=!0;for(let o=0;o<t&&s;o++)for(s=!1;!s&&a.length>0;){const A=a.pop(),l=jN(e,A),c=l?Qre(A,l):null;if(!l||!c||c.count!==2){s||i.push(A);continue}let u=n,h=fu(l,u,c,!0),d=ta(h,a)||ta(h,i),f=du(h,e);for(;!d&&f&&u>=1;)u/=1.5,h=fu(l,u,c,!0),d=ta(h,a)||ta(h,i),f=du(h,e);if(h&&!d&&!f&&(a.push(new Zt(A.x1,A.y1,h.x,h.y)),a.push(new Zt(h.x,h.y,A.x2,A.y2)),s=!0),s)continue;u=n,h=fu(l,u,c,!1);let g=ta(h,a)||ta(h,i);for(f=du(h,e);!g&&f&&u>=1;)u/=1.5,h=fu(l,u,c,!1),g=ta(h,a)||ta(h,i),f=du(h,e);h&&!g&&(a.push(new Zt(A.x1,A.y1,h.x,h.y)),a.push(new Zt(h.x,h.y,A.x2,A.y2)),s=!0),s||i.push(A)}for(;a.length>0;)i.push(a.pop());return i}function Gre(r,e){const t=[];for(;r.length>0;){const n=r.pop();if(r.length===0){t.push(n);break}const i=r.pop(),a=new Zt(n.x1,n.y1,i.x2,i.y2);jN(e,a)?(t.push(n),r.push(i)):r.push(a)}return t}function Kre(r,e,t){let n=Number.POSITIVE_INFINITY;return e.reduce((i,a)=>{const s=Ea(r.x,r.y,a.cx,a.cy);if(s>n)return i;const o=new Zt(r.x,r.y,a.cx,a.cy),A=Vre(t,o);return s*(A+1)*(A+1)<n&&(i=a,n=s*(A+1)*(A+1)),i},null)}function zre(r){if(r.length<2)return r;let e=0,t=0;return r.forEach(n=>{e+=n.cx,t+=n.cy}),e/=r.length,t/=r.length,r.map(n=>{const i=e-n.cx,a=t-n.cy,s=i*i+a*a;return[n,s]}).sort((n,i)=>n[1]-i[1]).map(n=>n[0])}function du(r,e){return e.some(t=>t.containsPt(r.x,r.y))}function ta(r,e){return e.some(t=>!!(MM(t.x1,t.y1,r.x,r.y,.001)||MM(t.x2,t.y2,r.x,r.y,.001)))}function jN(r,e){let t=Number.POSITIVE_INFINITY,n=null;for(const i of r){if(!KN(i,e))continue;const a=Lre(i,e);a>=0&&a<t&&(n=i,t=a)}return n}function Vre(r,e){return r.reduce((t,n)=>KN(n,e)&&kre(n,e)?t+1:t,0)}function fu(r,e,t,n){const i=t.top,a=t.left,s=t.bottom,o=t.right;if(n){if(a.state===wt.POINT){if(i.state===wt.POINT)return at(r.x-e,r.y-e);if(s.state===wt.POINT)return at(r.x-e,r.y2+e);const h=r.width*r.height;return r.width*((a.y-r.y+(o.y-r.y))*.5)<h*.5?a.y>o.y?at(r.x-e,r.y-e):at(r.x2+e,r.y-e):a.y<o.y?at(r.x-e,r.y2+e):at(r.x2+e,r.y2+e)}if(o.state===wt.POINT){if(i.state===wt.POINT)return at(r.x2+e,r.y-e);if(s.state===wt.POINT)return at(r.x2+e,r.y2+e)}const c=r.height*r.width;return r.height*((i.x-r.x+(o.x-r.x))*.5)<c*.5?i.x>s.x?at(r.x-e,r.y-e):at(r.x-e,r.y2+e):i.x<s.x?at(r.x2+e,r.y-e):at(r.x2+e,r.y2+e)}if(a.state===wt.POINT){if(i.state===wt.POINT)return at(r.x2+e,r.y2+e);if(s.state===wt.POINT)return at(r.x2+e,r.y-e);const c=r.height*r.width;return r.width*((a.y-r.y+(o.y-r.y))*.5)<c*.5?a.y>o.y?at(r.x2+e,r.y2+e):at(r.x-e,r.y2+e):a.y<o.y?at(r.x2+e,r.y-e):at(r.x-e,r.y-e)}if(o.state===wt.POINT){if(i.state===wt.POINT)return at(r.x-e,r.y2+e);if(s.state===wt.POINT)return at(r.x-e,r.y-e)}const A=r.height*r.width;return r.height*((i.x-r.x+(o.x-r.x))*.5)<A*.5?i.x>s.x?at(r.x2+e,r.y2+e):at(r.x2+e,r.y-e):i.x<s.x?at(r.x-e,r.y2+e):at(r.x-e,r.y-e)}function jre(r,e,t,n){if(!(r.closed?t<r.length:t<r.length-1))return!1;const a=r.get(e),s=r.get(t+1);for(let o=e+1;o<=t;o++){const A=r.get(o);if($B(a.x,a.y,s.x,s.y,A.x,A.y)>n)return!1}return!0}function $re(r=0){return e=>{if(r<0||e.length<3)return e;const t=[];let n=0;const i=r*r;for(;n<e.length;){let a=n+1;for(;jre(e,n,a,i);)a++;t.push(e.get(n)),n=a}return new Yo(t)}}function Wre(r,e){switch(r){case-2:return(((-e+3)*e-3)*e+1)/6;case-1:return((3*e-6)*e*e+4)/6;case 0:return(((-3*e+3)*e+3)*e+1)/6;case 1:return e*e*e/6;default:throw new Error("unknown error")}}function qre(r=6){function a(s,o,A){let l=0,c=0;for(let u=-2;u<=1;u++){const h=s.get(o+u),d=Wre(u,A);l+=d*h.x,c+=d*h.y}return{x:l,y:c}}return s=>{if(s.length<3)return s;const o=[],A=s.closed,l=s.length+3-1+(A?0:2);o.push(a(s,2-(A?0:2),0));for(let c=2-(A?0:2);c<l;c++)for(let u=1;u<=r;u++)o.push(a(s,c,u/r));return new Yo(o)}}function Yre(r=8){return e=>{let t=r,n=e.length;if(t>1)for(n=Math.floor(e.length/t);n<3&&t>1;)t-=1,n=Math.floor(e.length/t);const i=[];for(let a=0,s=0;s<n;s++,a+=t)i.push(e.get(a));return new Yo(i)}}class Yo{constructor(e=[],t=!0){this.points=e,this.closed=t}get(e){const t=e,n=this.points.length;return e<0?this.closed?this.get(e+n):this.points[0]:e>=n?this.closed?this.get(e-n):this.points[n-1]:this.points[t]}get length(){return this.points.length}toString(e=1/0){const t=this.points;if(t.length===0)return"";const n=typeof e=="function"?e:_re(e);let i="M";for(const a of t)i+=`${n(a.x)},${n(a.y)} L`;return i=i.slice(0,-1),this.closed&&(i+=" Z"),i}draw(e){const t=this.points;if(t.length!==0){e.beginPath(),e.moveTo(t[0].x,t[0].y);for(const n of t)e.lineTo(n.x,n.y);this.closed&&e.closePath()}}sample(e){return Yre(e)(this)}simplify(e){return $re(e)(this)}bSplines(e){return qre(e)(this)}apply(e){return e(this)}containsElements(e){const t=Nre(this.points);return t?e.every(n=>t.containsPt(n.cx,n.cy)&&this.withinArea(n.cx,n.cy)):!1}withinArea(e,t){if(this.length===0)return!1;let n=0;const i=this.points[0],a=new Zt(i.x,i.y,i.x,i.y);for(let s=1;s<this.points.length;s++){const o=this.points[s];a.x1=a.x2,a.y1=a.y2,a.x2=o.x,a.y2=o.y,a.cuts(e,t)&&n++}return a.x1=a.x2,a.y1=a.y2,a.x2=i.x,a.y2=i.y,a.cuts(e,t)&&n++,n%2===1}}class Xre{constructor(e=0){this.count=0,this.arr=[],this.set=new Set,this.arr.length=e}add(e){this.set.add(`${e.x}x${e.y}`),this.arr[this.count++]=e}contains(e){return this.set.has(`${e.x}x${e.y}`)}isFirst(e){if(this.count===0)return!1;const t=this.arr[0];return t!=null&&t.x===e.x&&t.y===e.y}path(){return new Yo(this.arr.slice(0,this.count))}clear(){this.set.clear(),this.count=0}get(e){return this.arr[e]}get length(){return this.count}}const fA=0,gu=1,vu=2,Qm=3;function Zre(r,e){const t=(Math.floor(r.width)+Math.floor(r.height))*2,n=new Xre(t);function i(A,l,c,u){const h=r.get(A,l);return Number.isNaN(h)?Number.NaN:h>e?c+u:c}function a(A,l){let c=fA;return c=i(A,l,c,1),c=i(A+1,l,c,2),c=i(A,l+1,c,4),c=i(A+1,l+1,c,8),Number.isNaN(c)?-1:c}let s=gu;function o(A,l){let c=A,u=l,h=r.invertScaleX(c),d=r.invertScaleY(u);for(let f=0;f<r.width*r.height;f++){const g={x:h,y:d};if(n.contains(g)){if(n.isFirst(g))return!0}else n.add(g);const v=a(c,u);switch(v){case-1:return!0;case 0:case 3:case 2:case 7:s=vu;break;case 12:case 14:case 4:s=Qm;break;case 6:s=s===fA?Qm:vu;break;case 1:case 13:case 5:s=fA;break;case 9:s=s===vu?fA:gu;break;case 10:case 8:case 11:s=gu;break;default:return console.warn("Marching squares invalid state: "+v),!0}switch(s){case fA:u--,d-=r.pixelGroup;break;case gu:u++,d+=r.pixelGroup;break;case Qm:c--,h-=r.pixelGroup;break;case vu:c++,h+=r.pixelGroup;break;default:return console.warn("Marching squares invalid state: "+v),!0}}return!0}for(let A=0;A<r.width;A++)for(let l=0;l<r.height;l++){if(r.get(A,l)<=e)continue;const c=a(A,l);if(!(c<0||c===15)&&o(A,l))return n.path()}return null}const tf={maxRoutingIterations:100,maxMarchingIterations:20,pixelGroup:4,edgeR0:10,edgeR1:20,nodeR0:15,nodeR1:50,morphBuffer:10,threshold:1,memberInfluenceFactor:1,edgeInfluenceFactor:1,nonMemberInfluenceFactor:-.8,virtualEdges:!0};function $A(r){return r!=null&&typeof r.radius=="number"}function IM(r,e){if($A(r)!==$A(e))return!1;if($A(r)){const n=e;return r.cx===n.cx&&r.cy===n.cy&&r.radius===n.radius}const t=e;return r.x===t.x&&r.y===t.y&&r.width===t.width&&r.height===t.height}var Ur;(function(r){r[r.MEMBERS=0]="MEMBERS",r[r.NON_MEMBERS=1]="NON_MEMBERS",r[r.EDGES=2]="EDGES"})(Ur||(Ur={}));let _M=class{constructor(e={}){this.dirty=new Set,this.members=[],this.nonMembers=[],this.virtualEdges=[],this.edges=[],this.activeRegion=new vn(0,0,0,0),this.potentialArea=new ws(1,0,0,0,0,0,0),this.o=Object.assign({},tf,e)}pushMember(...e){if(e.length!==0){this.dirty.add(Ur.MEMBERS);for(const t of e)this.members.push({raw:t,obj:$A(t)?_h.from(t):vn.from(t),area:null})}}removeMember(e){const t=this.members.findIndex(n=>IM(n.raw,e));return t<0?!1:(this.members.splice(t,1),this.dirty.add(Ur.MEMBERS),!0)}removeNonMember(e){const t=this.nonMembers.findIndex(n=>IM(n.raw,e));return t<0?!1:(this.nonMembers.splice(t,1),this.dirty.add(Ur.NON_MEMBERS),!0)}removeEdge(e){const t=this.edges.findIndex(n=>n.obj.equals(e));return t<0?!1:(this.edges.splice(t,1),this.dirty.add(Ur.NON_MEMBERS),!0)}pushNonMember(...e){if(e.length!==0){this.dirty.add(Ur.NON_MEMBERS);for(const t of e)this.nonMembers.push({raw:t,obj:$A(t)?_h.from(t):vn.from(t),area:null})}}pushEdge(...e){if(e.length!==0){this.dirty.add(Ur.EDGES);for(const t of e)this.edges.push({raw:t,obj:Zt.from(t),area:null})}}update(){const e=this.dirty.has(Ur.MEMBERS),t=this.dirty.has(Ur.NON_MEMBERS);let n=this.dirty.has(Ur.EDGES);this.dirty.clear();const i=this.members.map(l=>l.obj);if(this.o.virtualEdges&&(e||t)){const l=this.nonMembers.map(h=>h.obj),c=Rre(i,l,this.o.maxRoutingIterations,this.o.morphBuffer),u=new Map(this.virtualEdges.map(h=>[h.obj.toString(),h.area]));this.virtualEdges=c.map(h=>{var d;return{raw:h,obj:h,area:(d=u.get(h.toString()))!==null&&d!==void 0?d:null}}),n=!0}let a=!1;if(e||n){const l=this.virtualEdges.concat(this.edges).map(d=>d.obj),c=eie(i,l),u=Math.max(this.o.edgeR1,this.o.nodeR1)+this.o.morphBuffer,h=vn.from(zN(c,u));h.equals(this.activeRegion)||(a=!0,this.activeRegion=h)}if(a){const l=Math.ceil(this.activeRegion.width/this.o.pixelGroup),c=Math.ceil(this.activeRegion.height/this.o.pixelGroup);this.activeRegion.x!==this.potentialArea.pixelX||this.activeRegion.y!==this.potentialArea.pixelY?(this.potentialArea=ws.fromPixelRegion(this.activeRegion,this.o.pixelGroup),this.members.forEach(u=>u.area=null),this.nonMembers.forEach(u=>u.area=null),this.edges.forEach(u=>u.area=null),this.virtualEdges.forEach(u=>u.area=null)):(l!==this.potentialArea.width||c!==this.potentialArea.height)&&(this.potentialArea=ws.fromPixelRegion(this.activeRegion,this.o.pixelGroup))}const s=new Map,o=l=>{if(l.area){const c=`${l.obj.width}x${l.obj.height}x${l.obj instanceof vn?"R":"C"}`;s.set(c,l.area)}},A=l=>{if(l.area)return;const c=`${l.obj.width}x${l.obj.height}x${l.obj instanceof vn?"R":"C"}`;if(s.has(c)){const h=s.get(c);l.area=this.potentialArea.copy(h,{x:l.obj.x-this.o.nodeR1,y:l.obj.y-this.o.nodeR1});return}const u=l.obj instanceof vn?Pre(l.obj,this.potentialArea,this.o.nodeR1):VN(l.obj,this.potentialArea,this.o.nodeR1);l.area=u,s.set(c,u)};this.members.forEach(o),this.nonMembers.forEach(o),this.members.forEach(A),this.nonMembers.forEach(l=>{this.activeRegion.intersects(l.obj)?A(l):l.area=null}),this.edges.forEach(l=>{l.area||(l.area=OM(l.obj,this.potentialArea,this.o.edgeR1))}),this.virtualEdges.forEach(l=>{l.area||(l.area=OM(l.obj,this.potentialArea,this.o.edgeR1))})}drawMembers(e){for(const t of this.members)t.obj.draw(e)}drawNonMembers(e){for(const t of this.nonMembers)t.obj.draw(e)}drawEdges(e){for(const t of this.edges)t.obj.draw(e)}drawPotentialArea(e,t=!0){this.potentialArea.draw(e,t)}compute(){if(this.members.length===0)return new Yo([]);this.dirty.size>0&&this.update();const{o:e,potentialArea:t}=this,n=this.members.map(o=>o.area),i=this.virtualEdges.concat(this.edges).map(o=>o.area),a=this.nonMembers.filter(o=>o.area!=null).map(o=>o.area),s=this.members.map(o=>o.obj);return Jre(t,n,i,a,o=>o.containsElements(s),e)}};function Jre(r,e,t,n,i,a={}){const s=Object.assign({},tf,a);let o=s.threshold,A=s.memberInfluenceFactor,l=s.edgeInfluenceFactor,c=s.nonMemberInfluenceFactor;const u=(s.nodeR0-s.nodeR1)*(s.nodeR0-s.nodeR1),h=(s.edgeR0-s.edgeR1)*(s.edgeR0-s.edgeR1);for(let d=0;d<s.maxMarchingIterations;d++){if(r.clear(),A!==0){const g=A/u;for(const v of e)r.incArea(v,g)}if(l!==0){const g=l/h;for(const v of t)r.incArea(v,g)}if(c!==0){const g=c/u;for(const v of n)r.incArea(v,g)}const f=Zre(r,o);if(f&&i(f))return f;if(o*=.95,d<=s.maxMarchingIterations*.5)A*=1.2,l*=1.2;else if(c!==0&&n.length>0)c*=.8;else break}return new Yo([])}function eie(r,e){if(r.length===0)return new vn(0,0,0,0);const t=vn.from(r[0]);for(const n of r)t.add(n);for(const n of e)t.add(HN(n));return t}var tie=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class nf extends en{constructor(e,t){super(e,on({},nf.defaultOptions,t)),this.path=null,this.members=new Map,this.avoidMembers=new Map,this.bubbleSetOptions={},this.drawBubbleSets=()=>{const{style:n,bubbleSetOptions:i}=this.parseOptions();pt(this.bubbleSetOptions,i)||this.init(),this.bubbleSetOptions=Object.assign({},i);const a=Object.assign(Object.assign({},n),{d:this.getPath()});this.shape?this.shape.update(a):(this.shape=new _l({style:a}),this.context.canvas.appendChild(this.shape))},this.updateBubbleSetsPath=n=>{if(!this.shape)return;const i=N(n.data);[...this.options.members,...this.options.avoidMembers].includes(i)&&this.shape.update(Object.assign(Object.assign({},this.parseOptions().style),{d:this.getPath(i)}))},this.getPath=n=>{const{graph:i}=this.context,a=this.options.members,s=[...this.members.keys()],o=this.options.avoidMembers,A=[...this.avoidMembers.keys()];if(a.length===0&&o.length===0)return this.members.clear(),this.avoidMembers.clear(),this.path=[],this.path;if(!n&&this.path&&pt(a,s)&&pt(o,A))return this.path;const{enter:l=[],exit:c=[]}=Fa(s,a,v=>v),{enter:u=[],exit:h=[]}=Fa(A,o,v=>v);if(n){const v=a.includes(n),p=o.includes(n);v&&(c.push(n),l.push(n)),p&&(h.push(n),u.push(n))}const d=(v,p,y)=>{v.forEach(m=>{const w=y?this.members:this.avoidMembers,B=y?"pushMember":"pushNonMember",b=y?"removeMember":"removeNonMember";if(p){let E;i.getElementType(m)==="edge"?([E]=rie(i,m),this.bubbleSets.pushEdge(E)):([E]=nie(i,m),this.bubbleSets[B](E)),w.set(m,E)}else{const E=w.get(m);E&&(i.getElementType(m)==="edge"?this.bubbleSets.removeEdge(E):this.bubbleSets[b](E),w.delete(m))}})};d(c,!1,!0),d(l,!0,!0),d(h,!1,!1),d(u,!0,!1);const g=this.bubbleSets.compute().sample(8).simplify(0).bSplines().simplify(0);return this.path=tL(g.points.map(an)),this.path},this.bindEvents(),this.bubbleSets=new _M(this.options)}bindEvents(){this.context.graph.on(V.AFTER_RENDER,this.drawBubbleSets),this.context.graph.on(V.AFTER_ELEMENT_UPDATE,this.updateBubbleSetsPath)}init(){this.bubbleSets=new _M(this.options),this.members.clear(),this.avoidMembers.clear(),this.path=null}parseOptions(){const e=this.options,{type:t,key:n,members:i,avoidMembers:a}=e,s=tie(e,["type","key","members","avoidMembers"]),o=Object.keys(s).reduce((A,l)=>(l in tf?A.bubbleSetOptions[l]=s[l]:A.style[l]=s[l],A),{style:{},bubbleSetOptions:{}});return Object.assign({type:t,key:n,members:i,avoidMembers:a},o)}addMember(e){const t=Array.isArray(e)?e:[e];t.some(n=>this.options.avoidMembers.includes(n))&&(this.options.avoidMembers=this.options.avoidMembers.filter(n=>!t.includes(n))),this.options.members=[...new Set([...this.options.members,...t])],this.drawBubbleSets()}removeMember(e){const t=Array.isArray(e)?e:[e];this.options.members=this.options.members.filter(n=>!t.includes(n)),this.drawBubbleSets()}updateMember(e){this.options.members=ie(e)?e(this.options.members):e,this.drawBubbleSets()}getMember(){return this.options.members}addAvoidMember(e){const t=Array.isArray(e)?e:[e];t.some(n=>this.options.members.includes(n))&&(this.options.members=this.options.members.filter(n=>!t.includes(n))),this.options.avoidMembers=[...new Set([...this.options.avoidMembers,...t])],this.drawBubbleSets()}removeAvoidMember(e){const t=Array.isArray(e)?e:[e];this.options.avoidMembers.some(n=>t.includes(n))&&(this.options.avoidMembers=this.options.avoidMembers.filter(n=>!t.includes(n)),this.drawBubbleSets())}updateAvoidMember(e){this.options.avoidMembers=Array.isArray(e)?e:[e],this.drawBubbleSets()}getAvoidMember(){return this.options.avoidMembers}destroy(){this.context.graph.off(V.AFTER_RENDER,this.drawBubbleSets),this.context.graph.off(V.AFTER_ELEMENT_UPDATE,this.updateBubbleSetsPath),this.shape&&(this.shape.destroy(),this.shape=void 0),super.destroy()}}nf.defaultOptions=Object.assign({members:[],avoidMembers:[],fill:"lightblue",fillOpacity:.2,stroke:"blue",strokeOpacity:.2},tf);const nie=(r,e)=>(Array.isArray(e)?e:[e]).map(n=>{const i=r.getElementRenderBounds(n);return new vn(i.min[0],i.min[1],xi(i),Ci(i))}),rie=(r,e)=>(Array.isArray(e)?e:[e]).map(n=>{const i=r.getEdgeData(n),a=r.getElementPosition(i.source),s=r.getElementPosition(i.target);return Zt.from({x1:a[0],y1:a[1],x2:s[0],y2:s[1]})});function iie(r){return`
    <ul class="g6-contextmenu-ul">
      ${r.map(e=>`<li  class="g6-contextmenu-li" value="${e.value}">${e.name}</li>`).join("")}
    </ul>
  `}const aie=`
  .g6-contextmenu {
    font-size: 12px;
    background-color: rgba(255, 255, 255, 0.96);
    border-radius: 4px;
    overflow: hidden;
    box-shadow: rgba(0, 0, 0, 0.12) 0px 6px 12px 0px;
    transition: visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1) 0s, left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s;
  }

  .g6-contextmenu-ul {
    max-width: 256px;
    min-width: 96px;
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .g6-contextmenu-li {
    padding: 8px 12px;
    cursor: pointer;
    user-select: none;
  }

  .g6-contextmenu-li:hover {
    background-color: #f5f5f5;
    cursor: pointer;
  }
`;var kM=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class rf extends en{constructor(e,t){super(e,Object.assign({},rf.defaultOptions,t)),this.targetElement=null,this.onTriggerEvent=n=>{var i;(i=n.preventDefault)===null||i===void 0||i.call(n),this.show(n)},this.onMenuItemClick=n=>{const{onClick:i,trigger:a}=this.options;if(n.target instanceof HTMLElement&&n.target.className.includes("g6-contextmenu-li")){const s=n.target.getAttribute("value");i==null||i(s,n.target,this.targetElement),this.hide()}a!=="click"&&this.hide()},this.initElement(),this.update(t)}initElement(){this.$element=qo("contextmenu",!1,{zIndex:"99"});const{className:e}=this.options;e&&this.$element.classList.add(e),this.context.canvas.getContainer().appendChild(this.$element),hw("g6-contextmenu-css","style",{},aie,document.head)}show(e){return kM(this,void 0,void 0,function*(){const{enable:t,offset:n}=this.options;if(typeof t=="function"&&!t(e)||!t){this.hide();return}const i=yield this.getDOMContent(e);i instanceof HTMLElement?(this.$element.innerHTML="",this.$element.appendChild(i)):this.$element.innerHTML=i;const a=this.context.graph.getCanvas().getContainer().getBoundingClientRect();this.$element.style.left=`${e.client.x-a.left+n[0]}px`,this.$element.style.top=`${e.client.y-a.top+n[1]}px`,this.$element.style.display="block",this.targetElement=e.target})}hide(){this.$element.style.display="none",this.targetElement=null}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.$element.remove()}getDOMContent(e){return kM(this,void 0,void 0,function*(){const{getContent:t,getItems:n}=this.options;return n?iie(yield n(e)):yield t(e)})}bindEvents(){const{graph:e}=this.context,{trigger:t}=this.options;e.on(`canvas:${t}`,this.onTriggerEvent),e.on(`node:${t}`,this.onTriggerEvent),e.on(`edge:${t}`,this.onTriggerEvent),e.on(`combo:${t}`,this.onTriggerEvent),document.addEventListener("click",this.onMenuItemClick)}unbindEvents(){const{graph:e}=this.context,{trigger:t}=this.options;e.off(`canvas:${t}`,this.onTriggerEvent),e.off(`node:${t}`,this.onTriggerEvent),e.off(`edge:${t}`,this.onTriggerEvent),e.off(`combo:${t}`,this.onTriggerEvent),document.removeEventListener("click",this.onMenuItemClick)}}rf.defaultOptions={trigger:"contextmenu",offset:[4,4],loadingContent:'<div class="g6-contextmenu-loading">Loading...</div>',getContent:()=>"It is a empty context menu.",enable:()=>!0};class af extends en{constructor(e,t){super(e,Object.assign({},af.defaultOptions,t)),this.edgeBundles={},this.edgePoints={},this.onBundle=()=>{const{model:n,element:i}=this.context,a=n.getEdgeData();this.divideEdges(this.options.divisions);const{cycles:s,iterRate:o,divRate:A}=this.options;let{lambda:l,divisions:c,iterations:u}=this.options;for(let h=0;h<s;h++){for(let d=0;d<u;d++){const f={};a.forEach(g=>{var v;if(g.source===g.target)return;const p=N(g);f[p]=this.getEdgeForces(g,c,l);for(let y=0;y<c+1;y++)(v=this.edgePoints)[p]||(v[p]=[]),this.edgePoints[p][y]=ve(this.edgePoints[p][y],f[p][y])})}l/=2,c*=A,u*=o,this.divideEdges(c)}a.forEach(h=>{const d=N(h),f=i.getElement(d);f==null||f.update({d:dB(this.edgePoints[d])})})},this.bindEvents()}get nodeMap(){const e=this.context.model.getNodeData();return Object.fromEntries(e.map(t=>[N(t),Ms(Vt(t))]))}divideEdges(e){this.context.model.getEdgeData().forEach(n=>{var i;const a=N(n);(i=this.edgePoints)[a]||(i[a]=[]);const s=this.nodeMap[n.source],o=this.nodeMap[n.target];if(e===1)this.edgePoints[a].push(s),this.edgePoints[a].push(jr(ve(s,o),2)),this.edgePoints[a].push(o);else{const l=(this.edgePoints[a].length===0?rt(s,o):cie(this.edgePoints[a]))/(e+1);let c=l;const u=[s];for(let h=1;h<this.edgePoints[a].length;h++){const d=this.edgePoints[a][h-1],f=this.edgePoints[a][h];let g=rt(f,d);for(;g>c;){const v=c/g,p=ve(d,Dr($e(f,d),v));u.push(p),g-=c,c=l}c-=g}u.push(o),this.edgePoints[a]=u}})}getVectorPosition(e){const t=this.nodeMap[e.source],n=this.nodeMap[e.target],[i,a]=$e(n,t),s=rt(t,n);return{source:t,target:n,vx:i,vy:a,length:s}}measureEdgeCompatibility(e,t){const n=this.getVectorPosition(e),i=this.getVectorPosition(t),a=sie(n,i),s=oie(n,i),o=Aie(n,i),A=lie(n,i);return a*s*o*A}getEdgeBundles(){const e={},t=this.options.bundleThreshold,n=this.context.model.getEdgeData();return n.forEach((i,a)=>{n.forEach((s,o)=>{var A,l;if(o<=a)return;this.measureEdgeCompatibility(i,s)>=t&&(e[A=N(i)]||(e[A]=[]),e[N(i)].push(s),e[l=N(s)]||(e[l]=[]),e[N(s)].push(i))})}),e}getSpringForce(e,t){const{pre:n,cur:i,next:a}=e;return Dr($e(ve(n,a),Dr(i,2)),t)}getElectrostaticForce(e,t){Ai(this.edgeBundles)&&(this.edgeBundles=this.getEdgeBundles());const n=this.edgeBundles[N(t)];let i=[0,0];return n==null||n.forEach(a=>{const s=this.edgePoints[N(a)][e],o=this.edgePoints[N(t)][e],A=$e(s,o),l=rt(s,o);i=ve(i,Dr(A,1/l))}),i}getEdgeForces(e,t,n){const i=this.nodeMap[e.source],a=this.nodeMap[e.target],s=this.options.K/(rt(i,a)*(t+1)),o=[[0,0]],A=N(e);for(let l=1;l<t;l++){const c=this.getSpringForce({pre:this.edgePoints[A][l-1],cur:this.edgePoints[A][l],next:this.edgePoints[A][l+1]||[0,0]},s),u=this.getElectrostaticForce(l,e);o.push(Dr(ve(c,u),n))}return o.push([0,0]),o}bindEvents(){const{graph:e}=this.context;e.on(V.AFTER_RENDER,this.onBundle)}unbindEvents(){const{graph:e}=this.context;e.off(V.AFTER_RENDER,this.onBundle)}destroy(){this.unbindEvents(),super.destroy()}}af.defaultOptions={K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:2/3,bundleThreshold:.6};const sie=(r,e)=>Math.abs(kV([r.vx,r.vy],[e.vx,e.vy])/(r.length*e.length)),oie=(r,e)=>{const t=(r.length+e.length)/2;return 2/(t/Math.min(r.length,e.length)+Math.max(r.length,e.length)/t)},Aie=(r,e)=>{const t=(r.length+e.length)/2,n=jr(ve(r.source,r.target),2),i=jr(ve(e.source,e.target),2);return t/(t+rt(n,i))},LM=(r,e)=>{if(e.source[0]===e.target[0])return[e.source[0],r[1]];if(e.source[1]===e.target[1])return[r[0],e.source[1]];const t=(e.source[1]-e.target[1])/(e.source[0]-e.target[0]),n=(t*t*e.source[0]+t*(r[1]-e.source[1])+r[0])/(t*t+1),i=t*(n-e.source[0])+e.source[1];return[n,i]},QM=(r,e)=>{const t=LM(e.source,r),n=LM(e.target,r),i=jr(ve(t,n),2),a=jr(ve(r.source,r.target),2);return rt(t,n)===0?0:Math.max(0,1-2*rt(a,i)/rt(t,n))},lie=(r,e)=>Math.min(QM(r,e),QM(e,r)),cie=r=>{let e=0;for(let t=1;t<r.length;t++)e+=rt(r[t],r[t-1]);return e},uie={fill:"#fff",fillOpacity:1,lineWidth:1,stroke:"#000",strokeOpacity:.8,zIndex:-1/0},NM=.05;class sf extends en{constructor(e,t){super(e,Object.assign({},sf.defaultOptions,t)),this.shapes=new Map,this.r=this.options.r,this.onEdgeFilter=n=>{if(this.options.trigger==="drag"&&this.isLensOn)return;const i=an(n.canvas);this.renderLens(i),this.renderFocusElements()},this.renderLens=n=>{const i=Object.assign({},uie,this.options.style);this.isLensOn||(this.lens=new kl({style:i}),this.canvas.appendChild(this.lens)),Object.assign(i,Hr(n),{size:this.r*2}),this.lens.update(i)},this.getFilterData=()=>{const{filter:n}=this.options,{model:i}=this.context,a=i.getData();if(!n)return a;const{nodes:s,edges:o,combos:A}=a;return{nodes:s.filter(l=>n(N(l),"node")),edges:o.filter(l=>n(N(l),"edge")),combos:A.filter(l=>n(N(l),"combo"))}},this.getFocusElements=n=>{const{nodes:i,edges:a}=this.getFilterData(),s=i.filter(l=>rt(Vt(l),n)<this.r),o=s.map(l=>N(l)),A=a.filter(l=>{const{source:c,target:u}=l,h=o.includes(c),d=o.includes(u);switch(this.options.nodeType){case"both":return h&&d;case"either":return h!==d;case"source":return h&&!d;case"target":return!h&&d;default:return!1}});return{nodes:s,edges:A}},this.renderFocusElements=()=>{const{element:n,graph:i}=this.context;if(!this.isLensOn)return;const a=this.lens.getCenter(),{nodes:s,edges:o}=this.getFocusElements(a),A=new Set,l=c=>{const u=N(c);A.add(u);const h=n.getElement(u);if(!h)return;const d=this.shapes.get(u)||h.cloneNode();d.setPosition(h.getPosition()),d.id=h.id,this.shapes.has(u)?Object.entries(h.attributes).forEach(([v,p])=>{d.style[v]!==p&&(d.style[v]=p)}):(this.canvas.appendChild(d),this.shapes.set(u,d));const f=i.getElementType(u),g=this.getElementStyle(f,c);d.update(g)};s.forEach(l),o.forEach(l),this.shapes.forEach((c,u)=>{A.has(u)||(c.destroy(),this.shapes.delete(u))})},this.scaleRByWheel=n=>{var i;this.options.preventDefault&&n.preventDefault();const{clientX:a,clientY:s,deltaX:o,deltaY:A}=n,{graph:l,canvas:c}=this.context,u=l.getCanvasByClient([a,s]),h=(i=this.lens)===null||i===void 0?void 0:i.getCenter();if(!this.isLensOn||rt(u,h)>this.r)return;const{maxR:d,minR:f}=this.options,g=o+A>0?1/(1-NM):1-NM,v=Math.min(...c.getSize())/2;this.r=Math.max(f||0,Math.min(d||v,this.r*g)),this.renderLens(h),this.renderFocusElements()},this.isLensDragging=!1,this.onDragStart=n=>{var i;const a=an(n.canvas),s=(i=this.lens)===null||i===void 0?void 0:i.getCenter();!this.isLensOn||rt(a,s)>this.r||(this.isLensDragging=!0)},this.onDrag=n=>{if(!this.isLensDragging)return;const i=an(n.canvas);this.renderLens(i),this.renderFocusElements()},this.onDragEnd=()=>{this.isLensDragging=!1},this.bindEvents()}get canvas(){return this.context.canvas.getLayer("transient")}get isLensOn(){return this.lens&&!this.lens.destroyed}getElementStyle(e,t){const n=e==="node"?this.options.nodeStyle:this.options.edgeStyle;return typeof n=="function"?n(t):n}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement()}bindEvents(){var e;const{graph:t}=this.context,{trigger:n,scaleRBy:i}=this.options,a=t.getCanvas().getLayer();["click","drag"].includes(n)&&a.addEventListener(R.CLICK,this.onEdgeFilter),n==="pointermove"?a.addEventListener(R.POINTER_MOVE,this.onEdgeFilter):n==="drag"&&(a.addEventListener(R.DRAG_START,this.onDragStart),a.addEventListener(R.DRAG,this.onDrag),a.addEventListener(R.DRAG_END,this.onDragEnd)),i==="wheel"&&((e=this.graphDom)===null||e===void 0||e.addEventListener(R.WHEEL,this.scaleRByWheel,{passive:!1}))}unbindEvents(){var e;const{graph:t}=this.context,{trigger:n,scaleRBy:i}=this.options,a=t.getCanvas().getLayer();["click","drag"].includes(n)&&a.removeEventListener(R.CLICK,this.onEdgeFilter),n==="pointermove"?a.removeEventListener(R.POINTER_MOVE,this.onEdgeFilter):n==="drag"&&(a.removeEventListener(R.DRAG_START,this.onDragStart),a.removeEventListener(R.DRAG,this.onDrag),a.removeEventListener(R.DRAG_END,this.onDragEnd)),i==="wheel"&&((e=this.graphDom)===null||e===void 0||e.removeEventListener(R.WHEEL,this.scaleRByWheel))}update(e){var t;this.unbindEvents(),super.update(e),this.r=(t=e.r)!==null&&t!==void 0?t:this.r,this.bindEvents()}destroy(){this.unbindEvents(),this.isLensOn&&this.lens.destroy(),this.shapes.forEach((e,t)=>{e.destroy(),this.shapes.delete(t)}),super.destroy()}}sf.defaultOptions={trigger:"pointermove",r:60,nodeType:"both",filter:()=>!0,style:{lineWidth:2},nodeStyle:{label:!1},edgeStyle:{label:!0},scaleRBy:"wheel",preventDefault:!0};const hie={fill:"#ccc",fillOpacity:.1,lineWidth:2,stroke:"#000",strokeOpacity:.8,labelFontSize:12},UM=.05,PM=.1;class of extends en{constructor(e,t){super(e,Object.assign({},of.defaultOptions,t)),this.r=this.options.r,this.d=this.options.d,this.onCreateFisheye=n=>{if(this.options.trigger==="drag"&&this.isLensOn)return;const i=an(n.canvas);this.onMagnify(i)},this.onMagnify=n=>{n.some(isNaN)||(this.renderLens(n),this.renderFocusElements())},this.renderLens=n=>{const i=Object.assign({},hie,this.options.style);this.isLensOn||(this.lens=new kl({style:i}),this.canvas.appendChild(this.lens)),Object.assign(i,Hr(n),{size:this.r*2,label:this.options.showDPercent,labelText:this.getDPercent()}),this.lens.update(i)},this.getDPercent=()=>{const{minD:n,maxD:i}=this.options;return`${Math.round((this.d-n)/(i-n)*100)}%`},this.prevMagnifiedStyleMap=new Map,this.prevOriginStyleMap=new Map,this.renderFocusElements=()=>{if(!this.isLensOn)return;const{graph:n}=this.context,i=this.lens.getCenter(),a=(this.d+1)*this.r,s=new Map,o=new Map;n.getNodeData().forEach(l=>{const c=Vt(l),u=rt(c,i);if(u>this.r)return;const h=a*u/(this.d*u+this.r),[d,f]=c,[g,v]=i,p=(d-g)/u,y=(f-v)/u,m=[g+h*p,v+h*y],w=N(l),B=this.getNodeStyle(l),b=Es(n.getElementRenderStyle(w),Object.keys(B));s.set(w,Object.assign(Object.assign({},Hr(m)),B)),o.set(w,Object.assign(Object.assign({},Hr(c)),b))}),this.updateStyle(s,o)},this.getNodeStyle=n=>{const{nodeStyle:i}=this.options;return typeof i=="function"?i(n):i},this.updateStyle=(n,i)=>{const{graph:a,element:s}=this.context,{enter:o,exit:A,keep:l}=Fa(Array.from(this.prevMagnifiedStyleMap.keys()),Array.from(n.keys()),h=>h),c=new Set,u=(h,d)=>{const f=s.getElement(h);f==null||f.update(d),a.getRelatedEdgesData(h).forEach(g=>{c.add(N(g))})};[...o,...l].forEach(h=>{u(h,n.get(h))}),A.forEach(h=>{u(h,this.prevOriginStyleMap.get(h)),this.prevOriginStyleMap.delete(h)}),c.forEach(h=>{const d=s.getElement(h);d==null||d.update({})}),this.prevMagnifiedStyleMap=n,i.forEach((h,d)=>{this.prevOriginStyleMap.has(d)||this.prevOriginStyleMap.set(d,h)})},this.isWheelValid=n=>{if(this.options.preventDefault&&n.preventDefault(),!this.isLensOn)return!1;const{clientX:i,clientY:a}=n,s=this.context.graph.getCanvasByClient([i,a]),o=this.lens.getCenter();return!(rt(s,o)>this.r)},this.scaleR=n=>{const{maxR:i,minR:a}=this.options,s=n?1/(1-UM):1-UM,o=Math.min(...this.context.canvas.getSize())/2;this.r=Math.max(a||0,Math.min(i||o,this.r*s))},this.scaleD=n=>{const{maxD:i,minD:a}=this.options,s=n?this.d+PM:this.d-PM;this.d=Math.max(a,Math.min(i,s))},this.scaleRByWheel=n=>{if(!this.isWheelValid(n))return;const{deltaX:i,deltaY:a}=n;this.scaleR(i+a>0);const s=this.lens.getCenter();this.onMagnify(s)},this.scaleDByWheel=n=>{if(!this.isWheelValid(n))return;const{deltaX:i,deltaY:a}=n;this.scaleD(i+a>0);const s=this.lens.getCenter();this.onMagnify(s)},this.isDragValid=n=>{if(this.options.preventDefault&&n.preventDefault(),!this.isLensOn)return!1;const i=an(n.canvas),a=this.lens.getCenter();return!(rt(i,a)>this.r)},this.isLensDragging=!1,this.onDragStart=n=>{this.isDragValid(n)&&(this.isLensDragging=!0)},this.onDrag=n=>{if(!this.isLensDragging)return;const i=an(n.canvas);this.onMagnify(i)},this.onDragEnd=()=>{this.isLensDragging=!1},this.scaleRByDrag=n=>{if(!this.isLensDragging)return;const{dx:i,dy:a}=n;this.scaleR(i-a>0);const s=this.lens.getCenter();this.onMagnify(s)},this.scaleDByDrag=n=>{if(!this.isLensDragging)return;const{dx:i,dy:a}=n;this.scaleD(i-a>0);const s=this.lens.getCenter();this.onMagnify(s)},this.bindEvents()}get canvas(){return this.context.canvas.getLayer("transient")}get isLensOn(){return this.lens&&!this.lens.destroyed}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement()}bindEvents(){var e;const{graph:t}=this.context,{trigger:n,scaleRBy:i,scaleDBy:a}=this.options,s=t.getCanvas().getLayer();if(["click","drag"].includes(n)&&s.addEventListener(R.CLICK,this.onCreateFisheye),n==="pointermove"&&s.addEventListener(R.POINTER_MOVE,this.onCreateFisheye),n==="drag"||i==="drag"||a==="drag"){s.addEventListener(R.DRAG_START,this.onDragStart),s.addEventListener(R.DRAG_END,this.onDragEnd);const o=n==="drag"?this.onDrag:i==="drag"?this.scaleRByDrag:this.scaleDByDrag;s.addEventListener(R.DRAG,o)}if(i==="wheel"||a==="wheel"){const o=i==="wheel"?this.scaleRByWheel:this.scaleDByWheel;(e=this.graphDom)===null||e===void 0||e.addEventListener(R.WHEEL,o,{passive:!1})}}unbindEvents(){var e;const{graph:t}=this.context,{trigger:n,scaleRBy:i,scaleDBy:a}=this.options,s=t.getCanvas().getLayer();if(["click","drag"].includes(n)&&s.removeEventListener(R.CLICK,this.onCreateFisheye),n==="pointermove"&&s.removeEventListener(R.POINTER_MOVE,this.onCreateFisheye),n==="drag"||i==="drag"||a==="drag"){s.removeEventListener(R.DRAG_START,this.onDragStart),s.removeEventListener(R.DRAG_END,this.onDragEnd);const o=n==="drag"?this.onDrag:i==="drag"?this.scaleRByDrag:this.scaleDByDrag;s.removeEventListener(R.DRAG,o)}if(i==="wheel"||a==="wheel"){const o=i==="wheel"?this.scaleRByWheel:this.scaleDByWheel;(e=this.graphDom)===null||e===void 0||e.removeEventListener(R.WHEEL,o)}}update(e){var t,n;this.unbindEvents(),super.update(e),this.r=(t=e.r)!==null&&t!==void 0?t:this.r,this.d=(n=e.d)!==null&&n!==void 0?n:this.d,this.bindEvents()}destroy(){var e;this.unbindEvents(),this.isLensOn&&((e=this.lens)===null||e===void 0||e.destroy()),this.prevMagnifiedStyleMap.clear(),this.prevOriginStyleMap.clear(),super.destroy()}}of.defaultOptions={trigger:"pointermove",r:120,d:1.5,maxD:5,minD:0,showDPercent:!0,style:{},nodeStyle:{label:!0},preventDefault:!0};class Af extends en{constructor(e,t){super(e,Object.assign({},Af.defaultOptions,t)),this.$el=this.context.canvas.getContainer(),this.graphSize=[0,0],this.onFullscreenChange=()=>{var n,i,a,s;const o=!!document.fullscreenElement;this.options.autoFit&&this.setGraphSize(o),o?(i=(n=this.options).onEnter)===null||i===void 0||i.call(n):(s=(a=this.options).onExit)===null||s===void 0||s.call(a)},this.shortcut=new Ha(e.graph),this.bindEvents(),this.style=document.createElement("style"),document.head.appendChild(this.style),this.style.innerHTML=`
      :not(:root):fullscreen::backdrop {
        background: transparent;
      }
    `}bindEvents(){this.unbindEvents(),this.shortcut.unbindAll();const{request:e=[],exit:t=[]}=this.options.trigger;this.shortcut.bind(e,this.request),this.shortcut.bind(t,this.exit),["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"].forEach(i=>{document.addEventListener(i,this.onFullscreenChange,!1)})}unbindEvents(){this.shortcut.unbindAll(),["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"].forEach(t=>{document.removeEventListener(t,this.onFullscreenChange,!1)})}setGraphSize(e=!0){var t,n;let i,a;e?(i=((t=globalThis.screen)===null||t===void 0?void 0:t.width)||0,a=((n=globalThis.screen)===null||n===void 0?void 0:n.height)||0,this.graphSize=this.context.graph.getSize()):[i,a]=this.graphSize,this.context.graph.setSize(i,a),this.context.graph.render()}request(){document.fullscreenElement||!die()||this.$el.requestFullscreen().catch(e=>{Ei.warn(`Error attempting to enable full-screen: ${e.message} (${e.name})`)})}exit(){document.fullscreenElement&&document.exitFullscreen()}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}destroy(){this.exit(),this.style.remove(),super.destroy()}}Af.defaultOptions={trigger:{},autoFit:!0};function die(){return document.fullscreenEnabled||Reflect.get(document,"webkitFullscreenEnabled")||Reflect.get(document,"mozFullscreenEnabled")||Reflect.get(document,"msFullscreenEnabled")}class lf extends en{constructor(e,t){super(e,Object.assign({},lf.defaultOptions,t)),this.$element=qo("grid-line",!0),this.offset=[0,0],this.currentScale=1,this.followZoom=i=>{const{data:{scale:a,origin:s}}=i;if(!a||s===void 0&&this.context.viewport===void 0)return;const o=this.currentScale;this.currentScale=a;const A=a/o,l=Dr(s||this.context.graph.getCanvasCenter(),1-A),c=this.baseSize*a,u=Dr(this.offset,A),h=xg(u,c),d=ve(h,l);this.$element.style.backgroundSize=`${c}px ${c}px`,this.$element.style.backgroundPosition=`${d[0]}px ${d[1]}px`,this.offset=xg(d,c)},this.followTranslate=i=>{if(!this.options.follow)return;const{data:{translate:a}}=i;a&&this.updateOffset(a)},this.onTransform=i=>{const a=this.parseFollow(this.options.follow);a.zoom&&this.followZoom(i),a.translate&&this.followTranslate(i)},this.context.canvas.getContainer().prepend(this.$element),this.baseSize=this.options.size,this.updateStyle(),this.bindEvents()}update(e){super.update(e),e.size!==void 0&&(this.baseSize=e.size),this.updateStyle()}bindEvents(){const{graph:e}=this.context;e.on(V.AFTER_TRANSFORM,this.onTransform)}updateStyle(){const{stroke:e,lineWidth:t,border:n,borderLineWidth:i,borderStroke:a,borderStyle:s}=this.options,o=this.baseSize*this.currentScale;Object.assign(this.$element.style,{border:n?`${i}px ${s} ${a}`:"none",backgroundImage:`linear-gradient(${e} ${t}px, transparent ${t}px), linear-gradient(90deg, ${e} ${t}px, transparent ${t}px)`,backgroundSize:`${o}px ${o}px`,backgroundRepeat:"repeat"})}updateOffset(e){const t=this.baseSize*this.currentScale;this.offset=xg(ve(this.offset,e),t),this.$element.style.backgroundPosition=`${this.offset[0]}px ${this.offset[1]}px`}parseFollow(e){var t,n;return ZA(e)?{translate:e,zoom:e}:{translate:(t=e==null?void 0:e.translate)!==null&&t!==void 0?t:!1,zoom:(n=e==null?void 0:e.zoom)!==null&&n!==void 0?n:!1}}destroy(){this.context.graph.off(V.AFTER_TRANSFORM,this.onTransform),this.$element.remove(),super.destroy()}}lf.defaultOptions={border:!0,borderLineWidth:1,borderStroke:"#eee",borderStyle:"solid",lineWidth:1,size:20,stroke:"#eee"};function WB(r){const e={Added:new Map,Updated:new Map,Removed:new Map};return r.forEach(t=>{const{type:n,value:i}=t,a=N(i);if(n==="NodeAdded"||n==="EdgeAdded"||n==="ComboAdded")e.Added.set(a,t);else if(n==="NodeUpdated"||n==="EdgeUpdated"||n==="ComboUpdated")if(e.Added.has(a))e.Added.set(a,{type:n.replace("Updated","Added"),value:i});else if(e.Updated.has(a)){const{original:s}=e.Updated.get(a);e.Updated.set(a,{type:n,value:i,original:s})}else e.Removed.has(a)||e.Updated.set(a,t);else(n==="NodeRemoved"||n==="EdgeRemoved"||n==="ComboRemoved")&&(e.Added.has(a)?e.Added.delete(a):(e.Updated.has(a)&&e.Updated.delete(a),e.Removed.set(a,t)))}),[...Array.from(e.Added.values()),...Array.from(e.Updated.values()),...Array.from(e.Removed.values())]}function $N(r){const{NodeAdded:e=[],NodeUpdated:t=[],NodeRemoved:n=[],EdgeAdded:i=[],EdgeUpdated:a=[],EdgeRemoved:s=[],ComboAdded:o=[],ComboUpdated:A=[],ComboRemoved:l=[]}=Ph(r,c=>c.type);return{add:{nodes:e,edges:i,combos:o},update:{nodes:t,edges:a,combos:A},remove:{nodes:n,edges:s,combos:l}}}function WN(r,e){for(const t in r)Ot(r[t])&&!Array.isArray(r[t])&&r[t]!==null?(e[t]||(e[t]={}),WN(r[t],e[t])):e[t]===void 0&&(e[t]=ol(t))}function fie(r,e=!1,t){const n={animation:e,current:{add:{},update:{},remove:{}},original:{add:{},update:{},remove:{}}},{add:i,update:a,remove:s}=$N(WB(r));return["nodes","edges","combos"].forEach(o=>{a[o]&&a[o].forEach(A=>{var l,c;const u=Object.assign({},A.value);let h=Object.assign({},A.original);if(t){const d=t.graph.getElementType(N(A.original)),f=d==="edge"?"stroke":"fill",g=t.element.getElementComputedStyle(d,A.original);h=Object.assign(Object.assign({},A.original),{style:Object.assign({[f]:g[f]},A.original.style)})}WN(u,h),(l=n.current.update)[o]||(l[o]=[]),n.current.update[o].push(u),(c=n.original.update)[o]||(c[o]=[]),n.original.update[o].push(h)}),i[o]&&i[o].forEach(A=>{var l,c;const u=Object.assign({},A.value);(l=n.current.add)[o]||(l[o]=[]),n.current.add[o].push(u),(c=n.original.remove)[o]||(c[o]=[]),n.original.remove[o].push(u)}),s[o]&&s[o].forEach(A=>{var l,c;const u=Object.assign({},A.value);(l=n.current.remove)[o]||(l[o]=[]),n.current.remove[o].push(u),(c=n.original.add)[o]||(c[o]=[]),n.original.add[o].push(u)})}),n}class cf extends en{constructor(e,t){super(e,Object.assign({},cf.defaultOptions,t)),this.batchChanges=null,this.batchAnimation=!1,this.undoStack=[],this.redoStack=[],this.freezed=!1,this.executeCommand=(i,a=!0)=>{var s,o,A;this.freezed=!0,(o=(s=this.options).executeCommand)===null||o===void 0||o.call(s,i);const l=a?i.original:i.current;this.context.graph.addData(l.add),this.context.graph.updateData(l.update),this.context.graph.removeData(Pk(l.remove,!1)),(A=this.context.element)===null||A===void 0||A.draw({silence:!0,animation:i.animation}),this.freezed=!1},this.addCommand=i=>{var a;if(!this.freezed){if(i.type===V.AFTER_DRAW){const{dataChanges:s=[],animation:o=!0}=i.data;if(!((a=this.context.batch)===null||a===void 0)&&a.isBatching){if(!this.batchChanges)return;this.batchChanges.push(s),this.batchAnimation&&(this.batchAnimation=o);return}this.batchChanges=[s],this.batchAnimation=o}this.undoStackPush(fie(this.batchChanges.flat(),this.batchAnimation,this.context)),this.notify(la.ADD,this.undoStack[this.undoStack.length-1])}},this.initBatchCommand=i=>{const{initiate:a}=i.data;this.batchAnimation=!1,a?this.batchChanges=[]:this.undoStack.pop()||(this.batchChanges=null)},this.emitter=new yd;const{graph:n}=this.context;n.on(V.AFTER_DRAW,this.addCommand),n.on(V.BATCH_START,this.initBatchCommand),n.on(V.BATCH_END,this.addCommand)}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}undo(){var e,t,n,i;const a=this.undoStack.pop();if(a){if(this.executeCommand(a),((t=(e=this.options).beforeAddCommand)===null||t===void 0?void 0:t.call(e,a,!1))===!1)return;this.redoStack.push(a),(i=(n=this.options).afterAddCommand)===null||i===void 0||i.call(n,a,!1),this.notify(la.UNDO,a)}return this}redo(){const e=this.redoStack.pop();return e&&(this.executeCommand(e,!1),this.undoStackPush(e),this.notify(la.REDO,e)),this}undoAndCancel(){const e=this.undoStack.pop();return e&&(this.executeCommand(e,!1),this.redoStack=[],this.notify(la.CANCEL,e)),this}undoStackPush(e){var t,n,i,a;const{stackSize:s}=this.options;s!==0&&this.undoStack.length>=s&&this.undoStack.shift(),((n=(t=this.options).beforeAddCommand)===null||n===void 0?void 0:n.call(t,e,!0))!==!1&&(this.undoStack.push(e),(a=(i=this.options).afterAddCommand)===null||a===void 0||a.call(i,e,!0))}clear(){this.undoStack=[],this.redoStack=[],this.batchChanges=null,this.batchAnimation=!1,this.notify(la.CLEAR,null)}notify(e,t){this.emitter.emit(e,{cmd:t}),this.emitter.emit(la.CHANGE,{cmd:t})}on(e,t){this.emitter.on(e,t)}destroy(){const{graph:e}=this.context;e.off(V.AFTER_DRAW,this.addCommand),e.off(V.BATCH_START,this.initBatchCommand),e.off(V.BATCH_END,this.addCommand),this.emitter.off(),super.destroy(),this.undoStack=[],this.redoStack=[]}}cf.defaultOptions={stackSize:0};const Nm={toXy(r,e){if(!e)return[...r];const t=e[0].slice(1),n=e[1].slice(1);return r.map(i=>[i[t],i[n]])},fromXy(r,e){if(!e)return[...r];const t=e[0].slice(1),n=e[1].slice(1);return r.map(([i,a])=>({[t]:i,[n]:a}))}};let gie=class{constructor(e,t){this._cells=[],this._cellSize=t,this._reverseCellSize=1/t;for(const n of e){const i=this.coordToCellNum(n[0]),a=this.coordToCellNum(n[1]);this._cells[i]||(this._cells[i]=[]),this._cells[i][a]||(this._cells[i][a]=[]),this._cells[i][a].push(n)}}cellPoints(e,t){var n;return((n=this._cells[e])===null||n===void 0?void 0:n[t])||[]}rangePoints(e){const t=this.coordToCellNum(e[0]),n=this.coordToCellNum(e[1]),i=this.coordToCellNum(e[2]),a=this.coordToCellNum(e[3]),s=[];for(let o=t;o<=i;o++)for(let A=n;A<=a;A++){const l=this.cellPoints(o,A);for(const c of l)s.push(c)}return s}removePoint(e){const t=this.coordToCellNum(e[0]),n=this.coordToCellNum(e[1]),i=this._cells[t][n],a=i.findIndex(([s,o])=>s===e[0]&&o===e[1]);return a>-1&&i.splice(a,1),i}trunc(e){return Math.trunc(e)}coordToCellNum(e){return this.trunc(e*this._reverseCellSize)}extendBbox(e,t){return[e[0]-t*this._cellSize,e[1]-t*this._cellSize,e[2]+t*this._cellSize,e[3]+t*this._cellSize]}};function vie(r,e){return new gie(r,e)}const RM=+(Math.pow(2,27)+1);function Nu(r,e,t){const n=r*e,i=RM*r,a=i-r,s=i-a,o=r-s,A=RM*e,l=A-e,c=A-l,u=e-c,f=n-s*c-o*c-s*u,g=o*u-f;return t?(t[0]=g,t[1]=n,t):[g,n]}function pie(r,e,t){const n=r+e,i=n-r,a=n-i,s=e-i,o=r-a;return t?(t[0]=o+s,t[1]=n,t):[o+s,n]}function yie(r,e){const t=r.length;if(t===1){const o=Nu(r[0],e);return o[0]?o:[o[1]]}const n=new Array(2*t),i=[.1,.1],a=[.1,.1];let s=0;Nu(r[0],e,i),i[0]&&(n[s++]=i[0]);for(let o=1;o<t;++o){Nu(r[o],e,a);const A=i[1];pie(A,a[0],i),i[0]&&(n[s++]=i[0]);const l=a[1],c=i[1],u=l+c,h=u-l,d=c-h;i[1]=u,d&&(n[s++]=d)}return i[1]&&(n[s++]=i[1]),s===0&&(n[s++]=0),n.length=s,n}function mie(r,e){const t=r+e,n=t-r,i=t-n,a=e-n,o=r-i+a;return o?[o,t]:[t]}function wie(r,e){const t=r.length|0,n=e.length|0;if(t===1&&n===1)return mie(r[0],-e[0]);const i=t+n,a=new Array(i);let s=0,o=0,A=0;const l=Math.abs;let c=r[o],u=l(c),h=-e[A],d=l(h),f,g;u<d?(g=c,o+=1,o<t&&(c=r[o],u=l(c))):(g=h,A+=1,A<n&&(h=-e[A],d=l(h))),o<t&&u<d||A>=n?(f=c,o+=1,o<t&&(c=r[o],u=l(c))):(f=h,A+=1,A<n&&(h=-e[A],d=l(h)));let v=f+g,p=v-f,y=g-p,m=y,w=v,B,b,E,x,S;for(;o<t&&A<n;)u<d?(f=c,o+=1,o<t&&(c=r[o],u=l(c))):(f=h,A+=1,A<n&&(h=-e[A],d=l(h))),g=m,v=f+g,p=v-f,y=g-p,y&&(a[s++]=y),B=w+v,b=B-w,E=B-b,x=v-b,S=w-E,m=S+x,w=B;for(;o<t;)f=c,g=m,v=f+g,p=v-f,y=g-p,y&&(a[s++]=y),B=w+v,b=B-w,E=B-b,x=v-b,S=w-E,m=S+x,w=B,o+=1,o<t&&(c=r[o]);for(;A<n;)f=h,g=m,v=f+g,p=v-f,y=g-p,y&&(a[s++]=y),B=w+v,b=B-w,E=B-b,x=v-b,S=w-E,m=S+x,w=B,A+=1,A<n&&(h=-e[A]);return m&&(a[s++]=m),w&&(a[s++]=w),s||(a[s++]=0),a.length=s,a}function Bie(r,e){const t=r+e,n=t-r,i=t-n,a=e-n,o=r-i+a;return o?[o,t]:[t]}function bie(r,e){const t=r.length|0,n=e.length|0;if(t===1&&n===1)return Bie(r[0],e[0]);const i=t+n,a=new Array(i);let s=0,o=0,A=0;const l=Math.abs;let c=r[o],u=l(c),h=e[A],d=l(h),f,g;u<d?(g=c,o+=1,o<t&&(c=r[o],u=l(c))):(g=h,A+=1,A<n&&(h=e[A],d=l(h))),o<t&&u<d||A>=n?(f=c,o+=1,o<t&&(c=r[o],u=l(c))):(f=h,A+=1,A<n&&(h=e[A],d=l(h)));let v=f+g,p=v-f,y=g-p,m=y,w=v,B,b,E,x,S;for(;o<t&&A<n;)u<d?(f=c,o+=1,o<t&&(c=r[o],u=l(c))):(f=h,A+=1,A<n&&(h=e[A],d=l(h))),g=m,v=f+g,p=v-f,y=g-p,y&&(a[s++]=y),B=w+v,b=B-w,E=B-b,x=v-b,S=w-E,m=S+x,w=B;for(;o<t;)f=c,g=m,v=f+g,p=v-f,y=g-p,y&&(a[s++]=y),B=w+v,b=B-w,E=B-b,x=v-b,S=w-E,m=S+x,w=B,o+=1,o<t&&(c=r[o]);for(;A<n;)f=h,g=m,v=f+g,p=v-f,y=g-p,y&&(a[s++]=y),B=w+v,b=B-w,E=B-b,x=v-b,S=w-E,m=S+x,w=B,A+=1,A<n&&(h=e[A]);return m&&(a[s++]=m),w&&(a[s++]=w),s||(a[s++]=0),a.length=s,a}const DM=5,kh=11102230246251565e-32,Eie=(3+16*kh)*kh,xie=(7+56*kh)*kh;function Cie(r,e,t,n){return function(a,s,o){const A=r(r(e(s[1],o[0]),e(-o[1],s[0])),r(e(a[1],s[0]),e(-s[1],a[0]))),l=r(e(a[1],o[0]),e(-o[1],a[0])),c=n(A,l);return c[c.length-1]}}function Sie(r,e,t,n){return function(a,s,o,A){const l=r(r(t(r(e(o[1],A[0]),e(-A[1],o[0])),s[2]),r(t(r(e(s[1],A[0]),e(-A[1],s[0])),-o[2]),t(r(e(s[1],o[0]),e(-o[1],s[0])),A[2]))),r(t(r(e(s[1],A[0]),e(-A[1],s[0])),a[2]),r(t(r(e(a[1],A[0]),e(-A[1],a[0])),-s[2]),t(r(e(a[1],s[0]),e(-s[1],a[0])),A[2])))),c=r(r(t(r(e(o[1],A[0]),e(-A[1],o[0])),a[2]),r(t(r(e(a[1],A[0]),e(-A[1],a[0])),-o[2]),t(r(e(a[1],o[0]),e(-o[1],a[0])),A[2]))),r(t(r(e(s[1],o[0]),e(-o[1],s[0])),a[2]),r(t(r(e(a[1],o[0]),e(-o[1],a[0])),-s[2]),t(r(e(a[1],s[0]),e(-s[1],a[0])),o[2])))),u=n(l,c);return u[u.length-1]}}function Fie(r,e,t,n){return function(a,s,o,A,l){const c=r(r(r(t(r(t(r(e(A[1],l[0]),e(-l[1],A[0])),o[2]),r(t(r(e(o[1],l[0]),e(-l[1],o[0])),-A[2]),t(r(e(o[1],A[0]),e(-A[1],o[0])),l[2]))),s[3]),r(t(r(t(r(e(A[1],l[0]),e(-l[1],A[0])),s[2]),r(t(r(e(s[1],l[0]),e(-l[1],s[0])),-A[2]),t(r(e(s[1],A[0]),e(-A[1],s[0])),l[2]))),-o[3]),t(r(t(r(e(o[1],l[0]),e(-l[1],o[0])),s[2]),r(t(r(e(s[1],l[0]),e(-l[1],s[0])),-o[2]),t(r(e(s[1],o[0]),e(-o[1],s[0])),l[2]))),A[3]))),r(t(r(t(r(e(o[1],A[0]),e(-A[1],o[0])),s[2]),r(t(r(e(s[1],A[0]),e(-A[1],s[0])),-o[2]),t(r(e(s[1],o[0]),e(-o[1],s[0])),A[2]))),-l[3]),r(t(r(t(r(e(A[1],l[0]),e(-l[1],A[0])),s[2]),r(t(r(e(s[1],l[0]),e(-l[1],s[0])),-A[2]),t(r(e(s[1],A[0]),e(-A[1],s[0])),l[2]))),a[3]),t(r(t(r(e(A[1],l[0]),e(-l[1],A[0])),a[2]),r(t(r(e(a[1],l[0]),e(-l[1],a[0])),-A[2]),t(r(e(a[1],A[0]),e(-A[1],a[0])),l[2]))),-s[3])))),r(r(t(r(t(r(e(s[1],l[0]),e(-l[1],s[0])),a[2]),r(t(r(e(a[1],l[0]),e(-l[1],a[0])),-s[2]),t(r(e(a[1],s[0]),e(-s[1],a[0])),l[2]))),A[3]),r(t(r(t(r(e(s[1],A[0]),e(-A[1],s[0])),a[2]),r(t(r(e(a[1],A[0]),e(-A[1],a[0])),-s[2]),t(r(e(a[1],s[0]),e(-s[1],a[0])),A[2]))),-l[3]),t(r(t(r(e(o[1],A[0]),e(-A[1],o[0])),s[2]),r(t(r(e(s[1],A[0]),e(-A[1],s[0])),-o[2]),t(r(e(s[1],o[0]),e(-o[1],s[0])),A[2]))),a[3]))),r(t(r(t(r(e(o[1],A[0]),e(-A[1],o[0])),a[2]),r(t(r(e(a[1],A[0]),e(-A[1],a[0])),-o[2]),t(r(e(a[1],o[0]),e(-o[1],a[0])),A[2]))),-s[3]),r(t(r(t(r(e(s[1],A[0]),e(-A[1],s[0])),a[2]),r(t(r(e(a[1],A[0]),e(-A[1],a[0])),-s[2]),t(r(e(a[1],s[0]),e(-s[1],a[0])),A[2]))),o[3]),t(r(t(r(e(s[1],o[0]),e(-o[1],s[0])),a[2]),r(t(r(e(a[1],o[0]),e(-o[1],a[0])),-s[2]),t(r(e(a[1],s[0]),e(-s[1],a[0])),o[2]))),-A[3]))))),u=r(r(r(t(r(t(r(e(A[1],l[0]),e(-l[1],A[0])),o[2]),r(t(r(e(o[1],l[0]),e(-l[1],o[0])),-A[2]),t(r(e(o[1],A[0]),e(-A[1],o[0])),l[2]))),a[3]),t(r(t(r(e(A[1],l[0]),e(-l[1],A[0])),a[2]),r(t(r(e(a[1],l[0]),e(-l[1],a[0])),-A[2]),t(r(e(a[1],A[0]),e(-A[1],a[0])),l[2]))),-o[3])),r(t(r(t(r(e(o[1],l[0]),e(-l[1],o[0])),a[2]),r(t(r(e(a[1],l[0]),e(-l[1],a[0])),-o[2]),t(r(e(a[1],o[0]),e(-o[1],a[0])),l[2]))),A[3]),t(r(t(r(e(o[1],A[0]),e(-A[1],o[0])),a[2]),r(t(r(e(a[1],A[0]),e(-A[1],a[0])),-o[2]),t(r(e(a[1],o[0]),e(-o[1],a[0])),A[2]))),-l[3]))),r(r(t(r(t(r(e(o[1],l[0]),e(-l[1],o[0])),s[2]),r(t(r(e(s[1],l[0]),e(-l[1],s[0])),-o[2]),t(r(e(s[1],o[0]),e(-o[1],s[0])),l[2]))),a[3]),t(r(t(r(e(o[1],l[0]),e(-l[1],o[0])),a[2]),r(t(r(e(a[1],l[0]),e(-l[1],a[0])),-o[2]),t(r(e(a[1],o[0]),e(-o[1],a[0])),l[2]))),-s[3])),r(t(r(t(r(e(s[1],l[0]),e(-l[1],s[0])),a[2]),r(t(r(e(a[1],l[0]),e(-l[1],a[0])),-s[2]),t(r(e(a[1],s[0]),e(-s[1],a[0])),l[2]))),o[3]),t(r(t(r(e(s[1],o[0]),e(-o[1],s[0])),a[2]),r(t(r(e(a[1],o[0]),e(-o[1],a[0])),-s[2]),t(r(e(a[1],s[0]),e(-s[1],a[0])),o[2]))),-l[3])))),h=n(c,u);return h[h.length-1]}}function uf(r){return(r===3?Cie:r===4?Sie:Fie)(bie,Nu,yie,wie)}const Tie=uf(3),Mie=uf(4),ss=[function(){return 0},function(){return 0},function(e,t){return t[0]-e[0]},function(e,t,n){const i=(e[1]-n[1])*(t[0]-n[0]),a=(e[0]-n[0])*(t[1]-n[1]),s=i-a;let o;if(i>0){if(a<=0)return s;o=i+a}else if(i<0){if(a>=0)return s;o=-(i+a)}else return s;const A=Eie*o;return s>=A||s<=-A?s:Tie(e,t,n)},function(e,t,n,i){const a=e[0]-i[0],s=t[0]-i[0],o=n[0]-i[0],A=e[1]-i[1],l=t[1]-i[1],c=n[1]-i[1],u=e[2]-i[2],h=t[2]-i[2],d=n[2]-i[2],f=s*c,g=o*l,v=o*A,p=a*c,y=a*l,m=s*A,w=u*(f-g)+h*(v-p)+d*(y-m),B=(Math.abs(f)+Math.abs(g))*Math.abs(u)+(Math.abs(v)+Math.abs(p))*Math.abs(h)+(Math.abs(y)+Math.abs(m))*Math.abs(d),b=xie*B;return w>b||-w>b?w:Mie(e,t,n,i)}];function Oie(r){let e=ss[r.length];return e||(e=ss[r.length]=uf(r.length)),e.apply(void 0,...r)}function Iie(r,e,t,n,i,a,s){return function(...A){switch(A.length){case 0:case 1:return 0;case 2:return n(A[0],A[1]);case 3:return i(A[0],A[1],A[2]);case 4:return a(A[0],A[1],A[2],A[3]);case 5:return s(A[0],A[1],A[2],A[3],A[4])}return r(A)}}function _ie(){for(;ss.length<=DM;)ss.push(uf(ss.length));const r=Iie(void 0,Oie,...ss);for(let e=0;e<=DM;++e)r[e]=ss[e];return r}const QA=_ie(),HM=QA[3];function kie(r){const e=r.length;if(e<3){const o=new Array(e);for(let A=0;A<e;++A)o[A]=A;return e===2&&r[0][0]===r[1][0]&&r[0][1]===r[1][1]?[0]:o}const t=new Array(e);for(let o=0;o<e;++o)t[o]=o;t.sort((o,A)=>{const l=r[o][0]-r[A][0];return l||r[o][1]-r[A][1]});const n=[t[0],t[1]],i=[t[0],t[1]];for(let o=2;o<e;++o){const A=t[o],l=r[A];let c=n.length;for(;c>1&&HM(r[n[c-2]],r[n[c-1]],l)<=0;)c-=1,n.pop();for(n.push(A),c=i.length;c>1&&HM(r[i[c-2]],r[i[c-1]],l)>=0;)c-=1,i.pop();i.push(A)}const a=new Array(i.length+n.length-2);let s=0;for(let o=0,A=n.length;o<A;++o)a[s++]=n[o];for(let o=i.length-2;o>0;--o)a[s++]=i[o];return a}function Lie(r,e,t,n){for(let i=0;i<2;++i){const a=r[i],s=e[i],[o,A]=[Math.min(a,s),Math.max(a,s)],l=t[i],c=n[i],[u,h]=[Math.min(l,c),Math.max(l,c)];if(h<o||A<u)return!1}return!0}function Qie(r,e,t,n){const i=QA(r,t,n),a=QA(e,t,n);if(i>0&&a>0||i<0&&a<0)return!1;const s=QA(t,r,e),o=QA(n,r,e);return s>0&&o>0||s<0&&o<0?!1:i===0&&a===0&&s===0&&o===0?Lie(r,e,t,n):!0}function Nie(r){const e=[r[0]];let t=r[0];for(let n=1;n<r.length;n++){const i=r[n];(t[0]!==i[0]||t[1]!==i[1])&&e.push(i),t=i}return e}function Uie(r){return r.sort(function(e,t){return e[0]-t[0]||e[1]-t[1]})}function dw(r,e){return Math.pow(e[0]-r[0],2)+Math.pow(e[1]-r[1],2)}function GM(r,e,t){const n=[e[0]-r[0],e[1]-r[1]],i=[t[0]-r[0],t[1]-r[1]],a=dw(r,e),s=dw(r,t);return(n[0]*i[0]+n[1]*i[1])/Math.sqrt(a*s)}function KM(r,e){for(let t=0;t<e.length-1;t++){const n=[e[t],e[t+1]];if(!(r[0][0]===n[0][0]&&r[0][1]===n[0][1]||r[0][0]===n[1][0]&&r[0][1]===n[1][1])&&Qie(r[0],r[1],n[0],n[1]))return!0}return!1}function Pie(r){let e=1/0,t=1/0,n=-1/0,i=-1/0;for(let a=r.length-1;a>=0;a--)r[a][0]<e&&(e=r[a][0]),r[a][1]<t&&(t=r[a][1]),r[a][0]>n&&(n=r[a][0]),r[a][1]>i&&(i=r[a][1]);return[n-e,i-t]}function Rie(r){return[Math.min(r[0][0],r[1][0]),Math.min(r[0][1],r[1][1]),Math.max(r[0][0],r[1][0]),Math.max(r[0][1],r[1][1])]}function Die(r,e,t){let n=null,i=zM,a=zM,s,o;for(let A=0;A<e.length;A++)s=GM(r[0],r[1],e[A]),o=GM(r[1],r[0],e[A]),s>i&&o>a&&!KM([r[0],e[A]],t)&&!KM([r[1],e[A]],t)&&(i=s,a=o,n=e[A]);return n}function qN(r,e,t,n,i){let a=!1;for(let s=0;s<r.length-1;s++){const o=[r[s],r[s+1]],A=o[0][0]+","+o[0][1]+","+o[1][0]+","+o[1][1];if(dw(o[0],o[1])<e||i.has(A))continue;let l=0,c=Rie(o),u,h,d;do c=n.extendBbox(c,l),u=c[2]-c[0],h=c[3]-c[1],d=Die(o,n.rangePoints(c),r),l++;while(d===null&&(t[0]>u||t[1]>h));u>=t[0]&&h>=t[1]&&i.add(A),d!==null&&(r.splice(s+1,0,d),n.removePoint(d),a=!0)}return a?qN(r,e,t,n,i):r}function Hie(r,e,t){const n=e||20,i=Nie(Uie(Nm.toXy(r,t)));if(i.length<4){const u=i.concat([i[0]]);return t?Nm.fromXy(u,t):u}const a=Pie(i),s=[a[0]*VM,a[1]*VM],o=kie(i).reverse().map(u=>i[u]);o.push(o[0]);const A=i.filter(function(u){return o.indexOf(u)<0}),l=Math.ceil(1/(i.length/(a[0]*a[1]))),c=qN(o,Math.pow(n,2),s,vie(A,l),new Set);return t?Nm.fromXy(c,t):c}const zM=Math.cos(90/(180/Math.PI)),VM=.6;function Gie(r,e,t){if(r.length===1)return Kie(r[0],e,t);if(r.length===2)return jM(r,e,t);if(r.length===3){const[n,i,a]=AB(r);if(jk(n,i,a))return jM([n,a],e,t)}switch(t){case"smooth":return Vie(r,e);case"sharp":return jie(r,e);case"rounded":default:return zie(r,e)}}const Kie=(r,e,t)=>{if(t==="sharp")return[["M",r[0]-e,r[1]-e],["L",r[0]+e,r[1]-e],["L",r[0]+e,r[1]+e],["L",r[0]-e,r[1]+e],["Z"]];const n=[e,e,0,0,0];return[["M",r[0],r[1]-e],["A",...n,r[0],r[1]+e],["A",...n,r[0],r[1]-e]]},jM=(r,e,t)=>{const n=[e,e,0,0,0],i=t==="sharp"?ve(r[0],ma(zi($e(r[0],r[1])),e)):r[0],a=t==="sharp"?ve(r[1],ma(zi($e(r[1],r[0])),e)):r[1],s=ma(zi(nd($e(i,a),!1)),e),o=ma(s,-1),A=ve(i,s),l=ve(a,s),c=ve(a,o),u=ve(i,o);return t==="sharp"?[["M",A[0],A[1]],["L",l[0],l[1]],["L",c[0],c[1]],["L",u[0],u[1]],["Z"]]:[["M",A[0],A[1]],["L",l[0],l[1]],["A",...n,c[0],c[1]],["L",u[0],u[1]],["A",...n,A[0],A[1]]]},zie=(r,e)=>{const t=AB(r).map((o,A)=>{const l=(A-2+r.length)%r.length,c=(A-1+r.length)%r.length,u=(A+1)%r.length,h=r[l],d=r[c],f=r[u],g=$e(h,d),v=$e(d,o),p=$e(o,f),y=(E,x)=>sB(E,x,!0)<Math.PI,m=y(g,v),w=y(v,p),B=E=>ma(zi(nd(E,!1)),e),b=B(v);return[{p:Ms(m?ve(d,B(g)):ve(d,b)),concave:m&&d},{p:Ms(w?ve(o,B(p)):ve(o,b)),concave:w&&o}]}),n=[e,e,0,0,0],i=t.findIndex((o,A)=>!t[(A-1+t.length)%t.length][0].concave&&!t[(A-1+t.length)%t.length][1].concave&&!o[0].concave&&!o[0].concave&&!o[1].concave),a=t.slice(i).concat(t.slice(0,i));let s=[];return a.flatMap((o,A)=>{const l=[],c=a[t.length-1];return A===0&&l.push(["M",...c[1].p]),o[0].concave?s.push(o[0].p,o[1].p):l.push(["A",...n,...o[0].p]),o[1].concave?s.unshift(o[1].p):l.push(["L",...o[1].p]),s.length===3&&(l.pop(),l.push(["C",...s.flat()]),s=[]),l})},Vie=(r,e)=>{const t=AB(r).map((n,i)=>{const a=r[(i+1)%r.length];return{p:n,v:zi($e(a,n))}});return t.forEach((n,i)=>{const a=i>0?i-1:r.length-1,s=t[a].v,o=zi(ve(s,ma(n.v,sB(s,n.v,!0)<Math.PI?1:-1)));n.p=ve(n.p,ma(o,e))}),tL(t.map(n=>n.p))},jie=(r,e)=>{const n=r.map((a,s)=>{const o=r[s===0?r.length-1:s-1],A=Al(ma(zi(nd($e(o,a),!1)),e));return[ve(o,A),ve(a,A)]}).flat();return n.map((a,s)=>{if(s%2===0)return null;const o=[n[(s-1)%n.length],n[s%n.length]],A=[n[(s+1)%n.length],n[(s+2)%n.length]];return oB(o,A,!0)}).filter(Boolean).map((a,s)=>[s===0?"M":"L",a[0],a[1]]).concat([["Z"]])};var $ie=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class hf extends en{constructor(e,t){super(e,Object.assign({},hf.defaultOptions,t)),this.hullMemberIds=[],this.drawHull=()=>{if(!this.shape)this.shape=new _l({style:this.getHullStyle()}),this.context.canvas.appendChild(this.shape);else{const n=!pt(this.optionsCache,this.options);this.shape.update(this.getHullStyle(n))}this.optionsCache=Object.assign({},this.options)},this.updateHullPath=n=>{this.shape&&this.options.members.includes(N(n.data))&&this.shape.update({d:this.getHullPath(!0)})},this.getHullPath=(n=!1)=>{const{graph:i}=this.context,a=this.getMember();if(a.length===0)return"";const s=a.map(l=>i.getNodeData(l)),o=Hie(s.map(Vt),this.options.concavity).slice(1).reverse(),A=o.flatMap(l=>s.filter(c=>pt(Vt(c),l)).map(N));return pt(A,this.hullMemberIds)&&!n?this.path:(this.hullMemberIds=A,this.path=Gie(o,this.getPadding(),this.options.corner),this.path)},this.bindEvents()}bindEvents(){this.context.graph.on(V.AFTER_RENDER,this.drawHull),this.context.graph.on(V.AFTER_ELEMENT_UPDATE,this.updateHullPath)}unbindEvents(){this.context.graph.off(V.AFTER_RENDER,this.drawHull),this.context.graph.off(V.AFTER_ELEMENT_UPDATE,this.updateHullPath)}getHullStyle(e){const t=this.options,{members:n,padding:i,corner:a}=t,s=$ie(t,["members","padding","corner"]);return Object.assign(Object.assign({},s),{d:this.getHullPath(e)})}getPadding(){const{graph:e}=this.context;return this.hullMemberIds.reduce((n,i)=>{const{halfExtents:a}=e.getElementRenderBounds(i),s=Math.max(a[0],a[1]);return Math.max(n,s)},0)+this.options.padding}addMember(e){const t=Array.isArray(e)?e:[e];this.options.members=[...new Set([...this.options.members,...t])],this.shape.update({d:this.getHullPath()})}removeMember(e){const t=Array.isArray(e)?e:[e];this.options.members=this.options.members.filter(n=>!t.includes(n)),t.some(n=>this.hullMemberIds.includes(n))&&this.shape.update({d:this.getHullPath()})}updateMember(e){this.options.members=ie(e)?e(this.options.members):e,this.shape.update(this.getHullStyle(!0))}getMember(){return this.options.members}destroy(){this.unbindEvents(),this.shape.destroy(),this.hullMemberIds=[],super.destroy()}}hf.defaultOptions={members:[],padding:10,corner:"rounded",concavity:1/0,fill:"lightblue",fillOpacity:.2,labelOpacity:1,stroke:"blue",strokeOpacity:.2};function YN(r,e){e(r),r.children&&r.children.forEach(function(t){t&&YN(t,e)})}function Kl(r){df(r,!0)}function Gr(r){df(r,!1)}function df(r,e){var t=e?"visible":"hidden";YN(r,function(n){n.attr("visibility",t)})}var Wie=function(r){be(e,r);function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=r.apply(this,oe([],I(t),!1))||this;return i.isMutationObserved=!0,i.addEventListener(Me.INSERTED,function(){Gr(i)}),i}return e}($t);function XN(r){var e=r.appendChild(new Wie({class:"offscreen"}));return Gr(e),e}function qie(r){for(var e=r;e;){if(e.className==="offscreen")return!0;e=e.parent}return!1}var qB=function(r){be(e,r);function e(t){t===void 0&&(t={});var n=t.style,i=lt(t,["style"]);return r.call(this,H({style:H({text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle"},n)},i))||this}return Object.defineProperty(e.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=XN(this)),this._offscreen},enumerable:!1,configurable:!0}),e.prototype.disconnectedCallback=function(){var t;(t=this._offscreen)===null||t===void 0||t.destroy()},e}(Qs);function Po(r){return r*Math.PI/180}function ZN(r){return Number((r*180/Math.PI).toPrecision(5))}var Mn=function(){function r(e,t,n,i){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=e,this.y=t,this.width=n,this.height=i}return Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),r.fromRect=function(e){return new r(e.x,e.y,e.width,e.height)},r.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left}},r.prototype.isPointIn=function(e,t){return e>=this.left&&e<=this.right&&t>=this.top&&t<=this.bottom},r}();function $n(r,e){return ie(r)?r.apply(void 0,oe([],I(e),!1)):r}var Xr=function(r,e){var t=function(i){return"".concat(e,"-").concat(i)},n=Object.fromEntries(Object.entries(r).map(function(i){var a=I(i,2),s=a[0],o=a[1],A=t(o);return[s,{name:A,class:".".concat(A),id:"#".concat(A),toString:function(){return A}}]}));return Object.assign(n,{prefix:t}),n},Yie=5,JN=function(r,e,t,n){t===void 0&&(t=0),n===void 0&&(n=Yie),Object.entries(e).forEach(function(i){var a=I(i,2),s=a[0],o=a[1],A=r;Object.prototype.hasOwnProperty.call(e,s)&&(o?_o(o)?(_o(r[s])||(A[s]={}),t<n?JN(r[s],o,t+1,n):A[s]=e[s]):Wn(o)?(A[s]=[],A[s]=A[s].concat(o)):A[s]=o:A[s]=o)})},Rt=function(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var n=0;n<e.length;n+=1)JN(r,e[n]);return r},Xie=function(r){return r!==void 0&&r!=null&&!Number.isNaN(r)},pu,Zie=e1(function(r,e){var t=e.fontSize,n=e.fontFamily,i=e.fontWeight,a=e.fontStyle,s=e.fontVariant;return pu||(pu=z.offscreenCanvasCreator.getOrCreateContext(void 0)),pu.font=[a,s,i,"".concat(t,"px"),n].join(" "),pu.measureText(r).width},function(r,e){return[r,Object.values(e||eU(r)).join()].join("")},4096),eU=function(r){var e=r.style.fontFamily||"sans-serif",t=r.style.fontWeight||"normal",n=r.style.fontStyle||"normal",i=r.style.fontVariant,a=r.style.fontSize;return a=typeof a=="object"?a.value:a,{fontSize:a,fontFamily:e,fontWeight:t,fontStyle:n,fontVariant:i}};function tU(r){return r.nodeName==="text"?r:r.nodeName==="g"&&r.children.length===1&&r.children[0].nodeName==="text"?r.children[0]:null}function nU(r,e){var t=tU(r);t&&t.attr(e)}function fw(r,e,t){t===void 0&&(t="..."),nU(r,{wordWrap:!0,wordWrapWidth:e,maxLines:1,textOverflow:t})}function Jie(r,e,t,n){t===void 0&&(t=2),n===void 0&&(n="top"),nU(r,{wordWrap:!0,wordWrapWidth:e,maxLines:t,textBaseline:n})}function $M(r){var e=r.nativeEvent,t=r.touches,n=r.clientX,i=r.clientY;if(e)return[e.clientX,e.clientY];if(t){var a=t[0],s=a.clientX,o=a.clientY;return[s,o]}return typeof n=="number"&&typeof i=="number"?[n,i]:[0,0]}function Wi(r){return typeof r=="function"?r():_e(r)||Z(r)?new qB({style:{text:String(r)}}):r}function eae(r,e){return typeof r=="function"?r():_e(r)||Z(r)?new ks({style:H(H({pointerEvents:"auto"},e),{innerHTML:r})}):r}function tae(r,e){return r.reduce(function(t,n){return(t[n[e]]=t[n[e]]||[]).push(n),t},{})}function Vn(r,e,t,n,i){return n===void 0&&(n=!0),i===void 0&&(i=function(a){a.node().removeChildren()}),r?t(e):(n&&i(e),null)}function tn(r,e,t,n,i){return n===void 0&&(n=!0),i===void 0&&(i=!1),n&&r===e||i&&r===t?!0:r>e&&r<t}var nae=function(r,e){return function(t){return r*(1-t)+e*t}};function rae(r,e){var t=e?e.length:0,n=r?Math.min(t,r.length):0;return function(i){var a=new Array(n),s=new Array(t),o=0;for(o=0;o<n;++o)a[o]=YB(r[o],e[o]);for(;o<t;++o)s[o]=e[o];for(o=0;o<n;++o)s[o]=a[o](i);return s}}function iae(r,e){r===void 0&&(r={}),e===void 0&&(e={});var t={},n={};return Object.entries(e).forEach(function(i){var a=I(i,2),s=a[0],o=a[1];s in r?t[s]=YB(r[s],o):n[s]=o}),function(i){return Object.entries(t).forEach(function(a){var s=I(a,2),o=s[0],A=s[1];return n[o]=A(i)}),n}}function YB(r,e){return typeof r=="number"&&typeof e=="number"?nae(r,e):Array.isArray(r)&&Array.isArray(e)?rae(r,e):typeof r=="object"&&typeof e=="object"?iae(r,e):function(t){return r}}function aae(r,e,t,n){if(!n)return r.attr("__keyframe_data__",t),null;var i=n.duration,a=i===void 0?0:i,s=YB(e,t),o=Math.ceil(+a/16),A=new Array(o).fill(0).map(function(l,c,u){return{__keyframe_data__:s(c/(u.length-1))}});return r.animate(A,H({fill:"both"},n))}function Pi(r,e){return[r[0]*e,r[1]*e]}function NA(r,e){return[r[0]+e[0],r[1]+e[1]]}function Um(r,e){return[r[0]-e[0],r[1]-e[1]]}function Za(r,e){return[Math.min(r[0],e[0]),Math.min(r[1],e[1])]}function Ja(r,e){return[Math.max(r[0],e[0]),Math.max(r[1],e[1])]}function vl(r,e){return Math.sqrt(Math.pow(r[0]-e[0],2)+Math.pow(r[1]-e[1],2))}function rU(r){if(r[0]===0&&r[1]===0)return[0,0];var e=Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2));return[r[0]/e,r[1]/e]}function sae(r,e){return e?[r[1],-r[0]]:[-r[1],r[0]]}function WM(r,e){return+r.toPrecision(e)}function gw(r,e){var t={},n=Array.isArray(e)?e:[e];for(var i in r)n.includes(i)||(t[i]=r[i]);return t}function oae(r,e,t,n){var i,a=[],s=!!n,o,A,l=[1/0,1/0],c=[-1/0,-1/0],u,h,d;if(s){i=I(n,2),l=i[0],c=i[1];for(var f=0,g=r.length;f<g;f+=1){var v=r[f];l=Za(l,v),c=Ja(c,v)}}for(var f=0,p=r.length;f<p;f+=1){var v=r[f];if(f===0)d=v;else if(f===p-1)h=v,a.push(d),a.push(h);else{var y=[f?f-1:p-1,f-1][1];o=r[y],A=r[f+1];var m=[0,0];m=Um(A,o),m=Pi(m,e);var w=vl(v,o),B=vl(v,A),b=w+B;b!==0&&(w/=b,B/=b);var E=Pi(m,-w),x=Pi(m,B);h=NA(v,E),u=NA(v,x),u=Za(u,Ja(A,v)),u=Ja(u,Za(A,v)),E=Um(u,v),E=Pi(E,-w/B),h=NA(v,E),h=Za(h,Ja(o,v)),h=Ja(h,Za(o,v)),x=Um(v,h),x=Pi(x,B/w),u=NA(v,x),s&&(h=Ja(h,l),h=Za(h,c),u=Ja(u,l),u=Za(u,c)),a.push(d),a.push(h),d=u}}return a}function Aae(r,e,t){t===void 0&&(t=[[0,0],[1,1]]);for(var n=!1,i=[],a=0,s=r.length;a<s;a+=2)i.push([r[a],r[a+1]]);for(var o=oae(i,.4,n,t),A=i.length,l=[],c,u,h,a=0;a<A-1;a+=1)c=o[a*2],u=o[a*2+1],h=i[a+1],l.push(["C",c[0],c[1],u[0],u[1],h[0],h[1]]);return l}var lae=["$el","cx","cy","d","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function cae(r){return lae.includes(r)}function qM(r){var e={};for(var t in r)cae(t)&&(e[t]=r[t]);return e}function uae(r,e){if(r.length<=e)return r;for(var t=Math.floor(r.length/e),n=[],i=0;i<r.length;i+=t)n.push(r[i]);return n}function XB(r,e,t){var n=r.getBBox(),i=n.width,a=n.height,s=e/Math.max(i,a);return r.style.transform="scale(".concat(s,")"),s}function hae(r,e){var t=new Map;return r.forEach(function(n){var i=e(n);t.has(i)||t.set(i,[]),t.get(i).push(n)}),t}function dae(r){throw new Error(r)}var fae=function(){function r(i,a,s,o,A,l,c){i===void 0&&(i=null),a===void 0&&(a=null),s===void 0&&(s=null),o===void 0&&(o=null),A===void 0&&(A=[null,null,null,null,null]),l===void 0&&(l=[]),c===void 0&&(c=[]),e.add(this),this._elements=Array.from(i),this._data=a,this._parent=s,this._document=o,this._enter=A[0],this._update=A[1],this._exit=A[2],this._merge=A[3],this._split=A[4],this._transitions=l,this._facetElements=c}r.prototype.selectAll=function(i){var a=typeof i=="string"?this._parent.querySelectorAll(i):i;return new t(a,null,this._elements[0],this._document)},r.prototype.selectFacetAll=function(i){var a=typeof i=="string"?this._parent.querySelectorAll(i):i;return new t(this._elements,null,this._parent,this._document,void 0,void 0,a)},r.prototype.select=function(i){var a=typeof i=="string"?this._parent.querySelectorAll(i)[0]||null:i;return new t([a],null,a,this._document)},r.prototype.append=function(i){var a=this,s=typeof i=="function"?i:function(){return a.createElement(i)},o=[];if(this._data!==null){for(var A=0;A<this._data.length;A++){var l=this._data[A],c=I(Array.isArray(l)?l:[l,null],2),u=c[0],h=c[1],d=s(u,A);d.__data__=u,h!==null&&(d.__fromElements__=h),this._parent.appendChild(d),o.push(d)}return new t(o,null,this._parent,this._document)}for(var A=0;A<this._elements.length;A++){var f=this._elements[A],u=f.__data__,d=s(u,A);f.appendChild(d),o.push(d)}return new t(o,null,o[0],this._document)},r.prototype.maybeAppend=function(i,a){var s=Df(this,e,"m",n).call(this,i[0]==="#"?i:"#".concat(i),a);return s.attr("id",i),s},r.prototype.maybeAppendByClassName=function(i,a){var s=i.toString(),o=Df(this,e,"m",n).call(this,s[0]==="."?s:".".concat(s),a);return o.attr("className",s),o},r.prototype.maybeAppendByName=function(i,a){var s=Df(this,e,"m",n).call(this,'[name="'.concat(i,'"]'),a);return s.attr("name",i),s},r.prototype.data=function(i,a,s){var o,A;a===void 0&&(a=function(C){return C}),s===void 0&&(s=function(){return null});for(var l=[],c=[],u=new Set(this._elements),h=[],d=new Set,f=new Map(this._elements.map(function(C,F){return[a(C.__data__,F),C]})),g=new Map(this._facetElements.map(function(C,F){return[a(C.__data__,F),C]})),v=hae(this._elements,function(C){return s(C.__data__)}),p=0;p<i.length;p++){var y=i[p],m=a(y,p),w=s(y,p);if(f.has(m)){var B=f.get(m);B.__data__=y,B.__facet__=!1,c.push(B),u.delete(B),f.delete(m)}else if(g.has(m)){var B=g.get(m);B.__data__=y,B.__facet__=!0,c.push(B),g.delete(m)}else if(v.has(m)){var b=v.get(m);h.push([y,b]);try{for(var E=(o=void 0,Bl(b)),x=E.next();!x.done;x=E.next()){var B=x.value;u.delete(B)}}catch(C){o={error:C}}finally{try{x&&!x.done&&(A=E.return)&&A.call(E)}finally{if(o)throw o.error}}v.delete(m)}else if(f.has(w)){var B=f.get(w);B.__toData__?B.__toData__.push(y):B.__toData__=[y],d.add(B),u.delete(B)}else l.push(y)}var S=[new t([],l,this._parent,this._document),new t(c,null,this._parent,this._document),new t(u,null,this._parent,this._document),new t([],h,this._parent,this._document),new t(d,null,this._parent,this._document)];return new t(this._elements,null,this._parent,this._document,S)},r.prototype.merge=function(i){var a=oe(oe([],I(this._elements),!1),I(i._elements),!1),s=oe(oe([],I(this._transitions),!1),I(i._transitions),!1);return new t(a,null,this._parent,this._document,void 0,s)},r.prototype.createElement=function(i){if(this._document)return this._document.createElement(i,{});var a=t.registry[i];return a?new a:dae("Unknown node type: ".concat(i))},r.prototype.join=function(i,a,s,o,A){i===void 0&&(i=function(f){return f}),a===void 0&&(a=function(f){return f}),s===void 0&&(s=function(f){return f.remove()}),o===void 0&&(o=function(f){return f}),A===void 0&&(A=function(f){return f.remove()});var l=i(this._enter),c=a(this._update),u=s(this._exit),h=o(this._merge),d=A(this._split);return c.merge(l).merge(u).merge(h).merge(d)},r.prototype.remove=function(){for(var i=function(o){var A=a._elements[o],l=a._transitions[o];l?l.then(function(){return A.remove()}):A.remove()},a=this,s=0;s<this._elements.length;s++)i(s);return new t([],null,this._parent,this._document,void 0,this._transitions)},r.prototype.each=function(i){for(var a=0;a<this._elements.length;a++){var s=this._elements[a],o=s.__data__;i.call(s,o,a)}return this},r.prototype.attr=function(i,a){var s=typeof a!="function"?function(){return a}:a;return this.each(function(o,A){a!==void 0&&(this[i]=s.call(this,o,A))})},r.prototype.style=function(i,a,s){s===void 0&&(s=!0);var o=typeof a!="function"||!s?function(){return a}:a;return this.each(function(A,l){a!==void 0&&(this.style[i]=o.call(this,A,l))})},r.prototype.styles=function(i,a){return i===void 0&&(i={}),a===void 0&&(a=!0),this.each(function(s,o){var A=this;Object.entries(i).forEach(function(l){var c=I(l,2),u=c[0],h=c[1],d=typeof h!="function"||!a?function(){return h}:h;h!==void 0&&A.attr(u,d.call(A,s,o))})})},r.prototype.update=function(i,a){a===void 0&&(a=!0);var s=typeof i!="function"||!a?function(){return i}:i;return this.each(function(o,A){i&&this.update&&this.update(s.call(this,o,A))})},r.prototype.maybeUpdate=function(i,a){a===void 0&&(a=!0);var s=typeof i!="function"||!a?function(){return i}:i;return this.each(function(o,A){i&&this.update&&this.update(s.call(this,o,A))})},r.prototype.transition=function(i){this._transitions;var a=new Array(this._elements.length);return this.each(function(s,o){a[o]=i.call(this,s,o)}),this._transitions=VP(a),this},r.prototype.on=function(i,a){return this.each(function(){this.addEventListener(i,a)}),this},r.prototype.call=function(i){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];return i.call.apply(i,oe([this._parent,this],I(a),!1)),this},r.prototype.node=function(){return this._elements[0]},r.prototype.nodes=function(){return this._elements},r.prototype.transitions=function(){return this._transitions.filter(function(i){return!!i})},r.prototype.parent=function(){return this._parent};var e,t,n;return t=r,e=new WeakSet,n=function(a,s){var o=this._elements[0],A=o.querySelector(a);if(A)return new t([A],null,this._parent,this._document);var l=typeof s=="string"?this.createElement(s):s();return o.appendChild(l),new t([l],null,this._parent,this._document)},r.registry={g:$t,rect:An,circle:yi,path:wn,text:qB,ellipse:Cl,image:Sl,line:Ss,polygon:Ls,polyline:Gh,html:ks},r}();function ae(r){return new fae([r],null,r,r.ownerDocument)}function gae(r,e,t){return r.querySelector(e)?ae(r).select(e):ae(r).append(t)}function ln(r){if(Z(r))return[r,r,r,r];if(Wn(r)){var e=r.length;if(e===1)return[r[0],r[0],r[0],r[0]];if(e===2)return[r[0],r[1],r[0],r[1]];if(e===3)return[r[0],r[1],r[2],r[1]];if(e===4)return r}return[0,0,0,0]}function YM(r){var e=r.getLocalBounds(),t=e.min,n=e.max,i=I([t,n],2),a=I(i[0],2),s=a[0],o=a[1],A=I(i[1],2),l=A[0],c=A[1];return{x:s,y:o,width:l-s,height:c-o,left:s,bottom:c,top:o,right:l}}function vae(r,e){var t=I(r,2),n=t[0],i=t[1],a=I(e,2),s=a[0],o=a[1];return n!==s&&i===o}function pae(r,e){var t,n,i=e.attributes;try{for(var a=Bl(Object.entries(i)),s=a.next();!s.done;s=a.next()){var o=I(s.value,2),A=o[0],l=o[1];A!=="id"&&A!=="className"&&r.attr(A,l)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}}function ZB(r){return r.toString().charAt(0).toUpperCase()+r.toString().slice(1)}function yae(r){return r.toString().charAt(0).toLowerCase()+r.toString().slice(1)}function mae(r,e){return"".concat(e).concat(ZB(r))}function XM(r,e,t){var n;t===void 0&&(t=!0);var i=e||((n=r.match(/^([a-z][a-z0-9]+)/))===null||n===void 0?void 0:n[0])||"",a=r.replace(new RegExp("^(".concat(i,")")),"");return t?yae(a):a}function wae(r,e){Object.entries(e).forEach(function(t){var n=I(t,2),i=n[0],a=n[1];oe([r],I(r.querySelectorAll(i)),!1).filter(function(s){return s.matches(i)}).forEach(function(s){if(s){var o=s;o.style.cssText+=Object.entries(a).reduce(function(A,l){return"".concat(A).concat(l.join(":"),";")},"")}})})}var yu=function(r,e){if(!(r!=null&&r.startsWith(e)))return!1;var t=r[e.length];return t>="A"&&t<="Z"};function ge(r,e,t){t===void 0&&(t=!1);var n={};return Object.entries(r).forEach(function(i){var a=I(i,2),s=a[0],o=a[1];if(!(s==="className"||s==="class")){if(yu(s,"show")&&yu(XM(s,"show"),e)!==t)s===mae(e,"show")?n[s]=o:n[s.replace(new RegExp(ZB(e)),"")]=o;else if(!yu(s,"show")&&yu(s,e)!==t){var A=XM(s,e);A==="filter"&&typeof o=="function"||(n[A]=o)}}}),n}function vo(r,e){return Object.entries(r).reduce(function(t,n){var i=I(n,2),a=i[0],s=i[1];return a.startsWith("show")?t["show".concat(e).concat(a.slice(4))]=s:t["".concat(e).concat(ZB(a))]=s,t},{})}function qi(r,e){e===void 0&&(e=["x","y","class","className"]);var t=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],n={},i={};return Object.entries(r).forEach(function(a){var s=I(a,2),o=s[0],A=s[1];e.includes(o)||(t.indexOf(o)!==-1?i[o]=A:n[o]=A)}),[n,i]}function Nn(r,e){var t={YYYY:r.getFullYear(),MM:r.getMonth()+1,DD:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds()},n=e;return Object.keys(t).forEach(function(i){var a=t[i];n=n.replace(i,i==="YYYY"?"".concat(a):"".concat(a).padStart(2,"0"))}),n}function Bae(r,e,t){var n=r.getBBox(),i=n.width,a=n.height,s=I([e,t].map(function(l,c){var u;return l.includes("%")?parseFloat(((u=l.match(/[+-]?([0-9]*[.])?[0-9]+/))===null||u===void 0?void 0:u[0])||"0")/100*(c===0?i:a):l}),2),o=s[0],A=s[1];return[o,A]}function iU(r,e){if(e)try{var t=/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,n=e.replace(t,function(i,a,s){return"translate(".concat(Bae(r,a,s),")")});r.attr("transform",n)}catch{}}function bae(r){var e;return((e=r[0])===null||e===void 0?void 0:e.map(function(t,n){return r.map(function(i){return i[n]})}))||[]}var ZM=function(r,e){if(e==null){r.innerHTML="";return}r.replaceChildren?Array.isArray(e)?r.replaceChildren.apply(r,oe([],I(e),!1)):r.replaceChildren(e):(r.innerHTML="",Array.isArray(e)?e.forEach(function(t){return r.appendChild(t)}):r.appendChild(e))};function ff(r){return/\S+-\S+/g.test(r)?r.split("-").map(function(e){return e[0]}):r.length>2?[r[0]]:r.split("")}var Eae=function(r){var e=new DOMParser,t=e.parseFromString(r,"text/html"),n=t.body.firstElementChild;if(console.log(n==null?void 0:n.getClientRects(),11),!n)return 0;var i=n.getAttribute("style")||"",a=Object.fromEntries(i.split(";").map(function(v){return v.trim()}).filter(function(v){return v.includes(":")}).map(function(v){var p=I(v.split(":").map(function(w){return w.trim()}),2),y=p[0],m=p[1];return[y.toLowerCase(),m]})),s=function(v){if(!v)return 0;var p=v.match(/([\d.]+)px/);return p?parseFloat(p[1]):0};if(a.height)return s(a.height);var o=s(a["font-size"])||16,A=a["line-height"],l;!A||A==="normal"?l=1.2*o:A.endsWith("px")?l=s(A):/^[\d.]+$/.test(A)?l=parseFloat(A)*o:l=o;var c=s(a["padding-top"]),u=s(a["padding-bottom"]);if(a.padding){var h=a.padding.split(/\s+/).map(s);h.length===1||h.length===2?(c=h[0],u=h[0]):(h.length===3||h.length===4)&&(c=h[0],u=h[2])}var d=s(a["border-top-width"]),f=s(a["border-bottom-width"]);if(a.border){var g=a.border.match(/([\d.]+)px/);g&&(d=parseFloat(g[1]),f=parseFloat(g[1]))}if(a["border-width"]){var h=a["border-width"].split(/\s+/).map(s);h.length===1||h.length===2?(d=h[0],f=h[0]):(h.length===3||h.length===4)&&(d=h[0],f=h[2])}return l+c+u+d+f};function xae(){df(this,this.attributes.visibility!=="hidden")}var yt=function(r){be(e,r);function e(t,n){n===void 0&&(n={});var i=r.call(this,Rt({},{style:n},t))||this;return i.initialized=!1,i._defaultOptions=n,i}return Object.defineProperty(e.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=XN(this)),this._offscreen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return this._defaultOptions},enumerable:!1,configurable:!0}),e.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0},e.prototype.disconnectedCallback=function(){var t;(t=this._offscreen)===null||t===void 0||t.destroy()},e.prototype.attributeChangedCallback=function(t){t==="visibility"&&xae.call(this)},e.prototype.update=function(t,n){var i;return this.attr(Rt({},this.attributes,t||{})),(i=this.render)===null||i===void 0?void 0:i.call(this,this.attributes,this,n)},e.prototype.clear=function(){this.removeChildren()},e.prototype.bindEvents=function(t,n){},e.prototype.getSubShapeStyle=function(t){t.x,t.y,t.transform,t.transformOrigin,t.class,t.className,t.zIndex;var n=lt(t,["x","y","transform","transformOrigin","class","className","zIndex"]);return n},e}(xl),aU=function(r,e,t){return[["M",r-t,e],["A",t,t,0,1,0,r+t,e],["A",t,t,0,1,0,r-t,e],["Z"]]},Cae=aU,Sae=function(r,e,t){return[["M",r-t,e-t],["L",r+t,e-t],["L",r+t,e+t],["L",r-t,e+t],["Z"]]},Fae=function(r,e,t){return[["M",r-t,e],["L",r,e-t],["L",r+t,e],["L",r,e+t],["Z"]]},Tae=function(r,e,t){var n=t*Math.sin(.3333333333333333*Math.PI);return[["M",r-t,e+n],["L",r,e-n],["L",r+t,e+n],["Z"]]},Mae=function(r,e,t){var n=t*Math.sin(.3333333333333333*Math.PI);return[["M",r-t,e-n],["L",r+t,e-n],["L",r,e+n],["Z"]]},Oae=function(r,e,t){var n=t/2*Math.sqrt(3);return[["M",r,e-t],["L",r+n,e-t/2],["L",r+n,e+t/2],["L",r,e+t],["L",r-n,e+t/2],["L",r-n,e-t/2],["Z"]]},Iae=function(r,e,t){var n=t-1.5;return[["M",r-t,e-n],["L",r+t,e+n],["L",r+t,e-n],["L",r-t,e+n],["Z"]]},sU=function(r,e,t){return[["M",r,e+t],["L",r,e-t]]},_ae=function(r,e,t){return[["M",r-t,e-t],["L",r+t,e+t],["M",r+t,e-t],["L",r-t,e+t]]},kae=function(r,e,t){return[["M",r-t/2,e-t],["L",r+t/2,e-t],["M",r,e-t],["L",r,e+t],["M",r-t/2,e+t],["L",r+t/2,e+t]]},Lae=function(r,e,t){return[["M",r-t,e],["L",r+t,e],["M",r,e-t],["L",r,e+t]]},Qae=function(r,e,t){return[["M",r-t,e],["L",r+t,e]]},oU=function(r,e,t){return[["M",r-t,e],["L",r+t,e]]},Nae=oU,Uae=function(r,e,t){return[["M",r-t,e],["A",t/2,t/2,0,1,1,r,e],["A",t/2,t/2,0,1,0,r+t,e]]},Pae=function(r,e,t){return[["M",r-t-1,e-2.5],["L",r,e-2.5],["L",r,e+2.5],["L",r+t+1,e+2.5]]},Rae=function(r,e,t){return[["M",r-t-1,e+2.5],["L",r,e+2.5],["L",r,e-2.5],["L",r+t+1,e-2.5]]},Dae=function(r,e,t){return[["M",r-(t+1),e+2.5],["L",r-t/2,e+2.5],["L",r-t/2,e-2.5],["L",r+t/2,e-2.5],["L",r+t/2,e+2.5],["L",r+t+1,e+2.5]]};function Hae(r,e){return[["M",r-5,e+2.5],["L",r-5,e],["L",r,e],["L",r,e-3],["L",r,e+3],["L",r+6.5,e+3]]}var Gae=function(r,e,t){return[["M",r-t,e-t],["L",r+t,e],["L",r-t,e+t],["Z"]]},Kae=function(r,e,t){var n=t,i=t*.2,a=t*.7;return[["M",r-n,e],["A",n,n,0,1,0,r+n,e],["A",n,n,0,1,0,r-n,e],["Z"],["M",r-a,e],["L",r-i,e],["M",r+i,e],["L",r+a,e],["M",r,e-a],["L",r,e-i],["M",r,e+i],["L",r,e+a]]};function zae(r){var e="default";if(Ot(r)&&r instanceof Image)e="image";else if(ie(r))e="symbol";else if(_e(r)){var t=new RegExp("data:(image|text)");r.match(t)?e="base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(r)?e="url":e="symbol"}return e}function Vae(r){var e=zae(r);return["base64","url","image"].includes(e)?"image":r&&e==="symbol"?"path":null}var Ge=function(r){be(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.render=function(t,n){var i=t.x,a=i===void 0?0:i,s=t.y,o=s===void 0?0:s,A=this.getSubShapeStyle(t),l=A.symbol,c=A.size,u=c===void 0?16:c,h=lt(A,["symbol","size"]),d=Vae(l);Vn(!!d,ae(n),function(f){f.maybeAppendByClassName("marker",d).attr("className","marker ".concat(d,"-marker")).call(function(g){if(d==="image"){var v=u*2;g.styles({img:l,width:v,height:v,x:a-u,y:o-u})}else{var v=u/2,p=ie(l)?l:e.getSymbol(l);g.styles(H({d:p==null?void 0:p(a,o,v)},h))}})})},e.MARKER_SYMBOL_MAP=new Map,e.registerSymbol=function(t,n){e.MARKER_SYMBOL_MAP.set(t,n)},e.getSymbol=function(t){return e.MARKER_SYMBOL_MAP.get(t)},e.getSymbols=function(){return Array.from(e.MARKER_SYMBOL_MAP.keys())},e}(yt);Ge.registerSymbol("cross",_ae);Ge.registerSymbol("hyphen",Qae);Ge.registerSymbol("line",sU);Ge.registerSymbol("plus",Lae);Ge.registerSymbol("tick",kae);Ge.registerSymbol("circle",aU);Ge.registerSymbol("point",Cae);Ge.registerSymbol("bowtie",Iae);Ge.registerSymbol("hexagon",Oae);Ge.registerSymbol("square",Sae);Ge.registerSymbol("diamond",Fae);Ge.registerSymbol("triangle",Tae);Ge.registerSymbol("triangle-down",Mae);Ge.registerSymbol("line",sU);Ge.registerSymbol("dot",oU);Ge.registerSymbol("dash",Nae);Ge.registerSymbol("smooth",Uae);Ge.registerSymbol("hv",Pae);Ge.registerSymbol("vh",Rae);Ge.registerSymbol("hvh",Dae);Ge.registerSymbol("vhv",Hae);Ge.registerSymbol("focus",Kae);function Lh(r,...e){return e.reduce((t,n)=>i=>t(n(i)),r)}function vw(r,e){return e-r?t=>(t-r)/(e-r):t=>.5}function jae(r,e){const t=e<r?e:r,n=r>e?r:e;return i=>Math.min(Math.max(t,i),n)}function $ae(r,e,t,n,i){let a=t,s=n||r.length;const o=A=>A;for(;a<s;){const A=Math.floor((a+s)/2);o(r[A])>e?s=A:a=A+1}return a}const JM=Math.sqrt(50),eO=Math.sqrt(10),tO=Math.sqrt(2);function Uu(r,e,t){const n=(e-r)/Math.max(0,t),i=Math.floor(Math.log(n)/Math.LN10),a=n/10**i;return i>=0?(a>=JM?10:a>=eO?5:a>=tO?2:1)*10**i:-(10**-i)/(a>=JM?10:a>=eO?5:a>=tO?2:1)}const Wae=(r,e,t=5)=>{const n=[r,e];let i=0,a=n.length-1,s=n[i],o=n[a],A;return o<s&&([s,o]=[o,s],[i,a]=[a,i]),A=Uu(s,o,t),A>0?(s=Math.floor(s/A)*A,o=Math.ceil(o/A)*A,A=Uu(s,o,t)):A<0&&(s=Math.ceil(s*A)/A,o=Math.floor(o*A)/A,A=Uu(s,o,t)),A>0?(n[i]=Math.floor(s/A)*A,n[a]=Math.ceil(o/A)*A):A<0&&(n[i]=Math.ceil(s*A)/A,n[a]=Math.floor(o*A)/A),n};function nO(r){return!he(r)&&!rR(r)&&!Number.isNaN(r)}var AU={exports:{}},qae={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},lU={exports:{}},Yae=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")},Xae=Yae,Zae=Array.prototype.concat,Jae=Array.prototype.slice,rO=lU.exports=function(e){for(var t=[],n=0,i=e.length;n<i;n++){var a=e[n];Xae(a)?t=Zae.call(t,Jae.call(a)):t.push(a)}return t};rO.wrap=function(r){return function(){return r(rO(arguments))}};var ese=lU.exports,WA=qae,zl=ese,cU=Object.hasOwnProperty,uU=Object.create(null);for(var Pm in WA)cU.call(WA,Pm)&&(uU[WA[Pm]]=Pm);var sr=AU.exports={to:{},get:{}};sr.get=function(r){var e=r.substring(0,3).toLowerCase(),t,n;switch(e){case"hsl":t=sr.get.hsl(r),n="hsl";break;case"hwb":t=sr.get.hwb(r),n="hwb";break;default:t=sr.get.rgb(r),n="rgb";break}return t?{model:n,value:t}:null};sr.get.rgb=function(r){if(!r)return null;var e=/^#([a-f0-9]{3,4})$/i,t=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,a=/^(\w+)$/,s=[0,0,0,1],o,A,l;if(o=r.match(t)){for(l=o[2],o=o[1],A=0;A<3;A++){var c=A*2;s[A]=parseInt(o.slice(c,c+2),16)}l&&(s[3]=parseInt(l,16)/255)}else if(o=r.match(e)){for(o=o[1],l=o[3],A=0;A<3;A++)s[A]=parseInt(o[A]+o[A],16);l&&(s[3]=parseInt(l+l,16)/255)}else if(o=r.match(n)){for(A=0;A<3;A++)s[A]=parseInt(o[A+1],0);o[4]&&(o[5]?s[3]=parseFloat(o[4])*.01:s[3]=parseFloat(o[4]))}else if(o=r.match(i)){for(A=0;A<3;A++)s[A]=Math.round(parseFloat(o[A+1])*2.55);o[4]&&(o[5]?s[3]=parseFloat(o[4])*.01:s[3]=parseFloat(o[4]))}else return(o=r.match(a))?o[1]==="transparent"?[0,0,0,0]:cU.call(WA,o[1])?(s=WA[o[1]],s[3]=1,s):null:null;for(A=0;A<3;A++)s[A]=Oa(s[A],0,255);return s[3]=Oa(s[3],0,1),s};sr.get.hsl=function(r){if(!r)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=r.match(e);if(t){var n=parseFloat(t[4]),i=(parseFloat(t[1])%360+360)%360,a=Oa(parseFloat(t[2]),0,100),s=Oa(parseFloat(t[3]),0,100),o=Oa(isNaN(n)?1:n,0,1);return[i,a,s,o]}return null};sr.get.hwb=function(r){if(!r)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=r.match(e);if(t){var n=parseFloat(t[4]),i=(parseFloat(t[1])%360+360)%360,a=Oa(parseFloat(t[2]),0,100),s=Oa(parseFloat(t[3]),0,100),o=Oa(isNaN(n)?1:n,0,1);return[i,a,s,o]}return null};sr.to.hex=function(){var r=zl(arguments);return"#"+mu(r[0])+mu(r[1])+mu(r[2])+(r[3]<1?mu(Math.round(r[3]*255)):"")};sr.to.rgb=function(){var r=zl(arguments);return r.length<4||r[3]===1?"rgb("+Math.round(r[0])+", "+Math.round(r[1])+", "+Math.round(r[2])+")":"rgba("+Math.round(r[0])+", "+Math.round(r[1])+", "+Math.round(r[2])+", "+r[3]+")"};sr.to.rgb.percent=function(){var r=zl(arguments),e=Math.round(r[0]/255*100),t=Math.round(r[1]/255*100),n=Math.round(r[2]/255*100);return r.length<4||r[3]===1?"rgb("+e+"%, "+t+"%, "+n+"%)":"rgba("+e+"%, "+t+"%, "+n+"%, "+r[3]+")"};sr.to.hsl=function(){var r=zl(arguments);return r.length<4||r[3]===1?"hsl("+r[0]+", "+r[1]+"%, "+r[2]+"%)":"hsla("+r[0]+", "+r[1]+"%, "+r[2]+"%, "+r[3]+")"};sr.to.hwb=function(){var r=zl(arguments),e="";return r.length>=4&&r[3]!==1&&(e=", "+r[3]),"hwb("+r[0]+", "+r[1]+"%, "+r[2]+"%"+e+")"};sr.to.keyword=function(r){return uU[r.slice(0,3)]};function Oa(r,e,t){return Math.min(Math.max(e,r),t)}function mu(r){var e=Math.round(r).toString(16).toUpperCase();return e.length<2?"0"+e:e}var tse=AU.exports;const nse=Fw(tse);function Rm(r,e,t){let n=t;return n<0&&(n+=1),n>1&&(n-=1),n<1/6?r+(e-r)*6*n:n<1/2?e:n<2/3?r+(e-r)*(2/3-n)*6:r}function rse(r){const e=r[0]/360,t=r[1]/100,n=r[2]/100,i=r[3];if(t===0)return[n*255,n*255,n*255,i];const a=n<.5?n*(1+t):n+t-n*t,s=2*n-a,o=Rm(s,a,e+1/3),A=Rm(s,a,e),l=Rm(s,a,e-1/3);return[o*255,A*255,l*255,i]}function iO(r){const e=nse.get(r);if(!e)return null;const{model:t,value:n}=e;return t==="rgb"?n:t==="hsl"?rse(n):null}const Qh=(r,e)=>t=>r*(1-t)+e*t,ise=(r,e)=>{const t=iO(r),n=iO(e);return t===null||n===null?t?()=>r:()=>e:i=>{const a=new Array(4);for(let c=0;c<4;c+=1){const u=t[c],h=n[c];a[c]=u*(1-i)+h*i}const[s,o,A,l]=a;return`rgba(${Math.round(s)}, ${Math.round(o)}, ${Math.round(A)}, ${l})`}},ase=(r,e)=>typeof r=="number"&&typeof e=="number"?Qh(r,e):typeof r=="string"&&typeof e=="string"?ise(r,e):()=>r,sse=(r,e)=>{const t=Qh(r,e);return n=>Math.round(t(n))};function aO({map:r,initKey:e},t){const n=e(t);return r.has(n)?r.get(n):t}function ose({map:r,initKey:e},t){const n=e(t);return r.has(n)?r.get(n):(r.set(n,t),t)}function Ase({map:r,initKey:e},t){const n=e(t);return r.has(n)&&(t=r.get(n),r.delete(n)),t}function lse(r){return typeof r=="object"?r.valueOf():r}class sO extends Map{constructor(e){if(super(),this.map=new Map,this.initKey=lse,e!==null)for(const[t,n]of e)this.set(t,n)}get(e){return super.get(aO({map:this.map,initKey:this.initKey},e))}has(e){return super.has(aO({map:this.map,initKey:this.initKey},e))}set(e,t){return super.set(ose({map:this.map,initKey:this.initKey},e),t)}delete(e){return super.delete(Ase({map:this.map,initKey:this.initKey},e))}}class hU{constructor(e){this.options=on({},this.getDefaultOptions()),this.update(e)}getOptions(){return this.options}update(e={}){this.options=on({},this.options,e),this.rescale(e)}rescale(e){}}const JB=Symbol("defaultUnknown");function oO(r,e,t){for(let n=0;n<e.length;n+=1)r.has(e[n])||r.set(t(e[n]),n)}function AO(r){const{value:e,from:t,to:n,mapper:i,notFoundReturn:a}=r;let s=i.get(e);if(s===void 0){if(a!==JB)return a;s=t.push(e)-1,i.set(e,s)}return n[s%n.length]}function lO(r){return r instanceof Date?e=>`${e}`:typeof r=="object"?e=>JSON.stringify(e):e=>e}class eb extends hU{getDefaultOptions(){return{domain:[],range:[],unknown:JB}}constructor(e){super(e)}map(e){return this.domainIndexMap.size===0&&oO(this.domainIndexMap,this.getDomain(),this.domainKey),AO({value:this.domainKey(e),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(e){return this.rangeIndexMap.size===0&&oO(this.rangeIndexMap,this.getRange(),this.rangeKey),AO({value:this.rangeKey(e),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(e){const[t]=this.options.domain,[n]=this.options.range;if(this.domainKey=lO(t),this.rangeKey=lO(n),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return}(!e||e.range)&&this.rangeIndexMap.clear(),(!e||e.domain||e.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new eb(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:e,compare:t}=this.options;return this.sortedDomain=t?[...e].sort(t):e,this.sortedDomain}}function cse(r){const e=Math.min(...r);return r.map(t=>t/e)}function use(r,e){const t=r.length,n=e-t;return n>0?[...r,...new Array(n).fill(1)]:n<0?r.slice(0,e):r}function hse(r){return Math.round(r*1e12)/1e12}function dse(r){const{domain:e,range:t,paddingOuter:n,paddingInner:i,flex:a,round:s,align:o}=r,A=e.length,l=use(a,A),[c,u]=t,h=u-c,d=2/A*n+1-1/A*i,f=h/d,g=f*i/A,v=f-A*g,p=cse(l),y=p.reduce((M,T)=>M+T),m=v/y,w=new sO(e.map((M,T)=>{const O=p[T]*m;return[M,s?Math.floor(O):O]})),B=new sO(e.map((M,T)=>{const _=p[T]*m+g;return[M,s?Math.floor(_):_]})),b=Array.from(B.values()).reduce((M,T)=>M+T),x=(h-(b-b/A*i))*o,S=c+x;let C=s?Math.round(S):S;const F=new Array(A);for(let M=0;M<A;M+=1){F[M]=hse(C);const T=e[M];C+=B.get(T)}return{valueBandWidth:w,valueStep:B,adjustedRange:F}}function fse(r){var e;const{domain:t}=r,n=t.length;if(n===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!!(!((e=r.flex)===null||e===void 0)&&e.length))return dse(r);const{range:a,paddingOuter:s,paddingInner:o,round:A,align:l}=r;let c,u,h=a[0];const f=a[1]-h,g=s*2,v=n-o;c=f/Math.max(1,g+v),A&&(c=Math.floor(c)),h+=(f-c*(n-o))*l,u=c*(1-o),A&&(h=Math.round(h),u=Math.round(u));const p=new Array(n).fill(0).map((y,m)=>h+m*c);return{valueStep:c,valueBandWidth:u,adjustedRange:p}}class tb extends eb{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:JB,flex:[]}}constructor(e){super(e)}clone(){return new tb(this.options)}getStep(e){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:e===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(e)}getBandWidth(e){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:e===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(e)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:e,paddingInner:t}=this.options;return e>0?e:t}getPaddingOuter(){const{padding:e,paddingOuter:t}=this.options;return e>0?e:t}rescale(){super.rescale();const{align:e,domain:t,range:n,round:i,flex:a}=this.options,{adjustedRange:s,valueBandWidth:o,valueStep:A}=fse({align:e,range:n,round:i,flex:a,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:t});this.valueStep=A,this.valueBandWidth=o,this.adjustedRange=s}}const gse=(r,e,t)=>{let n,i,a=r,s=e;if(a===s&&t>0)return[a];let o=Uu(a,s,t);if(o===0||!Number.isFinite(o))return[];if(o>0){a=Math.ceil(a/o),s=Math.floor(s/o),i=new Array(n=Math.ceil(s-a+1));for(let A=0;A<n;A+=1)i[A]=(a+A)*o}else{o=-o,a=Math.ceil(a*o),s=Math.floor(s*o),i=new Array(n=Math.ceil(s-a+1));for(let A=0;A<n;A+=1)i[A]=(a+A)/o}return i},vse=(r,e,t)=>{const[n,i]=r,[a,s]=e;let o,A;return n<i?(o=vw(n,i),A=t(a,s)):(o=vw(i,n),A=t(s,a)),Lh(A,o)},pse=(r,e,t)=>{const n=Math.min(r.length,e.length)-1,i=new Array(n),a=new Array(n),s=r[0]>r[n],o=s?[...r].reverse():r,A=s?[...e].reverse():e;for(let l=0;l<n;l+=1)i[l]=vw(o[l],o[l+1]),a[l]=t(A[l],A[l+1]);return l=>{const c=$ae(r,l,1,n)-1,u=i[c],h=a[c];return Lh(h,u)(l)}},cO=(r,e,t,n)=>(Math.min(r.length,e.length)>2?pse:vse)(r,e,n?sse:t);class yse extends hU{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:Qh,tickCount:5}}map(e){return nO(e)?this.output(e):this.options.unknown}invert(e){return nO(e)?this.input(e):this.options.unknown}nice(){if(!this.options.nice)return;const[e,t,n,...i]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(e,t,n,...i)}getTicks(){const{tickMethod:e}=this.options,[t,n,i,...a]=this.getTickMethodOptions();return e(t,n,i,...a)}getTickMethodOptions(){const{domain:e,tickCount:t}=this.options,n=e[0],i=e[e.length-1];return[n,i,t]}chooseNice(){return Wae}rescale(){this.nice();const[e,t]=this.chooseTransforms();this.composeOutput(e,this.chooseClamp(e)),this.composeInput(e,t,this.chooseClamp(t))}chooseClamp(e){const{clamp:t,range:n}=this.options,i=this.options.domain.map(e),a=Math.min(i.length,n.length);return t?jae(i[0],i[a-1]):t1}composeOutput(e,t){const{domain:n,range:i,round:a,interpolate:s}=this.options,o=cO(n.map(e),i,s,a);this.output=Lh(o,t,e)}composeInput(e,t,n){const{domain:i,range:a}=this.options,s=cO(a,i.map(e),Qh);this.input=Lh(t,n,s)}}class qA extends yse{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:ase,tickMethod:gse,tickCount:5}}chooseTransforms(){return[t1,t1]}clone(){return new qA(this.options)}}var mse=function(r){be(e,r);function e(t){var n=this,i=t.style,a=lt(t,["style"]);return n=r.call(this,on({},{type:"column"},H({style:i},a)))||this,n.columnsGroup=new $t({name:"columns"}),n.appendChild(n.columnsGroup),n.render(),n}return e.prototype.render=function(){var t=this.attributes,n=t.columns,i=t.x,a=t.y;this.columnsGroup.style.transform="translate(".concat(i,", ").concat(a,")"),ae(this.columnsGroup).selectAll(".column").data(n.flat()).join(function(s){return s.append("rect").attr("className","column").each(function(o){this.attr(o)})},function(s){return s.each(function(o){this.attr(o)})},function(s){return s.remove()})},e.prototype.update=function(t){this.attr(Rt({},this.attributes,t)),this.render()},e.prototype.clear=function(){this.removeChildren()},e}(et),wse=function(r){be(e,r);function e(t){var n=this,i=t.style,a=lt(t,["style"]);return n=r.call(this,on({},{type:"lines"},H({style:i},a)))||this,n.linesGroup=n.appendChild(new $t),n.areasGroup=n.appendChild(new $t),n.render(),n}return e.prototype.render=function(){var t=this.attributes,n=t.lines,i=t.areas,a=t.x,s=t.y;this.style.transform="translate(".concat(a,", ").concat(s,")"),n&&this.renderLines(n),i&&this.renderAreas(i)},e.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()},e.prototype.update=function(t){this.attr(Rt({},this.attributes,t)),this.render()},e.prototype.renderLines=function(t){ae(this.linesGroup).selectAll(".line").data(t).join(function(n){return n.append("path").attr("className","line").each(function(i){this.attr(i)})},function(n){return n.each(function(i){this.attr(i)})},function(n){return n.remove()})},e.prototype.renderAreas=function(t){ae(this.linesGroup).selectAll(".area").data(t).join(function(n){return n.append("path").attr("className","area").each(function(i){this.attr(i)})},function(n){return n.each(function(i){this.style(i)})},function(n){return n.remove()})},e}(et);function Bse(r,e){var t,n=e.x,i=e.y,a=I(i.getOptions().range||[0,0],2),s=a[0],o=a[1];return o>s&&(t=I([s,o],2),o=t[0],s=t[1]),r.map(function(A){var l=A.map(function(c,u){return[n.map(u),vt(i.map(c),o,s)]});return l})}function pl(r,e){e===void 0&&(e=!1);var t=e?r.length-1:0,n=r.map(function(i,a){return oe([a===t?"M":"L"],I(i),!1)});return e?n.reverse():n}function Nh(r,e){if(e===void 0&&(e=!1),r.length<=2)return pl(r);for(var t=[],n=r.length,i=0;i<n;i+=1){var a=e?r[n-i-1]:r[i];pt(a,t.slice(-2))||t.push.apply(t,oe([],I(a),!1))}var s=Aae(t);return e?s.unshift(oe(["M"],I(r[n-1]),!1)):s.unshift(oe(["M"],I(r[0]),!1)),s}function nb(r,e,t){var n=_a(r);return n.push(["L",e,t],["L",0,t],["Z"]),n}function bse(r,e,t,n){return r.map(function(i){return nb(e?Nh(i):pl(i),t,n)})}function Ese(r,e,t){for(var n=[],i=r.length-1;i>=0;i-=1){var a=r[i],s=pl(a),o=void 0;if(i===0)o=nb(s,e,t);else{var A=r[i-1],l=pl(A,!0);l[0][0]="L",o=oe(oe(oe([],I(s),!1),I(l),!1),[["Z"]],!1)}n.push(o)}return n}function xse(r,e,t){for(var n=[],i=r.length-1;i>=0;i-=1){var a=r[i],s=Nh(a),o=void 0;if(i===0)o=nb(s,e,t);else{var A=r[i-1],l=Nh(A,!0),c=a[0];l[0][0]="L",o=oe(oe(oe([],I(s),!1),I(l),!1),[oe(["M"],I(c),!1),["Z"]],!1)}n.push(o)}return n}function uO(r){return r.length===0?[0,0]:[ju(XP(r,function(e){return ju(e)||0})),Vu(YP(r,function(e){return Vu(e)||0}))]}function hO(r){for(var e=_a(r),t=e[0].length,n=I([Array(t).fill(0),Array(t).fill(0)],2),i=n[0],a=n[1],s=0;s<e.length;s+=1)for(var o=e[s],A=0;A<t;A+=1)o[A]>=0?(o[A]+=i[A],i[A]=o[A]):(o[A]+=a[A],a[A]=o[A]);return e}var Cse=function(r){be(e,r);function e(t){return r.call(this,t,{type:"line",x:0,y:0,width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this}return Object.defineProperty(e.prototype,"rawData",{get:function(){var t=this.attributes.data;if(!t||(t==null?void 0:t.length)===0)return[[]];var n=_a(t);return Z(n[0])?[n]:n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.attributes.isStack?hO(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scales",{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseline",{get:function(){var t=this.scales.y,n=I(t.getOptions().domain||[0,0],2),i=n[0],a=n[1];return a<0?t.map(a):t.map(i<0?0:i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"containerShape",{get:function(){var t=this.attributes,n=t.width,i=t.height;return{width:n,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linesStyle",{get:function(){var t=this,n=this.attributes,i=n.type,a=n.isStack,s=n.smooth;if(i!=="line")throw new Error("linesStyle can only be used in line type");var o=ge(this.attributes,"area"),A=ge(this.attributes,"line"),l=this.containerShape.width,c=this.data;if(c[0].length===0)return{lines:[],areas:[]};var u=this.scales,h=u.x,d=u.y,f=Bse(c,{x:h,y:d}),g=[];if(o){var v=this.baseline;a?g=s?xse(f,l,v):Ese(f,l,v):g=bse(f,s,l,v)}return{lines:f.map(function(p,y){return H({stroke:t.getColor(y),d:s?Nh(p):pl(p)},A)}),areas:g.map(function(p,y){return H({d:p,fill:t.getColor(y)},o)})}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columnsStyle",{get:function(){var t=this,n=ge(this.attributes,"column"),i=this.attributes,a=i.isStack,s=i.type,o=i.scale;if(s!=="column")throw new Error("columnsStyle can only be used in column type");var A=this.containerShape.height,l=this.rawData;if(!l)return{columns:[]};a&&(l=hO(l));var c=this.createScales(l),u=c.x,h=c.y,d=I(uO(l),2),f=d[0],g=d[1],v=new qA({domain:[0,g-(f>0?0:f)],range:[0,A*o]}),p=u.getBandWidth(),y=this.rawData;return{columns:l.map(function(m,w){return m.map(function(B,b){var E=p/l.length,x=function(){return{x:u.map(b)+E*w,y:B>=0?h.map(B):h.map(0),width:E,height:v.map(Math.abs(B))}},S=function(){return{x:u.map(b),y:h.map(B),width:p,height:v.map(y[w][b])}};return H(H({fill:t.getColor(w)},n),a?S():x())})})}},enumerable:!1,configurable:!0}),e.prototype.render=function(t,n){gae(n,".container","rect").attr("className","container").node();var i=t.type,a=t.x,s=t.y,o="spark".concat(i),A=H({x:a,y:s},i==="line"?this.linesStyle:this.columnsStyle);ae(n).selectAll(".spark").data([i]).join(function(l){return l.append(function(c){return c==="line"?new wse({className:o,style:A}):new mse({className:o,style:A})}).attr("className","spark ".concat(o))},function(l){return l.update(A)},function(l){return l.remove()})},e.prototype.getColor=function(t){var n=this.attributes.color;return Wn(n)?n[t%n.length]:ie(n)?n.call(null,t):n},e.prototype.createScales=function(t){var n,i,a=this.attributes,s=a.type,o=a.scale,A=a.range,l=A===void 0?[]:A,c=a.spacing,u=this.containerShape,h=u.width,d=u.height,f=I(uO(t),2),g=f[0],v=f[1],p=new qA({domain:[(n=l[0])!==null&&n!==void 0?n:g,(i=l[1])!==null&&i!==void 0?i:v],range:[d,d*(1-o)]});return s==="line"?{type:s,x:new qA({domain:[0,t[0].length-1],range:[0,h]}),y:p}:{type:s,x:new tb({domain:t[0].map(function(y,m){return m}),range:[0,h],paddingInner:c,paddingOuter:c/2,align:.5}),y:p}},e.tag="sparkline",e}(yt);function Sse(r){return typeof r=="boolean"?!1:"enter"in r&&"update"in r&&"exit"in r}function dO(r){if(!r)return{enter:!1,update:!1,exit:!1};var e=["enter","update","exit"],t=Object.fromEntries(Object.entries(r).filter(function(n){var i=I(n,1),a=i[0];return!e.includes(a)}));return Object.fromEntries(e.map(function(n){return Sse(r)?r[n]===!1?[n,!1]:[n,H(H({},r[n]),t)]:[n,t]}))}function Xo(r,e){r?r.finished.then(e):e()}function Fse(r,e){r.length===0?e():Promise.all(r.map(function(t){return t==null?void 0:t.finished})).then(e)}function dU(r,e){"update"in r?r.update(e):r.attr(e)}function fU(r,e,t){if(e.length===0)return null;if(!t){var n=e.slice(-1)[0];return dU(r,{style:n}),null}return r.animate(e,t)}function Tse(r,e){return!(r.nodeName!=="text"||e.nodeName!=="text"||r.attributes.text!==e.attributes.text)}function Mse(r,e,t,n){if(n===void 0&&(n="destroy"),Tse(r,e))return r.remove(),[null];var i=function(){n==="destroy"?r.destroy():n==="hide"&&Gr(r),e.isVisible()&&Kl(e)};if(!t)return i(),[null];var a=t.duration,s=a===void 0?0:a,o=t.delay,A=o===void 0?0:o,l=Math.ceil(+s/2),c=+s/4,u=I(r.getGeometryBounds().center,2),h=u[0],d=u[1],f=I(e.getGeometryBounds().center,2),g=f[0],v=f[1],p=I([(h+g)/2-h,(d+v)/2-d],2),y=p[0],m=p[1],w=r.style.opacity,B=w===void 0?1:w,b=e.style.opacity,E=b===void 0?1:b,x=r.style.transform||"",S=e.style.transform||"",C=r.animate([{opacity:B,transform:"translate(0, 0) ".concat(x)},{opacity:0,transform:"translate(".concat(y,", ").concat(m,") ").concat(x)}],H(H({fill:"both"},t),{duration:A+l+c})),F=e.animate([{opacity:0,transform:"translate(".concat(-y,", ").concat(-m,") ").concat(S),offset:.01},{opacity:E,transform:"translate(0, 0) ".concat(S)}],H(H({fill:"both"},t),{duration:l+c,delay:A+l-c}));return Xo(F,i),[C,F]}function Kr(r,e,t){var n={},i={};return Object.entries(e).forEach(function(a){var s=I(a,2),o=s[0],A=s[1];if(!le(A)){var l=r.style[o]||r.parsedStyle[o]||0;l!==A&&(n[o]=l,i[o]=A)}}),t?fU(r,[n,i],H({fill:"both"},t)):(dU(r,i),null)}function gf(r,e){return r.style.opacity||(r.style.opacity=1),Kr(r,{opacity:0},e)}var gU={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},vU={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},pU={x:0,y:0,orientation:"horizontal",showLabel:!0,type:"start"},si=Xr({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider"),Br=Xr({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),Ose=function(r){be(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.render=function(t,n){var i=t.x,a=t.y,s=t.size,o=s===void 0?10:s,A=t.radius,l=A===void 0?o/4:A,c=t.orientation,u=t.classNamePrefix,h=lt(t,["x","y","size","radius","orientation","classNamePrefix"]),d=o,f=d*2.4,g=u?"".concat(Br.iconRect.name," ").concat(u,"handle-icon-rect"):Br.iconRect.name,v=function(b){return u?"".concat(Br.iconLine,"-").concat(b," ").concat(u,"handle-icon-line"):"".concat(Br.iconLine,"-").concat(b)},p=ae(n).maybeAppendByClassName(Br.iconRect,"rect").attr("className",g).styles(H(H({},h),{width:d,height:f,radius:l,x:i-d/2,y:a-f/2,transformOrigin:"center"})),y=i+1/3*d-d/2,m=i+2/3*d-d/2,w=a+1/4*f-f/2,B=a+3/4*f-f/2;p.maybeAppendByClassName("".concat(Br.iconLine,"-1"),"line").attr("className",v(1)).styles(H({x1:y,x2:y,y1:w,y2:B},h)),p.maybeAppendByClassName("".concat(Br.iconLine,"-2"),"line").attr("className",v(2)).styles(H({x1:m,x2:m,y1:w,y2:B},h)),c==="vertical"&&(p.node().style.transform="rotate(90)")},e}(yt),Ise=function(r){be(e,r);function e(t){return r.call(this,t,pU)||this}return e.prototype.renderLabel=function(t){var n=this,i=this.attributes,a=i.x,s=i.y,o=i.showLabel,A=ge(this.attributes,"label"),l=A.x,c=l===void 0?0:l,u=A.y,h=u===void 0?0:u,d=A.transform,f=A.transformOrigin,g=lt(A,["x","y","transform","transformOrigin"]),v=I(qi(g,[]),2),p=v[0],y=v[1],m=ae(t).maybeAppendByClassName(Br.labelGroup,"g").styles(y),w=H(H({},vU),p),B=w.text,b=lt(w,["text"]);Vn(!!o,m,function(E){n.label=E.maybeAppendByClassName(Br.label,"text").styles(H(H({},b),{x:a+c,y:s+h,transform:d,transformOrigin:f,text:"".concat(B)})),n.label.on("mousedown",function(x){x.stopPropagation()}),n.label.on("touchstart",function(x){x.stopPropagation()})})},e.prototype.renderIcon=function(t){var n=this.attributes,i=n.x,a=n.y,s=n.orientation,o=n.type,A=n.classNamePrefix,l=H(H({x:i,y:a,orientation:s,classNamePrefix:A},gU),ge(this.attributes,"icon")),c=this.attributes.iconShape,u=c===void 0?function(){return new Ose({style:l})}:c,h=ae(t).maybeAppendByClassName(Br.iconGroup,"g");h.selectAll(Br.icon.class).data([u]).join(function(d){return d.append(typeof u=="string"?u:function(){return u(o)}).attr("className",Br.icon.name)},function(d){return d.update(l)},function(d){return d.remove()})},e.prototype.render=function(t,n){this.renderIcon(n),this.renderLabel(n)},e}(yt),_se=function(r){be(e,r);function e(t){var n=r.call(this,t,H(H(H({x:0,y:0,animate:{duration:100,fill:"both"},brushable:!0,formatter:function(i){return i.toString()},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},vo(pU,"handle")),vo(gU,"handleIcon")),vo(vU,"handleLabel")))||this;return n.range=[0,1],n.onDragStart=function(i){return function(a){a.stopPropagation(),n.target=i,n.prevPos=n.getOrientVal($M(a));var s=n.availableSpace,o=s.x,A=s.y,l=n.getBBox(),c=l.x,u=l.y;n.selectionStartPos=n.getRatio(n.prevPos-n.getOrientVal([o,A])-n.getOrientVal([+c,+u])),n.selectionWidth=0,document.addEventListener("pointermove",n.onDragging),document.addEventListener("pointerup",n.onDragEnd)}},n.onDragging=function(i){var a=n.attributes,s=a.slidable,o=a.brushable,A=a.type;i.stopPropagation();var l=n.getOrientVal($M(i)),c=l-n.prevPos;if(c){var u=n.getRatio(c);switch(n.target){case"start":s&&n.setValuesOffset(u);break;case"end":s&&n.setValuesOffset(0,u);break;case"selection":s&&n.setValuesOffset(u,u);break;case"track":if(!o)return;n.selectionWidth+=u,A==="range"?n.innerSetValues([n.selectionStartPos,n.selectionStartPos+n.selectionWidth].sort(),!0):n.innerSetValues([0,n.selectionStartPos+n.selectionWidth],!0);break}n.prevPos=l}},n.onDragEnd=function(){document.removeEventListener("pointermove",n.onDragging),document.removeEventListener("pointermove",n.onDragging),document.removeEventListener("pointerup",n.onDragEnd),n.target="",n.updateHandlesPosition(!1)},n.onValueChange=function(i){var a=n.attributes,s=a.onChange,o=a.type,A=o==="range"?i:i[1],l=o==="range"?n.getValues():n.getValues()[1],c=new Qt("valuechange",{detail:{oldValue:A,value:l}});n.dispatchEvent(c),s==null||s(l)},n.selectionStartPos=0,n.selectionWidth=0,n.prevPos=0,n.target="",n}return Object.defineProperty(e.prototype,"values",{get:function(){return this.attributes.values},set:function(t){this.attributes.values=this.clampValues(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sparklineStyle",{get:function(){var t=this.attributes.orientation;if(t!=="horizontal")return null;var n=ge(this.attributes,"sparkline");return H(H({zIndex:0},this.availableSpace),n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){var t=this.attributes,n=t.trackLength,i=t.trackSize,a=I(this.getOrientVal([[n,i],[i,n]]),2),s=a[0],o=a[1];return{width:s,height:o}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableSpace",{get:function(){var t=this.attributes;t.x,t.y;var n=t.padding,i=I(ln(n),4),a=i[0],s=i[1],o=i[2],A=i[3],l=this.shape,c=l.width,u=l.height;return{x:A,y:a,width:c-(A+s),height:u-(a+o)}},enumerable:!1,configurable:!0}),e.prototype.getValues=function(){return this.values},e.prototype.setValues=function(t,n){t===void 0&&(t=[0,0]),n===void 0&&(n=!1),this.attributes.values=t;var i=n===!1?!1:this.attributes.animate;this.updateSelectionArea(i),this.updateHandlesPosition(i)},e.prototype.updateSelectionArea=function(t){var n=this.calcSelectionArea();this.foregroundGroup.selectAll(si.selection.class).each(function(i,a){Kr(this,n[a],t)})},e.prototype.updateHandlesPosition=function(t){this.attributes.showHandle&&(this.startHandle&&Kr(this.startHandle,this.getHandleStyle("start"),t),this.endHandle&&Kr(this.endHandle,this.getHandleStyle("end"),t))},e.prototype.innerSetValues=function(t,n){t===void 0&&(t=[0,0]),n===void 0&&(n=!1);var i=this.values,a=this.clampValues(t);this.attributes.values=a,this.setValues(a),n&&this.onValueChange(i)},e.prototype.renderTrack=function(t){var n=this.attributes,i=n.x,a=n.y,s=ge(this.attributes,"track");this.trackShape=ae(t).maybeAppendByClassName(si.track,"rect").styles(H(H({x:i,y:a},this.shape),s))},e.prototype.renderBrushArea=function(t){var n=this.attributes,i=n.x,a=n.y,s=n.brushable;this.brushArea=ae(t).maybeAppendByClassName(si.brushArea,"rect").styles(H({x:i,y:a,fill:"transparent",cursor:s?"crosshair":"default"},this.shape))},e.prototype.renderSparkline=function(t){var n=this,i=this.attributes,a=i.x,s=i.y,o=i.orientation,A=ae(t).maybeAppendByClassName(si.sparklineGroup,"g");Vn(o==="horizontal",A,function(l){var c=H(H({},n.sparklineStyle),{x:a,y:s});l.maybeAppendByClassName(si.sparkline,function(){return new Cse({style:c})}).update(c)})},e.prototype.renderHandles=function(){var t=this,n,i=this.attributes,a=i.showHandle,s=i.type,o=s==="range"?["start","end"]:["end"],A=a?o:[],l=this;(n=this.foregroundGroup)===null||n===void 0||n.selectAll(si.handle.class).data(A.map(function(c){return{type:c}}),function(c){return c.type}).join(function(c){return c.append(function(u){var h=u.type;return new Ise({style:t.getHandleStyle(h)})}).each(function(u){var h=u.type;this.attr("class","".concat(si.handle.name," ").concat(h,"-handle"));var d="".concat(h,"Handle");l[d]=this,this.addEventListener("pointerdown",l.onDragStart(h))})},function(c){return c.each(function(u){var h=u.type;this.update(l.getHandleStyle(h))})},function(c){return c.each(function(u){var h=u.type,d="".concat(h,"Handle");l[d]=void 0}).remove()})},e.prototype.renderSelection=function(t){var n=this.attributes,i=n.x,a=n.y,s=n.type,o=n.selectionType;this.foregroundGroup=ae(t).maybeAppendByClassName(si.foreground,"g");var A=ge(this.attributes,"selection"),l=function(u){return u.style("visibility",function(h){return h.show?"visible":"hidden"}).style("cursor",function(h){return o==="select"?"grab":o==="invert"?"crosshair":"default"}).styles(H(H({},A),{transform:"translate(".concat(i,", ").concat(a,")")}))},c=this;this.foregroundGroup.selectAll(si.selection.class).data(s==="value"?[]:this.calcSelectionArea().map(function(u,h){return{style:H({},u),index:h,show:o==="select"?h===1:h!==1}}),function(u){return u.index}).join(function(u){return u.append("rect").attr("className",si.selection.name).call(l).each(function(h,d){var f=this;d===1?(c.selectionShape=ae(this),this.on("pointerdown",function(g){f.attr("cursor","grabbing"),c.onDragStart("selection")(g)}),c.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),c.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),c.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",function(){f.attr("cursor","grabbing")}),this.addEventListener("pointerup",function(){f.attr("cursor","pointer")}),this.addEventListener("pointerover",function(){f.attr("cursor","pointer")})):this.on("pointerdown",c.onDragStart("track"))})},function(u){return u.call(l)},function(u){return u.remove()}),this.updateSelectionArea(!1),this.renderHandles()},e.prototype.render=function(t,n){this.renderTrack(n),this.renderSparkline(n),this.renderBrushArea(n),this.renderSelection(n)},e.prototype.clampValues=function(t,n){var i;n===void 0&&(n=4);var a=I(this.range,2),s=a[0],o=a[1],A=I(this.getValues().map(function(v){return WM(v,n)}),2),l=A[0],c=A[1],u=Array.isArray(t)?t:[l,t??c],h=I((u||[l,c]).map(function(v){return WM(v,n)}),2),d=h[0],f=h[1];if(this.attributes.type==="value")return[0,vt(f,s,o)];d>f&&(i=I([f,d],2),d=i[0],f=i[1]);var g=f-d;return g>o-s?[s,o]:d<s?l===s&&c===f?[s,f]:[s,g+s]:f>o?c===o&&l===d?[d,o]:[o-g,o]:[d,f]},e.prototype.calcSelectionArea=function(t){var n=I(this.clampValues(t),2),i=n[0],a=n[1],s=this.availableSpace,o=s.x,A=s.y,l=s.width,c=s.height;return this.getOrientVal([[{y:A,height:c,x:o,width:i*l},{y:A,height:c,x:i*l+o,width:(a-i)*l},{y:A,height:c,x:a*l,width:(1-a)*l}],[{x:o,width:l,y:A,height:i*c},{x:o,width:l,y:i*c+A,height:(a-i)*c},{x:o,width:l,y:a*c,height:(1-a)*c}]])},e.prototype.calcHandlePosition=function(t){var n=this.attributes.handleIconOffset,i=this.availableSpace,a=i.x,s=i.y,o=i.width,A=i.height,l=I(this.clampValues(),2),c=l[0],u=l[1],h=t==="start"?-n:n,d=(t==="start"?c:u)*this.getOrientVal([o,A])+h;return{x:a+this.getOrientVal([d,o/2]),y:s+this.getOrientVal([A/2,d])}},e.prototype.inferTextStyle=function(t){var n=this.attributes.orientation;return n==="horizontal"?{}:t==="start"?{transformOrigin:"left center",transform:"rotate(90)",textAlign:"start"}:t==="end"?{transformOrigin:"right center",transform:"rotate(90)",textAlign:"end"}:{}},e.prototype.calcHandleText=function(t){var n,i=this.attributes,a=i.type,s=i.orientation,o=i.formatter,A=i.autoFitLabel,l=ge(this.attributes,"handle"),c=ge(l,"label"),u=l.spacing,h=this.getHandleSize(),d=this.clampValues(),f=t==="start"?d[0]:d[1],g=o(f),v=new qB({style:H(H(H({},c),this.inferTextStyle(t)),{text:g})}),p=v.getBBox(),y=p.width,m=p.height;if(v.destroy(),!A){if(a==="value")return{text:g,x:0,y:-m-u};var w=u+h+(s==="horizontal"?y/2:0);return n={text:g},n[s==="horizontal"?"x":"y"]=t==="start"?-w:w,n}var B=0,b=0,E=this.availableSpace,x=E.width,S=E.height,C=this.calcSelectionArea()[1],F=C.x,M=C.y,T=C.width,O=C.height,_=u+h;if(s==="horizontal"){var Q=_+y/2;if(t==="start"){var L=F-_-y;B=L>0?-Q:Q}else{var k=x-F-T-_>y;B=k?Q:-Q}}else{var U=_,D=m+_;t==="start"?b=M-h>m?-D:U:b=S-(M+O)-h>m?D:-U}return{x:B,y:b,text:g}},e.prototype.getHandleLabelStyle=function(t){var n=ge(this.attributes,"handleLabel");return H(H(H({},n),this.calcHandleText(t)),this.inferTextStyle(t))},e.prototype.getHandleIconStyle=function(){var t=this.attributes.handleIconShape,n=ge(this.attributes,"handleIcon"),i=this.getOrientVal(["ew-resize","ns-resize"]),a=this.getHandleSize();return H({cursor:i,shape:t,size:a},n)},e.prototype.getHandleStyle=function(t){var n=this.attributes,i=n.x,a=n.y,s=n.showLabel,o=n.showLabelOnInteraction,A=n.orientation,l=this.calcHandlePosition(t),c=l.x,u=l.y,h=this.calcHandleText(t),d=s;return!s&&o&&(this.target?d=!0:d=!1),H(H(H({},vo(this.getHandleIconStyle(),"icon")),vo(H(H({},this.getHandleLabelStyle(t)),h),"label")),{transform:"translate(".concat(c+i,", ").concat(u+a,")"),orientation:A,showLabel:d,type:t,zIndex:3})},e.prototype.getHandleSize=function(){var t=this.attributes,n=t.handleIconSize,i=t.width,a=t.height;return n||Math.floor((this.getOrientVal([+a,+i])+4)/2.4)},e.prototype.getOrientVal=function(t){var n=I(t,2),i=n[0],a=n[1],s=this.attributes.orientation;return s==="horizontal"?i:a},e.prototype.setValuesOffset=function(t,n){n===void 0&&(n=0);var i=this.attributes.type,a=I(this.getValues(),2),s=a[0],o=a[1],A=i==="range"?t:0,l=[s+A,o+n].sort();this.innerSetValues(l,!0)},e.prototype.getRatio=function(t){var n=this.availableSpace,i=n.width,a=n.height;return t/this.getOrientVal([i,a])},e.prototype.dispatchCustomEvent=function(t,n,i){var a=this;t.on(n,function(s){s.stopPropagation(),a.dispatchEvent(new Qt(i,{detail:s}))})},e.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var t=this.brushArea;this.dispatchCustomEvent(t,"click","trackClick"),this.dispatchCustomEvent(t,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(t,"pointerleave","trackMouseleave"),t.on("pointerdown",this.onDragStart("track"))},e.prototype.onScroll=function(t){var n=this.attributes.scrollable;if(n){var i=t.deltaX,a=t.deltaY,s=a||i,o=this.getRatio(s);this.setValuesOffset(o,o)}},e.tag="slider",e}(yt),Re={gridGroup:"grid-group",mainGroup:"main-group",lineGroup:"line-group",tickGroup:"tick-group",labelGroup:"label-group",titleGroup:"title-group",grid:"grid",line:"line",lineFirst:"line-first",lineSecond:"line-second",tick:"tick",tickItem:"tick-item",label:"label",labelItem:"label-item",title:"title"},rb={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",crossPadding:10,titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:function(){return new wn({style:{d:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],fill:"black",transformOrigin:"center"}})},labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",labelOverlap:[]};on({},rb,{style:{type:"arc"}});on({},rb,{style:{}});var de=Xr({mainGroup:Re.mainGroup,gridGroup:Re.gridGroup,grid:Re.grid,lineGroup:Re.lineGroup,line:Re.line,tickGroup:Re.tickGroup,tick:Re.tick,tickItem:Re.tickItem,labelGroup:Re.labelGroup,label:Re.label,labelItem:Re.labelItem,titleGroup:Re.titleGroup,title:Re.title,lineFirst:Re.lineFirst,lineSecond:Re.lineSecond},"axis"),Ro=Xr({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function yU(r){return r.reduce(function(e,t,n){return e.push(oe([n===0?"M":"L"],I(t),!1)),e},[])}function kse(r,e,t){var n=e.connect,i=n===void 0?"line":n,a=e.center;if(i==="line")return yU(r);if(!a)return[];var s=vl(r[0],a),o=t?0:1;return r.reduce(function(A,l,c){return c===0?A.push(oe(["M"],I(l),!1)):A.push(oe(["A",s,s,0,0,o],I(l),!1)),A},[])}function pw(r,e,t){return e.type==="surround"?kse(r,e,t):yU(r)}function Lse(r,e,t){var n=t.type,i=t.connect,a=t.center,s=t.closed,o=s?[["Z"]]:[],A=I([pw(r,t),pw(e.slice().reverse(),t,!0)],2),l=A[0],c=A[1],u=I([r[0],e.slice(-1)[0]],2),h=u[0],d=u[1],f=function(y,m){return[l,y,c,m,o].flat()};if(i==="line"||n==="surround")return f([oe(["L"],I(d),!1)],[oe(["L"],I(h),!1)]);if(!a)throw new Error("Arc grid need to specified center");var g=I([vl(d,a),vl(h,a)],2),v=g[0],p=g[1];return f([oe(["A",v,v,0,0,1],I(d),!1),oe(["L"],I(d),!1)],[oe(["A",p,p,0,0,0],I(h),!1),oe(["L"],I(h),!1)])}function Qse(r,e,t,n){var i=t.animate,a=t.isBillboard,s=e.map(function(o,A){return{id:o.id||"grid-line-".concat(A),d:pw(o.points,t)}});return r.selectAll(Ro.line.class).data(s,function(o){return o.id}).join(function(o){return o.append("path").each(function(A,l){var c=$n(qM(H({d:A.d},n)),[A,l,s]);this.attr(H({class:Ro.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:a},c))})},function(o){return o.transition(function(A,l){var c=$n(qM(H({d:A.d},n)),[A,l,s]);return Kr(this,c,i.update)})},function(o){return o.transition(function(){var A=this,l=gf(this,i.exit);return Xo(l,function(){return A.remove()}),l})}).transitions()}function Nse(r,e,t){var n=t.animate,i=t.connect,a=t.areaFill;if(e.length<2||!a||!i)return[];for(var s=Array.isArray(a)?a:[a,"transparent"],o=function(f){return s[f%s.length]},A=[],l=0;l<e.length-1;l++){var c=I([e[l].points,e[l+1].points],2),u=c[0],h=c[1],d=Lse(u,h,t);A.push({d,fill:o(l)})}return r.selectAll(Ro.region.class).data(A,function(f,g){return g}).join(function(f){return f.append("path").each(function(g,v){var p=$n(g,[g,v,A]);this.attr(p)}).attr("className",Ro.region.name)},function(f){return f.transition(function(g,v){var p=$n(g,[g,v,A]);return Kr(this,p,n.update)})},function(f){return f.transition(function(){var g=this,v=gf(this,n.exit);return Xo(v,function(){return g.remove()}),v})}).transitions()}function Use(r){var e=r.data,t=e===void 0?[]:e,n=r.closed;return n?t.map(function(i){var a=i.points,s=I(a,1),o=s[0];return H(H({},i),{points:oe(oe([],I(a),!1),[o],!1)})}):t}var Pse=function(r){be(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.render=function(t,n){t.type,t.center,t.areaFill,t.closed;var i=lt(t,["type","center","areaFill","closed"]),a=Use(t),s=ae(n).maybeAppendByClassName(Ro.lineGroup,"g"),o=ae(n).maybeAppendByClassName(Ro.regionGroup,"g"),A=Qse(s,a,t,i),l=Nse(o,a,t);return oe(oe([],I(A),!1),I(l),!1)},e}(yt);function mU(r,e){return Object.fromEntries(Object.entries(r).map(function(t){var n=I(t,2),i=n[0],a=n[1];return[i,$n(a,e)]}))}function ib(r,e){return e&&ie(e)?r.filter(e):r}function wU(r,e){var t=e.startAngle,n=e.endAngle;return(n-t)*r+t}function vf(r,e){if(e.type==="linear"){var t=I(e.startPos,2),n=t[0],i=t[1],a=I(e.endPos,2),s=a[0],o=a[1],A=I([s-n,o-i],2),l=A[0],c=A[1];return rU([l,c])}var u=Po(wU(r,e));return[-Math.sin(u),Math.cos(u)]}function ab(r,e,t){var n=vf(r,t);return sae(n,e!=="positive")}function Zo(r,e){return ab(r,e.labelDirection,e)}function Pu(r,e,t){return t?"".concat(r," ").concat(t,"axis-").concat(e):r}function lr(r,e,t,n){return n&&r.attr("className",Pu(e.name,t,n)),r}function Rse(r,e){var t=I(e.startPos,2),n=t[0],i=t[1],a=I(e.endPos,2),s=a[0],o=a[1],A=I([s-n,o-i],2),l=A[0],c=A[1];return[n+l*r,i+c*r]}function Dse(r,e){var t=e.radius,n=I(e.center,2),i=n[0],a=n[1],s=Po(wU(r,e));return[i+t*Math.cos(s),a+t*Math.sin(s)]}function pf(r,e){return e.type==="linear"?Rse(r,e):Dse(r,e)}function sb(r){return vf(0,r)[1]===0}function BU(r){return vf(0,r)[0]===0}function bU(r,e){return e-r===360}function fO(r,e,t,n,i){var a=e-r,s=I([i,i],2),o=s[0],A=s[1],l=I([Po(r),Po(e)],2),c=l[0],u=l[1],h=function(S){return[t+i*Math.cos(S),n+i*Math.sin(S)]},d=I(h(c),2),f=d[0],g=d[1],v=I(h(u),2),p=v[0],y=v[1];if(bU(r,e)){var m=(u+c)/2,w=I(h(m),2),B=w[0],b=w[1];return[["M",f,g],["A",o,A,0,1,0,B,b],["A",o,A,0,1,0,p,y]]}var E=a>180?1:0,x=r>e?0:1;return"M".concat(f,",").concat(g,",A").concat(o,",").concat(A,",0,").concat(E,",").concat(x,",").concat(p,",").concat(y)}function Hse(r){var e=r.attributes,t=e.startAngle,n=e.endAngle,i=e.center,a=e.radius;return oe(oe([t,n],I(i),!1),[a],!1)}function Gse(r,e,t,n){var i=e.startAngle,a=e.endAngle,s=e.center,o=e.radius,A=e.classNamePrefix;return r.selectAll(de.line.class).data([{d:fO.apply(void 0,oe(oe([i,a],I(s),!1),[o],!1))}],function(l,c){return c}).join(function(l){var c=l.append("path").attr("className",de.line.name).styles(e).styles({d:function(u){return u.d}});return lr(c,de.line,Re.line,A),c},function(l){return l.transition(function(){var c=this,u=aae(this,Hse(this),oe(oe([i,a],I(s),!1),[o],!1),n.update);if(u){var h=function(){var d=nn(c.attributes,"__keyframe_data__");c.style.d=fO.apply(void 0,oe([],I(d),!1))};u.onframe=h,u.onfinish=h}return u}).styles(e)},function(l){return l.remove()}).styles(t).transitions()}function Kse(r,e){e.truncRange,e.truncShape,e.lineExtension}function zse(r,e,t){t===void 0&&(t=[0,0]);var n=I([r,e,t],3),i=I(n[0],2),a=i[0],s=i[1],o=I(n[1],2),A=o[0],l=o[1],c=I(n[2],2),u=c[0],h=c[1],d=I([A-a,l-s],2),f=d[0],g=d[1],v=Math.sqrt(Math.pow(f,2)+Math.pow(g,2)),p=I([-u/v,h/v],2),y=p[0],m=p[1];return[y*f,y*g,m*f,m*g]}function gO(r){var e=I(r,2),t=I(e[0],2),n=t[0],i=t[1],a=I(e[1],2),s=a[0],o=a[1];return{x1:n,y1:i,x2:s,y2:o}}function Vse(r,e,t,n){var i=e.showTrunc,a=e.startPos,s=e.endPos,o=e.truncRange,A=e.lineExtension,l=e.classNamePrefix,c=I([a,s],2),u=I(c[0],2),h=u[0],d=u[1],f=I(c[1],2),g=f[0],v=f[1],p=I(A?zse(a,s,A):new Array(4).fill(0),4),y=p[0],m=p[1],w=p[2],B=p[3],b=function(U){return r.selectAll(de.line.class).data(U,function(D,j){return j}).join(function(D){var j=D.append("line").styles(t).transition(function(X){return Kr(this,gO(X.line),!1)});return j.attr("className",function(X){if(!l)return"".concat(de.line.name," ").concat(X.className);var W=Pu(de.line.name,Re.line,l);if(X.className===de.lineFirst.name){var Y=Pu(de.lineFirst.name,Re.lineFirst,l);return"".concat(W," ").concat(Y)}if(X.className===de.lineSecond.name){var Y=Pu(de.lineSecond.name,Re.lineSecond,l);return"".concat(W," ").concat(Y)}return W}),j},function(D){return D.styles(t).transition(function(j){var X=j.line;return Kr(this,gO(X),n.update)})},function(D){return D.remove()}).transitions()};if(!i||!o)return b([{line:[[h+y,d+m],[g+w,v+B]],className:de.line.name}]);var E=I(o,2),x=E[0],S=E[1],C=g-h,F=v-d,M=I([h+C*x,d+F*x],2),T=M[0],O=M[1],_=I([h+C*S,d+F*S],2),Q=_[0],L=_[1],k=b([{line:[[h+y,d+m],[T,O]],className:de.lineFirst.name},{line:[[Q,L],[g+w,v+B]],className:de.lineSecond.name}]);return Kse(r,e),k}function jse(r,e,t,n){var i=t.showArrow,a=t.showTrunc,s=t.lineArrow,o=t.lineArrowOffset,A=t.lineArrowSize,l;if(e==="arc"?l=r.select(de.line.class):a?l=r.select(de.lineSecond.class):l=r.select(de.line.class),!i||!s||t.type==="arc"&&bU(t.startAngle,t.endAngle)){var c=l.node();c&&(c.style.markerEnd=void 0);return}var u=Wi(s);u.attr(n),XB(u,A),l.style("markerEnd",u).style("markerEndOffset",-o)}function $se(r,e,t){var n=e.type,i,a=ge(e,"line");return n==="linear"?i=Vse(r,e,gw(a,"arrow"),t):i=Gse(r,e,gw(a,"arrow"),t),jse(r,n,e,a),i}function Wse(r,e){return ab(r,e.gridDirection,e)}function EU(r){var e=r.type,t=r.gridCenter;return e==="linear"?t:t||r.center}function qse(r,e){var t=e.gridLength;return r.map(function(n,i){var a=n.value,s=I(pf(a,e),2),o=s[0],A=s[1],l=I(Pi(Wse(a,e),t),2),c=l[0],u=l[1];return{id:i,points:[[o,A],[o+c,A+u]]}})}function Yse(r,e){var t=e.gridControlAngles,n=EU(e);if(!n)throw new Error("grid center is not provide");if(r.length<2)throw new Error("Invalid grid data");if(!t||t.length===0)throw new Error("Invalid gridControlAngles");var i=I(n,2),a=i[0],s=i[1];return r.map(function(o,A){var l=o.value,c=I(pf(l,e),2),u=c[0],h=c[1],d=I([u-a,h-s],2),f=d[0],g=d[1],v=[];return t.forEach(function(p){var y=Po(p),m=I([Math.cos(y),Math.sin(y)],2),w=m[0],B=m[1],b=f*w-g*B+a,E=f*B+g*w+s;v.push([b,E])}),{points:v,id:A}})}function Xse(r,e,t,n){var i=t.classNamePrefix,a=ge(t,"grid"),s=a.type,o=a.areaFill,A=EU(t),l=ib(e,t.gridFilter),c=s==="segment"?qse(l,t):Yse(l,t),u=H(H({},a),{center:A,areaFill:ie(o)?l.map(function(h,d){return $n(o,[h,d,l])}):o,animate:n,data:c});return r.selectAll(de.grid.class).data([1]).join(function(h){var d=h.append(function(){return new Pse({style:u})}).attr("className",de.grid.name);return lr(d,de.grid,Re.grid,i),d},function(h){return h.transition(function(){return this.update(u)})},function(h){return h.remove()}).transitions()}var yw=function(){function r(e,t,n,i){this.set(e,t,n,i)}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),r.prototype.rotatedPoints=function(e,t,n){var i=this,a=i.x1,s=i.y1,o=i.x2,A=i.y2,l=Math.cos(e),c=Math.sin(e),u=t-t*l+n*c,h=n-t*c-n*l,d=[[l*a-c*A+u,c*a+l*A+h],[l*o-c*A+u,c*o+l*A+h],[l*a-c*s+u,c*a+l*s+h],[l*o-c*s+u,c*o+l*s+h]];return d},r.prototype.set=function(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},r.prototype.defined=function(e){return this[e]!==Number.MAX_VALUE&&this[e]!==-Number.MAX_VALUE},r}();function mw(r,e){var t=r.getEulerAngles()||0;r.setEulerAngles(0);var n=r.getBounds(),i=I(n.min,2),a=i[0],s=i[1],o=I(n.max,2),A=o[0],l=o[1],c=r.getBBox(),u=c.width,h=c.height,d=h,f=0,g=0,v=a,p=s,y=tU(r);if(y){d-=1.5;var m=y.style.textAlign,w=y.style.textBaseline;m==="center"?v=(a+A)/2:(m==="right"||m==="end")&&(v=A),w==="middle"?p=(s+l)/2:w==="bottom"&&(p=l)}var B=I(ln(e),4),b=B[0],E=b===void 0?0:b,x=B[1],S=x===void 0?0:x,C=B[2],F=C===void 0?E:C,M=B[3],T=M===void 0?S:M,O=new yw((f+=a)-T,(g+=s)-E,f+u+S,g+d+F);return r.setEulerAngles(t),O.rotatedPoints(Po(t),v,p)}function UA(r,e){return e[0]<=Math.max(r[0][0],r[1][0])&&e[0]<=Math.min(r[0][0],r[1][0])&&e[1]<=Math.max(r[0][1],r[1][1])&&e[1]<=Math.min(r[0][1],r[1][1])}function PA(r,e,t){var n=(e[1]-r[1])*(t[0]-e[0])-(e[0]-r[0])*(t[1]-e[1]);return n===0?0:n<0?2:1}function Zse(r,e){var t=PA(r[0],r[1],e[0]),n=PA(r[0],r[1],e[1]),i=PA(e[0],e[1],r[0]),a=PA(e[0],e[1],r[1]);return!!(t!==n&&i!==a||t===0&&UA(r,e[0])||n===0&&UA(r,e[1])||i===0&&UA(e,r[0])||a===0&&UA(e,r[1]))}function Jse(r,e){var t=r.length;if(t<3)return!1;var n=[e,[9999,e[1]]],i=0,a=0;do{var s=[r[a],r[(a+1)%t]];if(Zse(s,n)){if(PA(s[0],e,s[1])===0)return UA(s,e);i++}a=(a+1)%t}while(a!==0);return!!(i&1)}function eoe(r,e){return e.every(function(t){return Jse(r,t)})}function toe(r,e,t){var n=r.x1,i=r.x2,a=r.y1,s=r.y2,o=[[n,a],[i,a],[i,s],[n,s]],A=mw(e,t);return eoe(o,A)}function noe(r,e){var t=I(r,4),n=t[0],i=t[1],a=t[2],s=t[3],o=I(e,4),A=o[0],l=o[1],c=o[2],u=o[3],h=a-n,d=s-i,f=c-A,g=u-l,v=h*g-f*d;if(v===0)return!1;var p=v>0,y=n-A,m=i-l,w=h*m-d*y;if(w<0===p)return!1;var B=f*m-g*y;return!(B<0===p||w>v===p||B>v===p)}function roe(r,e){var t=[[r[0],r[1],r[2],r[3]],[r[2],r[3],r[4],r[5]],[r[4],r[5],r[6],r[7]],[r[6],r[7],r[0],r[1]]];return t.some(function(n){return noe(e,n)})}function ioe(r,e,t){var n,i,a=mw(r,t).flat(1),s=mw(e,t).flat(1),o=[[a[0],a[1],a[2],a[3]],[a[0],a[1],a[4],a[5]],[a[4],a[5],a[6],a[7]],[a[2],a[3],a[6],a[7]]];try{for(var A=Bl(o),l=A.next();!l.done;l=A.next()){var c=l.value;if(roe(s,c))return!0}}catch(u){n={error:u}}finally{try{l&&!l.done&&(i=A.return)&&i.call(A)}finally{if(n)throw n.error}}return!1}function aoe(r,e){var t=r.type,n=r.labelDirection,i=r.crossSize;if(!i)return!1;if(t==="arc"){var a=r.center,s=r.radius,o=I(a,2),A=o[0],l=o[1],c=n==="negative"?0:i,u=-s-c,h=s+c,d=I(ln(e),4),f=d[0],g=d[1],v=d[2],p=d[3];return new yw(A+u-p,l+u-f,A+h+g,l+h+v)}var y=I(r.startPos,2),m=y[0],w=y[1],B=I(r.endPos,2),b=B[0],E=B[1],x=I(BU(r)?[-e,0,e,0]:[0,e,0,-e],4),S=x[0],C=x[1],F=x[2],M=x[3],T=Zo(0,r),O=Pi(T,i),_=new yw(m,w,b,E);return _.x1+=M,_.y1+=S,_.x2+=C+O[0],_.y2+=F+O[1],_}function yf(r,e,t){var n,i,a=e.crossPadding,s=new Set,o=null,A=aoe(e,a),l=function(f){return A?toe(A,f):!0},c=function(f,g){return!f||!f.firstChild?!0:!ioe(f.firstChild,g.firstChild,ln(t))};try{for(var u=Bl(r),h=u.next();!h.done;h=u.next()){var d=h.value;l(d)?!o||c(o,d)?o=d:(s.add(o),s.add(d)):s.add(d)}}catch(f){n={error:f}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}return Array.from(s)}function Dm(r,e){return e===void 0&&(e={}),le(r)?0:typeof r=="number"?r:Math.floor(Zie(r,e))}function soe(r,e,t,n){if(!(r.length<=0)){var i=e.suffix,a=i===void 0?"...":i,s=e.minLength,o=e.maxLength,A=o===void 0?1/0:o,l=e.step,c=l===void 0?" ":l,u=e.margin,h=u===void 0?[0,0,0,0]:u,d=eU(n.getTextShape(r[0])),f=Dm(c,d),g=s?Dm(s,d):f,v=Dm(A,d);(le(v)||v===1/0)&&(v=Math.max.apply(null,r.map(function(b){return b.getBBox().width})));var p=r.slice(),y=I(h,4);y[0],y[1],y[2],y[3];for(var m=function(b){if(p.forEach(function(E){n.ellipsis(n.getTextShape(E),b,a)}),p=yf(r,t,h),p.length<1)return{value:void 0}},w=v;w>g+f;w-=f){var B=m(w);if(typeof B=="object")return B.value}}}var ooe={parity:function(r,e){var t=e.seq,n=t===void 0?2:t;return r.filter(function(i,a){return a%n?(Gr(i),!1):!0})}},Aoe=function(r){return r.filter(Xie)};function loe(r,e,t,n){var i=r.length,a=e.keepHeader,s=e.keepTail;if(!(i<=1||i===2&&a&&s)){var o=ooe.parity,A=function(m){return m.forEach(n.show),m},l=2,c=r.slice(),u=r.slice(),h=Math.min.apply(Math,oe([1],I(r.map(function(m){return m.getBBox().width})),!1));if(t.type==="linear"&&(sb(t)||BU(t))){var d=YM(r[0]).left,f=YM(r[i-1]).right,g=Math.abs(f-d)||1;l=Math.max(Math.floor(i*h/g),l)}var v,p;for(a&&(v=c.splice(0,1)[0]),s&&(p=c.splice(-1,1)[0],c.reverse()),A(c);l<r.length&&yf(Aoe(p?oe(oe([p],I(u),!1),[v],!1):oe([v],I(u),!1)),t,e==null?void 0:e.margin).length;){if(p&&!v&&l%2===0){var y=c.splice(0,1);y.forEach(n.hide)}else if(p&&v){var y=c.splice(0,1);y.forEach(n.hide)}u=o(A(c),{seq:l}),l++}}}function coe(r,e,t,n){var i,a,s=e.optionalAngles,o=s===void 0?[0,45,90]:s,A=e.margin,l=e.recoverWhenFailed,c=l===void 0?!0:l,u=r.map(function(p){return p.getLocalEulerAngles()}),h=function(){return yf(r,t,A).length<1},d=function(p){return r.forEach(function(y,m){var w=Array.isArray(p)?p[m]:p;n.rotate(y,+w)})};try{for(var f=Bl(o),g=f.next();!g.done;g=f.next()){var v=g.value;if(d(v),h())return}}catch(p){i={error:p}}finally{try{g&&!g.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}c&&d(u)}function uoe(r){var e=r.type,t=r.labelDirection;return e==="linear"&&sb(r)?t==="negative"?"bottom":"top":"middle"}function hoe(r,e,t,n,i){var a,s=e.maxLines,o=s===void 0?3:s,A=e.recoverWhenFailed,l=A===void 0?!0:A,c=e.margin,u=c===void 0?[0,0,0,0]:c,h=$n((a=e.wordWrapWidth)!==null&&a!==void 0?a:50,[i]),d=r.map(function(m){return m.attr("maxLines")||1}),f=Math.min.apply(Math,oe([],I(d),!1)),g=function(){return yf(r,t,u).length<1},v=uoe(t),p=function(m){return r.forEach(function(w,B){var b=Array.isArray(m)?m[B]:m;n.wrap(w,h,b,v)})};if(!(f>o)){if(t.type==="linear"&&sb(t)){if(p(o),g())return}else for(var y=f;y<=o;y++)if(p(y),g())return;l&&p(d)}}var doe=new Map([["hide",loe],["rotate",coe],["ellipsis",soe],["wrap",hoe]]);function foe(r,e,t){return e.labelOverlap.length<1?!1:t==="hide"?!qie(r[0]):t==="rotate"?!r.some(function(n){var i;return!!(!((i=n.attr("transform"))===null||i===void 0)&&i.includes("rotate"))}):t==="ellipsis"||t==="wrap"?r.filter(function(n){return n.querySelector("text")}).length>=1:!0}function goe(r,e,t,n){var i=e.labelOverlap,a=i===void 0?[]:i;a.length&&a.forEach(function(s){var o=s.type,A=doe.get(o);foe(r,e,o)&&(A==null||A(r,s,e,n,t))})}function voe(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=function(n){return n==="positive"?-1:1};return r.reduce(function(n,i){return n*t(i)},1)}function vO(r){for(var e=r;e<0;)e+=360;return Math.round(e%360)}function ww(r,e){var t=I(r,2),n=t[0],i=t[1],a=I(e,2),s=a[0],o=a[1],A=I([n*s+i*o,n*o-i*s],2),l=A[0],c=A[1];return Math.atan2(c,l)}function poe(r){var e=(r+360)%180;return tn(e,-90,90)||(e+=180),e}function yoe(r,e,t){var n,i=t.labelAlign,a=(n=e.style.transform)===null||n===void 0?void 0:n.includes("rotate");if(a)return e.getLocalEulerAngles();var s=0,o=Zo(r.value,t),A=vf(r.value,t);return i==="horizontal"?0:(i==="perpendicular"?s=ww([1,0],o):s=ww([A[0]<0?-1:1,0],A),poe(ZN(s)))}function xU(r,e,t){var n=t.type,i=t.labelAlign,a=Zo(r,t),s=vO(e),o=vO(ZN(ww([1,0],a))),A="center",l="middle";return n==="linear"?[90,270].includes(o)&&s===0?(A="center",l=a[1]===1?"top":"bottom"):!(o%180)&&[90,270].includes(s)?A="center":o===0?(tn(s,0,90,!1,!0)||tn(s,0,90)||tn(s,270,360))&&(A="start"):o===90?tn(s,0,90,!1,!0)?A="start":(tn(s,90,180)||tn(s,270,360))&&(A="end"):o===270?tn(s,0,90,!1,!0)?A="end":(tn(s,90,180)||tn(s,270,360))&&(A="start"):o===180&&(s===90?A="start":(tn(s,0,90)||tn(s,270,360))&&(A="end")):i==="parallel"?tn(o,0,180,!0)?l="top":l="bottom":i==="horizontal"?tn(o,90,270,!1)?A="end":(tn(o,270,360,!1)||tn(o,0,90))&&(A="start"):i==="perpendicular"&&(tn(o,90,270)?A="end":A="start"),{textAlign:A,textBaseline:l}}function moe(r,e,t){e.setLocalEulerAngles(r);var n=e.__data__.value,i=xU(n,r,t),a=e.querySelector(de.labelItem.class);a&&CU(a,i)}function pO(r,e,t){var n=t.showTick,i=t.tickLength,a=t.tickDirection,s=t.labelDirection,o=t.labelSpacing,A=e.indexOf(r),l=$n(o,[r,A,e]),c=I([Zo(r.value,t),voe(s,a)],2),u=c[0],h=c[1],d=h===1?$n(n?i:0,[r,A,e]):0,f=I(NA(Pi(u,l+d),pf(r.value,t)),2),g=f[0],v=f[1];return{x:g,y:v}}function woe(r,e,t,n){var i=n.labelFormatter,a=ie(i)?function(){return Wi($n(i,[r,e,t,Zo(r.value,n)]))}:function(){return Wi(r.label||"")};return a}function Boe(r,e,t,n){var i=n.labelRender,a=(nn(n,"endPos.0",400)-nn(n,"startPos.0",0))/t.length,s=ie(i)?$n(i,[r,e,t,Zo(r.value,n)]):r.label||"",o=Eae(s)||30;return function(){return eae(s,{width:a,height:o})}}var boe={html:["fill"],text:[]};function CU(r,e){["text","html"].includes(r.nodeName)&&r.attr(gw(e,boe[r.nodeName]))}function Eoe(r,e){goe(this.node().childNodes,r,e,{hide:Gr,show:Kl,rotate:function(t,n){moe(+n,t,r)},ellipsis:function(t,n,i){t&&fw(t,n||1/0,i)},wrap:function(t,n,i){t&&Jie(t,n,i)},getTextShape:function(t){return t.querySelector(de.labelItem.class)}})}function yO(r,e,t,n,i){var a=t.indexOf(e),s=i.labelRender,o=i.classNamePrefix,A=ae(r).append(s?Boe(e,a,t,i):woe(e,a,t,i)).attr("className",de.labelItem.name).node();lr(ae(A),de.labelItem,Re.labelItem,o);var l=I(qi(mU(n,[e,a,t])),2),c=l[0],u=l[1],h=u.transform,d=lt(u,["transform"]);iU(A,h);var f=yoe(e,A,i);if(A.getLocalEulerAngles()||A.setLocalEulerAngles(f),CU(A,H(H({},xU(e.value,f,i)),c)),A.nodeName==="html"){var g=A.getBBox(),v=A.style.x||0;A.attr("x",v-g.width/2)}return r.attr(d),A}function xoe(r,e,t,n,i){var a=t.classNamePrefix,s=ib(e,t.labelFilter),o=ge(t,"label"),A,l=r.selectAll(de.label.class).data(s,function(c,u){return u}).join(function(c){var u=c.append("g").attr("className",de.label.name).transition(function(h){yO(this,h,e,o,t);var d=pO(h,e,t),f=d.x,g=d.y;return this.style.transform="translate(".concat(f,", ").concat(g,")"),null});return lr(u,de.label,Re.label,a),u},function(c){return c.transition(function(u){var h=this.querySelector(de.labelItem.class),d=yO(this,u,e,o,t),f=Mse(h,d,n.update),g=pO(u,e,t),v=g.x,p=g.y,y=Kr(this,{transform:"translate(".concat(v,", ").concat(p,")")},n.update);return oe(oe([],I(f),!1),[y],!1)})},function(c){return A=c,c.transition(function(){var u=this,h=gf(this.childNodes[0],n.exit);return Xo(h,function(){return ae(u).remove()}),h}),A}).transitions();return Fse(l,function(){Eoe.call(r,t,i)}),l}function SU(r,e){return ab(r,e.tickDirection,e)}function Coe(r,e){var t=I(r,2),n=t[0],i=t[1];return[[0,0],[n*e,i*e]]}function Soe(r,e,t,n,i){var a=i.tickLength,s=I(Coe(n,$n(a,[r,e,t])),2),o=I(s[0],2),A=o[0],l=o[1],c=I(s[1],2),u=c[0],h=c[1];return{x1:A,x2:u,y1:l,y2:h}}function Foe(r,e,t,n,i){var a=i.tickFormatter,s=i.classNamePrefix,o=SU(e.value,i),A="line";ie(a)&&(A=function(){return $n(a,[e,t,n,o])});var l=r.append(A).attr("className",de.tickItem.name);return lr(l,de.tickItem,Re.tickItem,s),l}function Toe(r,e,t,n,i,a,s){var o=SU(r.value,a),A=Soe(r,e,t,o,a),l=A.x1,c=A.x2,u=A.y1,h=A.y2,d=I(qi(mU(s,[r,e,t,o])),2),f=d[0],g=d[1];n.node().nodeName==="line"&&n.styles(H({x1:l,x2:c,y1:u,y2:h},f)),i.attr(g),n.styles(f)}function mO(r,e,t,n,i,a){var s=Foe(ae(this),r,e,t,n);Toe(r,e,t,s,this,n,i);var o=I(pf(r.value,n),2),A=o[0],l=o[1];return Kr(this,{transform:"translate(".concat(A,", ").concat(l,")")},a)}function Moe(r,e,t,n){var i=t.classNamePrefix,a=ib(e,t.tickFilter),s=ge(t,"tick");return r.selectAll(de.tick.class).data(a,function(o){return o.id||o.label}).join(function(o){var A=o.append("g").attr("className",de.tick.name).transition(function(l,c){return mO.call(this,l,c,a,t,s,!1)});return lr(A,de.tick,Re.tick,i),A},function(o){return o.transition(function(A,l){return this.removeChildren(),mO.call(this,A,l,a,t,s,n.update)})},function(o){return o.transition(function(){var A=this,l=gf(this.childNodes[0],n.exit);return Xo(l,function(){return A.remove()}),l})}).transitions()}function Ooe(r,e,t){var n=t.titlePosition,i=n===void 0?"lb":n,a=t.titleSpacing,s=ff(i),o=r.node().getLocalBounds(),A=I(o.min,2),l=A[0],c=A[1],u=I(o.halfExtents,2),h=u[0],d=u[1],f=I(e.node().getLocalBounds().halfExtents,2),g=f[0],v=f[1],p=I([l+h,c+d],2),y=p[0],m=p[1],w=I(ln(a),4),B=w[0],b=w[1],E=w[2],x=w[3];if(["start","end"].includes(i)&&t.type==="linear"){var S=t.startPos,C=t.endPos,F=I(i==="start"?[S,C]:[C,S],2),M=F[0],T=F[1],O=rU([-T[0]+M[0],-T[1]+M[1]]),_=I(Pi(O,B),2),Q=_[0],L=_[1];return{x:M[0]+Q,y:M[1]+L}}return s.includes("t")&&(m-=d+v+B),s.includes("r")&&(y+=h+g+b),s.includes("l")&&(y-=h+g+x),s.includes("b")&&(m+=d+v+E),{x:y,y:m}}function Ioe(r,e,t){var n=r.getGeometryBounds().halfExtents,i=n[1]*2;if(e==="vertical"){if(t==="left")return"rotate(-90) translate(0, ".concat(i/2,")");if(t==="right")return"rotate(-90) translate(0, -".concat(i/2,")")}return""}function wO(r,e,t,n,i){var a=ge(n,"title"),s=I(qi(a),2),o=s[0],A=s[1],l=A.transform,c=A.transformOrigin,u=lt(A,["transform","transformOrigin"]);e.styles(u);var h=l||Ioe(r.node(),o.direction,o.position);r.styles(H(H({},o),{transformOrigin:c})),iU(r.node(),h);var d=Ooe(ae(t._offscreen||t.querySelector(de.mainGroup.class)),e,n),f=d.x,g=d.y,v=Kr(e.node(),{transform:"translate(".concat(f,", ").concat(g,")")},i);return v}function _oe(r,e,t,n){var i=t.titleText,a=t.classNamePrefix;return r.selectAll(de.title.class).data([{title:i}].filter(function(s){return!!s.title}),function(s,o){return s.title}).join(function(s){var o=s.append(function(){return Wi(i)}).attr("className",de.title.name).transition(function(){return wO(ae(this),r,e,t,n.enter)});return lr(o,de.title,Re.title,a),o},function(s){return s.transition(function(){return wO(ae(this),r,e,t,n.update)})},function(s){return s.remove()}).transitions()}function BO(r,e,t,n){var i=r.showLine,a=r.showTick,s=r.showLabel,o=r.classNamePrefix,A=e.maybeAppendByClassName(de.lineGroup,"g");lr(A,de.lineGroup,Re.lineGroup,o);var l=Vn(i,A,function(f){return $se(f,r,n)})||[],c=e.maybeAppendByClassName(de.tickGroup,"g");lr(c,de.tickGroup,Re.tickGroup,o);var u=Vn(a,c,function(f){return Moe(f,t,r,n)})||[],h=e.maybeAppendByClassName(de.labelGroup,"g");lr(h,de.labelGroup,Re.labelGroup,o);var d=Vn(s,h,function(f){return xoe(f,t,r,n,e.node())})||[];return oe(oe(oe([],I(l),!1),I(u),!1),I(d),!1).filter(function(f){return!!f})}var koe=function(r){be(e,r);function e(t){return r.call(this,t,rb)||this}return e.prototype.render=function(t,n,i){var a=this,s=t.titleText,o=t.data,A=t.animate,l=t.showTitle,c=t.showGrid,u=t.dataThreshold,h=t.truncRange,d=t.classNamePrefix,f=n.className||"axis";d?n.attr("className","".concat(f," ").concat(d,"axis")):n.className||n.attr("className","axis");var g=uae(o,u).filter(function(E){var x=E.value;return!(h&&x>h[0]&&x<h[1])}),v=dO(i===void 0?A:i),p=ae(n).maybeAppendByClassName(de.gridGroup,"g");lr(p,de.gridGroup,Re.gridGroup,d);var y=Vn(c,p,function(E){return Xse(E,g,t,v)})||[],m=ae(n).maybeAppendByClassName(de.mainGroup,"g");lr(m,de.mainGroup,Re.mainGroup,d),s&&(!this.initialized&&v.enter||this.initialized&&v.update)&&BO(t,ae(this.offscreenGroup),g,dO(!1));var w=BO(t,ae(m.node()),g,v),B=ae(n).maybeAppendByClassName(de.titleGroup,"g");lr(B,de.titleGroup,Re.titleGroup,d);var b=Vn(l,B,function(E){return _oe(E,a,t,v)})||[];return oe(oe(oe([],I(y),!1),I(w),!1),I(b),!1).flat().filter(function(E){return!!E})},e}(yt);function xn(r,e,t){return t?"".concat(r," ").concat(t,"legend-").concat(e):r}function Loe(r,e,t){var n=1.4,i=n*t;return[["M",r-t,e-i],["L",r+t,e-i],["L",r+t,e+i],["L",r-t,e+i],["Z"]]}var FU=1.4,TU=.4;function Qoe(r,e,t){var n=t,i=n*FU,a=n/2,s=n/6,o=r+i*TU;return[["M",r,e],["L",o,e+a],["L",r+i,e+a],["L",r+i,e-a],["L",o,e-a],["Z"],["M",o,e+s],["L",r+i-2,e+s],["M",o,e-s],["L",r+i-2,e-s]]}function Noe(r,e,t){var n=t,i=n*FU,a=n/2,s=n/6,o=e+i*TU;return[["M",r,e],["L",r-a,o],["L",r-a,e+i],["L",r+a,e+i],["L",r+a,o],["Z"],["M",r-s,o],["L",r-s,e+i-2],["M",r+s,o],["L",r+s,e+i-2]]}Ge.registerSymbol("hiddenHandle",Loe);Ge.registerSymbol("verticalHandle",Qoe);Ge.registerSymbol("horizontalHandle",Noe);function Bw(r,e,t){return r===void 0&&(r="horizontal"),r==="horizontal"?e:t}var Cn={title:"title",item:"item",marker:"marker",label:"label",value:"value",focusIcon:"focus-icon",background:"background",handleMarker:"handle-marker",handleLabel:"handle-label",prevBtn:"prev-btn",nextBtn:"next-btn",pageInfo:"page-info"},es=Xr({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),MU={showLabel:!0,formatter:function(r){return r.toString()},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0};(function(r){be(e,r);function e(t){return r.call(this,t,MU)||this}return e.prototype.render=function(t,n){var i=ae(n).maybeAppendByClassName(es.markerGroup,"g");this.renderMarker(i);var a=ae(n).maybeAppendByClassName(es.labelGroup,"g");this.renderLabel(a)},e.prototype.renderMarker=function(t){var n=this,i=this.attributes,a=i.orientation,s=i.classNamePrefix,o=i.markerSymbol,A=o===void 0?Bw(a,"horizontalHandle","verticalHandle"):o;Vn(!!A,t,function(l){var c=ge(n.attributes,"marker"),u=H({symbol:A},c),h=xn(es.marker.name,Cn.handleMarker,s);if(n.marker=l.maybeAppendByClassName(es.marker,function(){return new Ge({style:u,className:h})}).update(u),s){var d=n.marker.node().querySelector(".marker");if(d){var f=d.getAttribute("class")||"",g=f.split(" ")[0],v=xn(g,Cn.handleMarker,s);d.setAttribute("class",v)}}})},e.prototype.renderLabel=function(t){var n=this,i=this.attributes,a=i.showLabel,s=i.orientation,o=i.spacing,A=o===void 0?0:o,l=i.formatter,c=i.classNamePrefix;Vn(a,t,function(u){var h,d=ge(n.attributes,"label"),f=d.text,g=lt(d,["text"]),v=((h=u.select(es.marker.class))===null||h===void 0?void 0:h.node().getBBox())||{},p=v.width,y=p===void 0?0:p,m=v.height,w=m===void 0?0:m,B=I(Bw(s,[0,w+A,"center","top"],[y+A,0,"start","middle"]),4),b=B[0],E=B[1],x=B[2],S=B[3],C=xn(es.label.name,Cn.handleLabel,c);u.maybeAppendByClassName(es.label,"text").attr("className",C).styles(H(H({},g),{x:b,y:E,text:l(f).toString(),textAlign:x,textBaseline:S}))})},e})(yt);var OU={showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12},Uoe=Rt({},OU,{});Rt({},OU,vo(MU,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"});var ts=Xr({title:"title",html:"html",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend"),Hm=Xr({text:"text"},"title");function Poe(r,e){var t=r.attributes,n=t.position,i=t.spacing,a=t.inset,s=t.text,o=r.getBBox(),A=e.getBBox(),l=ff(n),c=I(ln(s?i:0),4),u=c[0],h=c[1],d=c[2],f=c[3],g=I(ln(a),4),v=g[0],p=g[1],y=g[2],m=g[3],w=I([f+h,u+d],2),B=w[0],b=w[1],E=I([m+p,v+y],2),x=E[0],S=E[1];if(l[0]==="l")return new Mn(o.x,o.y,A.width+o.width+B+x,Math.max(A.height+S,o.height));if(l[0]==="t")return new Mn(o.x,o.y,Math.max(A.width+x,o.width),A.height+o.height+b+S);var C=I([e.attributes.width||A.width,e.attributes.height||A.height],2),F=C[0],M=C[1];return new Mn(A.x,A.y,F+o.width+B+x,M+o.height+b+S)}function Roe(r,e){var t=Object.entries(e).reduce(function(n,i){var a=I(i,2),s=a[0],o=a[1],A=r.node().attr(s);return A||(n[s]=o),n},{});r.styles(t)}function Doe(r){var e,t,n,i,a=r,s=a.width,o=a.height,A=a.position,l=I([+s/2,+o/2],2),c=l[0],u=l[1],h=I([+c,+u,"center","middle"],4),d=h[0],f=h[1],g=h[2],v=h[3],p=ff(A);return p.includes("l")&&(e=I([0,"start"],2),d=e[0],g=e[1]),p.includes("r")&&(t=I([+s,"end"],2),d=t[0],g=t[1]),p.includes("t")&&(n=I([0,"top"],2),f=n[0],v=n[1]),p.includes("b")&&(i=I([+o,"bottom"],2),f=i[0],v=i[1]),{x:d,y:f,textAlign:g,textBaseline:v}}var Hoe=function(r){be(e,r);function e(t){return r.call(this,t,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"})||this}return e.prototype.getAvailableSpace=function(){var t=this,n=this.attributes,i=n.width,a=n.height,s=n.position,o=n.spacing,A=n.inset,l=t.querySelector(Hm.text.class);if(!l)return new Mn(0,0,+i,+a);var c=l.getBBox(),u=c.width,h=c.height,d=I(ln(o),4),f=d[0],g=d[1],v=d[2],p=d[3],y=I([0,0,+i,+a],4),m=y[0],w=y[1],B=y[2],b=y[3],E=ff(s);if(E.includes("i"))return new Mn(m,w,B,b);E.forEach(function(Q,L){var k,U,D,j;Q==="t"&&(k=I(L===0?[h+v,+a-h-v]:[0,+a],2),w=k[0],b=k[1]),Q==="r"&&(U=I([+i-u-p],1),B=U[0]),Q==="b"&&(D=I([+a-h-f],1),b=D[0]),Q==="l"&&(j=I(L===0?[u+g,+i-u-g]:[0,+i],2),m=j[0],B=j[1])});var x=I(ln(A),4),S=x[0],C=x[1],F=x[2],M=x[3],T=I([M+C,S+F],2),O=T[0],_=T[1];return new Mn(m+M,w+S,B-O,b-_)},e.prototype.getBBox=function(){return this.title?this.title.getBBox():new Mn(0,0,0,0)},e.prototype.render=function(t,n){var i=this;t.width,t.height,t.position,t.spacing;var a=t.classNamePrefix,s=lt(t,["width","height","position","spacing","classNamePrefix"]),o=I(qi(s),1),A=o[0],l=Doe(t),c=l.x,u=l.y,h=l.textAlign,d=l.textBaseline;Vn(!!s.text,ae(n),function(f){var g=xn(Hm.text.name,Cn.title,a);i.title=f.maybeAppendByClassName(Hm.text,"text").attr("className",g).styles(A).call(Roe,{x:c,y:u,textAlign:h,textBaseline:d}).node()})},e}(yt),bn=Xr({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),Goe=function(r){be(e,r);function e(t){var n=r.call(this,t,{x:0,y:0,animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonD:Gae(0,0,6),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(i,a){return"".concat(i,"/").concat(a)},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return n.playState="idle",n.contentGroup=n.appendChild(new $t({class:bn.contentGroup.name})),n.playWindow=n.contentGroup.appendChild(new $t({class:bn.playWindow.name})),n.innerCurrPage=n.defaultPage,n}return Object.defineProperty(e.prototype,"defaultPage",{get:function(){var t=this.attributes.defaultPage;return vt(t,0,Math.max(this.pageViews.length-1,0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageViews",{get:function(){return this.playWindow.children},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageShape",{get:function(){var t=this.pageViews,n=I(bae(t.map(function(u){var h=u.getBBox(),d=h.width,f=h.height;return[d,f]})).map(function(u){return Math.max.apply(Math,oe([],I(u),!1))}),2),i=n[0],a=n[1],s=this.attributes,o=s.pageWidth,A=o===void 0?i:o,l=s.pageHeight,c=l===void 0?a:l;return{pageWidth:A,pageHeight:c}},enumerable:!1,configurable:!0}),e.prototype.getContainer=function(){return this.playWindow},Object.defineProperty(e.prototype,"totalPages",{get:function(){return this.pageViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currPage",{get:function(){return this.innerCurrPage},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var t=r.prototype.getBBox.call(this),n=t.x,i=t.y,a=this.controllerShape,s=this.pageShape,o=s.pageWidth,A=s.pageHeight;return new Mn(n,i,o+a.width,A)},e.prototype.goTo=function(t){var n=this,i=this.attributes.animate,a=this,s=a.currPage,o=a.playState,A=a.playWindow,l=a.pageViews;if(o!=="idle"||t<0||l.length<=0||t>=l.length)return null;l[s].setLocalPosition(0,0),this.prepareFollowingPage(t);var c=I(this.getFollowingPageDiff(t),2),u=c[0],h=c[1];this.playState="running";var d=fU(A,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-u,", ").concat(-h,")")}],i);return Xo(d,function(){n.innerCurrPage=t,n.playState="idle",n.setVisiblePages([t]),n.updatePageInfo()}),d},e.prototype.prev=function(){var t=this.attributes.loop,n=this.pageViews.length,i=this.currPage;if(!t&&i<=0)return null;var a=t?(i-1+n)%n:vt(i-1,0,n);return this.goTo(a)},e.prototype.next=function(){var t=this.attributes.loop,n=this.pageViews.length,i=this.currPage;if(!t&&i>=n-1)return null;var a=t?(i+1)%n:vt(i+1,0,n);return this.goTo(a)},e.prototype.renderClipPath=function(t){var n=this.pageShape,i=n.pageWidth,a=n.pageHeight;if(!i||!a){this.contentGroup.style.clipPath=void 0;return}this.clipPath=t.maybeAppendByClassName(bn.clipPath,"rect").styles({width:i,height:a}),this.contentGroup.attr("clipPath",this.clipPath.node())},e.prototype.setVisiblePages=function(t){this.playWindow.children.forEach(function(n,i){t.includes(i)?Kl(n):Gr(n)})},e.prototype.adjustControllerLayout=function(){var t=this,n=t.prevBtnGroup,i=t.nextBtnGroup,a=t.pageInfoGroup,s=this.attributes,o=s.orientation,A=s.controllerPadding,l=a.getBBox(),c=l.width;l.height;var u=I(o==="horizontal"?[-180,0]:[-90,90],2),h=u[0],d=u[1];n.setLocalEulerAngles(h),i.setLocalEulerAngles(d);var f=n.getBBox(),g=f.width,v=f.height,p=i.getBBox(),y=p.width,m=p.height,w=Math.max(g,c,y),B=o==="horizontal"?{offset:[[0,0],[g/2+A,0],[g+c+A*2,0]],textAlign:"start"}:{offset:[[w/2,-v-A],[w/2,0],[w/2,m+A]],textAlign:"center"},b=I(B.offset,3),E=I(b[0],2),x=E[0],S=E[1],C=I(b[1],2),F=C[0],M=C[1],T=I(b[2],2),O=T[0],_=T[1],Q=B.textAlign,L=a.querySelector("text");L&&(L.style.textAlign=Q),n.setLocalPosition(x,S),a.setLocalPosition(F,M),i.setLocalPosition(O,_)},e.prototype.updatePageInfo=function(){var t,n=this,i=n.currPage,a=n.pageViews,s=n.attributes.formatter;a.length<2||((t=this.pageInfoGroup.querySelector(bn.pageInfo.class))===null||t===void 0||t.attr("text",s(i+1,a.length)),this.adjustControllerLayout())},e.prototype.getFollowingPageDiff=function(t){var n=this.currPage;if(n===t)return[0,0];var i=this.attributes.orientation,a=this.pageShape,s=a.pageWidth,o=a.pageHeight,A=t<n?-1:1;return i==="horizontal"?[A*s,0]:[0,A*o]},e.prototype.prepareFollowingPage=function(t){var n=this,i=n.currPage,a=n.pageViews;if(this.setVisiblePages([t,i]),t!==i){var s=I(this.getFollowingPageDiff(t),2),o=s[0],A=s[1];a[t].setLocalPosition(o,A)}},e.prototype.renderController=function(t){var n=this,i=this.attributes,a=i.controllerSpacing,s=i.classNamePrefix,o=s===void 0?"":s,A=this.pageShape,l=A.pageWidth,c=A.pageHeight,u=this.pageViews.length>=2,h=t.maybeAppendByClassName(bn.controller,"g");if(df(h.node(),u),!!u){var d=ge(this.attributes,"button"),f=ge(this.attributes,"pageNum"),g=I(qi(d),2),v=g[0],p=g[1],y=v.size,m=lt(v,["size"]),w=!h.select(bn.prevBtnGroup.class).node(),B=h.maybeAppendByClassName(bn.prevBtnGroup,"g").styles(p);this.prevBtnGroup=B.node();var b=B.maybeAppendByClassName(bn.prevBtn,"path");if(o){var E=xn(bn.prevBtn.name,Cn.prevBtn,o);b.node().setAttribute("class",E)}var x=h.maybeAppendByClassName(bn.nextBtnGroup,"g").styles(p);this.nextBtnGroup=x.node();var S=x.maybeAppendByClassName(bn.nextBtn,"path");if(o){var C=xn(bn.nextBtn.name,Cn.nextBtn,o);S.node().setAttribute("class",C)}[b,S].forEach(function(O){O.styles(H(H({},m),{transformOrigin:"center"})),XB(O.node(),y)});var F=h.maybeAppendByClassName(bn.pageInfoGroup,"g");this.pageInfoGroup=F.node();var M=F.maybeAppendByClassName(bn.pageInfo,"text");if(M.styles(f),o){var T=xn(bn.pageInfo.name,Cn.pageInfo,o);M.node().setAttribute("class",T)}this.updatePageInfo(),h.node().setLocalPosition(l+a,c/2),w&&(this.prevBtnGroup.addEventListener("click",function(){n.prev()}),this.nextBtnGroup.addEventListener("click",function(){n.next()}))}},e.prototype.render=function(t,n){var i=t.x,a=i===void 0?0:i,s=t.y,o=s===void 0?0:s;this.attr("transform","translate(".concat(a,", ").concat(o,")"));var A=ae(n);this.renderClipPath(A),this.renderController(A),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage)},e.prototype.bindEvents=function(){var t=this,n=wl(function(){return t.render(t.attributes,t)},50);this.playWindow.addEventListener(Me.INSERTED,n),this.playWindow.addEventListener(Me.REMOVED,n)},e}(yt),Se,Koe="component-poptip",we={CONTAINER:"component-poptip",ARROW:"component-poptip-arrow",TEXT:"component-poptip-text"},bO=(Se={},Se[".".concat(we.CONTAINER)]={visibility:"visible",position:"absolute","background-color":"rgba(0, 0, 0)","box-shadow":"0px 0px 10px #aeaeae","border-radius":"3px",color:"#fff",opacity:.8,"font-size":"12px",padding:"4px 6px",display:"flex","justify-content":"center","align-items":"center","z-index":8,transition:"visibility 50ms"},Se[".".concat(we.TEXT)]={"text-align":"center"},Se[".".concat(we.CONTAINER,"[data-position='top']")]={transform:"translate(-50%, -100%)"},Se[".".concat(we.CONTAINER,"[data-position='left']")]={transform:"translate(-100%, -50%)"},Se[".".concat(we.CONTAINER,"[data-position='right']")]={transform:"translate(0, -50%)"},Se[".".concat(we.CONTAINER,"[data-position='bottom']")]={transform:"translate(-50%, 0)"},Se[".".concat(we.CONTAINER,"[data-position='top-left']")]={transform:"translate(0,-100%)"},Se[".".concat(we.CONTAINER,"[data-position='top-right']")]={transform:"translate(-100%,-100%)"},Se[".".concat(we.CONTAINER,"[data-position='left-top']")]={transform:"translate(-100%, 0)"},Se[".".concat(we.CONTAINER,"[data-position='left-bottom']")]={transform:"translate(-100%, -100%)"},Se[".".concat(we.CONTAINER,"[data-position='right-top']")]={transform:"translate(0, 0)"},Se[".".concat(we.CONTAINER,"[data-position='right-bottom']")]={transform:"translate(0, -100%)"},Se[".".concat(we.CONTAINER,"[data-position='bottom-left']")]={transform:"translate(0, 0)"},Se[".".concat(we.CONTAINER,"[data-position='bottom-right']")]={transform:"translate(-100%, 0)"},Se[".".concat(we.ARROW)]={width:"4px",height:"4px",transform:"rotate(45deg)","background-color":"rgba(0, 0, 0)",position:"absolute","z-index":-1},Se[".".concat(we.CONTAINER,"[data-position='top']")]={transform:"translate(-50%, calc(-100% - 5px))"},Se["[data-position='top'] .".concat(we.ARROW)]={bottom:"-2px"},Se[".".concat(we.CONTAINER,"[data-position='left']")]={transform:"translate(calc(-100% - 5px), -50%)"},Se["[data-position='left'] .".concat(we.ARROW)]={right:"-2px"},Se[".".concat(we.CONTAINER,"[data-position='right']")]={transform:"translate(5px, -50%)"},Se["[data-position='right'] .".concat(we.ARROW)]={left:"-2px"},Se[".".concat(we.CONTAINER,"[data-position='bottom']")]={transform:"translate(-50%, 5px)"},Se["[data-position='bottom'] .".concat(we.ARROW)]={top:"-2px"},Se[".".concat(we.CONTAINER,"[data-position='top-left']")]={transform:"translate(0, calc(-100% - 5px))"},Se["[data-position='top-left'] .".concat(we.ARROW)]={left:"10px",bottom:"-2px"},Se[".".concat(we.CONTAINER,"[data-position='top-right']")]={transform:"translate(-100%, calc(-100% - 5px))"},Se["[data-position='top-right'] .".concat(we.ARROW)]={right:"10px",bottom:"-2px"},Se[".".concat(we.CONTAINER,"[data-position='left-top']")]={transform:"translate(calc(-100% - 5px), 0)"},Se["[data-position='left-top'] .".concat(we.ARROW)]={right:"-2px",top:"8px"},Se[".".concat(we.CONTAINER,"[data-position='left-bottom']")]={transform:"translate(calc(-100% - 5px), -100%)"},Se["[data-position='left-bottom'] .".concat(we.ARROW)]={right:"-2px",bottom:"8px"},Se[".".concat(we.CONTAINER,"[data-position='right-top']")]={transform:"translate(5px, 0)"},Se["[data-position='right-top'] .".concat(we.ARROW)]={left:"-2px",top:"8px"},Se[".".concat(we.CONTAINER,"[data-position='right-bottom']")]={transform:"translate(5px, -100%)"},Se["[data-position='right-bottom'] .".concat(we.ARROW)]={left:"-2px",bottom:"8px"},Se[".".concat(we.CONTAINER,"[data-position='bottom-left']")]={transform:"translate(0, 5px)"},Se["[data-position='bottom-left'] .".concat(we.ARROW)]={top:"-2px",left:"8px"},Se[".".concat(we.CONTAINER,"[data-position='bottom-right']")]={transform:"translate(-100%, 5px)"},Se["[data-position='bottom-right'] .".concat(we.ARROW)]={top:"-2px",right:"8px"},Se),zoe=void 0;function Voe(r,e,t,n,i,a){if(i===void 0&&(i=!1),a===void 0&&(a=!1),a)return[r,e];var s=t.getBoundingClientRect(),o=s.x,A=s.y,l=s.width,c=s.height;switch(n){case"top":return i?[o+l/2,A]:[r,A];case"left":return i?[o,A+c/2]:[o,e];case"bottom":return i?[o+l/2,A+c]:[r,A+c];case"right":return i?[o+l,A+c/2]:[o+l,e];case"top-right":case"right-top":return[o+l,A];case"left-bottom":case"bottom-left":return[o,A+c];case"right-bottom":case"bottom-right":return[o+l,A+c];case"top-left":case"left-top":default:return[o,A]}}var joe=function(r){var e;return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e||(e=r.apply(zoe,t)),e}};function $oe(r){var e=r&&document.getElementById(r);return e||(e=document.createElement("div"),e.setAttribute("id",r),document.body.appendChild(e)),e}function Woe(r){var e=joe($oe)(r);return e}var qoe=function(r){be(e,r);function e(t){var n=r.call(this,on({style:{id:Koe}},e.defaultOptions,t))||this;return n.visibility="visible",n.map=new Map,n.domStyles="",n.initShape(),n.render(n.attributes,n),n}return Object.defineProperty(e.prototype,"visible",{get:function(){return this.visibility==="visible"},enumerable:!1,configurable:!0}),e.prototype.render=function(t,n){this.visibility=this.style.visibility,this.updatePoptipElement()},e.prototype.update=function(t){this.attr(on({},this.style,t)),this.render(this.attributes,this)},e.prototype.bind=function(t,n){var i=this;if(t){var a=this.style.text,s=function(A){var l=t,c=i.style,u=a;if(n){var h=typeof n=="function"?n.call(null,A):n,d=h.html,f=h.target,g=lt(h,["html","target"]);c=oR({},i.style,g),(f||f===!1)&&(l=f),typeof d=="string"&&(u=d)}var v=c.position,p=c.arrowPointAtCenter,y=c.follow,m=c.offset;if(l){var w=A,B=w.clientX,b=w.clientY,E=I(Voe(B,b,l,v,p,y),2),x=E[0],S=E[1];i.showTip(x,S,{text:u,position:v,offset:m})}else i.hideTip()},o=function(){i.hideTip()};t.addEventListener("mousemove",s),t.addEventListener("mouseleave",o),this.map.set(t,[s,o])}},e.prototype.unbind=function(t){if(this.map.has(t)){var n=I(this.map.get(t)||[],2),i=n[0],a=n[1];i&&t.removeEventListener("mousemove",i),a&&t.removeEventListener("mouseleave",a),this.map.delete(t)}},e.prototype.clear=function(){this.container.innerHTML=""},e.prototype.destroy=function(){var t=this,n;oe([],I(this.map.keys()),!1).forEach(function(i){return t.unbind(i)}),(n=this.container)===null||n===void 0||n.remove(),r.prototype.destroy.call(this)},e.prototype.showTip=function(t,n,i){var a=nn(i,"text");if(!(a&&typeof a!="string")&&(this.applyStyles(),t&&n&&i)){var s=i.offset,o=i.position;if(o&&this.container.setAttribute("data-position",o),this.setOffsetPosition(t,n,s),typeof a=="string"){var A=this.container.querySelector(".".concat(we.TEXT));A&&(A.innerHTML=a)}this.visibility="visible",this.container.style.visibility="visible"}},e.prototype.hideTip=function(){this.visibility="hidden",this.container.style.visibility="hidden"},e.prototype.getContainer=function(){return this.container},e.prototype.getClassName=function(){var t=this.style.containerClassName;return"".concat(we.CONTAINER).concat(t?" ".concat(t):"")},e.prototype.initShape=function(){var t=this,n=this.style.id;this.container=Woe(n),this.container.className=this.getClassName(),this.container.addEventListener("mousemove",function(){return t.showTip()}),this.container.addEventListener("mouseleave",function(){return t.hideTip()})},e.prototype.updatePoptipElement=function(){var t=this.container;this.clear();var n=this.style,i=n.id,a=n.template,s=n.text;this.container.setAttribute("id",i),this.container.className=this.getClassName();var o='<span class="'.concat(we.ARROW,'"></span>');t.innerHTML=o,_e(a)?t.innerHTML+=a:a&&sR(a)&&t.appendChild(a),s&&(t.getElementsByClassName(we.TEXT)[0].textContent=s),this.applyStyles(),this.container.style.visibility=this.visibility},e.prototype.applyStyles=function(){var t=Rt({},bO,this.style.domStyles),n=Object.entries(t).reduce(function(a,s){var o=I(s,2),A=o[0],l=o[1],c=Object.entries(l).reduce(function(u,h){var d=I(h,2),f=d[0],g=d[1];return"".concat(u).concat(f,": ").concat(g,";")},"");return"".concat(a).concat(A,"{").concat(c,"}")},"");if(this.domStyles!==n){this.domStyles=n;var i=this.container.querySelector("style");i&&this.container.removeChild(i),i=document.createElement("style"),i.innerHTML=n,this.container.appendChild(i)}},e.prototype.setOffsetPosition=function(t,n,i){i===void 0&&(i=this.style.offset);var a=I(i,2),s=a[0],o=s===void 0?0:s,A=a[1],l=A===void 0?0:A;this.container.style.left="".concat(t+o,"px"),this.container.style.top="".concat(n+l,"px")},e.tag="poptip",e.defaultOptions={style:{x:0,y:0,width:0,height:0,target:null,visibility:"hidden",text:"",position:"top",follow:!1,offset:[0,0],domStyles:bO,template:'<div class="'.concat(we.TEXT,'"></div>')}},e}(yt),_t=Xr({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",focusGroup:"focus-group",focus:"focus",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item"),Yoe={offset:[0,20],domStyles:{".component-poptip":{opacity:"1",padding:"8px 12px",background:"#fff",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)"},".component-poptip-arrow":{display:"none"},".component-poptip-text":{color:"#000",lineHeight:"20px"}}};function Xoe(r){var e=r.querySelector(_t.marker.class);return e?e.style:{}}var Zoe=function(r){be(e,r);function e(t,n){var i=r.call(this,t,{span:[1,1],marker:function(){return new yi({style:{r:6}})},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this;return i.keyFields={},i.keyFields=n||{},i}return Object.defineProperty(e.prototype,"showValue",{get:function(){var t=this.attributes.valueText;return t?typeof t=="string"||typeof t=="number"?t!=="":typeof t=="function"?!0:t.attr("text")!=="":!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actualSpace",{get:function(){var t=this.labelGroup,n=this.valueGroup,i=this.attributes,a=i.markerSize,s=i.focus,o=i.focusMarkerSize,A=t.node().getBBox(),l=A.width,c=A.height,u=n.node().getBBox(),h=u.width,d=u.height,f=s?o??12:0;return{markerWidth:a,labelWidth:l,valueWidth:h,focusWidth:f,height:Math.max(a,c,d)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"span",{get:function(){var t=this.attributes.span;if(!t)return[1,1];var n=I(ln(t),2),i=n[0],a=n[1],s=this.showValue?a:0,o=i+s;return[i/o,s/o]},enumerable:!1,configurable:!0}),e.prototype.setAttribute=function(t,n){r.prototype.setAttribute.call(this,t,n)},Object.defineProperty(e.prototype,"shape",{get:function(){var t,n=this.attributes,i=n.markerSize,a=n.width,s=this.actualSpace,o=s.markerWidth,A=s.focusWidth,l=s.height,c=this.actualSpace,u=c.labelWidth,h=c.valueWidth,d=I(this.spacing,3),f=d[0],g=d[1],v=d[2];if(a){var p=a-i-f-g-A-v,y=I(this.span,2),m=y[0],w=y[1];t=I([m*p,w*p],2),u=t[0],h=t[1]}var B=o+u+h+f+g+A+v;return{width:B,height:l,markerWidth:o,labelWidth:u,valueWidth:h,focusWidth:A}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spacing",{get:function(){var t=this.attributes,n=t.spacing,i=t.focus;if(!n)return[0,0,0];var a=I(ln(n),3),s=a[0],o=a[1],A=a[2];return[s,this.showValue?o:0,i?A:0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layout",{get:function(){var t=this.shape,n=t.markerWidth,i=t.labelWidth,a=t.valueWidth,s=t.focusWidth,o=t.width,A=t.height,l=I(this.spacing,3),c=l[0],u=l[1],h=l[2];return{height:A,width:o,markerWidth:n,labelWidth:i,valueWidth:a,focusWidth:s,position:[n/2,n+c,n+i+c+u,n+i+a+c+u+h+s/2]}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleSize",{get:function(){var t=Xoe(this.markerGroup.node()),n=this.attributes,i=n.markerSize,a=n.markerStrokeWidth,s=a===void 0?t.strokeWidth:a,o=n.markerLineWidth,A=o===void 0?t.lineWidth:o,l=n.markerStroke,c=l===void 0?t.stroke:l,u=+(s||A||(c?1:0))*Math.sqrt(2),h=this.markerGroup.node().getBBox(),d=h.width,f=h.height;return(1-u/Math.max(d,f))*i},enumerable:!1,configurable:!0}),e.prototype.renderMarker=function(t){var n=this,i=this.attributes,a=i.marker,s=i.classNamePrefix,o=ge(this.attributes,"marker");this.markerGroup=t.maybeAppendByClassName(_t.markerGroup,"g").style("zIndex",0),Vn(!!a,this.markerGroup,function(){var A,l=n.markerGroup.node(),c=(A=l.childNodes)===null||A===void 0?void 0:A[0],u=xn(_t.marker.name,Cn.marker,s),h=typeof a=="string"?new Ge({style:{symbol:a},className:u}):a();if(c)if(h.nodeName===c.nodeName)c instanceof Ge?c.update(H(H({},o),{symbol:a})):(pae(c,h),ae(c).styles(o));else{if(c.remove(),!(h instanceof Ge)){var f=xn(_t.marker.name,Cn.marker,s);h.className=f}ae(h).styles(o),l.appendChild(h)}else{if(!(h instanceof Ge)){var d=xn(_t.marker.name,Cn.marker,s);h.className=d,ae(h).styles(o)}l.appendChild(h)}n.markerGroup.node().scale(1/n.markerGroup.node().getScale()[0]);var g=XB(n.markerGroup.node(),n.scaleSize);n.markerGroup.node().style._transform="scale(".concat(g,")")})},e.prototype.renderLabel=function(t){var n=ge(this.attributes,"label"),i=n.text,a=lt(n,["text"]),s=this.attributes.classNamePrefix;this.labelGroup=t.maybeAppendByClassName(_t.labelGroup,"g").style("zIndex",0);var o=xn(_t.label.name,Cn.label,s),A=this.labelGroup.maybeAppendByClassName(_t.label,function(){return Wi(i)});A.node().setAttribute("class",o),A.styles(a)},e.prototype.renderValue=function(t){var n=this,i=ge(this.attributes,"value"),a=i.text,s=lt(i,["text"]),o=this.attributes.classNamePrefix;this.valueGroup=t.maybeAppendByClassName(_t.valueGroup,"g").style("zIndex",0),Vn(this.showValue,this.valueGroup,function(){var A=xn(_t.value.name,Cn.value,o),l=n.valueGroup.maybeAppendByClassName(_t.value,function(){return Wi(a)});l.node().setAttribute("class",A),l.styles(s)})},e.prototype.createPoptip=function(){var t=this.attributes.poptip,n=t||{};n.render;var i=lt(n,["render"]),a=new qoe({style:Rt(Yoe,i)});return this.poptipGroup=a,a},e.prototype.bindPoptip=function(t){var n=this,i=this.attributes.poptip;if(i){var a=this.poptipGroup||this.createPoptip();a.bind(t,function(){var s=n.attributes,o=s.labelText,A=s.valueText,l=s.markerFill,c=typeof o=="string"?o:o==null?void 0:o.attr("text"),u=typeof A=="string"?A:A==null?void 0:A.attr("text");if(typeof i.render=="function")return{html:i.render(H(H({},n.keyFields),{label:c,value:u,color:l}))};var h="";return(typeof c=="string"||typeof c=="number")&&(h+='<div class="component-poptip-label">'.concat(c,"</div>")),(typeof u=="string"||typeof u=="number")&&(h+='<div class="component-poptip-value">'.concat(u,"</div>")),{html:h}})}},e.prototype.renderFocus=function(t){var n=this,i=this.attributes,a=i.focus,s=i.focusMarkerSize,o=i.classNamePrefix,A={x:0,y:0,size:s,opacity:.6,symbol:"focus",stroke:"#aaaaaa",lineWidth:1};he(a)||(this.focusGroup=t.maybeAppendByClassName(_t.focusGroup,"g").style("zIndex",0),Vn(a,this.focusGroup,function(){var l=xn(_t.focus.name,Cn.focusIcon,o),c=new Ge({style:H(H({},A),{symbol:"focus"}),className:l}),u=new yi({style:{r:A.size/2,fill:"transparent"}}),h=n.focusGroup.node();h.appendChild(u),h.appendChild(c),c.update({opacity:0}),t.node().addEventListener("pointerenter",function(){c.update({opacity:1})}),t.node().addEventListener("pointerleave",function(){c.update({opacity:0})})}))},e.prototype.renderPoptip=function(t){var n=this,i=this.attributes.poptip;if(i){var a=t.maybeAppendByClassName(_t.value,"g").node(),s=t.maybeAppendByClassName(_t.label,"g").node();[a,s].forEach(function(o){o&&n.bindPoptip(o)})}},e.prototype.renderBackground=function(t){var n=this.shape,i=n.width,a=n.height,s=ge(this.attributes,"background");this.background=t.maybeAppendByClassName(_t.backgroundGroup,"g").style("zIndex",-1);var o=this.background.maybeAppendByClassName(_t.background,"rect");o.styles(H({width:i,height:a},s));var A=this.attributes.classNamePrefix,l=A===void 0?"":A;if(l){var c=xn(_t.background.name,Cn.background,l);o.node().setAttribute("class",c)}},e.prototype.adjustLayout=function(){var t=this.layout,n=t.labelWidth,i=t.valueWidth,a=t.height,s=I(t.position,4),o=s[0],A=s[1],l=s[2],c=s[3],u=a/2;this.markerGroup.styles({transform:"translate(".concat(o,", ").concat(u,")").concat(this.markerGroup.node().style._transform)}),this.labelGroup.styles({transform:"translate(".concat(A,", ").concat(u,")")}),this.focusGroup&&this.focusGroup.styles({transform:"translate(".concat(c,", ").concat(u,")")}),fw(this.labelGroup.select(_t.label.class).node(),Math.ceil(n)),this.showValue&&(this.valueGroup.styles({transform:"translate(".concat(l,", ").concat(u,")")}),fw(this.valueGroup.select(_t.value.class).node(),Math.ceil(i)))},e.prototype.render=function(t,n){var i=ae(n),a=t.x,s=a===void 0?0:a,o=t.y,A=o===void 0?0:o;i.styles({transform:"translate(".concat(s,", ").concat(A,")")}),this.renderMarker(i),this.renderLabel(i),this.renderValue(i),this.renderBackground(i),this.renderPoptip(i),this.renderFocus(i),this.adjustLayout()},e}(yt),ns=Xr({page:"item-page",navigator:"navigator",item:"item"},"items"),EO=function(r,e,t){return t===void 0&&(t=!0),r?e(r):t},Joe=function(r){be(e,r);function e(t){var n=r.call(this,t,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:Rf,mouseenter:Rf,mouseleave:Rf})||this;return n.navigatorShape=[0,0],n}return Object.defineProperty(e.prototype,"pageViews",{get:function(){return this.navigator.getContainer()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"grid",{get:function(){var t=this.attributes,n=t.gridRow,i=t.gridCol,a=t.data;if(!n&&!i)throw new Error("gridRow and gridCol can not be set null at the same time");return n&&i?[n,i]:n?[n,a.length]:[a.length,i]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderData",{get:function(){var t=this.attributes,n=t.data,i=t.layout,a=t.poptip,s=t.focus,o=t.focusMarkerSize,A=t.classNamePrefix,l=ge(this.attributes,"item"),c=n.map(function(u,h){var d=u.id,f=d===void 0?h:d,g=u.label,v=u.value;return{id:"".concat(f),index:h,style:H({layout:i,labelText:g,valueText:v,poptip:a,focus:s,focusMarkerSize:o,classNamePrefix:A},Object.fromEntries(Object.entries(l).map(function(p){var y=I(p,2),m=y[0],w=y[1];return[m,$n(w,[u,h,n])]})))}});return c},enumerable:!1,configurable:!0}),e.prototype.getGridLayout=function(){var t=this,n=this.attributes,i=n.orientation,a=n.width,s=n.rowPadding,o=n.colPadding,A=I(this.navigatorShape,1),l=A[0],c=I(this.grid,2),u=c[0],h=c[1],d=h*u,f=0;return this.pageViews.children.map(function(g,v){var p,y,m=Math.floor(v/d),w=v%d,B=t.ifHorizontal(h,u),b=[Math.floor(w/B),w%B];i==="vertical"&&b.reverse();var E=I(b,2),x=E[0],S=E[1],C=(a-l-(h-1)*o)/h,F=g.getBBox().height,M=I([0,0],2),T=M[0],O=M[1];return i==="horizontal"?(p=I([f,x*(F+s)],2),T=p[0],O=p[1],f=S===h-1?0:f+C+o):(y=I([S*(C+o),f],2),T=y[0],O=y[1],f=x===u-1?0:f+F+s),{page:m,index:v,row:x,col:S,pageIndex:w,width:C,height:F,x:T,y:O}})},e.prototype.getFlexLayout=function(){var t=this.attributes,n=t.width,i=t.height,a=t.rowPadding,s=t.colPadding,o=I(this.navigatorShape,1),A=o[0],l=I(this.grid,2),c=l[0],u=l[1],h=I([n-A,i],2),d=h[0],f=h[1],g=I([0,0,0,0,0,0,0,0],8),v=g[0],p=g[1],y=g[2],m=g[3],w=g[4],B=g[5],b=g[6],E=g[7];return this.pageViews.children.map(function(x,S){var C,F,M,T,O=x.getBBox(),_=O.width,Q=O.height,L=b===0?0:s,k=b+L+_;if(k<=d&&EO(w,function(D){return D<u}))return C=I([b+L,E,k],3),v=C[0],p=C[1],b=C[2],{width:_,height:Q,x:v,y:p,page:y,index:S,pageIndex:m++,row:B,col:w++};F=I([B+1,0,0,E+Q+a],4),B=F[0],w=F[1],b=F[2],E=F[3];var U=E+Q;return U<=f&&EO(B,function(D){return D<c})?(M=I([b,E,_],3),v=M[0],p=M[1],b=M[2],{width:_,height:Q,x:v,y:p,page:y,index:S,pageIndex:m++,row:B,col:w++}):(T=I([0,0,_,0,y+1,0,0,0],8),v=T[0],p=T[1],b=T[2],E=T[3],y=T[4],m=T[5],B=T[6],w=T[7],{width:_,height:Q,x:v,y:p,page:y,index:S,pageIndex:m++,row:B,col:w++})})},Object.defineProperty(e.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var t=this.attributes.layout==="grid"?this.getGridLayout:this.getFlexLayout,n=t.call(this);return n.slice(-1)[0].page>0?(this.navigatorShape=[55,0],t.call(this)):n},enumerable:!1,configurable:!0}),e.prototype.ifHorizontal=function(t,n){var i=this.attributes.orientation;return Bw(i,t,n)},e.prototype.flattenPage=function(t){t.querySelectorAll(ns.item.class).forEach(function(n){t.appendChild(n)}),t.querySelectorAll(ns.page.class).forEach(function(n){var i=t.removeChild(n);i.destroy()})},e.prototype.renderItems=function(t){var n=this.attributes,i=n.click,a=n.mouseenter,s=n.mouseleave,o=n.classNamePrefix;this.flattenPage(t);var A=this.dispatchCustomEvent.bind(this),l=xn(ns.item.name,Cn.item,o);ae(t).selectAll(ns.item.class).data(this.renderData,function(c){return c.id}).join(function(c){return c.append(function(u){var h=u.style,d=lt(u,["style"]);return new Zoe({style:h},d)}).attr("className",l).on("click",function(){i==null||i(this),A("itemClick",{item:this})}).on("pointerenter",function(){a==null||a(this),A("itemMouseenter",{item:this})}).on("pointerleave",function(){s==null||s(this),A("itemMouseleave",{item:this})})},function(c){return c.each(function(u){var h=u.style;this.update(h)})},function(c){return c.remove()})},e.prototype.relayoutNavigator=function(){var t,n=this.attributes,i=n.layout,a=n.width,s=((t=this.pageViews.children[0])===null||t===void 0?void 0:t.getBBox().height)||0,o=I(this.navigatorShape,2),A=o[0],l=o[1];this.navigator.update(i==="grid"?{pageWidth:a-A,pageHeight:s-l}:{})},e.prototype.adjustLayout=function(){var t=this,n=Object.entries(tae(this.itemsLayout,"page")).map(function(a){var s=I(a,2),o=s[0],A=s[1];return{page:o,layouts:A}}),i=oe([],I(this.navigator.getContainer().children),!1);n.forEach(function(a){var s=a.layouts,o=t.pageViews.appendChild(new $t({className:ns.page.name}));s.forEach(function(A){var l=A.x,c=A.y,u=A.index,h=A.width,d=A.height,f=i[u];o.appendChild(f),JA(f,"__layout__",A),f.update({x:l,y:c,width:h,height:d})})}),this.relayoutNavigator()},e.prototype.renderNavigator=function(t){var n=this.attributes,i=n.orientation,a=n.classNamePrefix,s=ge(this.attributes,"nav"),o=Rt({orientation:i,classNamePrefix:a},s),A=this;return t.selectAll(ns.navigator.class).data(["nav"]).join(function(l){return l.append(function(){return new Goe({style:o})}).attr("className",ns.navigator.name).each(function(){A.navigator=this})},function(l){return l.each(function(){this.update(o)})},function(l){return l.remove()}),this.navigator},e.prototype.getBBox=function(){return this.navigator.getBBox()},e.prototype.render=function(t,n){var i=this.attributes.data;if(!(!i||i.length===0)){var a=this.renderNavigator(ae(n));this.renderItems(a.getContainer()),this.adjustLayout()}},e.prototype.dispatchCustomEvent=function(t,n){var i=new Qt(t,{detail:n});this.dispatchEvent(i)},e}(yt),eAe=function(r){be(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.update=function(t){this.attr(t)},e}(ks),tAe=function(r){be(e,r);function e(t){return r.call(this,t,Uoe)||this}return e.prototype.renderTitle=function(t,n,i){var a=this.attributes,s=a.showTitle,o=a.titleText,A=a.classNamePrefix,l=ge(this.attributes,"title"),c=I(qi(l),2),u=c[0],h=c[1];this.titleGroup=t.maybeAppendByClassName(ts.titleGroup,"g").styles(h);var d=H(H({width:n,height:i},u),{text:s?o:"",classNamePrefix:A});this.title=this.titleGroup.maybeAppendByClassName(ts.title,function(){return new Hoe({style:d})}).update(d)},e.prototype.renderCustom=function(t){var n=this.attributes.data,i={innerHTML:this.attributes.render(n),pointerEvents:"auto"};t.maybeAppendByClassName(ts.html,function(){return new eAe({className:ts.html.name,style:i})}).update(i)},e.prototype.renderItems=function(t,n){var i=n.x,a=n.y,s=n.width,o=n.height,A=ge(this.attributes,"title",!0),l=I(qi(A),2),c=l[0],u=l[1],h=H(H({},c),{width:s,height:o,x:0,y:0});this.itemsGroup=t.maybeAppendByClassName(ts.itemsGroup,"g").styles(H(H({},u),{transform:"translate(".concat(i,", ").concat(a,")")}));var d=this;this.itemsGroup.selectAll(ts.items.class).data(["items"]).join(function(f){return f.append(function(){return new Joe({style:h})}).attr("className",ts.items.name).each(function(){d.items=ae(this)})},function(f){return f.update(h)},function(f){return f.remove()})},e.prototype.adjustLayout=function(){var t=this.attributes.showTitle;if(t){var n=this.title.node().getAvailableSpace(),i=n.x,a=n.y;this.itemsGroup.node().style.transform="translate(".concat(i,", ").concat(a,")")}},Object.defineProperty(e.prototype,"availableSpace",{get:function(){var t=this.attributes,n=t.showTitle,i=t.width,a=t.height;return n?this.title.node().getAvailableSpace():new Mn(0,0,i,a)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var t,n,i=(t=this.title)===null||t===void 0?void 0:t.node(),a=(n=this.items)===null||n===void 0?void 0:n.node();return!i||!a?r.prototype.getBBox.call(this):Poe(i,a)},e.prototype.render=function(t,n){var i=this.attributes,a=i.width,s=i.height,o=i.x,A=o===void 0?0:o,l=i.y,c=l===void 0?0:l,u=i.classNamePrefix,h=i.render,d=ae(n),f=n.className||"legend-category";u?n.attr("className","".concat(f," ").concat(u,"legend")):n.className||n.attr("className","legend-category"),n.style.transform="translate(".concat(A,", ").concat(c,")"),h?this.renderCustom(d):(this.renderTitle(d,a,s),this.renderItems(d,this.availableSpace),this.adjustLayout())},e}(yt),nAe={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(r){return r.toString()},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999},Gm=Xr({background:"background",labelGroup:"label-group",label:"label"},"indicator"),rAe=function(r){be(e,r);function e(t){var n=r.call(this,t,nAe)||this;return n.point=[0,0],n.group=n.appendChild(new $t({})),n.isMutationObserved=!0,n}return e.prototype.renderBackground=function(){if(this.label){var t=this.attributes,n=t.position,i=t.padding,a=I(ln(i),4),s=a[0],o=a[1],A=a[2],l=a[3],c=this.label.node().getLocalBounds(),u=c.min,h=c.max,d=new Mn(u[0]-l,u[1]-s,h[0]+o-u[0]+l,h[1]+A-u[1]+s),f=this.getPath(n,d),g=ge(this.attributes,"background");this.background=ae(this.group).maybeAppendByClassName(Gm.background,"path").styles(H(H({},g),{d:f})),this.group.appendChild(this.label.node())}},e.prototype.renderLabel=function(){var t=this.attributes,n=t.formatter,i=t.labelText,a=ge(this.attributes,"label"),s=I(qi(a),2),o=s[0],A=s[1];o.text;var l=lt(o,["text"]);if(this.label=ae(this.group).maybeAppendByClassName(Gm.labelGroup,"g").styles(A),!!i){var c=this.label.maybeAppendByClassName(Gm.label,function(){return Wi(n(i))}).style("text",n(i).toString());c.selectAll("text").styles(l)}},e.prototype.adjustLayout=function(){var t=I(this.point,2),n=t[0],i=t[1],a=this.attributes,s=a.x,o=a.y;this.group.attr("transform","translate(".concat(s-n,", ").concat(o-i,")"))},e.prototype.getPath=function(t,n){var i=this.attributes.radius,a=n.x,s=n.y,o=n.width,A=n.height,l=[["M",a+i,s],["L",a+o-i,s],["A",i,i,0,0,1,a+o,s+i],["L",a+o,s+A-i],["A",i,i,0,0,1,a+o-i,s+A],["L",a+i,s+A],["A",i,i,0,0,1,a,s+A-i],["L",a,s+i],["A",i,i,0,0,1,a+i,s],["Z"]],c={top:4,right:6,bottom:0,left:2},u=c[t],h=this.createCorner([l[u].slice(-2),l[u+1].slice(-2)]);return l.splice.apply(l,oe([u+1,1],I(h),!1)),l[0][0]="M",l},e.prototype.createCorner=function(t,n){n===void 0&&(n=10);var i=.8,a=vae.apply(void 0,oe([],I(t),!1)),s=I(t,2),o=I(s[0],2),A=o[0],l=o[1],c=I(s[1],2),u=c[0],h=c[1],d=I(a?[u-A,[A,u]]:[h-l,[l,h]],2),f=d[0],g=I(d[1],2),v=g[0],p=g[1],y=f/2,m=f/Math.abs(f),w=n*m,B=w/2,b=w*Math.sqrt(3)/2*i,E=I([v,v+y-B,v+y,v+y+B,p],5),x=E[0],S=E[1],C=E[2],F=E[3],M=E[4];return a?(this.point=[C,l-b],[["L",x,l],["L",S,l],["L",C,l-b],["L",F,l],["L",M,l]]):(this.point=[A+b,C],[["L",A,x],["L",A,S],["L",A+b,C],["L",A,F],["L",A,M]])},e.prototype.applyVisibility=function(){var t=this.attributes.visibility;t==="hidden"?Gr(this):Kl(this)},e.prototype.bindEvents=function(){this.label.on(Me.BOUNDS_CHANGED,this.renderBackground)},e.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility()},e}(yt);function bw(r){return r===void 0&&(r=""),{CONTAINER:"".concat(r,"tooltip"),TITLE:"".concat(r,"tooltip-title"),LIST:"".concat(r,"tooltip-list"),LIST_ITEM:"".concat(r,"tooltip-list-item"),NAME:"".concat(r,"tooltip-list-item-name"),MARKER:"".concat(r,"tooltip-list-item-marker"),NAME_LABEL:"".concat(r,"tooltip-list-item-name-label"),VALUE:"".concat(r,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(r,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(r,"tooltip-crosshair-y")}}var xO={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"};function iAe(r){var e;r===void 0&&(r="");var t=bw(r);return e={},e[".".concat(t.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},e[".".concat(t.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},e[".".concat(t.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},e[".".concat(t.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},e[".".concat(t.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},e[".".concat(t.NAME)]={display:"flex","align-items":"center","max-width":"216px"},e[".".concat(t.NAME_LABEL)]=H({flex:1},xO),e[".".concat(t.VALUE)]=H({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},xO),e[".".concat(t.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},e[".".concat(t.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},e}var aAe=function(r){be(e,r);function e(t){var n=this,i,a,s=(a=(i=t.style)===null||i===void 0?void 0:i.template)===null||a===void 0?void 0:a.prefixCls,o=bw(s);return n=r.call(this,t,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(o.CONTAINER,'"></div>'),title:'<div class="'.concat(o.TITLE,'"></div>'),item:'<li class="'.concat(o.LIST_ITEM,`" data-index={index}>
        <span class="`).concat(o.NAME,`">
          <span class="`).concat(o.MARKER,`" style="background:{color}"></span>
          <span class="`).concat(o.NAME_LABEL,`" title="{name}">{name}</span>
        </span>
        <span class="`).concat(o.VALUE,`" title="{value}">{value}</span>
      </li>`)},style:iAe(s)})||this,n.timestamp=-1,n.prevCustomContentKey=n.attributes.contentKey,n.initShape(),n.render(n.attributes,n),n}return Object.defineProperty(e.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),e.prototype.getContainer=function(){return this.element},Object.defineProperty(e.prototype,"elementSize",{get:function(){var t=this.element.offsetWidth,n=this.element.offsetHeight;return{width:t,height:n}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HTMLTooltipItemsElements",{get:function(){var t=this.attributes,n=t.data,i=t.template;return n.map(function(a,s){var o=a.name,A=o===void 0?"":o,l=a.color,c=l===void 0?"black":l,u=a.index,h=lt(a,["name","color","index"]),d=H({name:A,color:c,index:u??s},h);return a1(JP(i.item,d))})},enumerable:!1,configurable:!0}),e.prototype.render=function(t,n){this.renderHTMLTooltipElement(),this.updatePosition()},e.prototype.destroy=function(){var t;(t=this.element)===null||t===void 0||t.remove(),r.prototype.destroy.call(this)},e.prototype.show=function(t,n){var i=this;if(t!==void 0&&n!==void 0){var a=this.element.style.visibility==="hidden",s=function(){i.attributes.x=t??i.attributes.x,i.attributes.y=n??i.attributes.y,i.updatePosition()};a?this.closeTransition(s):s()}this.element.style.visibility="visible"},e.prototype.hide=function(t,n){t===void 0&&(t=0),n===void 0&&(n=0);var i=this.attributes.enterable;i&&this.isCursorEntered(t,n)||(this.element.style.visibility="hidden")},e.prototype.initShape=function(){var t=this.attributes.template;this.element=a1(t.container),this.id&&this.element.setAttribute("id",this.id)},e.prototype.renderCustomContent=function(){if(!(this.prevCustomContentKey!==void 0&&this.prevCustomContentKey===this.attributes.contentKey)){this.prevCustomContentKey=this.attributes.contentKey;var t=this.attributes.content;t&&(typeof t=="string"?this.element.innerHTML=t:ZM(this.element,t))}},e.prototype.renderHTMLTooltipElement=function(){var t,n,i=this.attributes,a=i.template,s=i.title,o=i.enterable,A=i.style,l=i.content,c=bw(a.prefixCls),u=this.element;if(this.element.style.pointerEvents=o?"auto":"none",l)this.renderCustomContent();else{s?(u.innerHTML=a.title,u.getElementsByClassName(c.TITLE)[0].innerHTML=s):(n=(t=u.getElementsByClassName(c.TITLE))===null||t===void 0?void 0:t[0])===null||n===void 0||n.remove();var h=this.HTMLTooltipItemsElements,d=document.createElement("ul");d.className=c.LIST,ZM(d,h);var f=this.element.querySelector(".".concat(c.LIST));f?f.replaceWith(d):u.appendChild(d)}wae(u,A)},e.prototype.getRelativeOffsetFromCursor=function(t){var n=this.attributes,i=n.position,a=n.offset,s=t||i,o=s.split("-"),A={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},l=this.elementSize,c=l.width,u=l.height,h=[-c/2,-u/2];return o.forEach(function(d){var f=I(h,2),g=f[0],v=f[1],p=I(A[d],2),y=p[0],m=p[1];h=[g+(c/2+a[0])*y,v+(u/2+a[1])*m]}),h},e.prototype.setOffsetPosition=function(t){var n=I(t,2),i=n[0],a=n[1],s=this.attributes,o=s.x,A=o===void 0?0:o,l=s.y,c=l===void 0?0:l,u=s.container,h=u.x,d=u.y;this.element.style.left="".concat(+A+h+i,"px"),this.element.style.top="".concat(+c+d+a,"px")},e.prototype.updatePosition=function(){var t=this.attributes.showDelay,n=t===void 0?60:t,i=Date.now();this.timestamp>0&&i-this.timestamp<n||(this.timestamp=i,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())))},e.prototype.autoPosition=function(t){var n=I(t,2),i=n[0],a=n[1],s=this.attributes,o=s.x,A=s.y,l=s.bounding,c=s.position;if(!l)return[i,a];var u=this.element,h=u.offsetWidth,d=u.offsetHeight,f=I([+o+i,+A+a],2),g=f[0],v=f[1],p={left:"right",right:"left",top:"bottom",bottom:"top"},y=l.x,m=l.y,w=l.width,B=l.height,b={left:g<y,right:g+h>y+w,top:v<m,bottom:v+d>m+B},E=[];c.split("-").forEach(function(S){b[S]?E.push(p[S]):E.push(S)});var x=E.join("-");return this.getRelativeOffsetFromCursor(x)},e.prototype.isCursorEntered=function(t,n){if(this.element){var i=this.element.getBoundingClientRect(),a=i.x,s=i.y,o=i.width,A=i.height;return new Mn(a,s,o,A).isPointIn(t,n)}return!1},e.prototype.closeTransition=function(t){var n=this,i=this.element.style.transition;this.element.style.transition="none",t(),setTimeout(function(){n.element.style.transition=i},10)},e.tag="tooltip",e}(yt),sAe=function(r){be(e,r);function e(t){var n=r.call(this,Rt({},e.defaultOptions,t))||this;return n.hoverColor="#f5f5f5",n.selectedColor="#e6f7ff",n.background=n.appendChild(new An({})),n.label=n.background.appendChild(new $t({})),n}return Object.defineProperty(e.prototype,"padding",{get:function(){return ln(this.style.padding)},enumerable:!1,configurable:!0}),e.prototype.renderLabel=function(){var t=this.style,n=t.label,i=t.value,a=ge(this.attributes,"label");ae(this.label).maybeAppend(".label",function(){return Wi(n)}).attr("className","label").styles(a),this.label.attr("__data__",i)},e.prototype.renderBackground=function(){var t=this.label.getBBox(),n=I(this.padding,4),i=n[0],a=n[1],s=n[2],o=n[3],A=t.width,l=t.height,c=A+o+a,u=l+i+s,h=ge(this.attributes,"background"),d=this.style,f=d.width,g=f===void 0?0:f,v=d.height,p=v===void 0?0:v,y=d.selected;this.background.attr(H(H({},h),{width:Math.max(c,g),height:Math.max(u,p),fill:y?this.selectedColor:"#fff"})),this.label.attr({transform:"translate(".concat(o,", ").concat((u-l)/2,")")})},e.prototype.render=function(){this.renderLabel(),this.renderBackground()},e.prototype.bindEvents=function(){var t=this;this.addEventListener("pointerenter",function(){t.style.selected||t.background.attr("fill",t.hoverColor)}),this.addEventListener("pointerleave",function(){t.style.selected||t.background.attr("fill",t.style.backgroundFill)});var n=this;this.addEventListener("click",function(){var i=t.style,a=i.label,s=i.value,o=i.onClick;o==null||o(s,{label:a,value:s},n)})},e.defaultOptions={style:{value:"",label:"",cursor:"pointer"}},e}(yt),oAe=function(r){be(e,r);function e(t){var n,i,a=r.call(this,Rt({},e.defaultOptions,t))||this;a.currentValue=(n=e.defaultOptions.style)===null||n===void 0?void 0:n.defaultValue,a.isPointerInSelect=!1,a.select=a.appendChild(new An({className:"select",style:{cursor:"pointer",width:0,height:0}})),a.dropdown=a.appendChild(new An({className:"dropdown"}));var s=a.style.defaultValue;return s&&(!((i=a.style.options)===null||i===void 0)&&i.some(function(o){return o.value===s}))&&(a.currentValue=s),a}return e.prototype.setValue=function(t){this.currentValue=t,this.render()},e.prototype.getValue=function(){return this.currentValue},Object.defineProperty(e.prototype,"dropdownPadding",{get:function(){return ln(this.style.dropdownPadding)},enumerable:!1,configurable:!0}),e.prototype.renderSelect=function(){var t=this,n,i=this.style,a=i.x,s=i.y,o=i.width,A=i.height,l=i.bordered,c=i.showDropdownIcon,u=ge(this.attributes,"select"),h=ge(this.attributes,"placeholder");this.select.attr(H(H({x:a,y:s,width:o,height:A},u),{fill:"#fff",strokeWidth:l?1:0}));var d=this.dropdownPadding,f=10;c&&ae(this.select).maybeAppend(".dropdown-icon","path").style("d","M-5,-3.5 L0,3.5 L5,-3.5").style("transform","translate(".concat(a+o-f-d[1]-d[3],", ").concat(s+A/2,")")).style("lineWidth",1).style("stroke",this.select.style.stroke);var g=(n=this.style.options)===null||n===void 0?void 0:n.find(function(m){return m.value===t.currentValue}),v=H({x:a+d[3]},h);ae(this.select).selectAll(".placeholder").data(g?[]:[1]).join(function(m){return m.append("text").attr("className","placeholder").styles(v).style("y",function(){var w=this.getBBox();return s+(A-w.height)/2})},function(m){return m.styles(v)},function(m){return m.remove()});var p=ge(this.attributes,"optionLabel"),y=H({x:a+d[3]},p);ae(this.select).selectAll(".value").data(g?[g]:[]).join(function(m){return m.append(function(w){return Wi(w.label)}).attr("className","value").styles(y).style("y",function(){var w=this.getBBox();return s+(A-w.height)/2})},function(m){return m.styles(y)},function(m){return m.remove()})},e.prototype.renderDropdown=function(){var t=this,n,i,a=this.style,s=a.x,o=a.y,A=a.width,l=a.height,c=a.options,u=a.onSelect,h=a.open,d=ge(this.attributes,"dropdown"),f=ge(this.attributes,"option"),g=this.dropdownPadding;ae(this.dropdown).maybeAppend(".dropdown-container","g").attr("className","dropdown-container").selectAll(".dropdown-item").data(c,function(y){return y.value}).join(function(y){return y.append(function(m){return new sAe({className:"dropdown-item",style:H(H(H({},m),f),{width:A-g[1]-g[3],selected:m.value===t.currentValue,onClick:function(w,B,b){t.setValue(w),u==null||u(w,B,b),t.dispatchEvent(new Qt("change",{detail:{value:w,option:B,item:b}})),Gr(t.dropdown)}})})}).each(function(m,w){var B,b=(B=this.parentNode)===null||B===void 0?void 0:B.children,E=b.reduce(function(x,S,C){return C<w&&(x+=S.getBBox().height),x},0);this.attr("transform","translate(".concat(g[3],", ").concat(g[0]+E,")"))})},function(y){return y.update(function(m){return{selected:m.value===t.currentValue}})},function(y){return y.remove()});var v=(i=(n=this.dropdown.getElementsByClassName("dropdown-container"))===null||n===void 0?void 0:n[0])===null||i===void 0?void 0:i.getBBox(),p=d.spacing;this.dropdown.attr(H({transform:"translate(".concat(s,", ").concat(o+l+p,")"),width:v.width+g[1]+g[3],height:v.height+g[0]+g[2]},d)),!h&&Gr(this.dropdown)},e.prototype.render=function(){this.renderSelect(),this.renderDropdown()},e.prototype.bindEvents=function(){var t=this;this.addEventListener("click",function(n){n.stopPropagation()}),this.select.addEventListener("click",function(){t.dropdown.style.visibility==="visible"?Gr(t.dropdown):Kl(t.dropdown)}),this.addEventListener("pointerenter",function(){t.isPointerInSelect=!0}),this.addEventListener("pointerleave",function(){t.isPointerInSelect=!1}),document==null||document.addEventListener("click",function(){t.isPointerInSelect||Gr(t.dropdown)})},e.defaultOptions={style:{x:0,y:0,width:140,height:32,options:[],bordered:!0,defaultValue:"",selectRadius:8,selectStroke:"#d9d9d9",showDropdownIcon:!0,placeholderText:"",placeholderFontSize:12,placeholderTextBaseline:"top",placeholderFill:"#c2c2c2",dropdownFill:"#fff",dropdownStroke:"#d9d9d9",dropdownRadius:8,dropdownShadowBlur:4,dropdownShadowColor:"rgba(0, 0, 0, 0.08)",dropdownPadding:8,dropdownSpacing:10,optionPadding:[8,12],optionFontSize:12,optionTextBaseline:"top",optionBackgroundFill:"#fff",optionBackgroundRadius:4,optionLabelFontSize:12,optionLabelTextBaseline:"top"}},e}(yt),Zr=function(r){be(e,r);function e(t){var n=r.call(this,Rt({},{style:{backgroundOpacity:e.backgroundOpacities.default}},e.defaultOptions,t))||this;return n.showBackground=!0,n.background=n.appendChild(new An({})),n.icon=n.appendChild(new $t({})),n}return Object.defineProperty(e.prototype,"label",{get:function(){return"BaseIcon"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineWidth",{get:function(){return Math.log10(this.attributes.size)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return ln(this.attributes.size/5)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iconSize",{get:function(){var t=this.attributes.size,n=I(this.padding,4),i=n[0],a=n[1],s=n[2],o=n[3];return Math.max(t-Math.max(o+a,i+s),this.lineWidth*2+1)},enumerable:!1,configurable:!0}),e.prototype.renderBackground=function(){var t=this.attributes,n=t.x,i=t.y,a=t.size,s=a/2,o=ge(this.attributes,"background");this.background.attr(H({x:n-s,y:i-s,width:a,height:a},o))},e.prototype.showIndicator=function(){if(this.label){var t=this.attributes.size,n=this.background.getBBox(),i=n.x,a=n.y;this.indicator.update({x:i+t/2,y:a-5,labelText:this.label,visibility:"visible"})}},e.prototype.hideIndicator=function(){this.indicator.update({visibility:"hidden"})},e.prototype.connectedCallback=function(){var t;r.prototype.connectedCallback.call(this);var n=this.attributes.size,i=this.background.getBBox(),a=i.x,s=i.y,o=(t=this.ownerDocument)===null||t===void 0?void 0:t.defaultView;o&&(this.indicator=o.appendChild(new rAe({style:{x:a+n/2,y:s-n/2,visibility:"hidden",position:"top",radius:3,zIndex:100}})))},e.prototype.disconnectedCallback=function(){this.indicator.destroy()},e.prototype.render=function(){this.renderIcon(),this.showBackground&&this.renderBackground()},e.prototype.bindEvents=function(){var t=this,n=this.attributes.onClick;if(this.addEventListener("click",function(){n==null||n(t)}),this.showBackground){var i=function(){return t.background.attr({opacity:e.backgroundOpacities.default})},a=function(){return t.background.attr({opacity:e.backgroundOpacities.hover})},s=function(){return t.background.attr({opacity:e.backgroundOpacities.active})};this.addEventListener("pointerenter",function(){a(),t.showIndicator()}),this.addEventListener("pointerleave",function(){i(),t.hideIndicator()}),this.addEventListener("pointerdown",function(){s()}),this.addEventListener("pointerup",function(){i()})}},e.tag="IconBase",e.defaultOptions={style:{x:0,y:0,size:10,color:"#565758",backgroundRadius:4,backgroundFill:"#e2e2e2"}},e.backgroundOpacities={default:0,hover:.8,active:1},e}(yt),yl=function(r,e){return e===void 0&&(e="#565758"),new wn({style:{fill:e,d:"M ".concat(r,",").concat(r," L -").concat(r,",0 L ").concat(r,",-").concat(r," Z"),transformOrigin:"center"}})},AAe=function(r){be(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.arcPath=function(t,n,i){var a=I([i,i],2),s=a[0],o=a[1],A=function(g){return[t+i*Math.cos(g),n+i*Math.sin(g)]},l=I(A(-5/4*Math.PI),2),c=l[0],u=l[1],h=I(A(1/4*Math.PI),2),d=h[0],f=h[1];return"M".concat(c,",").concat(u,",A").concat(s,",").concat(o,",0,1,1,").concat(d,",").concat(f)},Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,n=t.x,i=t.y,a=t.color,s=this.iconSize,o=this.lineWidth,A=o+.5;ae(this.icon).maybeAppend(".reset","path").styles({stroke:a,lineWidth:o,d:this.arcPath(n,i,s/2-o),markerStart:yl(A,a)})},e}(Zr),lAe=function(r){be(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,n=t.x,i=t.y,a=t.color,s=this.iconSize,o=s/2,A=s/2/Math.pow(3,.5),l=[[n,i],[n,i-A],[n-o,i],[n,i+A],[n,i],[n+o,i-A],[n+o,i+A],[n,i]];ae(this.icon).maybeAppend(".backward","polygon").styles({points:l,fill:a})},e}(Zr),cAe=function(r){be(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,n=t.x,i=t.y,a=t.color,s=this.iconSize,o=s/2,A=s/2/Math.pow(3,.5),l=[[n,i],[n,i-A],[n+o,i],[n,i+A],[n,i],[n-o,i-A],[n-o,i+A],[n,i]];ae(this.icon).maybeAppend(".forward","polygon").styles({points:l,fill:a})},e}(Zr),uAe=function(r){be(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,n=t.x,i=t.y,a=t.color,s=this.iconSize,o=s/3*Math.pow(3,.5)*.8,A=[[n+o,i],[n-o/2,i-s/2*.8],[n-o/2,i+s/2*.8],[n+o,i]];ae(this.icon).maybeAppend(".play","polygon").styles({points:A,fill:a})},e}(Zr),hAe=function(r){be(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,n=t.x,i=t.y,a=t.color,s=this.iconSize,o=s/3,A=[[n-o,i-s/2],[n-o,i+s/2],[n-o/2,i+s/2],[n-o/2,i-s/2],[n-o,i-s/2],[n+o/2,i-s/2],[n+o/2,i+s/2],[n+o,i+s/2],[n+o,i-s/2]];ae(this.icon).maybeAppend(".pause","polygon").styles({points:A,fill:a})},e}(Zr),dAe=function(r){be(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,n=t.x,i=t.y,a=t.color,s=this,o=s.iconSize,A=s.lineWidth,l=A;ae(this.icon).maybeAppend(".left-line","line").styles({x1:n-o/2,y1:i-o/2,x2:n-o/2,y2:i+o/2,stroke:a,lineWidth:A}),ae(this.icon).maybeAppend(".right-line","line").styles({x1:n+o/2,y1:i-o/2,x2:n+o/2,y2:i+o/2,stroke:a,lineWidth:A}),ae(this.icon).maybeAppend(".left-arrow","line").styles({x1:n,y1:i,x2:n-o/2+l*2,y2:i,stroke:a,lineWidth:A,markerEnd:yl(A*2,a)}),ae(this.icon).maybeAppend(".right-arrow","line").styles({x1:n,y1:i,x2:n+o/2-l*2,y2:i,stroke:a,lineWidth:A,markerEnd:yl(A*2,a)})},e}(Zr),fAe=function(r){be(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,n=t.x,i=t.y,a=t.color,s=this,o=s.iconSize,A=s.lineWidth;ae(this.icon).maybeAppend(".line","line").styles({x1:n,y1:i-o/2,x2:n,y2:i+o/2,stroke:a,lineWidth:A});var l=A;ae(this.icon).maybeAppend(".left-arrow","line").styles({x1:n-o/2-l*2,y1:i,x2:n-l*2,y2:i,stroke:a,lineWidth:A,markerEnd:yl(A*2,a)}),ae(this.icon).maybeAppend(".right-arrow","line").styles({x1:n+o/2+l*2,y1:i,x2:n+l*2,y2:i,stroke:a,lineWidth:A,markerEnd:yl(A*2,a)})},e}(Zr),IU=function(r){return[[-r/2,-r/2],[-r/2,r/2],[r/2,r/2]]},gAe=function(r){be(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,n=t.x,i=t.y,a=t.color,s=this,o=s.iconSize,A=s.lineWidth,l=A,c=(o-l*2-A)/4,u=(o-l*2-A)/2,h=I([n-o/2+l,i+o/2-l*2],2),d=h[0],f=h[1];ae(this.icon).maybeAppend(".coordinate","polyline").styles({points:IU(o).map(function(g){var v=I(g,2),p=v[0],y=v[1];return[p+n,y+i]}),stroke:a,lineWidth:A}),ae(this.icon).maybeAppend(".line","polyline").styles({points:[[d,f],[d+c,f-u],[d+c*2,f],[d+c*4,f-u*2]],stroke:a,lineWidth:A})},e}(Zr),vAe=function(r){be(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return[1,4,2,4,3]},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.data,n=this.attributes,i=n.x,a=n.y,s=n.color,o=this,A=o.iconSize,l=o.lineWidth,c=l,u=(A-c)/t.length,h=(A-c*2)/4,d=I([i-A/2+c*2,a+A/2-c],2),f=d[0],g=d[1];ae(this.icon).maybeAppend(".coordinate","polyline").styles({points:IU(A).map(function(v){var p=I(v,2),y=p[0],m=p[1];return[y+i,m+a]}),stroke:s,lineWidth:l}),ae(this.icon).maybeAppend(".bars","g").selectAll(".column").data(this.data.map(function(v,p){return{value:v,index:p}})).join(function(v){return v.append("line").attr("className","column").style("x1",function(p){var y=p.index;return f+u*y}).style("y1",g).style("x2",function(p){var y=p.index;return f+u*y}).style("y2",function(p){var y=p.value;return g-h*y}).styles({y1:g,stroke:s,lineWidth:l})})},e}(Zr),pAe=function(r){be(e,r);function e(t){var n=r.call(this,Rt({},{style:{color:"#d8d9d9"}},t))||this;return n.showBackground=!1,n}return e.prototype.renderIcon=function(){var t=this.attributes,n=t.x,i=t.y,a=t.color,s=this,o=s.iconSize,A=s.lineWidth;ae(this.icon).maybeAppend(".split","line").styles({x1:n,y1:i-o/2,x2:n,y2:i+o/2,stroke:a,lineWidth:A})},e}(Zr),Ew=function(r){be(e,r);function e(){var t=r.apply(this,oe([],I(arguments),!1))||this;return t.showBackground=!1,t}return Object.defineProperty(e.prototype,"padding",{get:function(){return ln(0)},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.iconSize,n=this.attributes,i=n.x,a=n.y,s=n.speed,o=s===void 0?1:s,A=Iw(this.attributes,["x","y","transform","transformOrigin","width","height","size","color","speed"]),l=vt(t,20,1/0),c=20,u=H(H({},A),{x:i-l/2,y:a-c/2,width:l,height:c,defaultValue:o,bordered:!1,showDropdownIcon:!1,selectRadius:2,dropdownPadding:this.padding,dropdownRadius:2,dropdownSpacing:t/5,placeholderFontSize:t/2,optionPadding:0,optionLabelFontSize:t/2,optionBackgroundRadius:1,options:[{label:"1x",value:1},{label:"1.5x",value:1.5},{label:"2x",value:2}]});ae(this.icon).maybeAppend(".speed",function(){return new oAe({style:u})}).attr("className","speed").each(function(){this.update(u)})},e.tag="SpeedSelect",e}(Zr),ob=function(r){be(e,r);function e(t){var n=r.call(this,t)||this;return n.icon=n.appendChild(new $t({})),n.currentType=n.attributes.type,n}return e.prototype.getType=function(){return this.currentType},e.prototype.render=function(){var t=this,n=this.attributes;n.onChange;var i=lt(n,["onChange"]);ae(this.icon).selectAll(".icon").data([this.currentType]).join(function(a){return a.append(function(s){var o,A=(o=t.toggles.find(function(l){var c=I(l,1),u=c[0];return u===s}))===null||o===void 0?void 0:o[1];if(!A)throw new Error("Invalid type: ".concat(s));return new A({})}).attr("className","icon").styles(i,!1).update({})},function(a){return a.styles({restStyles:i}).update({})},function(a){return a.remove()})},e.prototype.bindEvents=function(){var t=this,n=this.attributes.onChange;this.addEventListener("click",function(i){i.preventDefault(),i.stopPropagation();var a=(t.toggles.findIndex(function(o){var A=I(o,1),l=A[0];return l===t.currentType})+1)%t.toggles.length,s=t.toggles[a][0];n==null||n(t.currentType),t.currentType=s,t.render()})},e.tag="ToggleIcon",e}(yt),xw=function(r){be(e,r);function e(t){var n=r.call(this,Rt({},{style:{type:"play"}},t))||this;return n.toggles=[["play",uAe],["pause",hAe]],n}return e}(ob),Cw=function(r){be(e,r);function e(t){var n=r.call(this,Rt({},{style:{type:"range"}},t))||this;return n.toggles=[["range",dAe],["value",fAe]],n}return e}(ob),Sw=function(r){be(e,r);function e(t){var n=r.call(this,Rt({},{style:{type:"column"}},t))||this;return n.toggles=[["line",gAe],["column",vAe]],n}return e}(ob),yAe={reset:AAe,speed:Ew,backward:lAe,playPause:xw,forward:cAe,selectionType:Cw,chartType:Sw,split:pAe},mAe=function(r){be(e,r);function e(t){var n=r.call(this,Rt({},e.defaultOptions,t))||this;return n.background=n.appendChild(new An({})),n.functions=n.appendChild(new $t({})),n}return Object.defineProperty(e.prototype,"padding",{get:function(){return ln(this.attributes.padding)},enumerable:!1,configurable:!0}),e.prototype.renderBackground=function(){var t=this.style,n=t.x,i=t.y,a=t.width,s=t.height,o=ge(this.attributes,"background");this.background.attr(H({x:n,y:i,width:a,height:s},o))},e.prototype.renderFunctions=function(){var t=this,n,i=this.attributes,a=i.functions,s=i.iconSize,o=i.iconSpacing,A=i.x,l=i.y,c=i.width,u=i.height,h=i.align,d=I(this.padding,4),f=d[1],g=d[3],v=a.reduce(function(m,w){return m.length&&w.length?m.concat.apply(m,oe(["split"],I(w),!1)):m.concat.apply(m,oe([],I(w),!1))},[]),p=v.length*(s+o)-o,y={left:g+s/2,center:(c-p)/2+s/2,right:c-p-g-f+s/2}[h]||0;(n=this.speedSelect)===null||n===void 0||n.destroy(),this.functions.removeChildren(),v.forEach(function(m,w){var B,b=yAe[m],E={x:A+w*(s+o)+y,y:l+u/2,size:s};if(b===Ew?(E.speed=t.attributes.speed,E.onSelect=function(S){return t.handleFunctionChange(m,{value:S})}):[xw,Cw,Sw].includes(b)?(E.onChange=function(S){return t.handleFunctionChange(m,{value:S})},b===xw&&(E.type=t.attributes.state==="play"?"pause":"play"),b===Cw&&(E.type=t.attributes.selectionType==="range"?"value":"range"),b===Sw&&(E.type=t.attributes.chartType==="line"?"column":"line")):E.onClick=function(){return t.handleFunctionChange(m,{value:m})},b===Ew){var x=(B=t.ownerDocument)===null||B===void 0?void 0:B.defaultView;x&&(t.speedSelect=new b({style:H(H({},E),{zIndex:100})}),x.appendChild(t.speedSelect))}else t.functions.appendChild(new b({style:E}))})},e.prototype.disconnectedCallback=function(){var t;r.prototype.disconnectedCallback.call(this),(t=this.speedSelect)===null||t===void 0||t.destroy()},e.prototype.render=function(){this.renderBackground(),this.renderFunctions()},e.prototype.handleFunctionChange=function(t,n){var i=this.attributes.onChange;i==null||i(t,n)},e.defaultOptions={style:{x:0,y:0,width:300,height:40,padding:0,align:"center",iconSize:25,iconSpacing:0,speed:1,state:"pause",chartType:"line",selectionType:"range",backgroundFill:"#fbfdff",backgroundStroke:"#ebedf0",functions:[["reset","speed"],["backward","playPause","forward"],["selectionType","chartType"]]}},e}(yt),wAe=function(r){be(e,r);function e(t){var n=r.call(this,Rt({},e.defaultOptions,t))||this;return n.bindEvents(),n}return e.prototype.bindEvents=function(){var t=this;this.addEventListener("mouseenter",function(){t.attr("lineWidth",Math.ceil(+(t.style.r||0)/2))}),this.addEventListener("mouseleave",function(){t.attr("lineWidth",0)})},e.defaultOptions={style:{r:5,fill:"#3f7cf7",lineWidth:0,stroke:"#3f7cf7",strokeOpacity:.5,cursor:"pointer"}},e}(yi),BAe=function(r){be(e,r);function e(t){return r.call(this,Rt({},e.defaultOptions,t))||this}return e.prototype.renderBackground=function(){var t=this.attributes,n=t.x,i=t.y,a=t.width,s=t.height,o=ge(this.attributes,"background");ae(this).maybeAppend("background","rect").attr("className","background").styles(H({x:n-a/2,y:i-s/2,width:a,height:s},o))},e.prototype.renderIcon=function(){var t=this.attributes,n=t.x,i=t.y,a=t.iconSize,s=ge(this.attributes,"icon"),o=1,A=a/2;ae(this).maybeAppend("icon-left-line","line").attr("className","icon-left-line").styles(H({x1:n-o,y1:i-A,x2:n-o,y2:i+A},s)),ae(this).maybeAppend("icon-right-line","line").attr("className","icon-right-line").styles(H({x1:n+o,y1:i-A,x2:n+o,y2:i+A},s))},e.prototype.renderBorder=function(){var t=this.attributes,n=t.x,i=t.y,a=t.width,s=t.height,o=t.type,A=ge(this.attributes,"border"),l=o==="start"?+a/2:-a/2;ae(this).maybeAppend("border","line").attr("className","border").styles(H({x1:l+n,y1:i-s/2,x2:l+n,y2:i+s/2},A))},e.prototype.render=function(){this.renderBackground(),this.renderIcon(),this.renderBorder()},e.defaultOptions={style:{x:0,y:0,width:10,height:50,iconSize:10,type:"start",backgroundFill:"#fff",backgroundFillOpacity:.5,iconStroke:"#9a9a9a",iconLineWidth:1,borderStroke:"#e8e8e8",borderLineWidth:1}},e}(yt);function bAe(r,e){return typeof r=="number"?_U(r):EAe(r,e)}function EAe(r,e){var t=new Date(r);switch(e){case"half-hour":case"hour":case"four-hour":return[0,6,12,18].includes(t.getHours())&&t.getMinutes()===0?Nn(t,`HH:mm
YYYY-MM-DD`):Nn(t,"HH:mm");case"half-day":return t.getHours()<12?`AM
`.concat(Nn(t,"YYYY-MM-DD")):"PM";case"day":return[1,10,20].includes(t.getDate())?Nn(t,`DD
YYYY-MM`):Nn(t,"DD");case"week":return t.getDate()<=7?Nn(t,`DD
YYYY-MM`):Nn(t,"DD");case"month":return[0,6].includes(t.getMonth())?Nn(t,`MM
YYYY`):Nn(t,"MM");case"season":return[0].includes(t.getMonth())?Nn(t,`MM
YYYY`):Nn(t,"MM");case"year":return Nn(t,"YYYY");default:return Nn(t,"YYYY-MM-DD HH:mm")}}function _U(r){var e=String(Math.floor(r/3600)).padStart(2,"0"),t=String(Math.floor(r%3600/60)).padStart(2,"0"),n=String(Math.floor(r%60)).padStart(2,"0");return r<3600?"".concat(t,":").concat(n):"".concat(e,":").concat(t,":").concat(n)}var xAe=function(r){be(e,r);function e(t){var n=r.call(this,Rt({},e.defaultOptions,t))||this;n.axis=n.appendChild(new koe({style:{type:"linear",startPos:[0,0],endPos:[0,0],data:[],showArrow:!1,animate:!1}})),n.timeline=n.appendChild(new _se({style:{onChange:function(u){n.handleSliderChange(u)}}})),n.controller=n.appendChild(new mAe({})),n.states={},n.handleSliderChange=function(u){var h=function(){var d=n.states.values;return Array.isArray(d)?oe([],I(d),!1):d}();n.setBySliderValues(u),n.dispatchOnChange(h)};var i=n.attributes,a=i.selectionType,s=i.chartType,o=i.speed,A=i.state,l=i.playMode,c=i.values;return n.states={chartType:s,playMode:l,selectionType:a,speed:o,state:A},n.setByTimebarValues(c),n}return Object.defineProperty(e.prototype,"data",{get:function(){var t=this.attributes.data,n=function(i,a){return i.time<a.time?-1:i.time>a.time?1:0};return t.sort(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"space",{get:function(){var t=this.attributes,n=t.x,i=t.y,a=t.width,s=t.height,o=t.type,A=t.controllerHeight,l=vt(+s-A,0,+s),c=new Mn(n,i+ +s-A,+a,A),u,h=0;o==="chart"?(h=35,u=new Mn(n,i+l-h,+a,h)):u=new Mn;var d=o==="time"?10:l,f=new Mn(n,i+(o==="time"?l:l-d),+a,d-h);return{axisBBox:u,controllerBBox:c,timelineBBox:f}},enumerable:!1,configurable:!0}),e.prototype.setBySliderValues=function(t){var n,i,a=this.data,s=I(Array.isArray(t)?t:[0,t],2),o=s[0],A=s[1],l=a.length,c=a[Math.floor(o*l)],u=a[Math.ceil(A*l)-(Array.isArray(t)?0:1)];this.states.values=[(n=c==null?void 0:c.time)!==null&&n!==void 0?n:a[0].time,(i=u==null?void 0:u.time)!==null&&i!==void 0?i:1/0]},e.prototype.setByTimebarValues=function(t){var n,i,a,s=this.data,o=I(Array.isArray(t)?t:[void 0,t],2),A=o[0],l=o[1],c=s.find(function(h){var d=h.time;return d===A}),u=s.find(function(h){var d=h.time;return d===l});this.states.values=[(n=c==null?void 0:c.time)!==null&&n!==void 0?n:(i=s[0])===null||i===void 0?void 0:i.time,(a=u==null?void 0:u.time)!==null&&a!==void 0?a:1/0]},e.prototype.setByIndex=function(t){var n,i,a,s,o=this.data,A=I(t,2),l=A[0],c=A[1];this.states.values=[(i=(n=o[l])===null||n===void 0?void 0:n.time)!==null&&i!==void 0?i:o[0].time,(s=(a=this.data[c])===null||a===void 0?void 0:a.time)!==null&&s!==void 0?s:1/0]},Object.defineProperty(e.prototype,"sliderValues",{get:function(){var t=this.states,n=t.values,i=t.selectionType,a=I(Array.isArray(n)?n:[void 0,n],2),s=a[0],o=a[1],A=this.data,l=A.length,c=i==="value",u=function(){var d=A.findIndex(function(f){var g=f.time;return g===s});return c?0:d>-1?d/l:0},h=function(){if(o===1/0)return 1;var d=A.findIndex(function(f){var g=f.time;return g===o});return d>-1?d/l:c?.5:1};return[u(),h()]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){var t=this.states,n=t.values,i=t.selectionType,a=I(Array.isArray(n)?n:[this.data[0].time,n],2),s=a[0],o=a[1];return i==="value"?o:[s,o]},enumerable:!1,configurable:!0}),e.prototype.getDatumByRatio=function(t){var n=this.data,i=n.length,a=Math.floor(t*(i-1));return n[a]},Object.defineProperty(e.prototype,"chartHandleIconShape",{get:function(){var t=this.states.selectionType,n=this.space.timelineBBox.height;return t==="range"?function(i){return new BAe({style:{type:i,height:n,iconSize:n/6}})}:function(){return new Ss({style:{x1:0,y1:-n/2,x2:0,y2:n/2,lineWidth:2,stroke:"#c8c8c8"}})}},enumerable:!1,configurable:!0}),e.prototype.getChartStyle=function(t){var n=this,i=t.x,a=t.y,s=t.width,o=t.height,A=this.states,l=A.selectionType,c=A.chartType,u=this.data,h=this.attributes,d=h.type,f=h.labelFormatter,g=ge(this.attributes,"chart");g.type;var v=lt(g,["type"]),p=l==="range";if(d==="time")return H({handleIconShape:function(){return new wAe({})},selectionFill:"#2e7ff8",selectionFillOpacity:1,showLabelOnInteraction:!0,handleLabelDy:p?-15:0,autoFitLabel:p,handleSpacing:p?-15:0,trackFill:"#edeeef",trackLength:s,trackOpacity:.5,trackRadius:o/2,trackSize:o/2,type:l,values:this.sliderValues,formatter:function(w){if(f)return f(w);var B=n.getDatumByRatio(w).time;return typeof B=="number"?_U(B):Nn(B,"YYYY-MM-DD HH:mm:ss")},transform:"translate(".concat(i,", ").concat(a,")"),zIndex:1},v);var y=l==="range"?5:0,m=u.map(function(w){var B=w.value;return B});return H({handleIconOffset:y,handleIconShape:this.chartHandleIconShape,selectionFill:"#fff",selectionFillOpacity:.5,selectionType:"invert",sparklineSpacing:.1,sparklineColumnLineWidth:0,sparklineColor:"#d4e5fd",sparklineAreaOpacity:1,sparklineAreaLineWidth:0,sparklineData:m,sparklineType:c,sparklineScale:.8,trackLength:s,trackSize:o,type:l,values:this.sliderValues,transform:"translate(".concat(i,", ").concat(a,")"),zIndex:1},v)},e.prototype.renderChart=function(t){t===void 0&&(t=this.space.timelineBBox),this.timeline.update(this.getChartStyle(t))},e.prototype.updateSelection=function(){this.timeline.setValues(this.sliderValues,!0),this.handleSliderChange(this.sliderValues)},e.prototype.getAxisStyle=function(t){var n=this.data,i=this.attributes,a=i.interval,s=i.labelFormatter,o=ge(this.attributes,"axis"),A=t.x,l=t.y,c=t.width,u=oe(oe([],I(n),!1),[{time:0}],!1).map(function(d,f,g){var v=d.time;return{label:"".concat(v),value:f/(g.length-1),time:v}}),h=H({startPos:[A,l],endPos:[A+c,l],data:u,labelFilter:function(d,f){return f<u.length-1},labelFormatter:function(d){var f=d.time;return s?s(f):bAe(f,a)}},o);return h},e.prototype.renderAxis=function(t){t===void 0&&(t=this.space.axisBBox);var n=this.attributes.type;n==="chart"&&this.axis.update(this.getAxisStyle(t))},e.prototype.renderController=function(t){t===void 0&&(t=this.space.controllerBBox);var n=this.attributes.type,i=this.states,a=i.state,s=i.speed,o=i.selectionType,A=i.chartType,l=ge(this.attributes,"controller"),c=this,u=H(H(H({},t),{iconSize:20,speed:s,state:a,selectionType:o,chartType:A,onChange:function(h,d){var f=d.value;switch(h){case"reset":c.internalReset();break;case"speed":c.handleSpeedChange(f);break;case"backward":c.internalBackward();break;case"playPause":f==="play"?c.internalPlay():c.internalPause();break;case"forward":c.internalForward();break;case"selectionType":c.handleSelectionTypeChange(f);break;case"chartType":c.handleChartTypeChange(f);break}}}),l);n==="time"&&(u.functions=[["reset","speed"],["backward","playPause","forward"],["selectionType"]]),this.controller.update(u)},e.prototype.dispatchOnChange=function(t){var n=this.data,i=this.attributes.onChange,a=this.states,s=a.values,o=a.selectionType,A=I(s,2),l=A[0],c=A[1],u=c===1/0?n.at(-1).time:c,h=o==="range"?[l,u]:u,d=function(f,g){return Array.isArray(f)?Array.isArray(g)?f[0]===g[0]&&(f[1]===g[1]||f[1]===1/0||g[1]===1/0):!1:Array.isArray(g)?!1:f===g};(!t||!d(t,h))&&(i==null||i(o==="range"?[l,u]:u))},e.prototype.internalReset=function(t){var n,i,a=this.states.selectionType;this.internalPause(),this.setBySliderValues(a==="range"?[0,1]:[0,0]),this.renderController(),this.updateSelection(),t||((i=(n=this.attributes)===null||n===void 0?void 0:n.onReset)===null||i===void 0||i.call(n),this.dispatchOnChange())},e.prototype.reset=function(){this.internalReset()},e.prototype.moveSelection=function(t,n){var i=this.data,a=i.length,s=this.states,o=s.values,A=s.selectionType,l=s.playMode,c=I(o,2),u=c[0],h=c[1],d=i.findIndex(function(m){var w=m.time;return w===u}),f=i.findIndex(function(m){var w=m.time;return w===h});f===-1&&(f=a);var g=t==="backward"?-1:1,v;A==="range"?l==="acc"?(v=[d,f+g],g===-1&&d===f&&(v=[d,a])):v=[d+g,f+g]:v=[d,f+g];var p=function(m){var w=I(m.sort(function(x,S){return x-S}),2),B=w[0],b=w[1],E=function(x){return vt(x,0,a)};return b>a?A==="value"?[0,0]:l==="acc"?[E(B),E(B)]:[0,E(b-B)]:B<0?l==="acc"?[0,E(b)]:[E(B+a-b),a]:[E(B),E(b)]},y=p(v);return this.setByIndex(y),this.updateSelection(),y},e.prototype.internalBackward=function(t){var n,i,a=this.moveSelection("backward",t);return t||((i=(n=this.attributes)===null||n===void 0?void 0:n.onBackward)===null||i===void 0||i.call(n),this.dispatchOnChange()),a},e.prototype.backward=function(){this.internalBackward()},e.prototype.internalPlay=function(t){var n=this,i,a,s=this.data,o=this.attributes.loop,A=this.states.speed,l=A===void 0?1:A;this.playInterval=window.setInterval(function(){var c=n.internalForward();c[1]===s.length&&!o&&(n.internalPause(),n.renderController())},1e3/l),this.states.state="play",!t&&((a=(i=this.attributes)===null||i===void 0?void 0:i.onPlay)===null||a===void 0||a.call(i))},e.prototype.play=function(){this.internalPlay()},e.prototype.internalPause=function(t){var n,i;clearInterval(this.playInterval),this.states.state="pause",!t&&((i=(n=this.attributes)===null||n===void 0?void 0:n.onPause)===null||i===void 0||i.call(n))},e.prototype.pause=function(){this.internalPause()},e.prototype.internalForward=function(t){var n,i,a=this.moveSelection("forward",t);return t||((i=(n=this.attributes)===null||n===void 0?void 0:n.onForward)===null||i===void 0||i.call(n),this.dispatchOnChange()),a},e.prototype.forward=function(){this.internalForward()},e.prototype.handleSpeedChange=function(t){var n,i;this.states.speed=t;var a=this.states.state;a==="play"&&(this.internalPause(!0),this.internalPlay(!0)),(i=(n=this.attributes)===null||n===void 0?void 0:n.onSpeedChange)===null||i===void 0||i.call(n,t)},e.prototype.handleSelectionTypeChange=function(t){var n,i;this.states.selectionType=t,this.renderChart(),(i=(n=this.attributes)===null||n===void 0?void 0:n.onSelectionTypeChange)===null||i===void 0||i.call(n,t)},e.prototype.handleChartTypeChange=function(t){var n,i;this.states.chartType=t,this.renderChart(),(i=(n=this.attributes)===null||n===void 0?void 0:n.onChartTypeChange)===null||i===void 0||i.call(n,t)},e.prototype.render=function(){var t=this.space,n=t.axisBBox,i=t.controllerBBox,a=t.timelineBBox;this.renderController(i),this.renderAxis(n),this.renderChart(a),this.states.state==="play"&&this.internalPlay()},e.prototype.destroy=function(){r.prototype.destroy.call(this),this.internalPause(!0)},e.defaultOptions={style:{x:0,y:0,axisLabelFill:"#6e6e6e",axisLabelTextAlign:"left",axisLabelTextBaseline:"top",axisLabelTransform:"translate(5, -12)",axisLineLineWidth:1,axisLineStroke:"#cacdd1",axisTickLength:15,axisTickLineWidth:1,axisTickStroke:"#cacdd1",chartShowLabel:!1,chartType:"line",controllerAlign:"center",controllerHeight:40,data:[],interval:"day",loop:!1,playMode:"acc",selectionType:"range",type:"time"}},e}(yt);function mf(r){const{width:e,height:t,renderer:n}=r,i=CAe(r),a=new B1({width:e,height:t,container:i,renderer:n||new ll});return[i,a]}function CAe(r){var e;const{container:t,className:n,graphCanvas:i}=r;if(t)return typeof t=="string"?document.getElementById(t):t;const a=qo(n,!1),{width:s,height:o,containerStyle:A}=r,[l,c]=SAe(r);return Object.assign(a.style,Object.assign({position:"absolute",left:l+"px",top:c+"px",width:s+"px",height:o+"px"},A)),(e=i.getContainer())===null||e===void 0||e.appendChild(a),a}function SAe(r){const{width:e,height:t,placement:n,graphCanvas:i}=r,[a,s]=i.getSize(),[o,A]=zk(n);return[o*(a-e),A*(s-t)]}var FAe=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class wf extends en{constructor(e,t){super(e,Object.assign({},wf.defaultOptions,t)),this.typePrefix="__data__",this.draw=!1,this.fieldMap={node:new Map,edge:new Map,combo:new Map},this.selectedItems=[],this.bindEvents=()=>{const{graph:n}=this.context;n.on(V.AFTER_DRAW,this.createElement)},this.changeState=(n,i)=>{const{graph:a}=this.context,{typePrefix:s}=this,o=nn(n,[s,"id"]),A=nn(n,[s,"style","labelText"]),[l]=o.split("__"),c=this.fieldMap[l].get(A)||[];a.setElementState(Object.fromEntries(c==null?void 0:c.map(u=>[u,i])))},this.click=n=>{if(this.options.trigger==="hover")return;const i=nn(n,[this.typePrefix,"id"]);this.selectedItems.includes(i)?(this.selectedItems=this.selectedItems.filter(a=>a!==i),this.changeState(n,[])):(this.selectedItems.push(i),this.changeState(n,"selected"))},this.mouseleave=n=>{this.options.trigger!=="click"&&(this.selectedItems=[],this.changeState(n,[]))},this.mouseenter=n=>{if(this.options.trigger==="click")return;const i=nn(n,[this.typePrefix,"id"]);this.selectedItems.includes(i)?this.selectedItems=this.selectedItems.filter(a=>a!==i):(this.selectedItems.push(i),this.changeState(n,"active"))},this.setFieldMap=(n,i,a)=>{if(!n)return;const s=this.fieldMap[a];if(s)if(!s.has(n))s.set(n,[i]);else{const o=s.get(n);o&&(o.push(i),s.set(n,o))}},this.getEvents=()=>({mouseenter:this.mouseenter,mouseleave:this.mouseleave,click:this.click}),this.getMarkerData=(n,i)=>{if(!n)return[];const{model:a,element:s}=this.context,{nodes:o,edges:A,combos:l}=a.getData(),c={},u=v=>ie(n)?n(v):n,h={node:"circle",edge:"line",combo:"rect"},d={circle:"circle",ellipse:"circle",image:"bowtie",rect:"square",star:"cross",triangle:"triangle",diamond:"diamond",cubic:"dot",line:"hyphen",polyline:"hyphen",quadratic:"hv","cubic-horizontal":"hyphen","cubic-vertical":"line"},f=(v,p)=>s==null?void 0:s.getElementComputedStyle(v,p),g=(v,p)=>{v.forEach(y=>{const{id:m}=y,w=nn(y,["data",u(y)]),B=(s==null?void 0:s.getElementType(p,y))||"circle",b=f(p,y),E=(p==="edge"?b==null?void 0:b.stroke:b==null?void 0:b.fill)||"#1783ff";m&&w&&w.replace(/\s+/g,"")&&(this.setFieldMap(w,m,p),c[w]||(c[w]={id:`${p}__${m}`,label:w,marker:d[B]||h[p],elementType:p,lineWidth:1,stroke:E,fill:E}))})};switch(i){case"node":g(o,"node");break;case"edge":g(A,"edge");break;case"combo":g(l,"combo");break;default:return[]}return Object.values(c)},this.createElement=()=>{if(this.draw){this.updateElement();return}const n=this.options,{width:i,height:a,nodeField:s,edgeField:o,comboField:A,trigger:l,position:c,container:u,containerStyle:h,className:d}=n,f=FAe(n,["width","height","nodeField","edgeField","comboField","trigger","position","container","containerStyle","className"]),g=this.getMarkerData(s,"node"),v=this.getMarkerData(o,"edge"),p=this.getMarkerData(A,"combo"),y=[...g,...p,...v],m=Object.assign({width:i,height:a,data:y,itemMarkerLineWidth:({lineWidth:b})=>b,itemMarker:({marker:b})=>b,itemMarkerStroke:({stroke:b})=>b,itemMarkerFill:({fill:b})=>b,gridCol:g.length},f,this.getEvents()),w=new tAe({className:"legend",style:m});this.category=w,this.upsertCanvas().appendChild(w),this.draw=!0},this.bindEvents()}update(e){super.update(e),this.clear(),this.createElement()}clear(){var e,t;(e=this.canvas)===null||e===void 0||e.destroy(),(t=this.container)===null||t===void 0||t.remove(),this.canvas=void 0,this.container=void 0,this.draw=!1}updateElement(){this.category&&this.category.update({itemMarkerOpacity:({id:e})=>!this.selectedItems.length||this.selectedItems.includes(e)?1:.5,itemLabelOpacity:({id:e})=>!this.selectedItems.length||this.selectedItems.includes(e)?1:.5})}upsertCanvas(){if(this.canvas)return this.canvas;const e=this.context.canvas,[t,n]=e.getSize(),{width:i=t,height:a=n,position:s,container:o,containerStyle:A,className:l}=this.options,[c,u]=mf({width:i,height:a,graphCanvas:e,container:o,containerStyle:A,placement:s,className:"legend"});return this.container=c,l&&c.classList.add(l),this.canvas=u,this.canvas}destroy(){this.clear(),this.context.graph.off(V.AFTER_DRAW,this.createElement),super.destroy()}}wf.defaultOptions={position:"bottom",trigger:"hover",orientation:"horizontal",layout:"flex",itemSpacing:4,rowPadding:10,colPadding:10,itemMarkerSize:16,itemLabelFontSize:16,width:240,height:160};class Bf extends en{constructor(e,t){super(e,Object.assign({},Bf.defaultOptions,t)),this.onDraw=n=>{var i;!((i=n==null?void 0:n.data)===null||i===void 0)&&i.render||this.onRender()},this.landmarkMap=new Map,this.mask=null,this.isMaskDragging=!1,this.onMaskDragStart=n=>{this.mask&&(this.isMaskDragging=!0,this.mask.setPointerCapture(n.pointerId),this.mask.addEventListener("pointermove",this.onMaskDrag),this.mask.addEventListener("pointerup",this.onMaskDragEnd),this.mask.addEventListener("pointercancel",this.onMaskDragEnd))},this.onMaskDrag=n=>{if(!this.mask||!this.isMaskDragging)return;const{size:[i,a]}=this.options,{movementX:s,movementY:o}=n,{left:A,top:l,width:c,height:u}=this.mask.style,[,,h,d]=this.maskBBox;let f=parseInt(A)+s,g=parseInt(l)+o,v=parseInt(c),p=parseInt(u);f<0&&(f=0),g<0&&(g=0),f+v>i&&(f=ra(i-v,0)),g+p>a&&(g=ra(a-p,0)),v<h&&(s>0?(f=ra(f-s,0),v=na(v+s,i)):s<0&&(v=na(v-s,i))),p<d&&(o>0?(g=ra(g-o,0),p=na(p+o,a)):o<0&&(p=na(p-o,a))),Object.assign(this.mask.style,{left:f+"px",top:g+"px",width:v+"px",height:p+"px"});const y=parseInt(A)-f,m=parseInt(l)-g;if(y===0&&m===0)return;const w=this.context.canvas.getCamera().getZoom(),B=this.canvas.getCamera().getZoom(),b=w/B;this.context.graph.translateBy([y*b,m*b],!1)},this.onMaskDragEnd=n=>{this.mask&&(this.isMaskDragging=!1,this.mask.releasePointerCapture(n.pointerId),this.mask.removeEventListener("pointermove",this.onMaskDrag),this.mask.removeEventListener("pointerup",this.onMaskDragEnd),this.mask.removeEventListener("pointercancel",this.onMaskDragEnd))},this.onTransform=EI(()=>{this.isMaskDragging||(this.updateMask(),this.setCamera())},32,{leading:!0}),this.setOnRender(),this.bindEvents()}update(e){this.unbindEvents(),super.update(e),"delay"in e&&this.setOnRender(),this.bindEvents()}setOnRender(){this.onRender=wl(()=>{this.renderMinimap(),this.renderMask()},this.options.delay)}bindEvents(){const{graph:e}=this.context;e.on(V.AFTER_DRAW,this.onDraw),e.on(V.AFTER_RENDER,this.onRender),e.on(V.AFTER_ANIMATE,this.onRender),e.on(V.AFTER_TRANSFORM,this.onTransform)}unbindEvents(){const{graph:e}=this.context;e.off(V.AFTER_DRAW,this.onDraw),e.off(V.AFTER_RENDER,this.onRender),e.off(V.AFTER_ANIMATE,this.onRender),e.off(V.AFTER_TRANSFORM,this.onTransform)}renderMinimap(){const e=this.getElements(),t=this.initCanvas();this.setShapes(t,e)}getElements(){const{filter:e}=this.options,{model:t,element:n}=this.context,i=t.getData(),a={nodes:i.nodes.filter(l=>n==null?void 0:n.getElement(N(l))),edges:i.edges.filter(l=>{const c=n==null?void 0:n.getElement(N(l));return c&&bL(c)}),combos:i.combos.filter(l=>n==null?void 0:n.getElement(N(l)))};if(!e)return a;const{nodes:s,edges:o,combos:A}=a;return{nodes:s.filter(l=>e(N(l),"node")),edges:o.filter(l=>e(N(l),"edge")),combos:A.filter(l=>e(N(l),"combo"))}}setShapes(e,t){const{nodes:n,edges:i,combos:a}=t,{shape:s}=this.options,{element:o}=this.context,A=(l,c)=>{const u=N(l),h=o==null?void 0:o.getElement(u);if(!h)return;const d=h.getShape("key");let f;if(typeof s=="string"){const g=s;f=h.getShape(g).cloneNode()}else{const g=s(u,c,h);g===h?f=g.cloneNode(!0):f=g}f.setPosition(d.getPosition()),h.style.zIndex&&(f.style.zIndex=h.style.zIndex),f.id=h.id,e.appendChild(f)};e.removeChildren(),i.forEach(l=>A(l,"edge")),a.forEach(l=>A(l,"combo")),n.forEach(l=>A(l,"node"))}initCanvas(){const{renderer:e,size:[t,n]}=this.options;if(this.canvas){const{width:i,height:a}=this.canvas.getConfig();(t!==i||n!==a)&&this.canvas.resize(t,n),e&&this.canvas.setRenderer(e)}else{const{className:i,position:a,container:s,containerStyle:o}=this.options,[A,l]=mf({renderer:e,width:t,height:n,placement:a,className:"minimap",container:s,containerStyle:o,graphCanvas:this.context.canvas});i&&A.classList.add(i),this.container=A,this.canvas=l}return this.setCamera(),this.canvas}createLandmark(e,t,n){const i=`${e.join(",")}-${t.join(",")}-${n}`;if(this.landmarkMap.has(i))return this.landmarkMap.get(i);const s=this.canvas.getCamera().createLandmark(i,{position:e,focalPoint:t,zoom:n});return this.landmarkMap.set(i,s),s}setCamera(){var e;const{canvas:t}=this.context,n=(e=this.canvas)===null||e===void 0?void 0:e.getCamera();if(!n)return;const{size:[i,a],padding:s}=this.options,[o,A,l,c]=Sr(s),{min:u,max:h,center:d}=t.getBounds("elements"),f=h[0]-u[0],g=h[1]-u[1],v=i-c-A,p=a-o-l,y=v/f,m=p/g,w=Math.min(y,m),B=this.createLandmark(d,d,w);n.gotoLandmark(B,0)}get maskBBox(){const{canvas:e}=this.context,t=e.getSize(),n=e.getCanvasByViewport([0,0]),i=e.getCanvasByViewport(t),a=this.canvas.canvas2Viewport(Hr(n)),s=this.canvas.canvas2Viewport(Hr(i)),o=s.x-a.x,A=s.y-a.y;return[a.x,a.y,o,A]}calculateMaskBBox(){const{size:[e,t]}=this.options;let[n,i,a,s]=this.maskBBox;return n<0&&(a=na(a+n,e),n=0),i<0&&(s=na(s+i,t),i=0),n+a>e&&(a=ra(e-n,0)),i+s>t&&(s=ra(t-i,0)),[na(n,e),na(i,t),ra(a,0),ra(s,0)]}renderMask(){const{maskStyle:e}=this.options;this.mask||(this.mask=document.createElement("div"),this.mask.addEventListener("pointerdown",this.onMaskDragStart),this.mask.draggable=!0,this.mask.addEventListener("dragstart",t=>t.preventDefault&&t.preventDefault())),this.container.appendChild(this.mask),Object.assign(this.mask.style,Object.assign(Object.assign({},e),{cursor:"move",position:"absolute",pointerEvents:"auto"})),this.updateMask()}updateMask(){if(!this.mask)return;const[e,t,n,i]=this.calculateMaskBBox();Object.assign(this.mask.style,{top:t+"px",left:e+"px",width:n+"px",height:i+"px"})}destroy(){var e,t,n;this.unbindEvents(),(e=this.canvas)===null||e===void 0||e.destroy(),(t=this.mask)===null||t===void 0||t.remove(),(n=this.container)===null||n===void 0||n.remove(),super.destroy()}}Bf.defaultOptions={size:[240,160],shape:"key",padding:10,position:"right-bottom",maskStyle:{border:"1px solid #ddd",background:"rgba(0, 0, 0, 0.1)"},containerStyle:{border:"1px solid #ddd",background:"#fff"},delay:128};const na=(r,e)=>Math.min(r,e),ra=(r,e)=>Math.max(r,e);var Km=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};const zm={x1:0,y1:0,x2:0,y2:0,visibility:"hidden"};class bf extends en{constructor(e,t){super(e,Object.assign({},bf.defaultOptions,t)),this.initSnapline=()=>{const n=this.context.canvas.getLayer("transient");this.horizontalLine||(this.horizontalLine=n.appendChild(new Ss({style:Object.assign(Object.assign({},zm),this.options.horizontalLineStyle)}))),this.verticalLine||(this.verticalLine=n.appendChild(new Ss({style:Object.assign(Object.assign({},zm),this.options.verticalLineStyle)})))},this.isHorizontalSticking=!1,this.isVerticalSticking=!1,this.enableStick=!0,this.autoSnapToLine=(n,i,a)=>Km(this,void 0,void 0,function*(){const{verticalX:s,horizontalY:o}=a,{tolerance:A}=this.options,{min:[l,c],max:[u,h],center:[d,f]}=i;let g=0,v=0;s!==null&&(hn(u,s)<A&&(g=s-u),hn(l,s)<A&&(g=s-l),hn(d,s)<A&&(g=s-d),g!==0&&(this.isVerticalSticking=!0)),o!==null&&(hn(h,o)<A&&(v=o-h),hn(c,o)<A&&(v=o-c),hn(f,o)<A&&(v=o-f),v!==0&&(this.isHorizontalSticking=!0)),(g!==0||v!==0)&&(yield this.context.graph.translateElementBy({[n]:[g,v]},!1))}),this.enableSnap=n=>{const{target:i}=n,a=.5;if(this.isHorizontalSticking||this.isVerticalSticking){const[s,o]=this.getDelta(n);if(this.isHorizontalSticking&&this.isVerticalSticking&&Math.abs(s)<=a&&Math.abs(o)<=a)return this.context.graph.translateElementBy({[i.id]:[-s,-o]},!1),!1;if(this.isHorizontalSticking&&Math.abs(o)<=a)return this.context.graph.translateElementBy({[i.id]:[0,-o]},!1),!1;if(this.isVerticalSticking&&Math.abs(s)<=a)return this.context.graph.translateElementBy({[i.id]:[-s,0]},!1),!1;this.isHorizontalSticking=!1,this.isVerticalSticking=!1,this.enableStick=!1,setTimeout(()=>{this.enableStick=!0},200)}return this.enableStick},this.calcSnaplineMetadata=(n,i)=>{const{tolerance:a,shape:s}=this.options,{min:[o,A],max:[l,c],center:[u,h]}=i;let d=null,f=null,g=null,v=null,p=null,y=null;return this.getNodes().some(m=>{if(pt(n.id,m.id))return!1;const w=CO(m,s).getRenderBounds(),{min:[B,b],max:[E,x],center:[S,C]}=w;return d===null&&(hn(S,u)<a?d=S:hn(B,o)<a||hn(B,l)<a?d=B:(hn(E,l)<a||hn(E,o)<a)&&(d=E),d!==null&&(f=Math.min(b,A),g=Math.max(x,c))),v===null&&(hn(C,h)<a?v=C:hn(b,A)<a||hn(b,c)<a?v=b:(hn(x,c)<a||hn(x,A)<a)&&(v=x),v!==null&&(p=Math.min(B,o),y=Math.max(E,l))),d!==null&&v!==null}),{verticalX:d,verticalMinY:f,verticalMaxY:g,horizontalY:v,horizontalMinX:p,horizontalMaxX:y}},this.onDragStart=()=>{this.initSnapline()},this.onDrag=n=>Km(this,void 0,void 0,function*(){const{target:i}=n;if(this.options.autoSnap&&!this.enableSnap(n))return;const a=CO(i,this.options.shape).getRenderBounds(),s=this.calcSnaplineMetadata(i,a);this.hideSnapline(),(s.verticalX!==null||s.horizontalY!==null)&&this.updateSnapline(s),this.options.autoSnap&&(yield this.autoSnapToLine(i.id,a,s))}),this.onDragEnd=()=>{this.hideSnapline()},this.bindEvents()}getNodes(){var e;const{filter:t}=this.options,i=(((e=this.context.element)===null||e===void 0?void 0:e.getNodes())||[]).filter(a=>{var s;return bL(a)&&((s=this.context.viewport)===null||s===void 0?void 0:s.isInViewport(a.getRenderBounds()))});return t?i.filter(a=>t(a)):i}hideSnapline(){this.horizontalLine.style.visibility="hidden",this.verticalLine.style.visibility="hidden"}getLineWidth(e){const{lineWidth:t}=this.options[`${e}LineStyle`];return+(t||zm.lineWidth||1)/this.context.graph.getZoom()}updateSnapline(e){const{verticalX:t,verticalMinY:n,verticalMaxY:i,horizontalY:a,horizontalMinX:s,horizontalMaxX:o}=e,[A,l]=this.context.canvas.getSize(),{offset:c}=this.options;a!==null?Object.assign(this.horizontalLine.style,{x1:c===1/0?0:s-c,y1:a,x2:c===1/0?A:o+c,y2:a,visibility:"visible",lineWidth:this.getLineWidth("horizontal")}):this.horizontalLine.style.visibility="hidden",t!==null?Object.assign(this.verticalLine.style,{x1:t,y1:c===1/0?0:n-c,x2:t,y2:c===1/0?l:i+c,visibility:"visible",lineWidth:this.getLineWidth("vertical")}):this.verticalLine.style.visibility="hidden"}getDelta(e){const t=this.context.graph.getZoom();return jr([e.dx,e.dy],t)}bindEvents(){return Km(this,void 0,void 0,function*(){const{graph:e}=this.context;e.on(Sn.DRAG_START,this.onDragStart),e.on(Sn.DRAG,this.onDrag),e.on(Sn.DRAG_END,this.onDragEnd)})}unbindEvents(){const{graph:e}=this.context;e.off(Sn.DRAG_START,this.onDragStart),e.off(Sn.DRAG,this.onDrag),e.off(Sn.DRAG_END,this.onDragEnd)}destroyElements(){var e,t;(e=this.horizontalLine)===null||e===void 0||e.destroy(),(t=this.verticalLine)===null||t===void 0||t.destroy()}destroy(){this.destroyElements(),this.unbindEvents(),super.destroy()}}bf.defaultOptions={tolerance:5,offset:20,autoSnap:!0,shape:"key",verticalLineStyle:{stroke:"#1783FF"},horizontalLineStyle:{stroke:"#1783FF"},filter:()=>!0};const hn=(r,e)=>Math.abs(r-e),CO=(r,e)=>typeof e=="function"?e(r):r.getShape(e);var TAe=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})},MAe=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const OAe=["timestamp","time","date","datetime"];class Ef extends en{get padding(){return Sr(this.options.padding)}constructor(e,t){super(e,Object.assign({},Ef.defaultOptions,t)),this.backup(),this.upsertTimebar()}play(){var e;(e=this.timebar)===null||e===void 0||e.play()}pause(){var e;(e=this.timebar)===null||e===void 0||e.pause()}forward(){var e;(e=this.timebar)===null||e===void 0||e.forward()}backward(){var e;(e=this.timebar)===null||e===void 0||e.backward()}reset(){var e;(e=this.timebar)===null||e===void 0||e.reset()}update(e){super.update(e),this.backup(),this.upsertTimebar()}backup(){this.originalData=SO(this.context.graph.getData())}upsertTimebar(){const{canvas:e}=this.context,t=this.options,{onChange:n,timebarType:i,data:a,x:s,y:o,width:A,height:l,mode:c}=t,u=MAe(t,["onChange","timebarType","data","x","y","width","height","mode"]),h=e.getSize(),[d]=this.padding;this.upsertCanvas().ready.then(()=>{var f;const g=Object.assign(Object.assign({x:h[0]/2-A/2,y:d,onChange:v=>{const p=(Wn(v)?v:[v,v]).map(y=>nR(y)?y.getTime():y);this.options.mode==="modify"?this.filterElements(p):this.hiddenElements(p),n==null||n(p)}},u),{data:a.map(v=>Z(v)?{time:v,value:0}:v),width:A,height:l,type:i});this.timebar?this.timebar.update(g):(this.timebar=new xAe({style:g}),(f=this.canvas)===null||f===void 0||f.appendChild(this.timebar))})}upsertCanvas(){if(this.canvas)return this.canvas;const{className:e,height:t,position:n}=this.options,i=this.context.canvas,[a]=i.getSize(),[s,,o]=this.padding,[A,l]=mf({width:a,height:t+s+o,graphCanvas:i,className:"timebar",placement:n});return this.container=A,e&&A.classList.add(e),this.canvas=l,this.canvas}filterElements(e){return TAe(this,void 0,void 0,function*(){var t;if(!this.originalData)return;const{elementTypes:n,getTime:i}=this.options,{graph:a,element:s}=this.context,o=SO(this.originalData);n.forEach(l=>{const c=`${l}s`;o[c]=(this.originalData[c]||[]).filter(u=>{const h=i(u);return!!FO(h,e)})});const A=[...o.nodes,...o.combos].map(l=>N(l));o.edges=o.edges.filter(l=>{const c=l.source,u=l.target;return A.includes(c)&&A.includes(u)}),a.setData(o),yield(t=s.draw({animation:!1,silence:!0}))===null||t===void 0?void 0:t.finished})}hiddenElements(e){const{graph:t}=this.context,{elementTypes:n,getTime:i}=this.options,a=[],s=[];n.forEach(o=>{var A;const l=`${o}s`;(((A=this.originalData)===null||A===void 0?void 0:A[l])||[]).forEach(u=>{const h=N(u),d=i(u);FO(d,e)?s.push(h):a.push(h)})}),t.hideElement(a,!1),t.showElement(s,!1)}destroy(){var e,t,n;const{graph:i}=this.context;this.originalData&&i.setData(Object.assign({},this.originalData)),(e=this.timebar)===null||e===void 0||e.destroy(),(t=this.canvas)===null||t===void 0||t.destroy(),(n=this.container)===null||n===void 0||n.remove(),this.originalData=void 0,this.container=void 0,this.timebar=void 0,this.canvas=void 0,super.destroy()}}Ef.defaultOptions={position:"bottom",enable:!0,timebarType:"time",className:"g6-timebar",width:450,height:60,zIndex:3,elementTypes:["node"],padding:10,mode:"modify",getTime:r=>IAe(r,OAe,void 0),loop:!1};const SO=r=>{const{nodes:e=[],edges:t=[],combos:n=[]}=r;return{nodes:[...e],edges:[...t],combos:[...n]}},FO=(r,e)=>{if(Z(e))return r===e;const[t,n]=e;return r>=t&&r<=n},IAe=(r,e,t)=>{var n;for(let i=0;i<e.length;i++){const a=e[i],s=(n=r.data)===null||n===void 0?void 0:n[a];if(s)return s}return t};var _Ae=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const kU={fill:"#1D2129",wordWrap:!0,maxLines:1,textOverflow:"ellipsis",textBaseline:"top",textAlign:"start",x:0},kAe=Object.assign(Object.assign({},kU),{fillOpacity:.9,fontSize:16,fontWeight:"bold"}),LAe=Object.assign(Object.assign({},kU),{fillOpacity:.65,fontSize:12,fontWeight:"normal"}),QAe={align:"left",spacing:8,size:44,padding:[16,24,0,24]},Vm="title",TO="subtitle";class NAe extends en{get padding(){return Sr(this.options.padding)}constructor(e,t){const n=Object.assign({},QAe,t);super(e,n),this.onRender=()=>{const i=this.updateCanvas();this.renderTitle(i)},this.bindEvents()}bindEvents(){const{graph:e}=this.context;e.on(V.AFTER_RENDER,this.onRender),e.on(V.AFTER_ANIMATE,this.onRender)}unbindEvents(){const{graph:e}=this.context;e.off(V.AFTER_RENDER,this.onRender),e.off(V.AFTER_ANIMATE,this.onRender)}destroy(){var e,t;this.unbindEvents(),(e=this.canvas)===null||e===void 0||e.destroy(),(t=this.container)===null||t===void 0||t.remove(),super.destroy()}updateCanvas(){const{size:e,className:t,align:n}=this.options,[i]=this.context.canvas.getSize(),[a=0,,s=0]=this.padding,o=e+a+s;if(this.canvas){const{width:A,height:l}=this.canvas.getConfig();(i!==A||o!==l)&&this.canvas.resize(i,o)}else{const A={left:"left-top",center:"top",right:"right-top"},[l,c]=mf({width:i,height:o,placement:A[n]||A.left,className:"title-canvas",graphCanvas:this.context.canvas});t&&l.classList.add(t),this.container=l,this.canvas=c}return this.canvas}renderTitle(e){const t=new UAe({options:this.options,ctx:this.context});e.removeChildren(),t.getTitle().forEach(n=>{n&&e.appendChild(n)})}}class UAe{get padding(){return Sr(this.options.padding)}constructor(e){const{options:t,ctx:n}=e;this.options=t,this.context=n}getTitle(){const e=this.options,t=Vm,n=e[t],i=TO,a=e[i],{spacing:s=44,padding:o,align:A}=e,l=_Ae(e,[t+"",i+"","spacing","padding","align"]),c=n,u=a,h=bt(l,Vm),d=bt(l,TO),[f]=this.context.graph.getSize(),[g=0,v=0,,p=0]=this.padding,y=f,m=y-p-v;let w=null,B=p,b="left";switch(A){case"left":B=p,b="left";break;case"center":B=y/2,b="center";break;case"right":B=y-v,b="right";break;default:B=p,b="left"}const E=new wi({className:Vm,style:Object.assign(Object.assign(Object.assign(Object.assign({},kAe),{wordWrapWidth:m-5,x:B,y:g,textAlign:b}),h),{text:c})}),x=E.getBBox();return u&&(w=new wi({className:"subTitle",style:Object.assign(Object.assign(Object.assign(Object.assign({},LAe),{wordWrapWidth:m-5,x:B,y:x.height+s+g,textAlign:b}),d),{text:u})})),[E,w]}}function PAe(r){const e={top:"unset",right:"unset",bottom:"unset",left:"unset"};return r.split("-").forEach(n=>{e[n]="8px"}),e.flexDirection=r.startsWith("top")||r.startsWith("bottom")?"row":"column",e}const RAe=`
  .g6-toolbar {
    position: absolute;
    z-index: 100;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.1);
    opacity: 0.65;
  }
  .g6-toolbar .g6-toolbar-item {
    display: inline-block;
    width: 16px;
    height: 16px;
    padding: 4px;
    cursor: pointer;
    box-sizing: content-box;
  }

  .g6-toolbar .g6-toolbar-item:hover {
    background-color: #f0f0f0;
  }

  .g6-toolbar .g6-toolbar-item svg {
    display: inline-block;
    width: 100%;
    height: 100%;
    pointer-events: none;
  }
`,DAe=`
  <svg>
    <symbol id="zoom-in" viewBox="64 64 896 896">
      <path d="M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"></path>
    </symbol>
    <symbol id="zoom-out" viewBox="64 64 896 896">
      <path d="M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"></path>
    </symbol>
    <symbol id="edit" viewBox="64 64 896 896">
      <path d="M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"></path>
    </symbol>
    <symbol id="delete" viewBox="64 64 896 896">
      <path d="M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"></path>
    </symbol>
    <symbol id="redo" viewBox="64 64 896 896">
      <path d="M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"></path>
    </symbol>
    <symbol id="undo" viewBox="64 64 896 896">
      <path d="M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 00-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 00-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z"></path>
    </symbol>
    <symbol id="export" viewBox="64 64 896 896">
      <path d="M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"></path>
    </symbol>
    <symbol id="auto-fit" viewBox="64 64 896 896">
      <path d="M952 474H829.8C812.5 327.6 696.4 211.5 550 194.2V72c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v122.2C327.6 211.5 211.5 327.6 194.2 474H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h122.2C211.5 696.4 327.6 812.5 474 829.8V952c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V829.8C696.4 812.5 812.5 696.4 829.8 550H952c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM512 756c-134.8 0-244-109.2-244-244s109.2-244 244-244 244 109.2 244 244-109.2 244-244 244z"></path>
      <path d="M512 392c-32.1 0-62.1 12.4-84.8 35.2-22.7 22.7-35.2 52.7-35.2 84.8s12.5 62.1 35.2 84.8C449.9 619.4 480 632 512 632s62.1-12.5 84.8-35.2C619.4 574.1 632 544 632 512s-12.5-62.1-35.2-84.8A118.57 118.57 0 00512 392z"></path>
    </symbol>
    <symbol id="reset" viewBox="64 64 896 896">
      <path d="M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"></path>
    </symbol>
    <symbol id="exit-fullscreen" viewBox="0 0 1024 1024">
      <path d="M418.13333333 361.43786666c0 0.2048-0.13653333 0.4096-0.13653334 0.68266667C417.99679999 362.32533333 418.13333333 362.53013333 418.13333333 362.73493333 418.13333333 371.54133333 414.44693333 379.392 408.78079999 385.39946666 408.43946666 385.7408 408.30293333 386.21866666 408.02986666 386.49173333c-1.09226667 1.09226667-2.59413333 1.77493333-3.82293333 2.73066667C398.40426666 393.65973333 391.64586666 396.8 383.93173333 396.8 383.72693333 396.8 383.59039999 396.73173333 383.38559999 396.73173333S382.97599999 396.8 382.77119999 396.8L112.29866666 396.8C92.50133333 396.8 76.79999999 381.50826666 76.79999999 362.66666666 76.66346666 343.89333333 92.63786666 328.53333333 112.16213333 328.53333333l189.44 0L87.44959999 114.51733333C73.59146666 100.59093333 73.25013333 78.5408 86.63039999 65.29706666c13.17546667-13.44853333 35.36213333-12.97066667 49.152 0.88746667l214.08426667 214.08426667L349.86666666 90.89706666C349.79839999 71.23626666 365.22666666 55.46666666 383.99999999 55.46666666 402.77333333 55.33013333 418.13333333 71.30453333 418.13333333 90.8288L418.13333333 361.43786666zM928.90453333 328.53333333l-189.44 0 214.15253333-214.08426667c13.85813333-13.9264 14.19946667-35.90826667 0.88746667-49.22026666-13.17546667-13.44853333-35.36213333-12.97066667-49.152 0.88746666l-214.08426667 214.08426667L691.26826666 90.89706666C691.26826666 71.23626666 675.83999999 55.46666666 657.06666666 55.46666666 638.29333333 55.33013333 622.93333333 71.30453333 622.93333333 90.8288l0 270.60906666c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 362.32533333 622.93333333 362.53013333 622.93333333 362.73493333 622.93333333 371.54133333 626.61973333 379.392 632.28586666 385.39946666c0.34133333 0.34133333 0.47786667 0.8192 0.8192 1.09226667 1.09226667 1.09226667 2.59413333 1.77493333 3.8912 2.73066667C642.66239999 393.65973333 649.42079999 396.8 657.13493333 396.8c0.2048 0 0.34133333-0.06826667 0.54613333-0.06826667S658.09066666 396.8 658.29546666 396.8l270.5408 0C948.56533333 396.8 964.26666666 381.50826666 964.26666666 362.66666666 964.40319999 343.89333333 948.42879999 328.53333333 928.90453333 328.53333333zM418.13333333 635.73333333c0-8.8064-3.6864-16.5888-9.35253334-22.66453333C408.43946666 612.72746666 408.30293333 612.2496 408.02986666 611.90826666 406.86933333 610.88426666 405.43573333 610.2016 404.20693333 609.24586666 398.47253333 604.80853333 391.64586666 601.6 383.93173333 601.6 383.72693333 601.6 383.59039999 601.73653333 383.38559999 601.73653333S382.97599999 601.6 382.77119999 601.6L112.29866666 601.6C92.50133333 601.6 76.79999999 616.96 76.79999999 635.73333333 76.66346666 654.50666666 92.63786666 669.86666666 112.16213333 669.86666666l189.44 0-214.15253334 214.15253334c-13.85813333 13.85813333-14.19946667 35.84-0.88746666 49.22026666 13.17546667 13.44853333 35.36213333 12.9024 49.152-0.95573333l214.08426666-214.08426667 0 189.37173334c0 19.59253333 15.42826667 35.49866667 34.2016 35.36213333C402.77333333 943.2064 418.13333333 927.232 418.13333333 907.5712L418.13333333 637.09866666c0-0.27306667-0.13653333-0.47786667-0.13653334-0.68266666C417.99679999 636.14293333 418.13333333 635.93813333 418.13333333 635.73333333zM739.46453333 669.86666666l189.44 0c19.456 0 35.49866667-15.36 35.36213333-34.13333333C964.26666666 616.96 948.56533333 601.6 928.76799999 601.6L658.29546666 601.6C658.09066666 601.6 657.88586666 601.73653333 657.68106666 601.73653333S657.33973333 601.6 657.13493333 601.6C649.42079999 601.6 642.59413333 604.80853333 636.85973333 609.24586666 635.63093333 610.2016 634.19733333 610.88426666 633.03679999 611.90826666 632.76373333 612.2496 632.62719999 612.72746666 632.28586666 613.0688 626.61973333 619.14453333 622.93333333 626.92693333 622.93333333 635.73333333c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 636.6208 622.93333333 636.8256 622.93333333 637.09866666l0 270.5408C622.93333333 927.232 638.29333333 943.2064 657.06666666 942.93333333c18.77333333 0.13653333 34.2016-15.70133333 34.2016-35.36213333l0-189.37173334 214.08426667 214.08426667c13.78986667 13.85813333 35.90826667 14.40426667 49.152 0.95573333 13.312-13.312 12.97066667-35.36213333-0.88746667-49.22026666L739.46453333 669.86666666z"  ></path></symbol>
    <symbol id="request-fullscreen" viewBox="0 0 1024 1024">
      <path d="M69.818182 87.598545v273.128728a34.909091 34.909091 0 0 0 69.818182 0V163.653818l221.928727 222.021818a33.512727 33.512727 0 0 0 47.383273-47.383272L186.926545 116.363636h197.073455a34.909091 34.909091 0 0 0 0-69.818181H110.871273C85.364364 46.545455 69.818182 59.671273 69.818182 87.598545zM938.542545 46.545455H665.413818a34.909091 34.909091 0 0 0 0 69.818181h197.073455L640.465455 338.292364a33.512727 33.512727 0 0 0 47.383272 47.383272l221.928728-222.021818v197.073455a34.909091 34.909091 0 0 0 69.818181 0V87.598545c0-27.927273-15.453091-41.053091-40.96-41.05309z m-827.671272 907.636363h273.128727a34.909091 34.909091 0 0 0 0-69.818182H186.926545l222.021819-221.928727a33.512727 33.512727 0 0 0-47.383273-47.383273L139.636364 837.073455V640a34.909091 34.909091 0 0 0-69.818182 0v273.128727c0 27.927273 15.546182 41.053091 41.053091 41.053091z m868.724363-41.053091V640a34.909091 34.909091 0 0 0-69.818181 0v197.073455L687.941818 615.051636a33.512727 33.512727 0 0 0-47.383273 47.383273L862.487273 884.363636H665.413818a34.909091 34.909091 0 0 0 0 69.818182h273.128727c25.6 0 41.053091-13.125818 41.053091-41.053091z"  ></path></symbol>
  </svg>
`;var MO=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class xf extends en{constructor(e,t){super(e,Object.assign({},xf.defaultOptions,t)),this.$element=qo("toolbar",!1),this.onToolbarItemClick=i=>{const{onClick:a}=this.options;if(i.target instanceof Element&&i.target.className.includes("g6-toolbar-item")){const s=i.target.getAttribute("value");a==null||a(s,i.target)}};const n=this.context.canvas.getContainer();this.$element.style.display="flex",n.appendChild(this.$element),hw("g6-toolbar-css","style",{},RAe,document.head),hw("g6-toolbar-svgicon","div",{display:"none"},DAe),this.$element.addEventListener("click",this.onToolbarItemClick),this.update(t)}update(e){const t=Object.create(null,{update:{get:()=>super.update}});return MO(this,void 0,void 0,function*(){t.update.call(this,e);const{className:n,position:i,style:a}=this.options;this.$element.className=`g6-toolbar ${n||""}`,Object.assign(this.$element.style,a,PAe(i)),this.$element.innerHTML=yield this.getDOMContent()})}destroy(){this.$element.removeEventListener("click",this.onToolbarItemClick),this.$element.remove(),super.destroy()}getDOMContent(){return MO(this,void 0,void 0,function*(){return(yield this.options.getItems()).map(t=>{var n;return`
          <div class="g6-toolbar-item" value="${t.value}" title="${(n=t.title)!==null&&n!==void 0?n:""}">
            <svg aria-hidden="true" focusable="false">
              <use xlink:href="#${t.id}"></use>
            </svg>
          </div>`}).join("")})}}xf.defaultOptions={position:"top-left"};var OO=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class Cf extends en{constructor(e,t){super(e,Object.assign({},Cf.defaultOptions,t)),this.currentTarget=null,this.tooltipElement=null,this.container=null,this.isEnable=(n,i)=>{const{enable:a}=this.options;return typeof a=="function"?a(n,i):a},this.onClick=n=>{const{target:{id:i}}=n;this.currentTarget===i?this.hide(n):this.show(n)},this.onPointerMove=n=>{const{target:i}=n;!this.currentTarget||i.id===this.currentTarget||this.show(n)},this.onPointerLeave=n=>{this.hide(n)},this.onCanvasMove=n=>{this.hide(n)},this.onPointerOver=n=>{this.show(n)},this.showById=n=>OO(this,void 0,void 0,function*(){const i={target:{id:n}};yield this.show(i)}),this.getElementData=(n,i)=>{const{model:a}=this.context;switch(i){case"node":return a.getNodeData([n]);case"edge":return a.getEdgeData([n]);case"combo":return a.getComboData([n]);default:return[]}},this.show=n=>OO(this,void 0,void 0,function*(){var i,a;const{client:s,target:{id:o}}=n;if(Ql(n.target))return;const A=this.context.graph.getElementType(o),{getContent:l,title:c}=this.options,u=this.getElementData(o,A);if(!this.tooltipElement)return;if(!this.isEnable(n,u)){this.hide(n);return}let h={};if(l){if(h.content=yield l(n,u),!h.content)return}else{const g=this.context.graph.getElementRenderStyle(o),v=A==="node"?g.fill:g.stroke;h={title:c||A,data:u.map(p=>({name:"ID",value:p.id||`${p.source} -> ${p.target}`,color:v}))}}this.currentTarget=o;let d,f;if(s)d=s.x,f=s.y;else{const g=nn(u,"0.style",{x:0,y:0});d=g.x,f=g.y}(a=(i=this.options).onOpenChange)===null||a===void 0||a.call(i,!0),this.tooltipElement.update(Object.assign(Object.assign(Object.assign({},this.tooltipStyleProps),{x:d,y:f,style:{".tooltip":{visibility:"visible"}}}),h))}),this.hide=n=>{var i,a,s,o,A;if(!n){(a=(i=this.options).onOpenChange)===null||a===void 0||a.call(i,!1),(s=this.tooltipElement)===null||s===void 0||s.hide(),this.currentTarget=null;return}if(!this.tooltipElement||!this.currentTarget)return;const{client:{x:l,y:c}}=n;(A=(o=this.options).onOpenChange)===null||A===void 0||A.call(o,!1),this.tooltipElement.hide(l,c),this.currentTarget=null},this.initTooltip=()=>{var n;const i=new aAe({className:"tooltip",style:this.tooltipStyleProps});return(n=this.container)===null||n===void 0||n.appendChild(i.HTMLTooltipElement),i},this.render(),this.bindEvents()}getEvents(){return this.options.trigger==="click"?{"node:click":this.onClick,"edge:click":this.onClick,"combo:click":this.onClick,"canvas:click":this.onPointerLeave,contextmenu:this.onPointerLeave,drag:this.onPointerLeave}:{"node:pointerover":this.onPointerOver,"node:pointermove":this.onPointerMove,"canvas:pointermove":this.onCanvasMove,"edge:pointerover":this.onPointerOver,"edge:pointermove":this.onPointerMove,"combo:pointerover":this.onPointerOver,"combo:pointermove":this.onPointerMove,contextmenu:this.onPointerLeave,"node:drag":this.onPointerLeave}}update(e){var t;this.unbindEvents(),super.update(e),this.tooltipElement&&((t=this.container)===null||t===void 0||t.removeChild(this.tooltipElement.HTMLTooltipElement)),this.tooltipElement=this.initTooltip(),this.bindEvents()}render(){const{canvas:e}=this.context,t=e.getContainer();t&&(this.container=t,this.tooltipElement=this.initTooltip())}unbindEvents(){const{graph:e}=this.context,t=this.getEvents();Object.keys(t).forEach(n=>{e.off(n,t[n])})}bindEvents(){const{graph:e}=this.context,t=this.getEvents();Object.keys(t).forEach(n=>{e.on(n,t[n])})}get tooltipStyleProps(){const{canvas:e}=this.context,{center:t}=e.getBounds(),n=e.getContainer(),{top:i,left:a}=n.getBoundingClientRect(),{style:s,position:o,enterable:A,container:l={x:-a,y:-i},title:c,offset:u}=this.options,[h,d]=t,[f,g]=e.getSize();return{x:h,y:d,container:l,title:c,bounding:{x:0,y:0,width:f,height:g},position:o,enterable:A,offset:u,style:s}}destroy(){var e;this.unbindEvents(),this.tooltipElement&&((e=this.container)===null||e===void 0||e.removeChild(this.tooltipElement.HTMLTooltipElement)),super.destroy()}}Cf.defaultOptions={trigger:"hover",position:"top-right",enterable:!1,enable:!0,offset:[10,10],style:{".tooltip":{visibility:"hidden"}}};var LU=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};let ro;function QU(r,e){return ro||(ro=document.createElement("canvas")),ro.width=r,ro.height=e,ro.getContext("2d").clearRect(0,0,r,e),ro}function HAe(r,e,t,n){return LU(this,void 0,void 0,function*(){const i=QU(r,e),a=i.getContext("2d"),{rotate:s,opacity:o,textFill:A,textFontSize:l,textFontFamily:c,textFontVariant:u,textFontWeight:h,textAlign:d,textBaseline:f}=n;return a.textAlign=d,a.textBaseline=f,a.translate(r/2,e/2),a.font=`${l}px ${c} ${u} ${h}`,s&&a.rotate(s),o&&(a.globalAlpha=o),A&&(a.fillStyle=A,a.fillText(`${t}`,0,0)),i.toDataURL()})}function GAe(r,e,t,n){return LU(this,void 0,void 0,function*(){const i=QU(r,e),a=i.getContext("2d"),{rotate:s,opacity:o}=n;s&&a.rotate(s),o&&(a.globalAlpha=o);const A=new Image;return A.crossOrigin="anonymous",A.src=t,new Promise(l=>{A.onload=function(){const c=r>A.width?(r-A.width)/2:0,u=e>A.height?(e-A.height)/2:0;a.drawImage(A,0,0,A.width,A.height,c,u,r-c*2,e-u*2),l(i.toDataURL())}})})}var KAe=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})},zAe=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class Sf extends en{constructor(e,t){super(e,Object.assign({},Sf.defaultOptions,t)),this.$element=qo("watermark"),this.context.canvas.getContainer().appendChild(this.$element),this.update(t)}update(e){const t=Object.create(null,{update:{get:()=>super.update}});return KAe(this,void 0,void 0,function*(){t.update.call(this,e);const n=this.options,{width:i,height:a,text:s,imageURL:o}=n,A=zAe(n,["width","height","text","imageURL"]);Object.keys(A).forEach(c=>{c.startsWith("background")&&(this.$element.style[c]=e[c])});const l=o?yield GAe(i,a,o,A):yield HAe(i,a,s,A);this.$element.style.backgroundImage=`url(${l})`})}destroy(){super.destroy(),this.$element.remove()}}Sf.defaultOptions={width:200,height:100,opacity:.2,rotate:Math.PI/12,text:"",textFill:"#000",textFontSize:16,textAlign:"center",textBaseline:"middle",backgroundRepeat:"repeat"};const VAe=["#7E92B5","#F4664A","#FFBE3A"],jAe={type:"group",color:["#1783FF","#00C9C9","#F08F56","#D580FF","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]},$Ae={type:"group",color:["#99ADD1","#1783FF","#00C9C9","#F08F56","#D580FF","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]};function NU(r){const{bgColor:e,textColor:t,nodeColor:n,nodeColorDisabled:i,nodeStroke:a,nodeHaloStrokeOpacityActive:s=.15,nodeHaloStrokeOpacitySelected:o=.25,nodeOpacityDisabled:A=.06,nodeIconOpacityInactive:l=.85,nodeOpacityInactive:c=.25,nodeBadgePalette:u=VAe,nodePaletteOptions:h=jAe,edgeColor:d,edgeColorDisabled:f,edgePaletteOptions:g=$Ae,comboColor:v,comboColorDisabled:p,comboStroke:y,comboStrokeDisabled:m,edgeColorInactive:w}=r;return{background:e,node:{palette:h,style:{donutOpacity:1,badgeBackgroundOpacity:1,badgeFill:"#fff",badgeFontSize:8,badgePadding:[0,4],badgePalette:u,fill:n,fillOpacity:1,halo:!1,iconFill:"#fff",iconOpacity:1,labelBackground:!1,labelBackgroundFill:e,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelFill:t,labelFillOpacity:.85,labelLineHeight:16,labelPadding:[0,2],labelFontSize:12,labelFontWeight:400,labelOpacity:1,labelOffsetY:2,lineWidth:0,portFill:n,portLineWidth:1,portStroke:a,portStrokeOpacity:.65,size:32,stroke:a,strokeOpacity:1,zIndex:2},state:{selected:{halo:!0,haloLineWidth:24,haloStrokeOpacity:o,labelFontSize:12,labelFontWeight:"bold",lineWidth:4,stroke:a},active:{halo:!0,haloLineWidth:12,haloStrokeOpacity:s},highlight:{labelFontWeight:"bold",lineWidth:4,stroke:a,strokeOpacity:.85},inactive:{badgeBackgroundOpacity:c,donutOpacity:c,fillOpacity:c,iconOpacity:l,labelFill:t,labelFillOpacity:c,strokeOpacity:c},disabled:{badgeBackgroundOpacity:.25,donutOpacity:A,fill:i,fillOpacity:A,iconFill:i,iconOpacity:.25,labelFill:t,labelFillOpacity:.25,strokeOpacity:A}},animation:{enter:"fade",exit:"fade",show:"fade",hide:"fade",expand:"node-expand",collapse:"node-collapse",update:[{fields:["x","y","fill","stroke"]}],translate:[{fields:["x","y"]}]}},edge:{palette:g,style:{badgeBackgroundFill:d,badgeFill:"#fff",badgeFontSize:8,badgeOffsetX:10,badgeBackgroundOpacity:1,fillOpacity:1,halo:!1,haloLineWidth:12,haloStrokeOpacity:1,increasedLineWidthForHitTesting:2,labelBackground:!1,labelBackgroundFill:e,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelBackgroundPadding:[4,4,4,4],labelFill:t,labelFontSize:12,labelFontWeight:400,labelOpacity:1,labelPlacement:"center",labelTextBaseline:"middle",lineWidth:1,stroke:d,strokeOpacity:1,zIndex:1},state:{selected:{halo:!0,haloStrokeOpacity:.25,labelFontSize:14,labelFontWeight:"bold",lineWidth:3},active:{halo:!0,haloStrokeOpacity:.15},highlight:{labelFontWeight:"bold",lineWidth:3},inactive:{stroke:w,fillOpacity:.08,labelOpacity:.25,strokeOpacity:.08,badgeBackgroundOpacity:.25},disabled:{stroke:f,fillOpacity:.45,strokeOpacity:.45,labelOpacity:.25,badgeBackgroundOpacity:.45}},animation:{enter:"fade",exit:"fade",expand:"path-in",collapse:"path-out",show:"fade",hide:"fade",update:[{fields:["sourceNode","targetNode"]},{fields:["stroke"],shape:"key"}],translate:[{fields:["sourceNode","targetNode"]}]}},combo:{style:{collapsedMarkerFill:e,collapsedMarkerFontSize:12,collapsedMarkerFillOpacity:1,collapsedSize:32,collapsedFillOpacity:1,fill:v,halo:!1,haloLineWidth:12,haloStroke:y,haloStrokeOpacity:.25,labelBackground:!1,labelBackgroundFill:e,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelBackgroundPadding:[2,4,2,4],labelFill:t,labelFontSize:12,labelFontWeight:400,labelOpacity:1,lineDash:0,lineWidth:1,fillOpacity:.04,strokeOpacity:1,padding:10,stroke:y},state:{selected:{halo:!0,labelFontSize:14,labelFontWeight:700,lineWidth:4},active:{halo:!0},highlight:{labelFontWeight:700,lineWidth:4},inactive:{fillOpacity:.65,labelOpacity:.25,strokeOpacity:.65},disabled:{fill:p,fillOpacity:.25,labelOpacity:.25,stroke:m,strokeOpacity:.25}},animation:{enter:"fade",exit:"fade",show:"fade",hide:"fade",expand:"combo-expand",collapse:"combo-collapse",update:[{fields:["x","y"]},{fields:["fill","stroke","lineWidth"],shape:"key"}],translate:[{fields:["x","y"]}]}}}}const WAe={type:"group",color:["#637088","#0F55A6","#008383","#9C5D38","#8B53A6","#4E40A6","#8F6608","#3E801D","#A65383","#175E75","#0F8248"]},qAe={bgColor:"#000000",comboColor:"#fdfdfd",comboColorDisabled:"#d0e4ff",comboStroke:"#99add1",comboStrokeDisabled:"#969696",edgeColor:"#637088",edgeColorDisabled:"#637088",edgeColorInactive:"#D0E4FF",edgePaletteOptions:WAe,nodeColor:"#1783ff",nodeColorDisabled:"#D0E4FF",nodeHaloStrokeOpacityActive:.25,nodeHaloStrokeOpacitySelected:.45,nodeIconOpacityInactive:.45,nodeOpacityDisabled:.25,nodeOpacityInactive:.45,nodeStroke:"#d0e4ff",textColor:"#ffffff"},YAe=NU(qAe),XAe={bgColor:"#ffffff",comboColor:"#99ADD1",comboColorDisabled:"#f0f0f0",comboStroke:"#99add1",comboStrokeDisabled:"#d9d9d9",edgeColor:"#99add1",edgeColorDisabled:"#d9d9d9",edgeColorInactive:"#1B324F",nodeColor:"#1783ff",nodeColorDisabled:"#1B324F",nodeHaloStrokeOpacityActive:.15,nodeHaloStrokeOpacitySelected:.25,nodeIconOpacityInactive:.85,nodeOpacityDisabled:.06,nodeOpacityInactive:.25,nodeStroke:"#000000",textColor:"#000000"},ZAe=NU(XAe);class za extends aB{beforeDraw(e,t){return e}afterLayout(e,t){}}class JAe extends za{beforeDraw(e){const{model:t}=this.context,n=e.add.combos,i=a=>{const s=[];return a.forEach((o,A)=>{const c=t.getAncestorsData(A,"combo").map(u=>N(u)).reverse();s.push([A,o,c.length])}),new Map(s.sort(([,,o],[,,A])=>A-o).map(([o,A])=>[o,A]))};return e.add.combos=i(n),e.update.combos=i(e.update.combos),e}}function or(r,e,t,n,i){const a=N(n),s=`${t}s`,o=i?n:r.add[s].get(a)||r.update[s].get(a)||r.remove[s].get(a)||n;Object.entries(r).forEach(([A,l])=>{e===A?l[s].set(a,o):l[s].delete(a)})}function Ru(r,e){return Object.keys(r).every(t=>r[t]===e[t])}class ele extends za{beforeDraw(e,t){if(t.stage==="visibility"||!this.context.model.model.hasTreeStructure(qe))return e;const{model:n}=this.context,{add:i,update:a}=e,s=[...e.update.combos.entries(),...e.add.combos.entries()];for(;s.length;){const[o,A]=s.pop();if(Kn(A)){const l=n.getDescendantsData(o),c=l.map(N),{internal:u,external:h}=$1(c,d=>n.getRelatedEdgesData(d));l.forEach(d=>{const f=N(d),g=s.findIndex(([p])=>p===f);g!==-1&&s.splice(g,1);const v=n.getElementType(f);or(e,"remove",v,d)}),u.forEach(d=>or(e,"remove","edge",d)),h.forEach(d=>{var f;const g=N(d);((f=this.context.element)===null||f===void 0?void 0:f.getElement(g))?a.edges.set(g,d):i.edges.set(g,d)})}else{const l=n.getChildrenData(o),c=l.map(N),{edges:u}=$1(c,h=>n.getRelatedEdgesData(h));[...l,...u].forEach(h=>{var d;const f=N(h),g=n.getElementType(f);((d=this.context.element)===null||d===void 0?void 0:d.getElement(f))?or(e,"update",g,h):or(e,"add",g,h),g==="combo"&&s.push([f,h])})}}return e}}const IO=(r,e,t,n)=>{const i=`${t}s`,a=N(n);!r.add[i].has(a)&&!r.update[i].has(a)&&r[e][i].set(N(n),n)};class tle extends za{getElement(e){return this.context.element.getElement(e)}handleExpand(e,t){if(IO(t,"add","node",e),Kn(e))return;const n=N(e);IO(t,"add","node",e),this.context.model.getRelatedEdgesData(n).forEach(s=>{or(t,"add","edge",s)}),this.context.model.getChildrenData(n).forEach(s=>{this.handleExpand(s,t)})}beforeDraw(e){const{graph:t,model:n}=this.context;if(!n.model.hasTreeStructure(ir))return e;const{add:{nodes:i,edges:a},update:{nodes:s}}=e,o=new Map,A=new Map;i.forEach((c,u)=>{Kn(c)&&o.set(u,c)}),a.forEach(c=>{if(t.getElementType(c.source)!=="node")return;const u=t.getNodeData(c.source);Kn(u)&&o.set(c.source,u)}),s.forEach((c,u)=>{const h=this.getElement(u);if(!h)return;const d=h.attributes.collapsed;Kn(c)?d||o.set(u,c):d&&A.set(u,c)});const l=new Set;return o.forEach((c,u)=>{n.getDescendantsData(u).forEach(d=>{const f=N(d);if(l.has(f))return;or(e,"remove","node",d),n.getRelatedEdgesData(f).forEach(v=>{or(e,"remove","edge",v)}),l.add(f)})}),A.forEach((c,u)=>{if(n.getAncestorsData(u,ir).some(Kn)){or(e,"remove","node",c);return}this.handleExpand(c,e)}),e}}function nle(r,e,t){D1[r][e]&&Ei.warn(`The extension ${e} of ${r} has been registered before, and will be overridden.`),Object.assign(D1[r],{[e]:t})}/*!
 * @antv/g-plugin-dragndrop
 * @description A G plugin for Drag n Drop implemented with PointerEvents
 * @version 2.1.1
 * @date 12/24/2025, 11:56:44 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var UU=function(){function r(e){G(this,r),this.dragndropPluginOptions=e}return K(r,[{key:"apply",value:function(t){var n=this,i=t.renderingService,a=t.renderingContext,s=a.root.ownerDocument,o=s.defaultView,A=function(c){var u=c.target,h=u===s,d=h&&n.dragndropPluginOptions.isDocumentDraggable?s:u.closest&&u.closest("[draggable=true]");if(d){var f=!1,g=c.timeStamp,v=[c.clientX,c.clientY],p=null,y=[c.clientX,c.clientY],m=function(){var B=ka(Xt().mark(function b(E){var x,S,C,F,M,T;return Xt().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(f){O.next=2;break}if(x=E.timeStamp-g,S=Pn([E.clientX,E.clientY],v),!(x<=n.dragndropPluginOptions.dragstartTimeThreshold||S<=n.dragndropPluginOptions.dragstartDistanceThreshold)){O.next=1;break}return O.abrupt("return");case 1:E.type="dragstart",d.dispatchEvent(E),f=!0;case 2:if(E.type="drag",E.dx=E.clientX-y[0],E.dy=E.clientY-y[1],d.dispatchEvent(E),y=[E.clientX,E.clientY],h){O.next=4;break}return C=n.dragndropPluginOptions.overlap==="pointer"?[E.canvasX,E.canvasY]:u.getBounds().center,O.next=3,s.elementsFromPoint(C[0],C[1]);case 3:F=O.sent,M=F[F.indexOf(u)+1],T=(M==null?void 0:M.closest("[droppable=true]"))||(n.dragndropPluginOptions.isDocumentDroppable?s:null),p!==T&&(p&&(E.type="dragleave",E.target=p,p.dispatchEvent(E)),T&&(E.type="dragenter",E.target=T,T.dispatchEvent(E)),p=T,p&&(E.type="dragover",E.target=p,p.dispatchEvent(E)));case 4:case"end":return O.stop()}},b)}));return function(E){return B.apply(this,arguments)}}();o.addEventListener("pointermove",m);var w=function(b){if(f){b.detail={preventClick:!0};var E=b.clone();p&&(E.type="drop",E.target=p,p.dispatchEvent(E)),E.type="dragend",d.dispatchEvent(E),f=!1}o.removeEventListener("pointermove",m)};u.addEventListener("pointerup",w,{once:!0}),u.addEventListener("pointerupoutside",w,{once:!0})}};i.hooks.init.tap(r.tag,function(){o.addEventListener("pointerdown",A)}),i.hooks.destroy.tap(r.tag,function(){o.removeEventListener("pointerdown",A)})}}])}();UU.tag="Dragndrop";var rle=function(r){function e(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return G(this,e),t=ye(this,e),t.name="dragndrop",t.options=n,t}return me(e,r),K(e,[{key:"init",value:function(){this.addRenderingPlugin(new UU(ue({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}},{key:"setOptions",value:function(n){Object.assign(this.plugins[0].dragndropPluginOptions,n)}}])}(Pa),_O=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})},kO=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const LO=["main"],QO=["background","main","label","transient"];function ile(r){return r.main}class NO{getConfig(){return this.config}getLayer(e="main"){return this.extends.layers[e]||ile(this.getLayers())}getLayers(){return this.extends.layers}getRenderer(e){return this.extends.renderers[e]}getCamera(e="main"){return this.getLayer(e).getCamera()}getRoot(e="main"){return this.getLayer(e).getRoot()}getContextService(e="main"){return this.getLayer(e).getContextService()}setCursor(e){this.config.cursor=e,this.getLayer().setCursor(e)}get document(){return this.getLayer().document}get context(){return this.getLayer().context}constructor(e){this.config={enableMultiLayer:!0},Object.assign(this.config,e);const t=this.config,{renderer:n,background:i,cursor:a,enableMultiLayer:s}=t,o=kO(t,["renderer","background","cursor","enableMultiLayer"]),A=s?QO:LO,l=UO(n,A),c=Object.fromEntries(A.map(u=>{const h=new B1(Object.assign(Object.assign({},o),{supportsMutipleCanvasesInOneContainer:s,renderer:l[u],background:s?u==="background"?i:void 0:i}));return[u,h]}));PO(c),this.extends={config:this.config,renderer:n,renderers:l,layers:c}}get ready(){return Promise.all(Object.entries(this.getLayers()).map(([,e])=>e.ready))}resize(e,t){Object.assign(this.extends.config,{width:e,height:t}),Object.values(this.getLayers()).forEach(n=>{const i=n.getCamera(),a=i.getPosition(),s=i.getFocalPoint();n.resize(e,t),i.setPosition(a),i.setFocalPoint(s)})}getBounds(e){return Ml(Object.values(this.getLayers()).map(t=>e?t.getRoot().childNodes.find(i=>i.classList.includes(e)):t.getRoot()).filter(t=>(t==null?void 0:t.childNodes.length)>0).map(t=>t.getBounds()))}getContainer(){const e=this.extends.config.container;return typeof e=="string"?document.getElementById(e):e}getSize(){return[this.extends.config.width||0,this.extends.config.height||0]}appendChild(e,t){var n;const i=((n=e.style)===null||n===void 0?void 0:n.$layer)||"main";return this.getLayer(i).appendChild(e,t)}setRenderer(e){if(e===this.extends.renderer)return;const t=UO(e,this.config.enableMultiLayer?QO:LO);this.extends.renderers=t,Object.entries(t).forEach(([n,i])=>this.getLayer(n).setRenderer(i)),PO(this.getLayers())}getCanvasByViewport(e){return an(this.getLayer().viewport2Canvas(Hr(e)))}getViewportByCanvas(e){return an(this.getLayer().canvas2Viewport(Hr(e)))}getViewportByClient(e){return an(this.getLayer().client2Viewport(Hr(e)))}getClientByViewport(e){return an(this.getLayer().viewport2Client(Hr(e)))}getClientByCanvas(e){return this.getClientByViewport(this.getViewportByCanvas(e))}getCanvasByClient(e){const t=this.getLayer(),n=t.client2Viewport(Hr(e));return an(t.viewport2Canvas(n))}toDataURL(){return _O(this,arguments,void 0,function*(e={}){const t=globalThis.devicePixelRatio||1,{mode:n="viewport"}=e,i=kO(e,["mode"]);let[a,s,o,A]=[0,0,0,0];if(n==="viewport")[o,A]=this.getSize();else if(n==="overall"){const p=this.getBounds(),y=Ra(p);[a,s]=p.min,[o,A]=y}const l=a1('<div id="virtual-image"></div>'),c=new B1({width:o,height:A,renderer:new ll,devicePixelRatio:t,container:l,background:this.extends.config.background});yield c.ready,c.appendChild(this.getLayer("background").getRoot().cloneNode(!0)),c.appendChild(this.getRoot().cloneNode(!0));const u=this.getLayer("label").getRoot().cloneNode(!0),h=c.viewport2Canvas({x:0,y:0}),d=this.getCanvasByViewport([0,0]);u.translate([d[0]-h.x,d[1]-h.y]),u.scale(1/this.getCamera().getZoom()),c.appendChild(u),c.appendChild(this.getLayer("transient").getRoot().cloneNode(!0));const f=this.getCamera(),g=c.getCamera();if(n==="viewport")g.setZoom(f.getZoom()),g.setPosition(f.getPosition()),g.setFocalPoint(f.getFocalPoint());else if(n==="overall"){const[p,y,m]=g.getPosition(),[w,B,b]=g.getFocalPoint();g.setPosition([p+a,y+s,m]),g.setFocalPoint([w+a,B+s,b])}const v=c.getContextService();return new Promise(p=>{c.addEventListener(rr.RERENDER,()=>_O(this,void 0,void 0,function*(){yield new Promise(m=>setTimeout(m,300));const y=yield v.toDataURL(i);p(y)}))})})}destroy(){Object.values(this.getLayers()).forEach(e=>{e.getCamera().cancelLandmarkAnimation(),e.destroy()})}}function UO(r,e){return Object.fromEntries(e.map(t=>{const n=(r==null?void 0:r(t))||new ll;return n instanceof ll&&n.setConfig({enableDirtyRectangleRendering:!1}),t==="main"?n.registerPlugin(new rle({isDocumentDraggable:!0,isDocumentDroppable:!0,dragstartDistanceThreshold:10,dragstartTimeThreshold:100})):n.unregisterPlugin(n.getPlugin("dom-interaction")),[t,n]}))}function PO(r){Object.entries(r).forEach(([e,t])=>{const n=t.getContextService().getDomElement();n!=null&&n.style&&(n.style.gridArea="1 / 1 / 2 / 2",n.style.outline="none",n.tabIndex=1,e!=="main"&&(n.style.pointerEvents="none")),n!=null&&n.parentElement&&(n.parentElement.style.display="grid",n.parentElement.style.isolation="isolate")})}const io=r=>r?parseInt(r):0;function ale(r){const e=getComputedStyle(r),t=r.clientWidth||io(e.width),n=r.clientHeight||io(e.height),i=io(e.paddingLeft)+io(e.paddingRight),a=io(e.paddingTop)+io(e.paddingBottom);return[t-i,n-a]}function RO(r){if(!r)return[0,0];let e=640,t=480;const[n,i]=ale(r);e=n||e,t=i||t;const a=1,s=1;return[Math.max(Z(e)?e:a,a),Math.max(Z(t)?t:s,s)]}class Ff{constructor(e){this.type=e}}class Ut extends Ff{constructor(e,t){super(e),this.data=t}}class pr extends Ff{constructor(e,t,n,i){super(e),this.animationType=t,this.animation=n,this.data=i}}class ao extends Ff{constructor(e,t,n){super(e),this.elementType=t,this.data=n}}class wu extends Ff{constructor(e,t){super(e),this.data=t}}function zt(r,e){r.emit(e.type,e)}function sle(r){if(!r)return null;if(r instanceof d_)return{type:"canvas",element:r};let e=r;for(;e;){if(Ll(e))return{type:"node",element:e};if(wL(e))return{type:"edge",element:e};if(fB(e))return{type:"combo",element:e};e=e.parentElement}return null}function DO(r){var e;return((e=r==null?void 0:r.style)===null||e===void 0?void 0:e.zIndex)||0}const YA="cachedStyle",Ab=r=>`__${r}__`;function ole(r,e){const t=Array.isArray(e)?e:[e];nn(r,YA)||JA(r,YA,{}),t.forEach(n=>{JA(nn(r,YA),Ab(n),r.attributes[n])})}function HO(r,e){return nn(r,[YA,Ab(e)])}function Ale(r,e){return Ab(e)in(nn(r,YA)||{})}class lle{constructor(e){this.tasks=[],this.animations=new Set,this.context=e}getTasks(){const e=[...this.tasks];return this.tasks=[],e}add(e,t){this.tasks.push([e,t])}animate(e,t,n){var i,a,s;(i=t==null?void 0:t.before)===null||i===void 0||i.call(t);const o=this.getTasks().map(([l,c])=>{var u,h,d;const{element:f,elementType:g,stage:v}=l,p=qz(this.context.options,g,v,e);(u=c==null?void 0:c.before)===null||u===void 0||u.call(c);const y=p.length?Xz(f,this.inferStyle(l,n),p):null;return y?((h=c==null?void 0:c.beforeAnimate)===null||h===void 0||h.call(c,y),y.finished.then(()=>{var m,w;(m=c==null?void 0:c.afterAnimate)===null||m===void 0||m.call(c,y),(w=c==null?void 0:c.after)===null||w===void 0||w.call(c),this.animations.delete(y)})):(d=c==null?void 0:c.after)===null||d===void 0||d.call(c),y}).filter(Boolean);o.forEach(l=>this.animations.add(l));const A=tB(o);return A?((a=t==null?void 0:t.beforeAnimate)===null||a===void 0||a.call(t,A),A.finished.then(()=>{var l,c;(l=t==null?void 0:t.afterAnimate)===null||l===void 0||l.call(t,A),(c=t==null?void 0:t.after)===null||c===void 0||c.call(t),this.release()})):(s=t==null?void 0:t.after)===null||s===void 0||s.call(t),A}inferStyle(e,t){var n,i;const{element:a,elementType:s,stage:o,originalStyle:A,updatedStyle:l={}}=e;e.modifiedStyle||(e.modifiedStyle=Object.assign(Object.assign({},A),l));const{modifiedStyle:c}=e,u={},h={};if(o==="enter")Object.assign(u,{opacity:0});else if(o==="exit")Object.assign(h,{opacity:0});else if(o==="show")Object.assign(u,{opacity:0}),Object.assign(h,{opacity:(n=HO(a,"opacity"))!==null&&n!==void 0?n:ol("opacity")});else if(o==="hide")Object.assign(u,{opacity:(i=HO(a,"opacity"))!==null&&i!==void 0?i:ol("opacity")}),Object.assign(h,{opacity:0});else if(o==="collapse"){const{collapse:d}=t||{},{target:f,descendants:g,position:v}=d;if(s==="node"){if(g.includes(a.id)){const[p,y,m]=v;Object.assign(h,{x:p,y,z:m})}}else if(s==="combo"){if(a.id===f||g.includes(a.id)){const[p,y]=v;Object.assign(h,{x:p,y,childrenNode:A.childrenNode})}}else s==="edge"&&Object.assign(h,{sourceNode:c.sourceNode,targetNode:c.targetNode})}else if(o==="expand"){const{expand:d}=t||{},{target:f,descendants:g,position:v}=d;if(s==="node"){if(a.id===f||g.includes(a.id)){const[p,y,m]=v;Object.assign(u,{x:p,y,z:m})}}else if(s==="combo"){if(a.id===f||g.includes(a.id)){const[p,y,m]=v;Object.assign(u,{x:p,y,z:m,childrenNode:c.childrenNode})}}else s==="edge"&&Object.assign(u,{sourceNode:c.sourceNode,targetNode:c.targetNode})}return[Object.keys(u).length>0?Object.assign({},A,u):A,Object.keys(h).length>0?Object.assign({},c,h):c]}stop(){this.animations.forEach(e=>e.cancel())}clear(){this.tasks=[]}release(){var e,t;const{canvas:n}=this.context,i=(t=(e=n.document)===null||e===void 0?void 0:e.timeline)===null||t===void 0?void 0:t.animationsWithPromises;i&&(n.document.timeline.animationsWithPromises=i.filter(a=>a.playState!=="finished"))}destroy(){this.stop(),this.animations.clear(),this.tasks=[]}}class cle{constructor(e){this.batchCount=0,this.context=e}emit(e){const{graph:t}=this.context;t.emit(e.type,e)}startBatch(e=!0){this.batchCount++,this.batchCount===1&&this.emit(new Ut(V.BATCH_START,{initiate:e}))}endBatch(){this.batchCount--,this.batchCount===0&&this.emit(new Ut(V.BATCH_END))}get isBatching(){return this.batchCount>0}destroy(){this.context=null}}class ule extends iB{constructor(e){super(e),this.currentTarget=null,this.currentTargetType=null,this.category="behavior",this.forwardCanvasEvents=t=>{const{target:n}=t,i=sle(n);if(!i)return;const{graph:a,canvas:s}=this.context,{type:o,element:A}=i;if("destroyed"in A&&(Ql(A)||A.destroyed))return;const{type:l,detail:c,button:u}=t,h=Object.assign(Object.assign({},t),{target:A,targetType:o,originalTarget:n});l===R.POINTER_MOVE&&(this.currentTarget!==A&&(this.currentTarget&&a.emit(`${this.currentTargetType}:${R.POINTER_LEAVE}`,Object.assign(Object.assign({},h),{type:R.POINTER_LEAVE,target:this.currentTarget,targetType:this.currentTargetType})),A&&(Object.assign(h,{type:R.POINTER_ENTER}),a.emit(`${o}:${R.POINTER_ENTER}`,h))),this.currentTarget=A,this.currentTargetType=o),l===R.CLICK&&u===2||(a.emit(`${o}:${l}`,h),a.emit(l,h)),l===R.CLICK&&c===2&&(Object.assign(h,{type:R.DBLCLICK}),a.emit(`${o}:${R.DBLCLICK}`,h),a.emit(R.DBLCLICK,h)),l===R.POINTER_DOWN&&u===2&&(Object.assign(h,{type:R.CONTEXT_MENU,preventDefault:()=>{var d;(d=s.getContainer())===null||d===void 0||d.addEventListener(R.CONTEXT_MENU,f=>f.preventDefault(),{once:!0})}}),a.emit(`${o}:${R.CONTEXT_MENU}`,h),a.emit(R.CONTEXT_MENU,h))},this.forwardContainerEvents=t=>{this.context.graph.emit(t.type,t)},this.forwardEvents(),this.setBehaviors(this.context.options.behaviors||[])}setBehaviors(e){this.setExtensions(e)}forwardEvents(){const e=this.context.canvas.getContainer();e&&[po.KEY_DOWN,po.KEY_UP].forEach(n=>{e.addEventListener(n,this.forwardContainerEvents)});const t=this.context.canvas.document;t&&[R.CLICK,R.DBLCLICK,R.POINTER_OVER,R.POINTER_LEAVE,R.POINTER_ENTER,R.POINTER_MOVE,R.POINTER_OUT,R.POINTER_DOWN,R.POINTER_UP,R.CONTEXT_MENU,R.DRAG_START,R.DRAG,R.DRAG_END,R.DRAG_ENTER,R.DRAG_OVER,R.DRAG_LEAVE,R.DROP,R.WHEEL].forEach(n=>{t.addEventListener(n,this.forwardCanvasEvents)})}destroy(){const e=this.context.canvas.getContainer();e&&[po.KEY_DOWN,po.KEY_UP].forEach(t=>{e.removeEventListener(t,this.forwardContainerEvents)}),this.context.canvas.document.removeAllEventListeners(),super.destroy()}}var hle=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};function jm(r){const{id:e=N(r),style:t,data:n}=r,i=hle(r,["id","style","data"]),a=Object.assign(Object.assign({},r),{style:Object.assign({},t),data:Object.assign({},n)});return rV(r)?Object.assign({id:e,data:a},i):{id:e,data:a}}function qt(r){return r.data}function dle(r){if(r.hasTreeStructure(ir))return;r.attachTreeStructure(ir);const e=r.getAllEdges();for(const t of e){const{source:n,target:i}=t;r.setParent(i,n,ir)}}class fle{constructor(){this.latestRemovedComboIds=new Set,this.comboIds=new Set,this.changes=[],this.batchCount=0,this.isTraceless=!1,this.enableUpdateNodeLikeHierarchy=!0,this.model=new Wt}pushChange(e){if(this.isTraceless)return;const{type:t}=e;if(t===st.NodeUpdated||t===st.EdgeUpdated||t===st.ComboUpdated){const{value:n,original:i}=e;this.changes.push({value:Og(n),original:Og(i),type:t})}else this.changes.push({value:Og(e.value),type:t})}getChanges(){return this.changes}clearChanges(){this.changes=[]}batch(e){this.batchCount++,this.model.batch(e),this.batchCount--}isBatching(){return this.batchCount>0}silence(e){this.isTraceless=!0,e(),this.isTraceless=!1}isCombo(e){return this.comboIds.has(e)||this.latestRemovedComboIds.has(e)}getData(){return{nodes:this.getNodeData(),edges:this.getEdgeData(),combos:this.getComboData()}}getNodeData(e){return this.model.getAllNodes().reduce((t,n)=>{const i=qt(n);return this.isCombo(N(i))||(e===void 0||e.includes(N(i)))&&t.push(i),t},[])}getEdgeDatum(e){return qt(this.model.getEdge(e))}getEdgeData(e){return this.model.getAllEdges().reduce((t,n)=>{const i=qt(n);return(e===void 0||e.includes(N(i)))&&t.push(i),t},[])}getComboData(e){return this.model.getAllNodes().reduce((t,n)=>{const i=qt(n);return this.isCombo(N(i))&&(e===void 0||e.includes(N(i)))&&t.push(i),t},[])}getRootsData(e=ir){return this.model.getRoots(e).map(qt)}getAncestorsData(e,t){const{model:n}=this;return!n.hasNode(e)||!n.hasTreeStructure(t)?[]:n.getAncestors(e,t).map(qt)}getDescendantsData(e){const t=this.getElementDataById(e),n=[];return To(t,i=>{i!==t&&n.push(i)},i=>this.getChildrenData(N(i)),"TB"),n}getParentData(e,t){const{model:n}=this;if(!t){Ei.warn("The hierarchy structure key is not specified");return}if(!n.hasNode(e)||!n.hasTreeStructure(t))return;const i=n.getParent(e,t);return i?qt(i):void 0}getChildrenData(e){const t=this.getElementType(e)==="node"?ir:qe,{model:n}=this;return!n.hasNode(e)||!n.hasTreeStructure(t)?[]:n.getChildren(e,t).map(qt)}getElementsDataByType(e){return e==="node"?this.getNodeData():e==="edge"?this.getEdgeData():e==="combo"?this.getComboData():[]}getElementDataById(e){return this.getElementType(e)==="edge"?this.getEdgeDatum(e):this.getNodeLikeDatum(e)}getNodeLikeDatum(e){const t=this.model.getNode(e);return qt(t)}getNodeLikeData(e){return this.model.getAllNodes().reduce((t,n)=>{const i=qt(n);return e?e.includes(N(i))&&t.push(i):t.push(i),t},[])}getElementDataByState(e,t){return this.getElementsDataByType(e).filter(i=>{var a;return(a=i.states)===null||a===void 0?void 0:a.includes(t)})}getElementState(e){var t;return((t=this.getElementDataById(e))===null||t===void 0?void 0:t.states)||[]}hasNode(e){return this.model.hasNode(e)&&!this.isCombo(e)}hasEdge(e){return this.model.hasEdge(e)}hasCombo(e){return this.model.hasNode(e)&&this.isCombo(e)}getRelatedEdgesData(e,t="both"){return this.model.getRelatedEdges(e,t).map(qt)}getNeighborNodesData(e){return this.model.getNeighbors(e).map(qt)}setData(e){const{nodes:t=[],edges:n=[],combos:i=[]}=e,{nodes:a,edges:s,combos:o}=this.getData(),A=Fa(a,t,u=>N(u),eo),l=Fa(s,n,u=>N(u),eo),c=Fa(o,i,u=>N(u),eo);this.batch(()=>{const u={nodes:A.enter,edges:l.enter,combos:c.enter};this.addData(u),this.computeZIndex(u,"add",!0);const h={nodes:A.update,edges:l.update,combos:c.update};this.updateData(h),this.computeZIndex(h,"update",!0);const d={nodes:A.exit.map(N),edges:l.exit.map(N),combos:c.exit.map(N)};this.removeData(d)})}addData(e){const{nodes:t,edges:n,combos:i}=e;this.batch(()=>{this.addComboData(i),this.addNodeData(t),this.addEdgeData(n)}),this.computeZIndex(e,"add")}addNodeData(e=[]){e.length&&(this.model.addNodes(e.map(t=>(this.pushChange({value:t,type:st.NodeAdded}),jm(t)))),this.updateNodeLikeHierarchy(e),this.computeZIndex({nodes:e},"add"))}addEdgeData(e=[]){e.length&&(this.model.addEdges(e.map(t=>(this.pushChange({value:t,type:st.EdgeAdded}),jm(t)))),this.computeZIndex({edges:e},"add"))}addComboData(e=[]){if(!e.length)return;const{model:t}=this;t.hasTreeStructure(qe)||t.attachTreeStructure(qe),t.addNodes(e.map(n=>(this.comboIds.add(N(n)),this.pushChange({value:n,type:st.ComboAdded}),jm(n)))),this.updateNodeLikeHierarchy(e),this.computeZIndex({combos:e},"add")}addChildrenData(e,t){const n=this.getNodeLikeDatum(e),i=t.map(N);this.addNodeData(t),this.updateNodeData([{id:e,children:[...n.children||[],...i]}]),this.addEdgeData(i.map(a=>({source:e,target:a})))}computeZIndex(e,t,n=!1){!n&&this.isBatching()||this.batch(()=>{const{nodes:i=[],edges:a=[],combos:s=[]}=e;s.forEach(o=>{var A,l,c;const u=N(o);if(t==="add"&&Z((A=o.style)===null||A===void 0?void 0:A.zIndex)||t==="update"&&!("combo"in o))return;const h=this.getParentData(u,qe),d=h?((c=(l=h.style)===null||l===void 0?void 0:l.zIndex)!==null&&c!==void 0?c:0)+1:0;this.preventUpdateNodeLikeHierarchy(()=>{this.updateComboData([{id:u,style:{zIndex:d}}])})}),i.forEach(o=>{var A,l,c;const u=N(o);if(t==="add"&&Z((A=o.style)===null||A===void 0?void 0:A.zIndex)||t==="update"&&!("combo"in o)&&!("children"in o))return;let h=0;const d=this.getParentData(u,qe);if(d)h=(((l=d.style)===null||l===void 0?void 0:l.zIndex)||0)+1;else{const f=this.getParentData(u,ir);f&&(h=((c=f==null?void 0:f.style)===null||c===void 0?void 0:c.zIndex)||0)}this.preventUpdateNodeLikeHierarchy(()=>{this.updateNodeData([{id:u,style:{zIndex:h}}])})}),a.forEach(o=>{var A,l,c,u,h;if(Z((A=o.style)===null||A===void 0?void 0:A.zIndex))return;let{id:d,source:f,target:g}=o;if(!d)d=N(o);else{const y=this.getEdgeDatum(d);f=y.source,g=y.target}if(!f||!g)return;const v=((c=(l=this.getNodeLikeDatum(f))===null||l===void 0?void 0:l.style)===null||c===void 0?void 0:c.zIndex)||0,p=((h=(u=this.getNodeLikeDatum(g))===null||u===void 0?void 0:u.style)===null||h===void 0?void 0:h.zIndex)||0;this.updateEdgeData([{id:N(o),style:{zIndex:Math.max(v,p)-1}}])})})}getFrontZIndex(e){var t;const n=this.getElementType(e),i=this.getElementDataById(e),a=this.getData();if(Object.assign(a,{[`${n}s`]:a[`${n}s`].filter(s=>N(s)!==e)}),n==="combo"&&!Kn(i)){const s=new Set(this.getAncestorsData(e,qe).map(N));a.nodes=a.nodes.filter(o=>!s.has(N(o))),a.combos=a.combos.filter(o=>!s.has(N(o))),a.edges=a.edges.filter(({source:o,target:A})=>!s.has(o)&&!s.has(A))}return Math.max(((t=i.style)===null||t===void 0?void 0:t.zIndex)||0,0,...Object.values(a).flat().map(s=>{var o;return(((o=s==null?void 0:s.style)===null||o===void 0?void 0:o.zIndex)||0)+1}))}updateNodeLikeHierarchy(e){if(!this.enableUpdateNodeLikeHierarchy)return;const{model:t}=this;e.forEach(n=>{const i=N(n),a=$c(n);a!==void 0&&(t.hasTreeStructure(qe)||t.attachTreeStructure(qe),a===null&&this.refreshComboData(i),this.setParent(i,$c(n),qe));const s=n.children||[];if(s.length){t.hasTreeStructure(ir)||t.attachTreeStructure(ir);const o=s.filter(A=>t.hasNode(A));o.forEach(A=>this.setParent(A,i,ir)),o.length!==s.length&&this.updateNodeData([{id:i,children:o}])}})}preventUpdateNodeLikeHierarchy(e){this.enableUpdateNodeLikeHierarchy=!1,e(),this.enableUpdateNodeLikeHierarchy=!0}updateData(e){const{nodes:t,edges:n,combos:i}=e;this.batch(()=>{this.updateNodeData(t),this.updateComboData(i),this.updateEdgeData(n)}),this.computeZIndex(e,"update")}updateNodeData(e=[]){if(!e.length)return;const{model:t}=this;this.batch(()=>{const n=[];e.forEach(i=>{const a=N(i),s=qt(t.getNode(a));if(eo(s,i))return;const o=Ji(s,i);this.pushChange({value:o,original:s,type:st.NodeUpdated}),t.mergeNodeData(a,o),n.push(o)}),this.updateNodeLikeHierarchy(n)}),this.computeZIndex({nodes:e},"update")}refreshData(){const{nodes:e,edges:t,combos:n}=this.getData();e.forEach(i=>{this.pushChange({value:i,original:i,type:st.NodeUpdated})}),t.forEach(i=>{this.pushChange({value:i,original:i,type:st.EdgeUpdated})}),n.forEach(i=>{this.pushChange({value:i,original:i,type:st.ComboUpdated})})}syncNodeLikeDatum(e){const{model:t}=this,n=N(e);if(!t.hasNode(n))return;const i=qt(t.getNode(n)),a=Ji(i,e);t.mergeNodeData(n,a)}syncEdgeDatum(e){const{model:t}=this,n=N(e);if(!t.hasEdge(n))return;const i=qt(t.getEdge(n)),a=Ji(i,e);t.mergeEdgeData(n,a)}updateEdgeData(e=[]){if(!e.length)return;const{model:t}=this;this.batch(()=>{e.forEach(n=>{const i=N(n),a=qt(t.getEdge(i));if(eo(a,n))return;n.source&&a.source!==n.source&&t.updateEdgeSource(i,n.source),n.target&&a.target!==n.target&&t.updateEdgeTarget(i,n.target);const s=Ji(a,n);this.pushChange({value:s,original:a,type:st.EdgeUpdated}),t.mergeEdgeData(i,s)})}),this.computeZIndex({edges:e},"update")}updateComboData(e=[]){if(!e.length)return;const{model:t}=this;t.batch(()=>{const n=[];e.forEach(i=>{const a=N(i),s=qt(t.getNode(a));if(eo(s,i))return;const o=Ji(s,i);this.pushChange({value:o,original:s,type:st.ComboUpdated}),t.mergeNodeData(a,o),n.push(o)}),this.updateNodeLikeHierarchy(n)}),this.computeZIndex({combos:e},"update")}setParent(e,t,n,i=!0){if(e===t)return;const a=this.getNodeLikeDatum(e),s=$c(a);if(s!==t&&n===qe){const o={id:e,combo:t};this.isCombo(e)?this.syncNodeLikeDatum(o):this.syncNodeLikeDatum(o)}this.model.setParent(e,t,n),i&&n===qe&&$P([s,t]).forEach(o=>{o!==void 0&&this.refreshComboData(o)})}refreshComboData(e){const t=this.getComboData([e])[0],n=this.getAncestorsData(e,qe);t&&this.pushChange({value:t,original:t,type:st.ComboUpdated}),n.forEach(i=>{this.pushChange({value:i,original:i,type:st.ComboUpdated})})}getElementPosition(e){const t=this.getElementDataById(e);return Vt(t)}translateNodeLikeBy(e,t){this.isCombo(e)?this.translateComboBy(e,t):this.translateNodeBy(e,t)}translateNodeLikeTo(e,t){this.isCombo(e)?this.translateComboTo(e,t):this.translateNodeTo(e,t)}translateNodeBy(e,t){const n=this.getElementPosition(e),i=ve(n,[...t,0].slice(0,3));this.translateNodeTo(e,i)}translateNodeTo(e,t){const[n=0,i=0,a=0]=t;this.preventUpdateNodeLikeHierarchy(()=>{this.updateNodeData([{id:e,style:{x:n,y:i,z:a}}])})}translateComboBy(e,t){const[n=0,i=0,a=0]=t;if([n,i,a].some(isNaN)||[n,i,a].every(A=>A===0))return;const s=this.getComboData([e])[0];if(!s)return;const o=new Set;To(s,A=>{const l=N(A);if(o.has(l))return;o.add(l);const[c,u,h]=Vt(A),d=Ji(A,{style:{x:c+n,y:u+i,z:h+a}});this.pushChange({value:d,original:A,type:this.isCombo(l)?st.ComboUpdated:st.NodeUpdated}),this.model.mergeNodeData(l,d)},A=>this.getChildrenData(N(A)),"BT")}translateComboTo(e,t){var n;if(t.some(isNaN))return;const[i=0,a=0,s=0]=t,o=(n=this.getComboData([e]))===null||n===void 0?void 0:n[0];if(!o)return;const[A,l,c]=Vt(o),u=i-A,h=a-l,d=s-c;To(o,f=>{const g=N(f),[v,p,y]=Vt(f),m=Ji(f,{style:{x:v+u,y:p+h,z:y+d}});this.pushChange({value:m,original:f,type:this.isCombo(g)?st.ComboUpdated:st.NodeUpdated}),this.model.mergeNodeData(g,m)},f=>this.getChildrenData(N(f)),"BT")}removeData(e){const{nodes:t,edges:n,combos:i}=e;this.batch(()=>{this.removeEdgeData(n),this.removeNodeData(t),this.removeComboData(i),this.latestRemovedComboIds=new Set(i)})}removeNodeData(e=[]){e.length&&this.batch(()=>{e.forEach(t=>{this.removeEdgeData(this.getRelatedEdgesData(t).map(N)),this.pushChange({value:this.getNodeData([t])[0],type:st.NodeRemoved}),this.removeNodeLikeHierarchy(t)}),this.model.removeNodes(e)})}removeEdgeData(e=[]){e.length&&(e.forEach(t=>this.pushChange({value:this.getEdgeData([t])[0],type:st.EdgeRemoved})),this.model.removeEdges(e))}removeComboData(e=[]){e.length&&this.batch(()=>{e.forEach(t=>{this.pushChange({value:this.getComboData([t])[0],type:st.ComboRemoved}),this.removeNodeLikeHierarchy(t),this.comboIds.delete(t)}),this.model.removeNodes(e)})}removeNodeLikeHierarchy(e){if(this.model.hasTreeStructure(qe)){const t=$c(this.getNodeLikeDatum(e));this.setParent(e,void 0,qe,!1),this.model.getChildren(e,qe).forEach(n=>{const i=qt(n),a=N(i);this.setParent(N(i),t,qe,!1);const s=Ji(i,{id:N(i),combo:t});this.pushChange({value:s,original:i,type:this.isCombo(a)?st.ComboUpdated:st.NodeUpdated}),this.model.mergeNodeData(N(i),s)}),le(t)||this.refreshComboData(t)}}getElementType(e){if(this.model.hasNode(e))return this.isCombo(e)?"combo":"node";if(this.model.hasEdge(e))return"edge";throw new Error(Di(`Unknown element type of id: ${e}`))}destroy(){const{model:e}=this,t=e.getAllNodes(),n=e.getAllEdges();e.removeEdges(n.map(i=>i.id)),e.removeNodes(t.map(i=>i.id)),this.context={}}}var so=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class gle{constructor(e){this.elementMap={},this.shapeTypeMap={},this.paletteStyle={},this.defaultStyle={},this.stateStyle={},this.visibilityCache=new WeakMap,this.context=e}init(){this.initContainer()}initContainer(){if(!this.container||this.container.destroyed){const{canvas:e}=this.context;this.container=e.appendChild(new $t({className:"elements"}))}}emit(e,t){t.silence||zt(this.context.graph,e)}forEachElementData(e){Os.forEach(t=>{const n=this.context.model.getElementsDataByType(t);e(t,n)})}getElementType(e,t){var n;const{options:i,graph:a}=this.context,s=Px(t)&&((n=i[e])===null||n===void 0?void 0:n.type)||t.type;return s?typeof s=="string"?s:s.call(a,t):e==="edge"?"line":"circle"}getTheme(e){return Fk(this.context.options)[e]||{}}getThemeStyle(e){return this.getTheme(e).style||{}}getThemeStateStyle(e,t){const{state:n={}}=this.getTheme(e);return Object.assign({},...t.map(i=>n[i]||{}))}computePaletteStyle(){const{options:e}=this.context;this.paletteStyle={},this.forEachElementData((t,n)=>{var i,a;const s=Object.assign({},mx((i=this.getTheme(t))===null||i===void 0?void 0:i.palette),mx((a=e[t])===null||a===void 0?void 0:a.palette));s!=null&&s.field&&Object.assign(this.paletteStyle,XV(n,s))})}getPaletteStyle(e,t){const n=this.paletteStyle[t];return n?e==="edge"?{stroke:n}:{fill:n}:{}}computeElementDefaultStyle(e,t){var n;const{options:i}=this.context,a=((n=i[e])===null||n===void 0?void 0:n.style)||{};"transform"in a&&Array.isArray(a.transform)&&(a.transform=[...a.transform]),this.defaultStyle[N(t.datum)]=yx(a,t)}computeElementsDefaultStyle(e){const{graph:t}=this.context;this.forEachElementData((n,i)=>{const a=i.length;for(let s=0;s<a;s++){const o=i[s];(e===void 0||e.includes(N(o)))&&this.computeElementDefaultStyle(n,{datum:o,graph:t})}})}getDefaultStyle(e){return this.defaultStyle[e]||{}}getElementState(e){try{const{model:t}=this.context;return t.getElementState(e)}catch{return[]}}getElementStateStyle(e,t,n){var i,a;const{options:s}=this.context,o=((a=(i=s[e])===null||i===void 0?void 0:i.state)===null||a===void 0?void 0:a[t])||{};return yx(o,n)}computeElementStatesStyle(e,t,n){this.stateStyle[N(n.datum)]=Object.assign({},...t.map(i=>this.getElementStateStyle(e,i,n)))}computeElementsStatesStyle(e){const{graph:t}=this.context;this.forEachElementData((n,i)=>{const a=i.length;for(let s=0;s<a;s++){const o=i[s];if(e===void 0||e.includes(N(o))){const A=this.getElementState(N(o));this.computeElementStatesStyle(n,A,{datum:o,graph:t})}}})}getStateStyle(e){return this.stateStyle[e]||{}}computeStyle(e,t){e&&["translate","zIndex"].includes(e)||(this.computePaletteStyle(),this.computeElementsDefaultStyle(t),this.computeElementsStatesStyle(t))}getElement(e){return this.elementMap[e]}getNodes(){return this.context.model.getNodeData().map(({id:e})=>this.elementMap[e])}getEdges(){return this.context.model.getEdgeData().map(e=>this.elementMap[N(e)])}getCombos(){return this.context.model.getComboData().map(({id:e})=>this.elementMap[e])}getElementComputedStyle(e,t){const n=N(t),i=this.getThemeStyle(e),a=this.getPaletteStyle(e,n),s=t.style||{},o=this.getDefaultStyle(n),A=this.getThemeStateStyle(e,this.getElementState(n)),l=this.getStateStyle(n),c=Px(t)?Object.assign({},i,a,s,o,A,l):Object.assign({},s);if(e==="combo"){const u=this.context.model.getChildrenData(n),d=!!c.collapsed?[]:u.map(N).filter(f=>this.getElement(f));Object.assign(c,{childrenNode:d,childrenData:u})}return c}getDrawData(e){this.init();const t=this.computeChangesAndDrawData(e);if(!t)return null;const{type:n="draw",stage:i=n}=e;return this.markDestroyElement(t.drawData),this.computeStyle(i),{type:n,stage:i,data:t}}draw(e={animation:!0}){const t=this.getDrawData(e);if(!t)return;const{data:{drawData:{add:n,update:i,remove:a}}}=t;return this.destroyElements(a,e),this.createElements(n,e),this.updateElements(i,e),this.setAnimationTask(e,t)}preLayoutDraw(){return so(this,arguments,void 0,function*(e={animation:!0}){var t,n;const i=this.getDrawData(e);if(!i)return;const{data:{drawData:a}}=i;yield(n=(t=this.context.layout)===null||t===void 0?void 0:t.preLayout)===null||n===void 0?void 0:n.call(t,a);const{add:s,update:o,remove:A}=a;return this.destroyElements(A,e),this.createElements(s,e),this.updateElements(o,e),this.setAnimationTask(e,i)})}setAnimationTask(e,t){const{animation:n,silence:i}=e,{data:{dataChanges:a,drawData:s},stage:o,type:A}=t;return this.context.animation.animate(n,i?{}:{before:()=>this.emit(new Ut(V.BEFORE_DRAW,{dataChanges:a,animation:n,stage:o,render:A==="render"}),e),beforeAnimate:l=>this.emit(new pr(V.BEFORE_ANIMATE,Un.DRAW,l,s),e),afterAnimate:l=>this.emit(new pr(V.AFTER_ANIMATE,Un.DRAW,l,s),e),after:()=>this.emit(new Ut(V.AFTER_DRAW,{dataChanges:a,animation:n,stage:o,render:A==="render",firstRender:this.context.graph.rendered===!1}),e)})}computeChangesAndDrawData(e){const{model:t}=this.context,n=t.getChanges(),i=WB(n);if(i.length===0)return null;const{NodeAdded:a=[],NodeUpdated:s=[],NodeRemoved:o=[],EdgeAdded:A=[],EdgeUpdated:l=[],EdgeRemoved:c=[],ComboAdded:u=[],ComboUpdated:h=[],ComboRemoved:d=[]}=Ph(i,B=>B.type),f=(B,b)=>{const E=[];return B.forEach(x=>{const S=N(x.value);this.getElement(S)?E.push(x):b.push(x)}),E},g=f(s,a),v=f(l,A),p=f(h,u),y=B=>new Map(B.map(b=>{const E=b.value;return[N(E),E]})),m={add:{nodes:y(a),edges:y(A),combos:y(u)},update:{nodes:y(g),edges:y(v),combos:y(p)},remove:{nodes:y(o),edges:y(c),combos:y(d)}},w=this.transformData(m,e);return t.clearChanges(),{dataChanges:n,drawData:w}}transformData(e,t){const n=this.context.transform.getTransformInstance();return Object.values(n).reduce((i,a)=>a.beforeDraw(i,t),e)}createElement(e,t,n){var i;const a=N(t);if(this.getElement(a))return;const o=this.getElementType(e,t),A=this.getElementComputedStyle(e,t),l=Vi(e,o);if(!l)return Ei.warn(`The element ${o} of ${e} is not registered.`);this.emit(new ao(V.BEFORE_ELEMENT_CREATE,e,t),n);const c=this.container.appendChild(new l({id:a,context:this.context,style:A}));this.shapeTypeMap[a]=o,this.elementMap[a]=c;const{stage:u="enter"}=n;(i=this.context.animation)===null||i===void 0||i.add({element:c,elementType:e,stage:u,originalStyle:Object.assign({},c.attributes),updatedStyle:A},{after:()=>{var h;this.emit(new ao(V.AFTER_ELEMENT_CREATE,e,t),n),(h=c.onCreate)===null||h===void 0||h.call(c)}})}createElements(e,t){const{nodes:n,edges:i,combos:a}=e;[["node",n],["combo",a],["edge",i]].forEach(([o,A])=>{A.forEach(l=>this.createElement(o,l,t))})}getUpdateStageStyle(e,t,n){const{stage:i="update"}=n;if(i==="translate")if(e==="node"||e==="combo"){const{style:{x:a=0,y:s=0,z:o=0}={}}=t;return{x:a,y:s,z:o}}else return{};return this.getElementComputedStyle(e,t)}updateElement(e,t,n){var i;const a=N(t),{stage:s="update"}=n,o=this.getElement(a);if(!o)return()=>null;this.emit(new ao(V.BEFORE_ELEMENT_UPDATE,e,t),n);const A=this.getElementType(e,t),l=this.getUpdateStageStyle(e,t,n);this.shapeTypeMap[a]!==A&&(o.destroy(),delete this.shapeTypeMap[a],delete this.elementMap[a],this.createElement(e,t,{animation:!1,silence:!0}));const c=s!=="visibility"?s:l.visibility==="hidden"?"hide":"show";c==="hide"&&delete l.visibility,(i=this.context.animation)===null||i===void 0||i.add({element:o,elementType:e,stage:c,originalStyle:Object.assign({},o.attributes),updatedStyle:l},{before:()=>{const u=this.elementMap[a];s!=="collapse"&&q1(u,l),s==="visibility"&&(Ale(u,"opacity")||ole(u,"opacity"),this.visibilityCache.set(u,c==="show"?"visible":"hidden"),c==="show"&&Ts(u,"visible"))},after:()=>{var u;const h=this.elementMap[a];s==="collapse"&&q1(h,l),c==="hide"&&Ts(h,this.visibilityCache.get(h)),this.emit(new ao(V.AFTER_ELEMENT_UPDATE,e,t),n),(u=h.onUpdate)===null||u===void 0||u.call(h)}})}updateElements(e,t){const{nodes:n,edges:i,combos:a}=e;[["node",n],["combo",a],["edge",i]].forEach(([o,A])=>{A.forEach(l=>this.updateElement(o,l,t))})}markDestroyElement(e){Object.values(e.remove).forEach(t=>{t.forEach(n=>{const i=N(n),a=this.getElement(i);a&&K9(a)})})}destroyElement(e,t,n){var i;const{stage:a="exit"}=n,s=N(t),o=this.elementMap[s];if(!o)return()=>null;this.emit(new ao(V.BEFORE_ELEMENT_DESTROY,e,t),n),(i=this.context.animation)===null||i===void 0||i.add({element:o,elementType:e,stage:a,originalStyle:Object.assign({},o.attributes),updatedStyle:{}},{after:()=>{var A;this.clearElement(s),o.destroy(),(A=o.onDestroy)===null||A===void 0||A.call(o),this.emit(new ao(V.AFTER_ELEMENT_DESTROY,e,t),n)}})}destroyElements(e,t){const{nodes:n,edges:i,combos:a}=e;[["combo",a],["edge",i],["node",n]].forEach(([o,A])=>{A.forEach(l=>this.destroyElement(o,l,t))})}clearElement(e){delete this.paletteStyle[e],delete this.defaultStyle[e],delete this.stateStyle[e],delete this.elementMap[e],delete this.shapeTypeMap[e]}alignLayoutResultToElement(e,t){var n,i;const a=(n=e.nodes)===null||n===void 0?void 0:n.find(s=>N(s)===t);if(a){const s=Vt(this.context.model.getNodeLikeDatum(t)),o=Vt(a),A=$e(s,o);(i=e.nodes)===null||i===void 0||i.forEach(l=>{var c,u,h;!((c=l.style)===null||c===void 0)&&c.x&&(l.style.x+=A[0]),!((u=l.style)===null||u===void 0)&&u.y&&(l.style.y+=A[1]),!((h=l.style)===null||h===void 0)&&h.z&&(l.style.z+=A[2]||0)})}}syncLayoutResult(e,t){return so(this,void 0,void 0,function*(){const{layout:n,model:i}=this.context;if(!n)return;const a=this.context.options.layout,s=A=>Array.isArray(A)?A.map(l=>Object.assign(Object.assign({},l),{preLayout:!0})):Object.assign(Object.assign({},A),{preLayout:!0}),o=yield n.simulate(a?s(a):void 0);t&&this.alignLayoutResultToElement(o,e),i.updateData(o)})}collapseNode(e,t){return so(this,void 0,void 0,function*(){var n;const{animation:i,align:a}=t;yield this.syncLayoutResult(e,a);const s=this.computeChangesAndDrawData({stage:"collapse",animation:i});if(!s)return;const{drawData:o}=s,{add:A,remove:l,update:c}=o;this.markDestroyElement(o);const u={animation:i,stage:"collapse",data:o};this.destroyElements(l,u),this.createElements(A,u),this.updateElements(c,u),yield(n=this.context.animation.animate(i,{beforeAnimate:h=>this.emit(new pr(V.BEFORE_ANIMATE,Un.COLLAPSE,h,o),u),afterAnimate:h=>this.emit(new pr(V.AFTER_ANIMATE,Un.COLLAPSE,h,o),u)},{collapse:{target:e,descendants:Array.from(l.nodes).map(([,h])=>N(h)),position:Vt(c.nodes.get(e))}}))===null||n===void 0?void 0:n.finished})}expandNode(e,t){return so(this,void 0,void 0,function*(){var n;const{model:i}=this.context,{animation:a,align:s}=t,o=Vt(i.getNodeData([e])[0]);yield this.syncLayoutResult(e,s);const A=this.computeChangesAndDrawData({stage:"expand",animation:a});if(this.createElements(A.drawData.add,{animation:!1,stage:"expand",target:e}),this.context.animation.clear(),this.computeStyle("expand"),!A)return;const{drawData:l}=A,{update:c,add:u}=l,h={animation:a,stage:"expand",data:l};u.edges.forEach(d=>c.edges.set(N(d),d)),u.nodes.forEach(d=>c.nodes.set(N(d),d)),this.updateElements(c,h),yield(n=this.context.animation.animate(a,{beforeAnimate:d=>this.emit(new pr(V.BEFORE_ANIMATE,Un.EXPAND,d,l),h),afterAnimate:d=>this.emit(new pr(V.AFTER_ANIMATE,Un.EXPAND,d,l),h)},{expand:{target:e,descendants:Array.from(u.nodes).map(([,d])=>N(d)),position:o}}))===null||n===void 0?void 0:n.finished})}collapseCombo(e,t){return so(this,void 0,void 0,function*(){var n;const{model:i,element:a}=this.context;if(i.getAncestorsData(e,qe).some(g=>Kn(g)))return;const s=a.getElement(e),o=s.getComboPosition(Object.assign(Object.assign({},s.attributes),{collapsed:!0})),A=this.computeChangesAndDrawData({stage:"collapse",animation:t});if(!A)return;const{dataChanges:l,drawData:c}=A;this.markDestroyElement(c);const{update:u,remove:h}=c,d={animation:t,stage:"collapse",data:c};this.destroyElements(h,d),this.updateElements(u,d);const f=g=>Array.from(g).map(([,v])=>N(v));yield(n=this.context.animation.animate(t,{before:()=>this.emit(new Ut(V.BEFORE_DRAW,{dataChanges:l,animation:t}),d),beforeAnimate:g=>this.emit(new pr(V.BEFORE_ANIMATE,Un.COLLAPSE,g,c),d),afterAnimate:g=>this.emit(new pr(V.AFTER_ANIMATE,Un.COLLAPSE,g,c),d),after:()=>this.emit(new Ut(V.AFTER_DRAW,{dataChanges:l,animation:t}),d)},{collapse:{target:e,descendants:[...f(h.nodes),...f(h.combos)],position:o}}))===null||n===void 0?void 0:n.finished})}expandCombo(e,t){return so(this,void 0,void 0,function*(){var n;const{model:i}=this.context,a=Vt(i.getComboData([e])[0]);this.computeStyle("expand");const s=this.computeChangesAndDrawData({stage:"expand",animation:t});if(!s)return;const{dataChanges:o,drawData:A}=s,{add:l,update:c}=A,u={animation:t,stage:"expand",data:A,target:e};this.createElements(l,u),this.updateElements(c,u);const h=d=>Array.from(d).map(([,f])=>N(f));yield(n=this.context.animation.animate(t,{before:()=>this.emit(new Ut(V.BEFORE_DRAW,{dataChanges:o,animation:t}),u),beforeAnimate:d=>this.emit(new pr(V.BEFORE_ANIMATE,Un.EXPAND,d,A),u),afterAnimate:d=>this.emit(new pr(V.AFTER_ANIMATE,Un.EXPAND,d,A),u),after:()=>this.emit(new Ut(V.AFTER_DRAW,{dataChanges:o,animation:t}),u)},{expand:{target:e,descendants:[...h(l.nodes),...h(l.combos)],position:a}}))===null||n===void 0?void 0:n.finished})}clear(){this.container.destroy(),this.initContainer(),this.elementMap={},this.shapeTypeMap={},this.defaultStyle={},this.stateStyle={},this.paletteStyle={}}destroy(){this.clear(),this.container.destroy(),this.context={}}}var oo=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})},vle=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class ple{get presetOptions(){return{animation:!!Tk(this.context.options,!0)}}get options(){const{options:e}=this.context;return e.layout}constructor(e){this.instances=[],this.context=e}getLayoutInstance(){return this.instances}preLayout(e){return oo(this,void 0,void 0,function*(){var t,n,i,a;const{graph:s,model:o}=this.context,{add:A}=e;zt(s,new Ut(V.BEFORE_LAYOUT,{type:"pre"}));const l=yield(t=this.context.layout)===null||t===void 0?void 0:t.simulate();(n=l==null?void 0:l.nodes)===null||n===void 0||n.forEach(c=>{const u=N(c),h=A.nodes.get(u);o.syncNodeLikeDatum(c),h&&Object.assign(h.style,c.style)}),(i=l==null?void 0:l.edges)===null||i===void 0||i.forEach(c=>{const u=N(c),h=A.edges.get(u);o.syncEdgeDatum(c),h&&Object.assign(h.style,c.style)}),(a=l==null?void 0:l.combos)===null||a===void 0||a.forEach(c=>{const u=N(c),h=A.combos.get(u);o.syncNodeLikeDatum(c),h&&Object.assign(h.style,c.style)}),zt(s,new Ut(V.AFTER_LAYOUT,{type:"pre"})),this.transformDataAfterLayout("pre",e)})}postLayout(){return oo(this,arguments,void 0,function*(e=this.options){if(!e)return;const t=Array.isArray(e)?e:[e],{graph:n}=this.context;zt(n,new Ut(V.BEFORE_LAYOUT,{type:"post"}));for(let i=0;i<t.length;i++){const a=t[i],s=this.getLayoutData(a),o=Object.assign(Object.assign({},this.presetOptions),a);zt(n,new Ut(V.BEFORE_STAGE_LAYOUT,{options:o,index:i}));const A=yield this.stepLayout(s,o,i);zt(n,new Ut(V.AFTER_STAGE_LAYOUT,{options:o,index:i})),a.animation||this.updateElementPosition(A,!1)}zt(n,new Ut(V.AFTER_LAYOUT,{type:"post"})),this.transformDataAfterLayout("post")})}transformDataAfterLayout(e,t){const n=this.context.transform.getTransformInstance();Object.values(n).forEach(i=>i.afterLayout(e,t))}simulate(){return oo(this,arguments,void 0,function*(e=this.options){if(!e)return{};const t=Array.isArray(e)?e:[e];let n={};for(let i=0;i<t.length;i++){const a=t[i],s=this.getLayoutData(a);n=yield this.stepLayout(s,Object.assign(Object.assign(Object.assign({},this.presetOptions),a),{animation:!1}),i)}return n})}stepLayout(e,t,n){return oo(this,void 0,void 0,function*(){return Y9(t)?yield this.treeLayout(e,t,n):yield this.graphLayout(e,t,n)})}graphLayout(e,t,n){return oo(this,void 0,void 0,function*(){const{animation:i,enableWorker:a,iterations:s=300}=t,o=this.initGraphLayout(t);if(!o)return{};if(this.instances[n]=o,this.instance=o,a){const l=o;return this.supervisor=new bre(l.graphData2LayoutModel(e),l.instance,{iterations:s}),Mu(yield this.supervisor.execute())}if(iw(o))return i?yield o.execute(e,{onTick:l=>{this.updateElementPosition(l,!1)}}):(o.execute(e),o.stop(),o.tick(s));const A=yield o.execute(e);if(i){const l=this.updateElementPosition(A,i);yield l==null?void 0:l.finished}return A})}treeLayout(e,t,n){return oo(this,void 0,void 0,function*(){const{type:i,animation:a}=t,s=Vi("layout",i);if(!s)return{};const{nodes:o=[],edges:A=[]}=e,l=new Wt({nodes:o.map(f=>({id:N(f),data:f.data||{}})),edges:A.map(f=>({id:N(f),source:f.source,target:f.target,data:f.data||{}}))});dle(l);const c={nodes:[],edges:[]},u={nodes:[],edges:[]};l.getRoots(ir).forEach(f=>{To(f,m=>{m.children=l.getSuccessors(m.id)},m=>l.getSuccessors(m.id),"TB");const g=s(f,t),{x:v,y:p,z:y=0}=g;To(g,m=>{const{id:w,x:B,y:b,z:E=0}=m;c.nodes.push({id:w,style:{x:v,y:p,z:y}}),u.nodes.push({id:w,style:{x:B,y:b,z:E}})},m=>m.children,"TB")});const d=this.inferTreeLayoutOffset(u);if(GO(u,d),a){GO(c,d),this.updateElementPosition(c,!1);const f=this.updateElementPosition(u,a);yield f==null?void 0:f.finished}return u})}inferTreeLayoutOffset(e){var t;let[n,i]=[1/0,-1/0],[a,s]=[1/0,-1/0];(t=e.nodes)===null||t===void 0||t.forEach(g=>{const{x:v=0,y:p=0}=g.style||{};n=Math.min(n,v),i=Math.max(i,v),a=Math.min(a,p),s=Math.max(s,p)});const{canvas:o}=this.context,A=o.getSize(),[l,c]=o.getCanvasByViewport([0,0]),[u,h]=o.getCanvasByViewport(A);if(n>=l&&i<=u&&a>=c&&s<=h)return[0,0];const d=(l+u)/2,f=(c+h)/2;return[d-(n+i)/2,f-(a+s)/2]}stopLayout(){this.instance&&iw(this.instance)&&(this.instance.stop(),this.instance=void 0),this.supervisor&&(this.supervisor.stop(),this.supervisor=void 0),this.animationResult&&(this.animationResult.finish(),this.animationResult=void 0)}getLayoutData(e){const{nodeFilter:t=()=>!0,comboFilter:n=()=>!0,preLayout:i=!1,isLayoutInvisibleNodes:a=!1}=e,{nodes:s,edges:o,combos:A}=this.context.model.getData(),{element:l,model:c}=this.context,u=p=>l.getElement(p),h=i?p=>{var y;return!a&&(((y=p.style)===null||y===void 0?void 0:y.visibility)==="hidden"||c.getAncestorsData(p.id,ir).some(Kn)||c.getAncestorsData(p.id,qe).some(Kn))?!1:t(p)}:p=>{const y=N(p),m=u(y);return!m||Ql(m)?!1:t(p)},d=s.filter(h),f=A.filter(n),g=new Map(d.map(p=>[N(p),p]));f.forEach(p=>g.set(N(p),p));const v=o.filter(({source:p,target:y})=>g.has(p)&&g.has(y));return{nodes:d,edges:v,combos:f}}initGraphLayout(e){var t;const{element:n,viewport:i}=this.context,{type:a,enableWorker:s,animation:o,iterations:A}=e,l=vle(e,["type","enableWorker","animation","iterations"]),[c,u]=i.getCanvasSize(),h=[c/2,u/2],d=(t=e==null?void 0:e.nodeSize)!==null&&t!==void 0?t:y=>{const m=n==null?void 0:n.getElement(y.id);return m?m.attributes.size:n==null?void 0:n.getElementComputedStyle("node",y).size},f=Vi("layout",a);if(!f)return Ei.warn(`The layout of ${a} is not registered.`);const g=Object.getPrototypeOf(f.prototype)===md.prototype?f:Z9(f,this.context),v=new g(this.context),p={nodeSize:d,width:c,height:u,center:h};switch(v.id){case"d3-force":case"d3-force-3d":Object.assign(p,{center:{x:c/2,y:u/2,z:0}});break}return on(v.options,p,l),v}updateElementPosition(e,t){const{model:n,element:i}=this.context;return i?(n.updateData(e),i.draw({animation:t,silence:!0})):null}destroy(){var e;this.stopLayout(),this.context={},(e=this.supervisor)===null||e===void 0||e.kill(),this.supervisor=void 0,this.instance=void 0,this.instances=[],this.animationResult=void 0}}const GO=(r,e)=>{var t;const[n,i]=e;(t=r.nodes)===null||t===void 0||t.forEach(a=>{if(a.style){const{x:s=0,y:o=0}=a.style;a.style.x=s+n,a.style.y=o+i}else a.style={x:n,y:i}})};function yle(r){return[mle].reduce((t,n)=>n(t),r)}function mle(r){return!r.layout||Array.isArray(r.layout)||"preLayout"in r.layout||["antv-dagre","combo-combined","compact-box","circular","concentric","dagre","fishbone","grid","indented","mds","radial","random","snake","dendrogram","mindmap"].includes(r.layout.type)&&(r.layout.preLayout=!0),r}class wle extends iB{constructor(e){super(e),this.category="plugin",this.setPlugins(this.context.options.plugins||[])}setPlugins(e){this.setExtensions(e)}getPluginInstance(e){const t=this.extensionMap[e];if(t)return t;Ei.warn(`Cannot find the plugin ${e}, will try to find it by type.`);const n=this.extensions.find(i=>i.type===e);if(n)return this.extensionMap[n.key]}}const Bu=["update-related-edges","collapse-expand-node","collapse-expand-combo","get-edge-actual-ends","arrange-draw-order"];class Ble extends iB{constructor(e){super(e),this.category="transform",this.setTransforms(this.context.options.transforms||[])}getTransforms(){}setTransforms(e){this.setExtensions([...Bu.slice(0,Bu.length-1),...e,Bu[Bu.length-1]])}getTransformInstance(e){return e?this.extensionMap[e]:this.extensionMap}}var gA=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class ble{get padding(){return Sr(this.context.options.padding)}get paddingOffset(){const[e,t,n,i]=this.padding,[a,s,o]=[(i-t)/2,(e-n)/2,0];return[a,s,o]}constructor(e){this.landmarkCounter=0,this.context=e;const[t,n]=this.paddingOffset,{zoom:i,rotation:a,x:s=t,y:o=n}=e.options;this.transform({mode:"absolute",scale:i,translate:[s,o],rotate:a},!1)}get camera(){const{canvas:e}=this.context;return new Proxy(e.getCamera(),{get:(t,n)=>{const a=Object.entries(e.getLayers()).filter(([o])=>!["main"].includes(o)).map(([,o])=>o.getCamera()),s=t[n];if(typeof s=="function")return(...o)=>{const A=s.apply(t,o);return a.forEach(l=>{l[n].apply(l,o)}),A}}})}createLandmark(e){return this.camera.createLandmark(`landmark-${this.landmarkCounter++}`,e)}getAnimation(e){const t=Tk(this.context.options,e);return t?Es(Object.assign({},t),["easing","duration"]):!1}getCanvasSize(){const{canvas:e}=this.context,{width:t=0,height:n=0}=e.getConfig();return[t,n]}getCanvasCenter(){const{canvas:e}=this.context,{width:t=0,height:n=0}=e.getConfig();return[t/2,n/2,0]}getViewportCenter(){const[e,t]=this.camera.getPosition();return[e,t,0]}getGraphCenter(){return this.context.graph.getViewportByCanvas(this.getCanvasCenter())}getZoom(){return this.camera.getZoom()}getRotation(){return this.camera.getRoll()}getTranslateOptions(e){const{camera:t}=this,{mode:n,translate:i=[]}=e,a=this.getZoom(),s=t.getPosition(),o=t.getFocalPoint(),[A,l]=this.getCanvasCenter(),[c=0,u=0,h=0]=i,d=jr([-c,-u,-h],a);return n==="relative"?{position:ve(s,d),focalPoint:ve(o,d)}:{position:ve([A,l,s[2]],d),focalPoint:ve([A,l,o[2]],d)}}getRotateOptions(e){const{mode:t,rotate:n=0}=e;return{roll:t==="relative"?this.camera.getRoll()+n:n}}getZoomOptions(e){const{zoomRange:t}=this.context.options,n=this.camera.getZoom(),{mode:i,scale:a=1}=e;return vt(i==="relative"?n*a:a,...t)}transform(e,t){return gA(this,void 0,void 0,function*(){const{graph:n}=this.context,{translate:i,rotate:a,scale:s,origin:o}=e;this.cancelAnimation();const A=this.getAnimation(t);if(zt(n,new wu(V.BEFORE_TRANSFORM,e)),!a&&s&&!i&&o&&!A){this.camera.setZoomByViewportPoint(this.getZoomOptions(e),o),zt(n,new wu(V.AFTER_TRANSFORM,e));return}const l={};if(i&&Object.assign(l,this.getTranslateOptions(e)),Z(a)&&Object.assign(l,this.getRotateOptions(e)),Z(s)&&Object.assign(l,{zoom:this.getZoomOptions(e)}),A)return zt(n,new pr(V.BEFORE_ANIMATE,Un.TRANSFORM,null,e)),new Promise(c=>{this.transformResolver=c,this.camera.gotoLandmark(this.createLandmark(l),Object.assign(Object.assign({},A),{onfinish:()=>{zt(n,new pr(V.AFTER_ANIMATE,Un.TRANSFORM,null,e)),zt(n,new wu(V.AFTER_TRANSFORM,e)),this.transformResolver=void 0,c()}}))});this.camera.gotoLandmark(this.createLandmark(l),{duration:0}),zt(n,new wu(V.AFTER_TRANSFORM,e))})}fitView(e,t){return gA(this,void 0,void 0,function*(){const[n,i,a,s]=this.padding,{when:o="always",direction:A="both"}=e||{},[l,c]=this.context.canvas.getSize(),u=l-s-i,h=c-n-a,d=this.context.canvas.getBounds(),f=this.getBBoxInViewport(d),[g,v]=Ra(f),p=A==="x"&&g>=u||A==="y"&&v>=h||A==="both"&&g>=u&&v>=h;if(o==="overflow"&&!p)return yield this.fitCenter({animation:t});const y=u/g,m=h/v,w=A==="x"?y:A==="y"?m:Math.min(y,m),B=this.getAnimation(t);Number.isFinite(w)&&(yield this.transform({mode:"relative",scale:w,translate:ve($e(this.getCanvasCenter(),this.getBBoxInViewport(d).center),jr(this.paddingOffset,w))},B))})}fitCenter(e){return gA(this,void 0,void 0,function*(){const t=this.context.canvas.getBounds();yield this.focus(t,e)})}focusElements(e){return gA(this,arguments,void 0,function*(t,n={}){const{element:i}=this.context;if(!i)return;const a=o=>n.shapes?o.getShape(n.shapes).getRenderBounds():o.getRenderBounds(),s=Ml(t.map(o=>a(i.getElement(o))));yield this.focus(s,n)})}focus(e,t){return gA(this,void 0,void 0,function*(){const n=this.context.graph.getViewportByCanvas(e.center),i=t.position||this.getCanvasCenter(),a=$e(i,n);yield this.transform({mode:"relative",translate:ve(a,this.paddingOffset)},t.animation)})}getBBoxInViewport(e){const{min:t,max:n}=e,{graph:i}=this.context,[a,s]=i.getViewportByCanvas(t),[o,A]=i.getViewportByCanvas(n),l=new tt;return l.setMinMax([a,s,0],[o,A,0]),l}isInViewport(e,t=!1,n=0){const{graph:i}=this.context,a=this.getCanvasSize(),[s,o]=i.getCanvasByViewport([0,0]),[A,l]=i.getCanvasByViewport(a);let c=new tt;return c.setMinMax([s,o,0],[A,l,0]),n&&(c=Da(c,n)),No(e)?Vr(e,c):t?sV(e,c):c.intersects(e)}cancelAnimation(){var e,t;!((e=this.camera.landmarks)===null||e===void 0)&&e.length&&this.camera.cancelLandmarkAnimation(),(t=this.transformResolver)===null||t===void 0||t.call(this)}}var Ze=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class Tf extends yd{constructor(e){var t;super(),this.options={},this.rendered=!1,this.destroyed=!1,this.context={model:new fle},this.isCollapsingExpanding=!1,this.onResize=wl(()=>{this.resize()},300),this._setOptions(Object.assign({},Tf.defaultOptions,e),!0),this.context.graph=this,this.options.autoResize&&((t=globalThis.addEventListener)===null||t===void 0||t.call(globalThis,"resize",this.onResize))}getOptions(){return this.options}setOptions(e){this._setOptions(e,!1)}_setOptions(e,t){if(this.updateCanvas(e),Object.assign(this.options,yle(e)),t){const{data:h}=e;h&&this.addData(h);return}const{behaviors:n,combo:i,data:a,edge:s,layout:o,node:A,plugins:l,theme:c,transforms:u}=e;n&&this.setBehaviors(n),a&&this.setData(a),A&&this.setNode(A),s&&this.setEdge(s),i&&this.setCombo(i),o&&this.setLayout(o),c&&this.setTheme(c),l&&this.setPlugins(l),u&&this.setTransforms(u)}getSize(){return this.context.canvas?this.context.canvas.getSize():[this.options.width||0,this.options.height||0]}setSize(e,t){e&&(this.options.width=e),t&&(this.options.height=t),this.resize(e,t)}setZoomRange(e){this.options.zoomRange=e}getZoomRange(){return this.options.zoomRange}setNode(e){this.options.node=e,this.context.model.refreshData()}setEdge(e){this.options.edge=e,this.context.model.refreshData()}setCombo(e){this.options.combo=e,this.context.model.refreshData()}getTheme(){return this.options.theme}setTheme(e){this.options.theme=ie(e)?e(this.getTheme()):e}setLayout(e){this.options.layout=ie(e)?e(this.getLayout()):e}getLayout(){return this.options.layout}setBehaviors(e){var t;this.options.behaviors=ie(e)?e(this.getBehaviors()):e,(t=this.context.behavior)===null||t===void 0||t.setBehaviors(this.options.behaviors)}updateBehavior(e){this.setBehaviors(t=>t.map(n=>typeof n=="object"&&n.key===e.key?Object.assign(Object.assign({},n),e):n))}getBehaviors(){return this.options.behaviors||[]}setPlugins(e){var t;this.options.plugins=ie(e)?e(this.getPlugins()):e,(t=this.context.plugin)===null||t===void 0||t.setPlugins(this.options.plugins)}updatePlugin(e){this.setPlugins(t=>t.map(n=>typeof n=="object"&&n.key===e.key?Object.assign(Object.assign({},n),e):n))}getPlugins(){return this.options.plugins||[]}getPluginInstance(e){return this.context.plugin.getPluginInstance(e)}setTransforms(e){var t;this.options.transforms=ie(e)?e(this.getTransforms()):e,(t=this.context.transform)===null||t===void 0||t.setTransforms(this.options.transforms)}updateTransform(e){this.setTransforms(t=>t.map(n=>typeof n=="object"&&n.key===e.key?Object.assign(Object.assign({},n),e):n)),this.context.model.refreshData()}getTransforms(){return this.options.transforms||[]}getData(){return this.context.model.getData()}hasNode(e){return this.context.model.hasNode(e)}hasEdge(e){return this.context.model.hasEdge(e)}hasCombo(e){return this.context.model.hasCombo(e)}getElementData(e){return Array.isArray(e)?e.map(t=>this.context.model.getElementDataById(t)):this.context.model.getElementDataById(e)}getNodeData(e){return e===void 0?this.context.model.getNodeData():Array.isArray(e)?this.context.model.getNodeData(e):this.context.model.getNodeLikeDatum(e)}getEdgeData(e){return e===void 0?this.context.model.getEdgeData():Array.isArray(e)?this.context.model.getEdgeData(e):this.context.model.getEdgeDatum(e)}getComboData(e){return e===void 0?this.context.model.getComboData():Array.isArray(e)?this.context.model.getComboData(e):this.context.model.getNodeLikeDatum(e)}setData(e){this.context.model.setData(ie(e)?e(this.getData()):e)}addData(e){this.context.model.addData(ie(e)?e(this.getData()):e)}addNodeData(e){this.context.model.addNodeData(ie(e)?e(this.getNodeData()):e)}addEdgeData(e){this.context.model.addEdgeData(ie(e)?e(this.getEdgeData()):e)}addComboData(e){this.context.model.addComboData(ie(e)?e(this.getComboData()):e)}addChildrenData(e,t){this.context.model.addChildrenData(e,t)}updateData(e){this.context.model.updateData(ie(e)?e(this.getData()):e)}updateNodeData(e){this.context.model.updateNodeData(ie(e)?e(this.getNodeData()):e)}updateEdgeData(e){this.context.model.updateEdgeData(ie(e)?e(this.getEdgeData()):e)}updateComboData(e){this.context.model.updateComboData(ie(e)?e(this.getComboData()):e)}removeData(e){this.context.model.removeData(ie(e)?e(this.getData()):e)}removeNodeData(e){this.context.model.removeNodeData(ie(e)?e(this.getNodeData()):e)}removeEdgeData(e){this.context.model.removeEdgeData(ie(e)?e(this.getEdgeData()):e)}removeComboData(e){this.context.model.removeComboData(ie(e)?e(this.getComboData()):e)}getElementType(e){return this.context.model.getElementType(e)}getRelatedEdgesData(e,t="both"){return this.context.model.getRelatedEdgesData(e,t)}getNeighborNodesData(e){return this.context.model.getNeighborNodesData(e)}getAncestorsData(e,t){return this.context.model.getAncestorsData(e,t)}getParentData(e,t){return this.context.model.getParentData(e,t)}getChildrenData(e){return this.context.model.getChildrenData(e)}getDescendantsData(e){return this.context.model.getDescendantsData(e)}getElementDataByState(e,t){return this.context.model.getElementDataByState(e,t)}initCanvas(){return Ze(this,void 0,void 0,function*(){var e;if(this.context.canvas)return yield this.context.canvas.ready;const{container:t="container",width:n,height:i,renderer:a,cursor:s,background:o,canvas:A,devicePixelRatio:l=(e=globalThis.devicePixelRatio)!==null&&e!==void 0?e:1}=this.options;if(t instanceof NO)this.context.canvas=t,s&&t.setCursor(s),a&&t.setRenderer(a),yield t.ready;else{const c=_e(t)?document.getElementById(t):t,u=RO(c);this.emit(V.BEFORE_CANVAS_INIT,{container:c,width:n,height:i});const h=Object.assign(Object.assign({},A),{container:c,width:n||u[0],height:i||u[1],background:o,renderer:a,cursor:s,devicePixelRatio:l}),d=new NO(h);this.context.canvas=d,yield d.ready,this.emit(V.AFTER_CANVAS_INIT,{canvas:d})}})}updateCanvas(e){var t,n;const{renderer:i,cursor:a,height:s,width:o}=e,A=this.context.canvas;A&&(i&&(this.emit(V.BEFORE_RENDERER_CHANGE,{renderer:this.options.renderer}),A.setRenderer(i),this.emit(V.AFTER_RENDERER_CHANGE,{renderer:i})),a&&A.setCursor(a),(Z(o)||Z(s))&&this.setSize((t=o??this.options.width)!==null&&t!==void 0?t:0,(n=s??this.options.height)!==null&&n!==void 0?n:0))}initRuntime(){this.context.options=this.options,this.context.batch||(this.context.batch=new cle(this.context)),this.context.plugin||(this.context.plugin=new wle(this.context)),this.context.viewport||(this.context.viewport=new ble(this.context)),this.context.transform||(this.context.transform=new Ble(this.context)),this.context.element||(this.context.element=new gle(this.context)),this.context.animation||(this.context.animation=new lle(this.context)),this.context.layout||(this.context.layout=new ple(this.context)),this.context.behavior||(this.context.behavior=new ule(this.context))}prepare(){return Ze(this,void 0,void 0,function*(){if(yield Promise.resolve(),this.destroyed){console.error(Di("The graph instance has been destroyed"));return}yield this.initCanvas(),this.initRuntime()})}render(){return Ze(this,void 0,void 0,function*(){if(yield this.prepare(),zt(this,new Ut(V.BEFORE_RENDER)),this.options.layout)if(!this.rendered&&X9(this.options.layout)){const e=yield this.context.element.preLayoutDraw({type:"render"});yield Promise.all([e==null?void 0:e.finished,this.autoFit()])}else{const e=this.context.element.draw({type:"render"});yield Promise.all([e==null?void 0:e.finished,this.context.layout.postLayout()]),yield this.autoFit()}else{const e=this.context.element.draw({type:"render"});yield Promise.all([e==null?void 0:e.finished,this.autoFit()])}this.rendered=!0,zt(this,new Ut(V.AFTER_RENDER))})}draw(){return Ze(this,void 0,void 0,function*(){var e;yield this.prepare(),yield(e=this.context.element.draw())===null||e===void 0?void 0:e.finished})}layout(e){return Ze(this,void 0,void 0,function*(){yield this.context.layout.postLayout(e)})}stopLayout(){this.context.layout.stopLayout()}clear(){return Ze(this,void 0,void 0,function*(){const{model:e,element:t}=this.context;e.setData({}),e.clearChanges(),t==null||t.clear()})}destroy(){var e;zt(this,new Ut(V.BEFORE_DESTROY));const{layout:t,animation:n,element:i,model:a,canvas:s,behavior:o,plugin:A}=this.context;A==null||A.destroy(),o==null||o.destroy(),t==null||t.destroy(),n==null||n.destroy(),i==null||i.destroy(),a.destroy(),s==null||s.destroy(),this.options={},this.context={},this.off(),(e=globalThis.removeEventListener)===null||e===void 0||e.call(globalThis,"resize",this.onResize),this.destroyed=!0,zt(this,new Ut(V.AFTER_DESTROY))}getCanvas(){return this.context.canvas}resize(e,t){var n;const i=RO((n=this.context.canvas)===null||n===void 0?void 0:n.getContainer()),a=[e||i[0],t||i[1]];if(!this.context.canvas)return;const s=this.context.canvas.getSize();pt(a,s)||(zt(this,new Ut(V.BEFORE_SIZE_CHANGE,{size:a})),this.context.canvas.resize(...a),zt(this,new Ut(V.AFTER_SIZE_CHANGE,{size:a})))}fitView(e,t){return Ze(this,void 0,void 0,function*(){var n;yield(n=this.context.viewport)===null||n===void 0?void 0:n.fitView(e,t)})}fitCenter(e){return Ze(this,void 0,void 0,function*(){var t;yield(t=this.context.viewport)===null||t===void 0?void 0:t.fitCenter({animation:e})})}autoFit(){return Ze(this,void 0,void 0,function*(){const{autoFit:e}=this.context.options;if(e)if(_e(e))e==="view"?yield this.fitView():e==="center"&&(yield this.fitCenter());else{const{type:t,animation:n}=e;t==="view"?yield this.fitView(e.options,n):t==="center"&&(yield this.fitCenter(n))}})}focusElement(e,t){return Ze(this,void 0,void 0,function*(){var n;yield(n=this.context.viewport)===null||n===void 0?void 0:n.focusElements(Array.isArray(e)?e:[e],{animation:t})})}zoomBy(e,t,n){return Ze(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"relative",scale:e,origin:n},t)})}zoomTo(e,t,n){return Ze(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"absolute",scale:e,origin:n},t)})}getZoom(){return this.context.viewport.getZoom()}rotateBy(e,t,n){return Ze(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"relative",rotate:e,origin:n},t)})}rotateTo(e,t,n){return Ze(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"absolute",rotate:e,origin:n},t)})}getRotation(){return this.context.viewport.getRotation()}translateBy(e,t){return Ze(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"relative",translate:e},t)})}translateTo(e,t){return Ze(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"absolute",translate:e},t)})}getPosition(){return $e([0,0],this.getCanvasByViewport([0,0]))}translateElementBy(e,t){return Ze(this,arguments,void 0,function*(n,i,a=!0){var s,o;const[A,l]=Ot(n)?[n,(s=i)!==null&&s!==void 0?s:!0]:[{[n]:i},a];Object.entries(A).forEach(([c,u])=>this.context.model.translateNodeLikeBy(c,u)),yield(o=this.context.element.draw({animation:l,stage:"translate"}))===null||o===void 0?void 0:o.finished})}translateElementTo(e,t){return Ze(this,arguments,void 0,function*(n,i,a=!0){var s,o;const[A,l]=Ot(n)?[n,(s=i)!==null&&s!==void 0?s:!0]:[{[n]:i},a];Object.entries(A).forEach(([c,u])=>this.context.model.translateNodeLikeTo(c,u)),yield(o=this.context.element.draw({animation:l,stage:"translate"}))===null||o===void 0?void 0:o.finished})}getElementPosition(e){return this.context.model.getElementPosition(e)}getElementRenderStyle(e){return Iw(this.context.element.getElement(e).attributes,["context"])}setElementVisibility(e,t){return Ze(this,arguments,void 0,function*(n,i,a=!0){var s,o;const[A,l]=Ot(n)?[n,(s=i)!==null&&s!==void 0?s:!0]:[{[n]:i},a],c={nodes:[],edges:[],combos:[]};Object.entries(A).forEach(([d,f])=>{const g=this.getElementType(d);c[`${g}s`].push({id:d,style:{visibility:f}})});const{model:u,element:h}=this.context;u.preventUpdateNodeLikeHierarchy(()=>{u.updateData(c)}),yield(o=h.draw({animation:l,stage:"visibility"}))===null||o===void 0?void 0:o.finished})}showElement(e,t){return Ze(this,void 0,void 0,function*(){const n=Array.isArray(e)?e:[e];yield this.setElementVisibility(Object.fromEntries(n.map(i=>[i,"visible"])),t)})}hideElement(e,t){return Ze(this,void 0,void 0,function*(){const n=Array.isArray(e)?e:[e];yield this.setElementVisibility(Object.fromEntries(n.map(i=>[i,"hidden"])),t)})}getElementVisibility(e){var t,n;const i=this.context.element.getElement(e);return(n=(t=i==null?void 0:i.style)===null||t===void 0?void 0:t.visibility)!==null&&n!==void 0?n:"visible"}setElementZIndex(e,t){return Ze(this,void 0,void 0,function*(){var n;const i={nodes:[],edges:[],combos:[]},a=Ot(e)?e:{[e]:t};Object.entries(a).forEach(([A,l])=>{const c=this.getElementType(A);i[`${c}s`].push({id:A,style:{zIndex:l}})});const{model:s,element:o}=this.context;s.preventUpdateNodeLikeHierarchy(()=>s.updateData(i)),yield(n=o.draw({animation:!1,stage:"zIndex"}))===null||n===void 0?void 0:n.finished})}frontElement(e){return Ze(this,void 0,void 0,function*(){const t=Array.isArray(e)?e:[e],{model:n}=this.context,i={};t.map(a=>{const s=n.getFrontZIndex(a);if(n.getElementType(a)==="combo"){const A=n.getAncestorsData(a,qe).at(-1)||this.getComboData(a),l=[A,...n.getDescendantsData(N(A))],c=s-DO(A);l.forEach(h=>{i[N(h)]=this.getElementZIndex(N(h))+c});const{internal:u}=$1(l.map(N),h=>n.getRelatedEdgesData(h));u.forEach(h=>{const d=N(h);i[d]=this.getElementZIndex(d)+c})}else i[a]=s}),yield this.setElementZIndex(i)})}getElementZIndex(e){return DO(this.context.model.getElementDataById(e))}setElementState(e,t){return Ze(this,arguments,void 0,function*(n,i,a=!0){var s,o;const[A,l]=Ot(n)?[n,(s=i)!==null&&s!==void 0?s:!0]:[{[n]:i},a],c=h=>h?Array.isArray(h)?h:[h]:[],u={nodes:[],edges:[],combos:[]};Object.entries(A).forEach(([h,d])=>{const f=this.getElementType(h);u[`${f}s`].push({id:h,states:c(d)})}),this.updateData(u),yield(o=this.context.element.draw({animation:l,stage:"state"}))===null||o===void 0?void 0:o.finished})}getElementState(e){return this.context.model.getElementState(e)}getElementRenderBounds(e){return this.context.element.getElement(e).getRenderBounds()}collapseElement(e){return Ze(this,arguments,void 0,function*(t,n=!0){const{model:i,element:a}=this.context;if(Kn(i.getNodeLikeData([t])[0])||this.isCollapsingExpanding)return;typeof n=="boolean"&&(n={animation:n,align:!1});const s=i.getElementType(t);yield this.frontElement(t),this.isCollapsingExpanding=!0,i.updateData(s==="node"?{nodes:[{id:t,style:{collapsed:!0}}]}:{combos:[{id:t,style:{collapsed:!0}}]}),s==="node"?yield a.collapseNode(t,n):s==="combo"&&(yield a.collapseCombo(t,!!n.animation)),this.isCollapsingExpanding=!1})}expandElement(e){return Ze(this,arguments,void 0,function*(t,n=!0){const{model:i,element:a}=this.context;if(!Kn(i.getNodeLikeData([t])[0])||this.isCollapsingExpanding)return;typeof n=="boolean"&&(n={animation:n,align:!1});const s=i.getElementType(t);this.isCollapsingExpanding=!0,i.updateData(s==="node"?{nodes:[{id:t,style:{collapsed:!1}}]}:{combos:[{id:t,style:{collapsed:!1}}]}),s==="node"?yield a.expandNode(t,n):s==="combo"&&(yield a.expandCombo(t,!!n.animation)),this.isCollapsingExpanding=!1})}setElementCollapsibility(e,t){const n=this.getElementType(e);n==="node"?this.updateNodeData([{id:e,style:{collapsed:t}}]):n==="combo"&&this.updateComboData([{id:e,style:{collapsed:t}}])}toDataURL(){return Ze(this,arguments,void 0,function*(e={}){return this.context.canvas.toDataURL(e)})}getCanvasByViewport(e){return this.context.canvas.getCanvasByViewport(e)}getViewportByCanvas(e){return this.context.canvas.getViewportByCanvas(e)}getClientByCanvas(e){return this.context.canvas.getClientByCanvas(e)}getCanvasByClient(e){return this.context.canvas.getCanvasByClient(e)}getViewportCenter(){return this.context.viewport.getViewportCenter()}getCanvasCenter(){return this.context.viewport.getCanvasCenter()}on(e,t,n){return super.on(e,t,n)}once(e,t){return super.once(e,t)}off(e,t){return super.off(e,t)}}Tf.defaultOptions={autoResize:!1,theme:"light",rotation:0,zoom:1,zoomRange:[.01,10]};class Ele extends za{beforeDraw(e){const{add:t,update:n}=e,{model:i}=this.context;return[...t.edges.entries(),...n.edges.entries()].forEach(([,a])=>{PU(i,a)}),e}}const PU=(r,e)=>{const{source:t,target:n}=e,i=r.getElementDataById(t),a=r.getElementDataById(n),s=Ix(i,u=>r.getParentData(u,qe)),o=Ix(a,u=>r.getParentData(u,qe)),A=N(s),l=N(o),c={sourceNode:A,targetNode:l};return e.style?Object.assign(e.style,c):e.style=c,e},xle=(r,e,t)=>{const[n,i]=e,[a,s]=t;if(i===n)return a;const o=(r-n)/(i-n);return a+o*(s-a)},Cle=(r,e,t)=>{const[n,i]=e,[a,s]=t,o=Math.log(r-n+1)/Math.log(i-n+1);return a+o*(s-a)},Sle=(r,e,t,n=2)=>{const[i,a]=e,[s,o]=t,A=Math.pow((r-i)/(a-i),n);return s+A*(o-s)},Fle=(r,e,t)=>{const[n,i]=e,[a,s]=t,o=Math.sqrt((r-n)/(i-n));return a+o*(s-a)};class Mf extends za{constructor(e,t){super(e,on({},Mf.defaultOptions,t)),this.assignSizeByCentrality=(n,i,a,s,o,A)=>{const l=[i,a],c=[s[0],o[0]],u=[s[1],o[1]],h=[s[2],o[2]],d=(f,g)=>{if(typeof A=="function")return A(f,l,g);switch(A){case"linear":return xle(f,l,g);case"log":return Cle(f,l,g);case"pow":return Sle(f,l,g,2);case"sqrt":return Fle(f,l,g);default:return g[0]}};return[d(n,c),d(n,u),d(n,h)]}}beforeDraw(e){const{model:t}=this.context,n=t.getNodeData(),i=Ar(this.options.maxSize),a=Ar(this.options.minSize),s=this.getCentralities(this.options.centrality),o=s.size>0?Math.max(...s.values()):0,A=s.size>0?Math.min(...s.values()):0;return n.forEach(l=>{var c;const u=this.assignSizeByCentrality(s.get(N(l))||0,A,o,a,i,this.options.scale),h=(c=this.context.element)===null||c===void 0?void 0:c.getElement(N(l)),d={size:u};this.assignLabelStyle(d,u,l,h),(!h||!Ru(d,h.attributes))&&or(e,h?"update":"add","node",on(l,{style:d}),!0)}),e}assignLabelStyle(e,t,n,i){var a;const s=i?i.config.style:(a=this.context.element)===null||a===void 0?void 0:a.getElementComputedStyle("node",n);if(Object.assign(e,Es(s,["labelFontSize","labelLineHeight"])),this.options.mapLabelSize){const o=this.getLabelSizeByNodeSize(t,1/0,Number(e.labelFontSize));Object.assign(e,{labelFontSize:o,labelLineHeight:o+aV(e.labelPadding)})}return e}getLabelSizeByNodeSize(e,t,n){const i=Math.min(...e)/2,[a,s]=Array.isArray(this.options.mapLabelSize)?this.options.mapLabelSize:[n,t];return Math.min(s,Math.max(i,a))}getCentralities(e){const{model:t}=this.context,n=t.getData();if(typeof e=="function")return e(n);const i=t.getRelatedEdgesData.bind(t);return Rk(n,i,e)}}Mf.defaultOptions={centrality:{type:"degree"},maxSize:80,minSize:20,scale:"linear",mapLabelSize:!1};class Of extends za{constructor(e,t){super(e,Object.assign({},Of.defaultOptions,t))}get ref(){return this.context.model.getRootsData()[0]}afterLayout(){var e;const t=Vt(this.ref),{graph:n,model:i}=this.context;(e=i.getData().nodes)===null||e===void 0||e.forEach(s=>{var o;if(N(s)===N(this.ref))return;const A=Hk($e(Vt(s),t)),l=Math.abs(A)>Math.PI/2,c=!s.children||s.children.length===0,u=N(s),h=(o=this.context.element)===null||o===void 0?void 0:o.getElement(u);if(!h||!h.isVisible())return;const d=Ar(n.getElementRenderStyle(u).size)[0]/2,f=(c?1:-1)*(d+this.options.offset),g=[["translate",f*Math.cos(A),f*Math.sin(A)],["rotate",l?Rn(A)+180:Rn(A)]];i.updateNodeData([{id:N(s),style:{labelTextAlign:l===c?"right":"left",labelTextBaseline:"middle",labelTransform:g}}])}),n.draw()}}Of.defaultOptions={offset:5};const Tle="quadratic",KO=["top","top-right","right","right-bottom","bottom","bottom-left","left","left-top"];class If extends za{constructor(e,t){super(e,Object.assign({},If.defaultOptions,t)),this.cacheMergeStyle=new Map,this.getAffectedParallelEdges=n=>{const{add:{edges:i},update:{nodes:a,edges:s,combos:o},remove:{edges:A}}=n,{model:l}=this.context,c=new Map,u=(f,g)=>{l.getRelatedEdgesData(g).forEach(p=>!c.has(N(p))&&c.set(N(p),p))};a.forEach(u),o.forEach(u);const h=f=>{const g=new Set(n.remove.edges.keys()),v=l.getEdgeData().filter(p=>!g.has(N(p))).map(p=>PU(l,p));Mle(f,v).forEach(p=>{const y=N(p);c.has(y)||c.set(y,p)})};if(A.size&&A.forEach(h),i.size&&i.forEach(h),s.size){const f=$N(WB(l.getChanges())).update.edges;s.forEach(g=>{var v;h(g);const p=(v=f.find(y=>N(y.value)===N(g)))===null||v===void 0?void 0:v.original;p&&!lb(g,p)&&h(p)})}Ai(this.options.edges)||c.forEach((f,g)=>!this.options.edges.includes(g)&&c.delete(g));const d=l.getEdgeData().map(N);return new Map([...c].sort((f,g)=>d.indexOf(f[0])-d.indexOf(g[0])))},this.applyBundlingStyle=(n,i,a)=>{const{edgeMap:s,reverses:o}=zO(i);s.forEach(A=>{A.forEach((l,c,u)=>{var h;const d=u.length,f=l.style||{};if(l.source===l.target){const p=KO.length;f.loopPlacement=KO[c%p],f.loopDist=Math.floor(c/p)*a+50}else if(d===1)f.curveOffset=0;else{const p=(c%2===0?1:-1)*(o[`${l.source}|${l.target}|${c}`]?-1:1);f.curveOffset=d%2===1?p*Math.ceil(c/2)*a*2:p*(Math.floor(c/2)*a*2+a)}const g=Object.assign(l,{type:Tle,style:f}),v=(h=this.context.element)===null||h===void 0?void 0:h.getElement(N(l));(!v||!Ru(g.style,v.attributes))&&or(n,v?"update":"add","edge",g,!0)})})},this.resetEdgeStyle=n=>{const i=n.style||{},a=this.cacheMergeStyle.get(N(n))||{};return Object.keys(a).forEach(s=>{pt(i[s],a[s])&&(n[s]?i[s]=n[s]:delete i[s])}),Object.assign(n,{style:i})},this.applyMergingStyle=(n,i)=>{const{edgeMap:a,reverses:s}=zO(i);a.forEach(o=>{var A;if(o.length===1){const c=o[0],u=(A=this.context.element)===null||A===void 0?void 0:A.getElement(N(c)),h=this.resetEdgeStyle(c);(!u||!Ru(h,u.attributes))&&or(n,u?"update":"add","edge",h);return}const l=o.map(({source:c,target:u,style:h={}},d)=>{const{startArrow:f,endArrow:g}=h,v={},[p,y]=s[`${c}|${u}|${d}`]?["endArrow","startArrow"]:["startArrow","endArrow"];return ZA(f)&&(v[p]=f),ZA(g)&&(v[y]=g),v}).reduce((c,u)=>Object.assign(Object.assign({},c),u),{});o.forEach((c,u,h)=>{var d;if(u!==0){or(n,"remove","edge",c);return}const f=Object.assign({},ie(this.options.style)?this.options.style(h):this.options.style,{childrenData:h});this.cacheMergeStyle.set(N(c),f);const g=Object.assign(Object.assign({},c),{type:"line",style:Object.assign(Object.assign(Object.assign({},c.style),l),f)}),v=(d=this.context.element)===null||d===void 0?void 0:d.getElement(N(c));(!v||!Ru(g.style,v.attributes))&&or(n,v?"update":"add","edge",g,!0)})})}}beforeDraw(e){const t=this.getAffectedParallelEdges(e);return t.size===0||(this.options.mode==="bundle"?this.applyBundlingStyle(e,t,this.options.distance):this.applyMergingStyle(e,t)),e}}If.defaultOptions={mode:"bundle",distance:15};const zO=r=>{const e=new Map,t=new Set,n={},i=new Map;for(const[a,s]of r){if(t.has(a))continue;const{source:o,target:A}=s,l=`${o}-${A}`;e.has(l)||(e.set(l,[]),i.set(l,new Set));const c=e.get(l),u=i.get(l);c&&u&&!u.has(a)&&(c.push(s),u.add(a),t.add(a));for(const[h,d]of r)if(!(t.has(h)||h===a)&&lb(s,d)){const f=e.get(l),g=i.get(l);f&&g&&!g.has(h)&&(f.push(d),g.add(h),o===d.target&&A===d.source&&(n[`${d.source}|${d.target}|${f.length-1}`]=!0),t.add(h))}}return{edgeMap:e,reverses:n}},Mle=(r,e,t)=>e.filter(n=>lb(n,r)),lb=(r,e)=>{const{sourceNode:t,targetNode:n}=r.style||{},{sourceNode:i,targetNode:a}=e.style||{};return t===i&&n===a||t===a&&n===i};class Ole extends za{beforeDraw(e,t){const{stage:n}=t;if(n==="visibility")return e;const{model:i}=this.context,{update:{nodes:a,edges:s,combos:o}}=e,A=(l,c)=>{i.getRelatedEdgesData(c).forEach(h=>!s.has(N(h))&&s.set(N(h),h))};return a.forEach(A),o.forEach(A),e}}const Ile={animation:{"combo-collapse":_k,"combo-expand":nV,"node-collapse":Ok,"node-expand":eV,"path-in":Ik,"path-out":tV,fade:Zz,translate:Jz},behavior:{"brush-select":Ol,"click-select":id,"collapse-expand":gd,"create-edge":vd,"drag-canvas":pd,"drag-element-force":e$,"drag-element":Nl,"fix-element-size":wd,"focus-element":Bd,"hover-activate":bd,"lasso-select":n$,"auto-adapt-label":td,"optimize-viewport-transform":Ed,"scroll-canvas":xd,"zoom-canvas":Cd},combo:{circle:e9,rect:t9},edge:{cubic:Ns,line:pL,polyline:dd,quadratic:fd,"cubic-horizontal":cd,"cubic-radial":ud,"cubic-vertical":hd},layout:{"antv-dagre":mq,"combo-combined":mY,"compact-box":u$,"d3-force":VY,"force-atlas2":Kne,circular:bq,concentric:tw,dagre:Xd,dendrogram:p$,fishbone:Zd,force:JL,fruchterman:jne,grid:Wne,indented:B$,mds:lQ,mindmap:S$,radial:rre,random:cre,snake:Jd},node:{circle:kl,diamond:Aj,ellipse:od,hexagon:dj,html:Ad,image:cL,rect:Zj,star:Jj,donut:sd,triangle:ld},palette:{spectral:Sre,tableau:Fre,oranges:Tre,greens:Mre,blues:Ore},theme:{dark:YAe,light:ZAe},plugin:{"bubble-sets":nf,"edge-bundling":af,"edge-filter-lens":sf,"grid-line":lf,background:ef,contextmenu:rf,fisheye:of,fullscreen:Af,history:cf,hull:hf,legend:wf,minimap:Bf,snapline:bf,timebar:Ef,title:NAe,toolbar:xf,tooltip:Cf,watermark:Sf},transform:{"arrange-draw-order":JAe,"collapse-expand-combo":ele,"collapse-expand-node":tle,"get-edge-actual-ends":Ele,"map-node-size":Mf,"place-radial-labels":Of,"process-parallel-edges":If,"update-related-edges":Ole},shape:{circle:yi,ellipse:Cl,group:$t,html:ks,image:lB,line:Ss,path:wn,polygon:Ls,polyline:Gh,rect:An,text:Qs,label:wi,badge:Do}};function _le(){Object.entries(Ile).forEach(([r,e])=>{Object.entries(e).forEach(([t,n])=>{nle(r,t,n)})})}_le();function kle(r){const e=new Map;return r.forEach(t=>{const n=t.source<t.target?`${t.source}|${t.target}`:`${t.target}|${t.source}`;e.has(n)||e.set(n,[]),e.get(n).push(t)}),e.forEach(t=>{if(t.length===1)t[0].type="line",t[0].style={...t[0].style,curveOffset:0};else{const n=(t.length-1)/2;t.forEach((i,a)=>{i.type="quadratic",i.style={...i.style,curveOffset:(a-n)*30}})}}),r}const Vle=Ln.memo(function({data:e,meta:t}){const n=Ln.useRef(null),i=Ln.useRef(null),a=Ln.useRef(new Map),{selectedItems:s,selectItem:o,deselectItem:A,clearSelection:l,resetTrigger:c}=zU(),{results:u}=VU(),{addToast:h}=jU();Ln.useEffect(()=>{a.current=s},[s]);const d=Ln.useCallback(y=>{var w;const m=(w=y.target)==null?void 0:w.id;m&&(a.current.has(m)?A(m):o(m,"node"))},[o,A]),f=Ln.useCallback(y=>{var w;const m=(w=y.target)==null?void 0:w.id;m&&(a.current.has(m)?A(m):o(m,"edge"))},[o,A]),g=Ln.useCallback(()=>{l()},[l]);Ln.useCallback(()=>{},[]);const v=Ln.useCallback(y=>{y.key==="Escape"?l():(y.ctrlKey||y.metaKey)&&y.key==="f"?(y.preventDefault(),h("","info")):y.key==="Delete"&&a.current.size>0&&(a.current.forEach(m=>{A(m.id)}),h("","success"))},[l,A,h]),p=Ln.useCallback(y=>{if(y)try{const m=y.getNodeData()||[],w=new Set(u);m.forEach(B=>{const b=B.id;if(w.has(b))y.setElementState(b,["highlight"]);else{const x=(y.getElementState(b)||[]).filter(S=>S!=="highlight");y.setElementState(b,x)}}),u.length>0&&y.focusElement(u[0])}catch(m){console.warn("[GraphView] Error in highlightSearchResults:",m)}},[u]);return Ln.useEffect(()=>{if(!(!n.current||!(e!=null&&e.nodes))){if(i.current){try{i.current.destroy()}catch(y){console.warn("[GraphView] Error destroying previous graph:",y)}i.current=null}try{const y=new Tf({container:n.current,width:n.current.clientWidth,height:n.current.clientHeight,layout:{type:"force",collide:{radius:E=>E.size/2},preventOverlap:!0},behaviors:["drag-canvas","zoom-canvas","drag-element"],node:{style:{labelText:E=>{var x;return((x=E.data)==null?void 0:x.label)||E.id},fontSize:12},state:{highlight:{fill:"#ffd666",stroke:"#faad14",lineWidth:2,shadowColor:"#faad14",shadowBlur:10},selected:{fill:"#1890ff",stroke:"#1890ff",lineWidth:3,shadowColor:"#1890ff",shadowBlur:10}}},edge:{style:{labelText:E=>{var x;return((x=E.data)==null?void 0:x.label)||""},fontSize:10},state:{highlight:{stroke:"#faad14",lineWidth:2,opacity:1}}},data:{nodes:e.nodes,edges:kle(e.edges||[])}}),m=d,w=f,B=g;y.on(Sn.CLICK,m),y.on(Qo.CLICK,w),y.on(zr.CLICK,B),y.on(Sn.DBLCLICK,E=>{var x;try{const S=(x=E.target)==null?void 0:x.id;if(!S)return;(y.getNeighborNodesData(S)||[]).forEach(F=>{y.setElementState(F.id,["highlight"])})}catch(S){console.warn("[GraphView] Error in dblclick handler:",S)}}),y.render().then(()=>{console.log("[GraphView] Graph rendered successfully"),p(y)}).catch(E=>{console.error("[GraphView] Error rendering graph:",E)});const b=()=>{if(n.current&&i.current)try{i.current.resize(n.current.clientWidth,n.current.clientHeight)}catch(E){console.warn("[GraphView] Error resizing graph:",E)}};return window.addEventListener("resize",b),window.addEventListener("keydown",v),i.current=y,()=>{if(window.removeEventListener("resize",b),window.removeEventListener("keydown",v),i.current)try{i.current.off(Sn.CLICK,m),i.current.off(Qo.CLICK,w),i.current.off(zr.CLICK,B),i.current.destroy(),i.current=null}catch(E){console.warn("[GraphView] Error in cleanup:",E)}}}catch(y){return console.error("[GraphView] Error creating graph:",y),()=>{}}}},[e,d,f,g,v,p]),Ln.useEffect(()=>{if(!i.current||c===0)return;(async()=>{var m,w;try{console.log("[GraphView] Relayouting graph..."),(m=i.current)==null||m.stopLayout(),await((w=i.current)==null?void 0:w.layout()),console.log("[GraphView] Relayout completed")}catch(B){console.warn("[GraphView] Error relayouting graph on reset:",B)}})()},[c]),Ln.useEffect(()=>{if(!i.current||!e)return;(async()=>{var m,w,B;try{(m=e.nodes)==null||m.forEach(b=>{var x;const E=s.has(b.id);(x=i.current)==null||x.updateNodeData([{id:b.id,style:{fill:E?"#1890ff":"#87d068",lineWidth:E?3:1,stroke:E?"#1890ff":"#666"}}])}),(w=e.edges)==null||w.forEach(b=>{var x;const E=s.has(b.id);(x=i.current)==null||x.updateEdgeData([{id:b.id,style:{stroke:E?"#1890ff":"#ccc",lineWidth:E?2:1}}])}),await((B=i.current)==null?void 0:B.draw())}catch(b){console.warn("[GraphView] Error updating selection styles:",b)}})()},[s,e]),fb.jsx("div",{className:"w-full h-full flex flex-col overflow-hidden",children:fb.jsx("div",{ref:n,className:"graph-view flex-1"})})});export{Vle as default};
//# sourceMappingURL=GraphView-Bmj5blcR.js.map
