{"version":3,"file":"HypergraphView-3x7u6gKG.js","sources":["../../../frontend/src/components/views/HypergraphView.tsx"],"sourcesContent":["import { useEffect, useRef, useCallback, memo } from \"react\";\r\nimport { Graph, NodeEvent, CanvasEvent } from \"@antv/g6\";\r\nimport { useVisualization } from \"@/hooks/useVisualization\";\r\nimport { useSearch } from \"@/hooks/useSearch\";\r\nimport { message } from \"antd\";\r\nimport \"@/components/views/HypergraphView.css\";\r\n\r\ninterface HypergraphViewProps {\r\n  data: {\r\n    nodes: any[];\r\n    edges: any[];\r\n    hyperedges: Array<{\r\n      id: string;\r\n      label: string;\r\n      node_set: string[];\r\n      data: any;\r\n    }>;\r\n  };\r\n  meta: any;\r\n}\r\n\r\n// 颜色调色板，为每个超边生成不同颜色\r\nconst HYPEREDGE_COLORS = [\r\n  { fill: \"#1890FF\", stroke: \"#0050B3\" },\r\n  { fill: \"#52C41A\", stroke: \"#274704\" },\r\n  { fill: \"#FA8C16\", stroke: \"#872000\" },\r\n  { fill: \"#EB2F96\", stroke: \"#780C56\" },\r\n  { fill: \"#13C2C2\", stroke: \"#0C464C\" },\r\n  { fill: \"#722ED1\", stroke: \"#38165F\" },\r\n  { fill: \"#F5222D\", stroke: \"#7F0000\" },\r\n  { fill: \"#FA541C\", stroke: \"#7F2C00\" },\r\n  { fill: \"#FFC53D\", stroke: \"#7F6400\" },\r\n  { fill: \"#45B39D\", stroke: \"#0F5C4C\" },\r\n];\r\n\r\nfunction getHyperedgeColor(index: number) {\r\n  return HYPEREDGE_COLORS[index % HYPEREDGE_COLORS.length];\r\n}\r\n\r\nconst HypergraphView = memo(function HypergraphView({ data, meta }: HypergraphViewProps) {\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const graphRef = useRef<Graph | null>(null);\r\n  const tooltipRef = useRef<HTMLDivElement>(null);\r\n  const { selectedNodes, selectNode, deselectNode, clearSelection } = useVisualization();\r\n  const { results: searchResults } = useSearch();\r\n\r\n  const handleNodeClick = useCallback(\r\n    (evt: any) => {\r\n      const nodeId = evt.target?.id;\r\n      if (!nodeId) return;\r\n\r\n      if (selectedNodes.has(nodeId)) {\r\n        deselectNode(nodeId);\r\n      } else {\r\n        selectNode(nodeId);\r\n      }\r\n    },\r\n    [selectedNodes, selectNode, deselectNode]\r\n  );\r\n\r\n  const handleCanvasClick = useCallback(() => {\r\n    clearSelection();\r\n  }, [clearSelection]);\r\n\r\n  const handleNodeMouseEnter = useCallback((evt: any) => {\r\n    const nodeId = evt.target?.id;\r\n    if (!nodeId || !tooltipRef.current || !graphRef.current) return;\r\n\r\n    try {\r\n      const nodeData = graphRef.current.getNodeData(nodeId);\r\n      if (!nodeData) return;\r\n\r\n      const position = graphRef.current.getElementPosition(nodeId);\r\n      const [x, y] = position || [0, 0];\r\n\r\n      const content = `\r\n        <div class=\"graph-node-tooltip\">\r\n          <div class=\"tooltip-title\">${nodeData.data?.label || nodeData.id}</div>\r\n          <div class=\"tooltip-id\">ID: ${nodeData.id}</div>\r\n          ${nodeData.data?.description ? `<div class=\"tooltip-desc\">${nodeData.data.description}</div>` : ''}\r\n          ${nodeData.data?.value !== undefined ? `<div class=\"tooltip-value\">Value: ${nodeData.data.value}</div>` : ''}\r\n        </div>\r\n      `;\r\n\r\n      tooltipRef.current.innerHTML = content;\r\n      tooltipRef.current.style.display = 'block';\r\n      tooltipRef.current.style.left = x + 10 + 'px';\r\n      tooltipRef.current.style.top = y + 10 + 'px';\r\n    } catch (error) {\r\n      console.warn(\"[HypergraphView] Error in handleNodeMouseEnter:\", error);\r\n    }\r\n  }, []);\r\n\r\n  const handleNodeMouseLeave = useCallback(() => {\r\n    if (tooltipRef.current) {\r\n      tooltipRef.current.style.display = 'none';\r\n    }\r\n  }, []);\r\n\r\n  const handleKeyDown = useCallback((evt: KeyboardEvent) => {\r\n    if (evt.key === 'Escape') {\r\n      clearSelection();\r\n    } else if ((evt.ctrlKey || evt.metaKey) && evt.key === 'f') {\r\n      evt.preventDefault();\r\n      message.info('搜索面板已激活');\r\n    } else if (evt.key === 'Delete' && selectedNodes.size > 0) {\r\n      selectedNodes.forEach((nodeId) => {\r\n        deselectNode(nodeId);\r\n      });\r\n      message.success('已清除选中节点');\r\n    }\r\n  }, [selectedNodes, clearSelection, deselectNode]);\r\n\r\n  const highlightSearchResults = useCallback((graph: Graph) => {\r\n    if (!graph) return;\r\n\r\n    try {\r\n      const allNodeData = graph.getNodeData() || [];\r\n      const searchResultSet = new Set(searchResults);\r\n\r\n      allNodeData.forEach((nodeData: any) => {\r\n        const nodeId = nodeData.id;\r\n        if (searchResultSet.has(nodeId)) {\r\n          graph.setElementState(nodeId, ['highlight']);\r\n        } else {\r\n          const currentStates = graph.getElementState(nodeId) || [];\r\n          const newStates = currentStates.filter((state: string) => state !== 'highlight');\r\n          graph.setElementState(nodeId, newStates);\r\n        }\r\n      });\r\n\r\n      if (searchResults.length > 0) {\r\n        graph.focusElement(searchResults[0]);\r\n      }\r\n    } catch (error) {\r\n      console.warn(\"[HypergraphView] Error in highlightSearchResults:\", error);\r\n    }\r\n  }, [searchResults]);\r\n\r\n  useEffect(() => {\r\n    console.log(\"[HypergraphView] useEffect triggered\");\r\n    console.log(\"[HypergraphView] data:\", data);\r\n    console.log(\"[HypergraphView] data.nodes:\", data?.nodes?.length || 0);\r\n    console.log(\"[HypergraphView] data.edges:\", data?.edges?.length || 0);\r\n    console.log(\"[HypergraphView] data.hyperedges:\", data?.hyperedges?.length || 0);\r\n\r\n    if (!containerRef.current || !data?.nodes) {\r\n      console.warn(\"[HypergraphView] Missing containerRef or data.nodes\");\r\n      return;\r\n    }\r\n\r\n    // Clean up old graph\r\n    if (graphRef.current) {\r\n      try {\r\n        graphRef.current.destroy();\r\n      } catch (e) {\r\n        console.warn(\"[HypergraphView] Error destroying previous graph:\", e);\r\n      }\r\n      graphRef.current = null;\r\n    }\r\n\r\n    try {\r\n      // Build bubble-sets plugins from hyperedges\r\n      const bubbleSetPlugins = (data.hyperedges || []).map((hyperedge, index) => {\r\n        const colors = getHyperedgeColor(index);\r\n        return {\r\n          key: `bubble-sets-${hyperedge.id}`,\r\n          type: 'bubble-sets',\r\n          members: hyperedge.node_set,\r\n          labelText: hyperedge.label,\r\n          fill: colors.fill,\r\n          fillOpacity: 0.1,\r\n          stroke: colors.stroke,\r\n          strokeOpacity: 1,\r\n          label: true,\r\n          labelCloseToPath: false,\r\n          labelPlacement: 'top',\r\n          labelBackgroundFill: colors.stroke,\r\n          labelFill: '#fff',\r\n          labelPadding: 3,\r\n          labelBackgroundRadius: 4,\r\n        };\r\n      });\r\n\r\n      // Create new graph with G6 v5 config\r\n      const graph = new Graph({\r\n        container: containerRef.current,\r\n        width: containerRef.current.clientWidth,\r\n        height: containerRef.current.clientHeight,\r\n        layout: {\r\n          type: 'force',\r\n          collide: {\r\n            radius: (d: any) => d.size / 2,\r\n          },\r\n          preventOverlap: true,\r\n        },\r\n        behaviors: ['drag-canvas', 'zoom-canvas', 'drag-element'],\r\n        node: {\r\n          style: {\r\n            labelText: (d: any) => d.data?.label || d.id,\r\n            fontSize: 12,\r\n          },\r\n          state: {\r\n            highlight: {\r\n              fill: '#ffd666',\r\n              stroke: '#faad14',\r\n              lineWidth: 2,\r\n              shadowColor: '#faad14',\r\n              shadowBlur: 10,\r\n            },\r\n            selected: {\r\n              fill: '#1890ff',\r\n              stroke: '#1890ff',\r\n              lineWidth: 3,\r\n              shadowColor: '#1890ff',\r\n              shadowBlur: 10,\r\n            },\r\n          },\r\n        },\r\n        edge: {\r\n          style: {\r\n            labelText: (d: any) => d.data?.label || '',\r\n            fontSize: 10,\r\n            stroke: '#B4E5FF',\r\n            opacity: 0.6,\r\n          },\r\n          state: {\r\n            highlight: {\r\n              stroke: '#faad14',\r\n              lineWidth: 2,\r\n              opacity: 1,\r\n            },\r\n          },\r\n        },\r\n        data: {\r\n          nodes: data.nodes.map((node: any) => ({\r\n            ...node,\r\n            style: {\r\n              ...node.style,\r\n              fill: selectedNodes.has(node.id) ? \"#1890ff\" : \"#87d068\",\r\n              lineWidth: selectedNodes.has(node.id) ? 3 : 1,\r\n              stroke: selectedNodes.has(node.id) ? \"#1890ff\" : \"#666\",\r\n            },\r\n          })),\r\n          edges: (data.edges || []).map((edge: any) => ({\r\n            ...edge,\r\n            style: {\r\n              stroke: '#B4E5FF',\r\n              lineWidth: 1,\r\n              opacity: 0.6,\r\n              ...edge.style,\r\n            },\r\n          })),\r\n        },\r\n        plugins: bubbleSetPlugins,\r\n        autoFit: 'center',\r\n      });\r\n\r\n      // Register event handlers\r\n      const nodeClickHandler = handleNodeClick;\r\n      const canvasClickHandler = handleCanvasClick;\r\n      const nodeEnterHandler = handleNodeMouseEnter;\r\n      const nodeLeaveHandler = handleNodeMouseLeave;\r\n\r\n      graph.on(NodeEvent.CLICK, nodeClickHandler);\r\n      graph.on(CanvasEvent.CLICK, canvasClickHandler);\r\n      graph.on(NodeEvent.POINTER_ENTER, nodeEnterHandler);\r\n      graph.on(NodeEvent.POINTER_LEAVE, nodeLeaveHandler);\r\n\r\n      // Double-click to highlight neighbors\r\n      graph.on(NodeEvent.DBLCLICK, (evt: any) => {\r\n        try {\r\n          const nodeId = evt.target?.id;\r\n          if (!nodeId) return;\r\n          const neighbors = graph.getNeighborNodesData(nodeId) || [];\r\n          neighbors.forEach((neighbor: any) => {\r\n            graph.setElementState(neighbor.id, ['highlight']);\r\n          });\r\n        } catch (error) {\r\n          console.warn(\"[HypergraphView] Error in dblclick handler:\", error);\r\n        }\r\n      });\r\n\r\n      // Render and apply search highlighting\r\n      graph.render().then(() => {\r\n        console.log(\"[HypergraphView] Graph rendered successfully\");\r\n        highlightSearchResults(graph);\r\n      }).catch((error) => {\r\n        console.error(\"[HypergraphView] Error rendering graph:\", error);\r\n      });\r\n\r\n      // Handle resize\r\n      const handleResize = () => {\r\n        if (containerRef.current && graphRef.current) {\r\n          try {\r\n            graphRef.current.resize(\r\n              containerRef.current.clientWidth,\r\n              containerRef.current.clientHeight\r\n            );\r\n          } catch (error) {\r\n            console.warn(\"[HypergraphView] Error resizing graph:\", error);\r\n          }\r\n        }\r\n      };\r\n\r\n      window.addEventListener(\"resize\", handleResize);\r\n      window.addEventListener(\"keydown\", handleKeyDown);\r\n      graphRef.current = graph;\r\n\r\n      // Cleanup function\r\n      return () => {\r\n        window.removeEventListener(\"resize\", handleResize);\r\n        window.removeEventListener(\"keydown\", handleKeyDown);\r\n\r\n        if (graphRef.current) {\r\n          try {\r\n            graphRef.current.off(NodeEvent.CLICK, nodeClickHandler);\r\n            graphRef.current.off(CanvasEvent.CLICK, canvasClickHandler);\r\n            graphRef.current.off(NodeEvent.POINTER_ENTER, nodeEnterHandler);\r\n            graphRef.current.off(NodeEvent.POINTER_LEAVE, nodeLeaveHandler);\r\n            graphRef.current.destroy();\r\n            graphRef.current = null;\r\n          } catch (e) {\r\n            console.warn(\"[HypergraphView] Error in cleanup:\", e);\r\n          }\r\n        }\r\n      };\r\n    } catch (error) {\r\n      console.error(\"[HypergraphView] Error creating graph:\", error);\r\n      return () => { };\r\n    }\r\n  }, [data, selectedNodes, handleNodeClick, handleCanvasClick, handleNodeMouseEnter, handleNodeMouseLeave, handleKeyDown, highlightSearchResults]);\r\n\r\n  return (\r\n    <div style={{ position: 'relative', width: '100%', height: '100%' }}>\r\n      <div ref={containerRef} className=\"hypergraph-view\" style={{ width: '100%', height: '100%' }} />\r\n      <div\r\n        ref={tooltipRef}\r\n        className=\"graph-tooltip\"\r\n        style={{ display: 'none' }}\r\n      />\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default HypergraphView;\r\n"],"names":["HYPEREDGE_COLORS","getHyperedgeColor","index","HypergraphView","memo","data","meta","containerRef","useRef","graphRef","tooltipRef","selectedNodes","selectNode","deselectNode","clearSelection","useVisualization","searchResults","useSearch","handleNodeClick","useCallback","evt","nodeId","_a","handleCanvasClick","handleNodeMouseEnter","nodeData","position","x","y","content","_b","_c","_d","error","handleNodeMouseLeave","handleKeyDown","message","highlightSearchResults","graph","allNodeData","searchResultSet","newStates","state","useEffect","e","bubbleSetPlugins","hyperedge","colors","Graph","d","node","edge","nodeClickHandler","canvasClickHandler","nodeEnterHandler","nodeLeaveHandler","NodeEvent","CanvasEvent","neighbor","handleResize","jsxs","jsx"],"mappings":"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"}