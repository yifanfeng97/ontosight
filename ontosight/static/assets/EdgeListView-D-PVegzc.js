import{u as b,r as a,j as e,B as c}from"./index-yaVI2luG.js";import{I as v}from"./item-card-Bo8SJ9ni.js";import{C as N,a as w}from"./chevron-right-BCIcw7kh.js";const k=({meta:E})=>{const{fetchEdgesList:r,selectedItems:m,currentPage:t,setCurrentPage:d,selectItem:x,deselectItem:y}=b(),[i,u]=a.useState([]),[o,f]=a.useState(0),[g,h]=a.useState(!1),[p,n]=a.useState(!0);return a.useEffect(()=>{(async()=>{n(!0);try{const s=await r(t,12);console.log("EdgeListView.loadEdges",{page:t,result:s}),u(s.items||[]),f(s.total||0),h(s.has_next||!1)}catch(s){console.error("Failed to load edges:",s)}finally{n(!1)}})()},[t,r]),e.jsxs("div",{className:"w-full h-full flex flex-col overflow-hidden",children:[e.jsx("div",{className:"flex-shrink-0 border-b border-border bg-muted/30 px-4 py-3",children:e.jsxs("h2",{className:"text-lg font-semibold",children:["所有边 (",o,")"]})}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsx("div",{className:"p-4 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 auto-rows-max",children:p?e.jsx("div",{className:"col-span-full text-center text-muted-foreground py-8",children:"加载中..."}):i.length===0?e.jsx("div",{className:"col-span-full text-center text-muted-foreground py-8",children:"没有边"}):i.map(l=>{const s=l.id;return e.jsx(v,{id:s,label:l.label||"Unknown Edge",type:"edge",metadata:Object.fromEntries(Object.entries(l).filter(([j])=>!["id","label","type"].includes(j))),isSelected:m.has(s),onClick:()=>{x(s,"edge")}},s)})})}),e.jsxs("div",{className:"flex-shrink-0 border-t border-border bg-muted/30 px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["第 ",t+1," 页 (共 ",Math.ceil(o/12)," 页)"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{variant:"outline",size:"sm",onClick:()=>d(Math.max(0,t-1)),disabled:t===0,children:e.jsx(N,{className:"w-4 h-4"})}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>d(t+1),disabled:!g,children:e.jsx(w,{className:"w-4 h-4"})})]})]})]})};export{k as default};
//# sourceMappingURL=EdgeListView-D-PVegzc.js.map
