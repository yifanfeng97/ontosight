{"version":3,"file":"HyperedgeListView-ZGqllV-S.js","sources":["../../../frontend/src/components/views/HyperedgeListView.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { ItemCard } from \"@/components/ui\";\r\nimport { useVisualization } from \"@/hooks/useVisualization\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\r\n\r\ninterface HyperedgeListViewProps {\r\n  data?: any;\r\n  meta?: any;\r\n}\r\n\r\nconst HyperedgeListView: React.FC<HyperedgeListViewProps> = ({ meta }) => {\r\n  const { fetchHyperedgesList, selectedItems, currentPage, setCurrentPage, selectItem, deselectItem } = useVisualization();\r\n  const [items, setItems] = useState<any[]>([]);\r\n  const [total, setTotal] = useState(0);\r\n  const [hasNext, setHasNext] = useState(false);\r\n  const [listLoading, setListLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const loadHyperedges = async () => {\r\n      setListLoading(true);\r\n      try {\r\n        const result = await fetchHyperedgesList(currentPage, 12);\r\n        console.log(\"HyperedgeListView.loadHyperedges\", { page: currentPage, result });\r\n        setItems(result.items || []);\r\n        setTotal(result.total || 0);\r\n        setHasNext(result.has_next || false);\r\n      } catch (error) {\r\n        console.error(\"Failed to load hyperedges:\", error);\r\n      } finally {\r\n        setListLoading(false);\r\n      }\r\n    };\r\n\r\n    loadHyperedges();\r\n  }, [currentPage, fetchHyperedgesList]);\r\n\r\n  return (\r\n    <div className=\"w-full h-full flex flex-col overflow-hidden\">\r\n      {/* Header */}\r\n      <div className=\"flex-shrink-0 border-b border-border bg-muted/30 px-4 py-3\">\r\n        <h2 className=\"text-lg font-semibold\">所有超边 ({total})</h2>\r\n      </div>\r\n\r\n      {/* Grid of cards */}\r\n      <div className=\"flex-1 overflow-auto\">\r\n        <div className=\"p-4 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 auto-rows-max\">\r\n          {listLoading ? (\r\n            <div className=\"col-span-full text-center text-muted-foreground py-8\">加载中...</div>\r\n          ) : items.length === 0 ? (\r\n            <div className=\"col-span-full text-center text-muted-foreground py-8\">没有超边</div>\r\n          ) : (\r\n            items.map((he) => {\r\n              // Use internal id for selection (not displayed to user)\r\n              const heId = he.id;\r\n              const isHighlighted = he.highlighted === true;\r\n              return (\r\n                <ItemCard\r\n                  key={heId}\r\n                  id={heId}\r\n                  label={he.label || \"Unknown Hyperedge\"}\r\n                  type=\"hyperedge\"\r\n                  metadata={Object.fromEntries(\r\n                    Object.entries(he).filter(\r\n                      ([key]) => ![\"id\", \"label\", \"type\", \"highlighted\"].includes(key)\r\n                    )\r\n                  )}\r\n                  isSelected={selectedItems.has(heId)}\r\n                  isHighlighted={isHighlighted}\r\n                  onClick={() => {\r\n                    selectItem(heId, \"hyperedge\");\r\n                  }}\r\n                />\r\n              );\r\n            })\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Pagination */}\r\n      <div className=\"flex-shrink-0 border-t border-border bg-muted/30 px-4 py-3 flex items-center justify-between\">\r\n        <div className=\"text-sm text-muted-foreground\">\r\n          第 {currentPage + 1} 页 (共 {Math.ceil(total / 12)} 页)\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={() => setCurrentPage(Math.max(0, currentPage - 1))}\r\n            disabled={currentPage === 0}\r\n          >\r\n            <ChevronLeft className=\"w-4 h-4\" />\r\n          </Button>\r\n          <Button variant=\"outline\" size=\"sm\" onClick={() => setCurrentPage(currentPage + 1)} disabled={!hasNext}>\r\n            <ChevronRight className=\"w-4 h-4\" />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HyperedgeListView;\r\n"],"names":["HyperedgeListView","meta","fetchHyperedgesList","selectedItems","currentPage","setCurrentPage","selectItem","deselectItem","useVisualization","items","setItems","useState","total","setTotal","hasNext","setHasNext","listLoading","setListLoading","useEffect","result","error","jsxs","jsx","he","heId","isHighlighted","ItemCard","key","Button","ChevronLeft","ChevronRight"],"mappings":"gKAWA,MAAMA,EAAsD,CAAC,CAAE,KAAAC,KAAW,CACxE,KAAM,CAAE,oBAAAC,EAAqB,cAAAC,EAAe,YAAAC,EAAa,eAAAC,EAAgB,WAAAC,EAAY,aAAAC,CAAA,EAAiBC,EAAA,EAChG,CAACC,EAAOC,CAAQ,EAAIC,EAAAA,SAAgB,CAAA,CAAE,EACtC,CAACC,EAAOC,CAAQ,EAAIF,EAAAA,SAAS,CAAC,EAC9B,CAACG,EAASC,CAAU,EAAIJ,EAAAA,SAAS,EAAK,EACtC,CAACK,EAAaC,CAAc,EAAIN,EAAAA,SAAS,EAAI,EAEnDO,OAAAA,EAAAA,UAAU,IAAM,EACS,SAAY,CACjCD,EAAe,EAAI,EACnB,GAAI,CACF,MAAME,EAAS,MAAMjB,EAAoBE,EAAa,EAAE,EACxD,QAAQ,IAAI,mCAAoC,CAAE,KAAMA,EAAa,OAAAe,EAAQ,EAC7ET,EAASS,EAAO,OAAS,EAAE,EAC3BN,EAASM,EAAO,OAAS,CAAC,EAC1BJ,EAAWI,EAAO,UAAY,EAAK,CACrC,OAASC,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,CACnD,QAAA,CACEH,EAAe,EAAK,CACtB,CACF,GAEA,CACF,EAAG,CAACb,EAAaF,CAAmB,CAAC,EAGnCmB,EAAAA,KAAC,MAAA,CAAI,UAAU,8CAEb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,6DACb,SAAAD,EAAAA,KAAC,KAAA,CAAG,UAAU,wBAAwB,SAAA,CAAA,SAAOT,EAAM,GAAA,CAAA,CAAC,CAAA,CACtD,EAGAU,EAAAA,IAAC,MAAA,CAAI,UAAU,uBACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,yEACZ,SAAAN,EACCM,EAAAA,IAAC,MAAA,CAAI,UAAU,uDAAuD,SAAA,QAAA,CAAM,EAC1Eb,EAAM,SAAW,EACnBa,EAAAA,IAAC,MAAA,CAAI,UAAU,uDAAuD,SAAA,MAAA,CAAI,EAE1Eb,EAAM,IAAKc,GAAO,CAEhB,MAAMC,EAAOD,EAAG,GACVE,EAAgBF,EAAG,cAAgB,GACzC,OACED,EAAAA,IAACI,EAAA,CAEC,GAAIF,EACJ,MAAOD,EAAG,OAAS,oBACnB,KAAK,YACL,SAAU,OAAO,YACf,OAAO,QAAQA,CAAE,EAAE,OACjB,CAAC,CAACI,CAAG,IAAM,CAAC,CAAC,KAAM,QAAS,OAAQ,aAAa,EAAE,SAASA,CAAG,CAAA,CACjE,EAEF,WAAYxB,EAAc,IAAIqB,CAAI,EAClC,cAAAC,EACA,QAAS,IAAM,CACbnB,EAAWkB,EAAM,WAAW,CAC9B,CAAA,EAbKA,CAAA,CAgBX,CAAC,EAEL,EACF,EAGAH,EAAAA,KAAC,MAAA,CAAI,UAAU,+FACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,gCAAgC,SAAA,CAAA,KAC1CjB,EAAc,EAAE,SAAO,KAAK,KAAKQ,EAAQ,EAAE,EAAE,KAAA,EAClD,EACAS,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAACM,EAAA,CACC,QAAQ,UACR,KAAK,KACL,QAAS,IAAMvB,EAAe,KAAK,IAAI,EAAGD,EAAc,CAAC,CAAC,EAC1D,SAAUA,IAAgB,EAE1B,SAAAkB,EAAAA,IAACO,EAAA,CAAY,UAAU,SAAA,CAAU,CAAA,CAAA,QAElCD,EAAA,CAAO,QAAQ,UAAU,KAAK,KAAK,QAAS,IAAMvB,EAAeD,EAAc,CAAC,EAAG,SAAU,CAACU,EAC7F,eAACgB,EAAA,CAAa,UAAU,UAAU,CAAA,CACpC,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,CAEJ"}